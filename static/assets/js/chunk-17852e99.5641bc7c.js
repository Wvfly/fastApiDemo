(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-17852e99"],{"0ded":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-2e6b803c]{color:#1740dc}.success-color[data-v-2e6b803c]{color:#52c41a}.warning-color[data-v-2e6b803c]{color:#faad14}.error-color[data-v-2e6b803c]{color:#f5222d}.info-color[data-v-2e6b803c]{color:#909399}.border-color[data-v-2e6b803c]{border:1px solid #e5e6e9}.addOrEditRealTable[data-v-2e6b803c]{height:100%;background-color:#f0f2f5}.addOrEditRealTable .addOrEditRealTable-content[data-v-2e6b803c]{margin-bottom:10px;height:calc(100% - 96px);overflow-y:auto;padding:15px 20px;background:#fff}.addOrEditRealTable .file[data-v-2e6b803c]:hover{color:#1740dc;cursor:pointer}.addOrEditRealTable .operate .addNew[data-v-2e6b803c]{height:30px;padding:5px 10px;cursor:pointer;font-size:12px;text-align:center;color:#040c2c;margin-top:10px;border:1px dashed #cdced5}.addOrEditRealTable .operate .addNew[data-v-2e6b803c]:hover{color:#1740dc;border-color:#1740dc}.addOrEditRealTable .form-content[data-v-2e6b803c]{margin-bottom:20px}.addOrEditRealTable .bottom-operate[data-v-2e6b803c]{margin-top:40px;margin-bottom:20px;text-align:right}.addOrEditRealTable .zt-flag-title[data-v-2e6b803c]{margin-bottom:20px}.addOrEditRealTable .isCollapse.bottom[data-v-2e6b803c]{width:calc(100% - 64px)}.addOrEditRealTable .bottom[data-v-2e6b803c]{position:fixed;bottom:0;right:0;width:100%;background-color:#fff;text-align:right;height:48px;padding-right:20px;line-height:48px;width:calc(100% - 207px)}",""])},2325:function(e,t,a){var r=a("0ded");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("6a8e6384",r,!0,{sourceMap:!1,shadowMode:!1})},"51b8":function(e,t,a){"use strict";a.r(t);a("7f7f"),a("ac6a"),a("96cf");var r,i,l,o,n,s,c,u,d,p=a("1da1"),f=(a("c5f6"),a("3b2b"),a("693b")),m=a("b056"),g=a("d032"),h=a("86b9"),b=function(e,t,a){""!=t&&(!RegExp("^[_a-zA-Z0-9]{2,20}$").test(t)||t.length>25)?a(new Error("请输入2-20个字符，支持英文，数字和下划线")):a()},v={name:"addOrEditRealTable",data:function(){return{valStrVal:"",dialogVisible:!1,submitLoading:!1,file:{},options:[],pageLoading:!1,dataSourceList:[],queryList:[],options01:[],reload:!0,rules:{cateGoryIdsList:[{required:!0,message:"请选择资产类目",trigger:"change"}],tableType:[{required:!0,message:"请选择表类型",trigger:"change"}],resourceId:[{required:!0,message:"请选择数据源",trigger:"change"}],dbName:[{required:!0,message:"请选择数据库",trigger:"change"}],topicName:[{required:!0,message:"请选择topic名称",trigger:"change"}],tableName:[{required:!0,message:"请输入表名",trigger:"blur"},{validator:b,trigger:"blur"}],format:[{required:!0,message:"请选择格式",trigger:"change"}],delimitId:[{required:!0,message:"请选择分隔符",trigger:"change"}],roleId:[{required:!0,message:"请选择角色授权",trigger:"change"}],tableAlias:[{required:!0,message:"请填写表别名",trigger:"blur"}],tableDesc:[{required:!0,message:"请填写表描述",trigger:"blur"},{min:2,max:200,message:"请输入2-200个字符！",trigger:"blur"}],partitionNum:[{pattern:/^[1-9]\d{0,3}$/g,max:4,required:!0,message:"分区数不能为空，且为4位以内正整数",trigger:"blur"}],duplicateNum:[{pattern:/^[1-9]\d{0,3}$/g,max:4,required:!0,message:"副本数不能为空，且为4位以内正整数",trigger:"blur"}]},fileList:[],limitNum:2,themeList:[],categoryList:[],roleList:[],ruleForm:{roleId:"",categoryIds:null,subjectIds:null,tableType:2,fieldList:[],configList:[],cateGoryIdsList:[],topicName:"",partitionFlag:1,partitionNum:"",duplicateNum:""},topicList:[],optionsThree:[],optionsTwo:[]}},props:{tableId:Number|String,type:String},watch:{$route:{immediate:!0,deep:!0,handler:(d=Object(p.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reload=!1,this.pageLoading=!0,this.listDataTypes(),this.getlistFormat(),this.getlistDelimit(),this.getRuleDataSourceList(),this.getlistDbs(),e.next=9,this.bdpDataThemeList();case 9:this.bdpDataCategoryList(),this.getTopicList(""),this.getRoleList(),this.tableId?this.getDetail():this.ruleForm={roleId:"",categoryIds:null,subjectIds:null,topicName:"",tableType:2,fieldList:[],configList:[],partitionFlag:1,partitionNum:"",duplicateNum:""},this.$nextTick((function(){t.reload=!0,t.pageLoading=!1}));case 14:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})}},methods:{valStrFun:function(e){this.valStrVal=this.ruleForm.fieldList[e].fieldTypeValue,this.dialogVisible=!0,this.valStrIndex=e},valStrSure:function(){this.ruleForm.fieldList[this.valStrIndex].fieldTypeValue=this.valStrVal,this.dialogVisible=!1},remove:function(e){},getRoleList:(u=Object(p.a)(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)();case 2:t=e.sent,a=t.data.data,r=void 0===a?[]:a,this.roleList=r;case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)}),bdpDataThemeList:(c=Object(p.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)({type:"my",permissionType:17});case 2:t=e.sent,0==(a=t.data).code?a.data&&(this.themeList=a.data.list.children,this.themeList.map((function(e){"1"!=e.id&&"2"!=e.id||(e.disabled=!0)})),this.themeList=this.themeList.filter((function(e){return!(("1"==e.id||"2"==e.id)&&0==e.children.length)}))):this.$message.error(a.msg);case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),bdpDataCategoryList:function(){var e=this;this.$API.get(this.$URL.bdpDataCategoryList,{},(function(t){0==t.code?t.data&&(e.categoryList=t.data):e.$message.error(t.msg)}))},getlistDbs:function(){var e=this;this.options=[],this.$API.get(this.$URL.getTableInfoListDbs,{},(function(t){if(0==t.code)for(var a=0;a<t.data.length;a++)e.options.push({value:t.data[a],name:t.data[a]});else e.options=[]}))},changeTableType:function(e){this.ruleForm.topicName="",this.ruleForm.resourceId="",1==e&&this.getTopicList("")},changeSource:function(e){e?this.getTopicList(e):this.getTopicList("")},validateFieldValue:function(e,t,a){RegExp("^[一-龥_a-zA-Z0-9]{0,100}$").test(t)?a():a(new Error("只允许是数字，中英文或下划线 ，且小于100个字符"))},validateEtable1:function(e,t,a){""!=t?RegExp("^[-_a-zA-Z0-9]{0,50}$").test(t)?a():a(new Error("字段名只能包含字母,数字,下划线，且50字符以内")):a()},validateEtable:function(e,t,a){""!=t?RegExp("^[a-zA-Z]{0,100}$").test(t)?a():a(new Error("必须是英文，且100字符以内")):a()},getDetail:(s=Object(p.a)(regeneratorRuntime.mark((function e(){var t,a,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)(this.tableId);case 2:t=e.sent,a=t.data.data,r=a.config.configList,delete a.config,a.configList=r,this.ruleForm=a,"copy"===this.type&&(this.ruleForm.subjectIds=null,this.ruleForm.categoryIds=null),setTimeout((function(){i.ruleForm.cateGoryIdsList=i.$refs.cascader.getCheckedNodes().map((function(e){return e.value}))}),1e3),this.getTopicList1(this.ruleForm.resourceId);case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),save:(n=Object(p.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,l,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.form.validate();case 3:if(!(t=e.sent)){e.next=20;break}if(a=Object(g.a)(this.ruleForm),this.pageLoading=!0,a.config={configList:this.ruleForm.configList},delete a.configList,a.fieldList.forEach((function(e,t){e.fieldOrder=t+1})),"copy"==this.type&&delete a.id,"edit"==this.type&&delete a.roleId,!t){e.next=20;break}return e.next=15,Object(f.a)(a);case 15:r=e.sent,i=r.data,l=i.code,o=i.msg,l?this.$message.error(o):(this.$message.success("edit"===this.type?"编辑成功！":"copy"===this.type?"复制成功！":"新增成功！"),this.close());case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0);case 25:this.pageLoading=!1;case 26:case"end":return e.stop()}}),e,this,[[0,22]])}))),function(){return n.apply(this,arguments)}),getTopicList1:(o=Object(p.a)(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)({id:t});case 2:a=e.sent,r=a.data.data,this.topicList=r;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),getTopicList:(l=Object(p.a)(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)({id:t});case 2:a=e.sent,r=a.data.data,this.topicList=r;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)}),close:function(){this.$router.push("/dataWarehouseManager/realTimeTable")},listDataTypes:function(){var e=this;this.$API.get(this.$URL.getFieldTypes,{},(function(t){if(0==t.code){e.options01=[];for(var a=0;a<t.data.length;a++)e.options01.push({value:t.data[a],name:t.data[a]})}else e.$message.error(t.msg)}))},getlistFormat:function(){var e=this;this.$API.get(this.$URL.getTableInfoListDataFormats,{type:2},(function(t){if(0==t.code){e.optionsTwo=[];for(var a=0;a<t.data.length;a++)e.optionsTwo.push({value:t.data[a],name:t.data[a]})}else e.$message.error(t.msg)}))},getlistDelimit:function(){var e=this;this.$API.get(this.$URL.getTableInfoListDelimitFormats,{type:2},(function(t){0==t.code?(e.optionsThree=[],e.optionsThree=t.data):e.$message.error(t.msg)}))},addNew:function(){this.ruleForm.fieldList.push({fieldName:"",fieldType:"",fieldAlias:"",isPartition:0,fieldOrder:"",fieldTypeValue:""})},addQueryRow:function(){this.ruleForm.configList.push({fieldName:"",fieldType:"",fieldAlias:"",isPartition:0,fieldOrder:""})},deleteCur:function(e){this.ruleForm.fieldList.splice(e,1)},deleteQuery:function(e){this.ruleForm.configList.splice(e,1)},addNext:function(e){this.ruleForm.fieldList[e].fieldType,this.ruleForm.fieldList[e].isPartition;this.ruleForm.fieldList.splice(e+1,0,{fieldName:"",fieldValue:"",fieldOrder:""})},exceedFile:function(e,t){this.$notify.warning({title:"警告",message:"只能选择 ".concat(this.limitNum," 个文件，当前共选择了 ").concat(e.length+t.length," 个")})},fileChange:function(e,t){t.length>1&&t.splice(0,1),this.fileList=t,this.file=e.raw,this.uploadFile()},handleRemove:function(e,t){this.fileList=t},beforeUploadFile:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a=e.size/1024/1024;"csv"!==t&&this.$message({message:"只能上传csv的文件",type:"警告"}),a>10&&this.$message({message:"文件大小不得超过10M",type:"警告"})},handleSuccess:function(e,t,a){this.$message({message:"上传成功！",type:"success"})},handleError:function(e,t,a){this.$message.error("文件上传失败")},uploadFile:(i=Object(p.a)(regeneratorRuntime.mark((function e(){var t,a,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.fileList.length){e.next=3;break}return this.$message.error("请选择要上传的文件！"),e.abrupt("return",!1);case 3:return(t=new FormData).append("file",this.file),a=t,e.prev=6,e.next=9,Object(h.q)(a);case 9:r=e.sent,this.file="",this.$refs.uploadFile.clearFiles(),r.data.data&&r.data.data.forEach((function(e){e.fieldAlias=e.fieldDesc,i.ruleForm.fieldList.push(e)})),this.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){}}),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(6),this.file="",this.$refs.uploadFile.clearFiles();case 21:case"end":return e.stop()}}),e,this,[[6,16]])}))),function(){return i.apply(this,arguments)}),downloadFile:(r=Object(p.a)(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)();case 2:t=e.sent,a=new Blob([t.data],{type:"text/json;charset=utf-8"}),r=window.URL.createObjectURL(a),(i=document.createElement("a")).download="字段模板.csv",i.href=r,i.click();case 10:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),getRuleDataSourceList:function(){var e=this;this.$API.post(this.$URL.getConfConnectListAll,{typeId:6,limit:99999,list:!0,page:1},(function(t){0===t.code?t.page.list.forEach((function(t){e.dataSourceList.push({value:t.id,label:t.name})})):e.$message.error(t.msg)}))},fixCascader:function(){for(var e=document.querySelectorAll(".el-cascader__search-input"),t=0;t<e.length;t++)e[t].setAttribute("placeholder","")}},components:{},computed:{isCollapse:function(){return this.$store.state.old.isCollapse}},created:function(){},mounted:function(){},updated:function(){this.fixCascader()}},y=(a("8cfc"),a("2877")),x=Object(y.a)(v,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"addOrEditRealTable"},[t("div",{staticClass:"zt-head"},[e._v("\n    "+e._s(("edit"===e.type?"编辑":"copy"===e.type?"复制":"创建")+"实时表")+"\n  ")]),e.reload?t("div",{staticClass:"zt-scrollbar addOrEditRealTable-content",staticStyle:{overflow:"auto"}},["edit"==e.type?t("el-alert",{staticClass:"zt-alert",staticStyle:{"margin-bottom":"20px"},attrs:{title:"提示：编辑的实时表信息，若在实时任务中使用，需停止任务后重新配置后生效。",type:"info","show-icon":"","close-text":"知道了"}}):e._e(),t("el-form",{ref:"form",attrs:{"label-position":"left",rules:e.rules,model:e.ruleForm,"label-width":"120px"}},[t("div",{staticClass:"zt-flag-title"},[e._v("\n        基本信息\n      ")]),t("div",{staticClass:"form-content"},[t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{prop:"tableType",label:"表类型："}},[t("el-radio-group",{attrs:{disabled:"edit"===e.type},on:{change:e.changeTableType},model:{value:e.ruleForm.tableType,callback:function(t){e.$set(e.ruleForm,"tableType",t)},expression:"ruleForm.tableType"}},[t("el-radio",{attrs:{label:2}},[e._v("外部表")]),t("el-radio",{attrs:{label:1}},[e._v("内部表")])],1)],1)],1)],1),t("el-row",{staticClass:"base-info"},[t("el-col",{attrs:{span:9}},["2"==e.ruleForm.tableType?t("el-form-item",{attrs:{prop:"resourceId",label:"数据源："}},[t("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择数据源"},on:{change:e.changeSource},model:{value:e.ruleForm.resourceId,callback:function(t){e.$set(e.ruleForm,"resourceId",t)},expression:"ruleForm.resourceId"}},e._l(e.dataSourceList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1):e._e()],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{prop:"tableName",label:"表名："}},[t("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"2-20个字符，支持英文，数字，下划线"},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"数据库",prop:"dbName"}},[t("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择数据库"},model:{value:e.ruleForm.dbName,callback:function(t){e.$set(e.ruleForm,"dbName",t)},expression:"ruleForm.dbName"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{prop:"topicName",label:"topic："}},[1==e.ruleForm.tableType?t("el-select",{staticStyle:{width:"260px"},attrs:{dad:"",filterable:"","allow-create":"",placeholder:"请选择topic"},model:{value:e.ruleForm.topicName,callback:function(t){e.$set(e.ruleForm,"topicName",t)},expression:"ruleForm.topicName"}},e._l(e.topicList,(function(e,a){return t("el-option",{key:a,attrs:{value:e,label:e}})})),1):t("el-select",{staticStyle:{width:"260px"},attrs:{filterable:"",placeholder:"请选择topic"},model:{value:e.ruleForm.topicName,callback:function(t){e.$set(e.ruleForm,"topicName",t)},expression:"ruleForm.topicName"}},e._l(e.topicList,(function(e,a){return t("el-option",{key:a,attrs:{value:e,label:e}})})),1)],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{prop:"format",label:"格式："}},[t("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择格式"},model:{value:e.ruleForm.format,callback:function(t){e.$set(e.ruleForm,"format",t)},expression:"ruleForm.format"}},e._l(e.optionsTwo,(function(a,r){return t("el-option",{key:r,attrs:{value:a.value}},[e._v(e._s(a.name)+"\n                ")])})),1)],1)],1),"text"===e.ruleForm.format?t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{prop:"delimitId",label:"分隔符："}},[t("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择分隔符"},model:{value:e.ruleForm.delimitId,callback:function(t){e.$set(e.ruleForm,"delimitId",t)},expression:"ruleForm.delimitId"}},e._l(e.optionsThree,(function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.name}})})),1)],1)],1):e._e(),1!=e.ruleForm.tableType||"add"!==e.type&&"copy"!==e.type?e._e():t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"初始角色授权",prop:"roleId"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新建表需要初始角色默认授权，后期权限修改请前往权限管理中进行修改",placement:"top"}},[t("el-select",{staticStyle:{width:"260px"},attrs:{filterable:"",placeholder:"请选择初始角色授权"},model:{value:e.ruleForm.roleId,callback:function(t){e.$set(e.ruleForm,"roleId",t)},expression:"ruleForm.roleId"}},e._l(e.roleList,(function(e){return t("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1)],1)],1),t("el-col",{attrs:{span:18}},[t("el-form-item",{attrs:{prop:"tableDesc",label:"表描述："}},[t("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"请输入描述；2-200个字符。"},model:{value:e.ruleForm.tableDesc,callback:function(t){e.$set(e.ruleForm,"tableDesc",t)},expression:"ruleForm.tableDesc"}})],1)],1)],1)],1),t("div",{staticClass:"zt-flag-title"},[t("span",[e._v("物理模型设计")])]),t("div",{staticClass:"form-content"},[t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{staticClass:"topform",attrs:{label:"资产类目",prop:"cateGoryIdsList"}},[t("el-cascader",{ref:"cascader",staticStyle:{width:"260px !important"},attrs:{options:e.themeList,placeholder:"请选择",props:{emitPath:!1,checkStrictly:!0,value:"id",multiple:!0},"show-all-levels":!0,clearable:"",filterable:""},model:{value:e.ruleForm.cateGoryIdsList,callback:function(t){e.$set(e.ruleForm,"cateGoryIdsList",t)},expression:"ruleForm.cateGoryIdsList"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"分区类型"}},[t("el-radio-group",{attrs:{disabled:"edit"===e.type},model:{value:e.ruleForm.partitionFlag,callback:function(t){e.$set(e.ruleForm,"partitionFlag",t)},expression:"ruleForm.partitionFlag"}},[t("el-radio",{attrs:{label:1}},[e._v("分区表")]),t("el-radio",{attrs:{label:0}},[e._v("非分区表")])],1)],1)],1)],1),"1"==e.ruleForm.partitionFlag?t("el-row",[t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{prop:"1"==e.ruleForm.partitionFlag?"partitionNum":null,label:"分区数"}},[t("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入分区数"},model:{value:e.ruleForm.partitionNum,callback:function(t){e.$set(e.ruleForm,"partitionNum",e._n(t))},expression:"ruleForm.partitionNum"}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{prop:"1"==e.ruleForm.partitionFlag?"duplicateNum":null,label:"副本数"}},[t("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入副本数"},model:{value:e.ruleForm.duplicateNum,callback:function(t){e.$set(e.ruleForm,"duplicateNum",e._n(t))},expression:"ruleForm.duplicateNum"}})],1)],1)],1):e._e()],1),t("div",{staticClass:"zt-flag-title"},[e._v("\n        字段信息\n        "),t("ul",{staticClass:"addNew clearfix",staticStyle:{float:"right"}},[t("li",{staticClass:"fr"},[t("el-upload",{ref:"uploadFile",staticClass:"fl",staticStyle:{"margin-right":"10px"},attrs:{action:"null",limit:e.limitNum,"auto-upload":!1,accept:".csv","before-upload":e.beforeUploadFile,"on-change":e.fileChange,"on-remove":e.handleRemove,"on-exceed":e.exceedFile,"on-success":e.handleSuccess,"on-error":e.handleError,"file-list":e.fileList}},[t("div",{staticClass:"file",attrs:{size:"small",plain:""}},[t("i",{staticClass:"el-icon-upload2"}),e._v("上传字段")])]),t("div",{staticClass:"file fl",on:{click:function(t){return e.downloadFile()}}},[t("i",{staticClass:"el-icon-download"}),e._v("下载模板")])],1)])]),t("div",{staticClass:"form-content"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.fieldList}},[t("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{position:"relative",top:"-5px"}},[e._v("\n                "+e._s(a.$index+1)+"\n              ")])]}}],null,!1,4082131329)}),t("el-table-column",{attrs:{label:"字段名",width:"300"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"fieldList."+a.$index+".fieldName",rules:[{required:!0,message:"请输入字段名",trigger:"change"},{validator:e.validateEtable1,trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入字段名"},model:{value:a.row.fieldName,callback:function(t){e.$set(a.row,"fieldName",t)},expression:"scope.row.fieldName"}})],1)]}}],null,!1,3946417466)},[t("template",{slot:"header"},[t("span",[e._v("字段名\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"与topic中的key保持一致",placement:"top-start"}},[t("i",{staticClass:"icon-ic_remind icon",staticStyle:{"font-size":"14px"}})])],1)])],2),t("el-table-column",{attrs:{width:"300",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"fieldList."+a.$index+".fieldType",rules:[{required:!0,message:"请选择类型",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.row.fieldType,callback:function(t){e.$set(a.row,"fieldType",t)},expression:"scope.row.fieldType"}},e._l(e.options01,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1)]}}],null,!1,2384953049)}),t("el-table-column",{attrs:{label:"业务含义"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"fieldList."+a.$index+".fieldAlias",rules:[{required:!0,message:"业务含义不能为空",trigger:"change"},{min:2,max:1024,message:"请输入2-1024个字符！",trigger:"change"}]}},[t("el-input",{attrs:{placeholder:"请输入业务含义"},model:{value:a.row.fieldAlias,callback:function(t){e.$set(a.row,"fieldAlias",t)},expression:"scope.row.fieldAlias"}})],1)]}}],null,!1,751479807)}),t("el-table-column",{attrs:{label:"操作","header-align":"right",align:"right",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{position:"relative",top:"-5px"}},[t("el-button",{staticClass:"delete",attrs:{size:"mini",disabled:"row"!=a.row.fieldType,type:"text"},on:{click:function(t){return e.valStrFun(a.$index)}}},[e._v("值结构\n                ")]),t("el-button",{staticClass:"delete",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteCur(a.$index)}}},[e._v("删除\n                ")]),t("el-button",{staticClass:"primary",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.addNext(a.$index)}}},[e._v("插入\n                ")])],1)]}}],null,!1,548086599)})],1),t("div",{staticClass:"operate"},[t("div",{staticClass:"addNew clearfix",on:{click:function(t){return e.addNew()}}},[t("i",{staticClass:"el-icon-plus"}),e._v("添加新字段\n          ")])])],1),t("div",{staticClass:"zt-flag-title"},[e._v("\n        参数信息\n            "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"配置kafka的扩展参数，即with参数",placement:"top-start"}},[t("i",{staticClass:"icon-ic_remind icon",staticStyle:{"font-size":"14px"}})])],1),t("div",{staticClass:"form-content"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.configList}},[t("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{position:"relative",top:"-5px"}},[e._v("\n                "+e._s(a.$index+1)+"\n              ")])]}}],null,!1,4082131329)}),t("el-table-column",{attrs:{label:"参数名",width:"280"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"configList."+a.$index+".fieldName",rules:[{required:!0,message:"请填写参数名",trigger:"change"},{validator:e.validateEtable,trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入参数名"},model:{value:a.row.fieldName,callback:function(t){e.$set(a.row,"fieldName",t)},expression:"scope.row.fieldName"}})],1)]}}],null,!1,2201476167)}),t("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"configList."+a.$index+".fieldValue",rules:[{required:!0,message:"请填写参数值",trigger:"change"},{validator:e.validateFieldValue,trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入参数值"},model:{value:a.row.fieldValue,callback:function(t){e.$set(a.row,"fieldValue",t)},expression:"scope.row.fieldValue"}})],1)]}}],null,!1,3003983733)}),t("el-table-column",{attrs:{label:"操作",width:"100px","header-align":"right",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{position:"relative",top:"-5px"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteQuery(a.$index)}}},[e._v("删除\n                ")])],1)]}}],null,!1,2295516518)})],1),t("div",{staticClass:"operate"},[t("div",{staticClass:"addNew",on:{click:e.addQueryRow}},[t("i",{staticClass:"el-icon-plus"}),e._v("添加")])])],1)]),t("div",{staticClass:"bottom",class:{isCollapse:e.isCollapse}},[t("el-button",{on:{click:e.close}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.pageLoading},on:{click:e.save}},[e._v("确定")])],1)],1):e._e(),t("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"设置值结构",width:"650px",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("el-input",{attrs:{type:"textarea",rows:15,placeholder:"请输入值结构，例如：ROW<column1 STRING,column2 INT,column3 ROW(column4 STRING)>"},model:{value:e.valStrVal,callback:function(t){e.valStrVal=t},expression:"valStrVal"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.valStrSure}},[e._v("确定")]),t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)])],1)}),[],!1,null,"2e6b803c",null);t.default=x.exports},"693b":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return s}));var r=a("2b0e"),i=a("fedb"),l=function(e){return r.default.http.post(i.a.addAndEditRealTimeTable,e)},o=function(e){return r.default.http.get(i.a.getRealTimeDetail+"/"+e)},n=function(e){return r.default.http.post(i.a.getTopicInfoList,e)},s=function(e){return r.default.http.post(i.a.getNotInWarehouseSearch,e)}},"86b9":function(e,t,a){"use strict";a.d(t,"n",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"d",(function(){return p})),a.d(t,"h",(function(){return f})),a.d(t,"a",(function(){return m})),a.d(t,"f",(function(){return g})),a.d(t,"m",(function(){return h})),a.d(t,"b",(function(){return b})),a.d(t,"q",(function(){return v})),a.d(t,"p",(function(){return y})),a.d(t,"o",(function(){return x})),a.d(t,"i",(function(){return w})),a.d(t,"k",(function(){return F})),a.d(t,"j",(function(){return L})),a.d(t,"l",(function(){return k})),a.d(t,"c",(function(){return T}));a("8e6e"),a("ac6a"),a("456d");var r=a("ade3"),i=a("2b0e"),l=a("fedb"),o=a("ca00");function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e){return i.default.http.post(l.a.saveNodeData,e)},u=function(e){return i.default.http.get(l.a.getMetaDbListByConnect+"/".concat(e))},d=function(e){return i.default.http.get(l.a.getConfDbListByConnect+"/".concat(e))},p=function(e){return i.default.http.get(l.a.getConfConnectListAllKafka,{params:e})},f=function(e){return i.default.http.get(l.a.getNodeDetail,{params:e})},m=function(e){return i.default.http.post(l.a.deleteNodeConnect,e)},g=function(){return i.default.http.get(l.a.getFieldTypes)},h=function(e){return i.default.http.get(Object(o.e)(l.a.reviewSql,{id:e}))},b=function(){return i.default.http.get(l.a.downLoadFieldFile,{responseType:"arraybuffer"})},v=function(e){return i.default.http.post(l.a.uploadFieldFile,e)},y=function(e){return i.default.http.get(l.a.taskGetPartFields,{params:e})},x=function(e){return i.default.http.post(l.a.tableViewData,e)},w=function(e){return i.default.http.post(l.a.getProcInfoListDbs,s({},e))},F=function(e){return i.default.http.post(l.a.getRealTimeTableList,e)},L=function(e){var t=e.id;return i.default.http.get(l.a.getRealTimeDetail+"/".concat(t))},k=function(e){return i.default.http.post(l.a.getTableInfoListNew,e)},T=function(e){return i.default.http.get(l.a.getAllFields,{params:e})}},"8cfc":function(e,t,a){"use strict";a("2325")},b056:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c}));var r=a("fedb"),i=a("83fe"),l=function(e){return i.a.post(r.a.getLevelList,e)},o=function(){return i.a.get(r.a.getRoleSelectNew)},n=function(e){return i.a.post(r.a.sqlSearchLimitSave,e)},s=function(){return i.a.get(r.a.getExploreDownLoadLimit)},c=function(e){var t=e.id;return i.a.get(r.a.getConnExtInfo+"?id=".concat(t))}},d032:function(e,t,a){"use strict";var r=a("53ca");t.a=function e(t){var a=Array.isArray(t)?[]:{};for(var i in t)t.hasOwnProperty(i)&&("object"===Object(r.a)(t[i])&&null!==t[i]?a[i]=e(t[i]):a[i]=t[i]);return a}}}]);