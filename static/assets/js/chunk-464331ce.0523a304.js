(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-464331ce"],{"05b8":function(t,a,e){"use strict";e.r(a);e("7f7f"),e("ac6a"),e("456d");var i=e("313e"),s=e.n(i),n=(e("1c46"),{data:function(){return{id:this.$route.query.id,sucessrate01:"",sucessrate02:"",sucessrate03:"",sucessrate04:"",sucessrate05:"",linedata01:["0","0","0","0","0","0","0"],linedata02:[0,0,0,0,0,0,0],linedata03:[0,0,0,0,0,0,0],datawarehouse:[],taskWarn:[],shows:3,jobAlertsShow:!0,itemData:{}}},methods:{drawPie:function(t,a,e,i,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"60";this.charts=s.a.init(document.getElementById(t)),this.charts.setOption({title:{text:a,subtext:"",x:"left"},tooltip:{trigger:"item",textStyle:{fontSize:"12"},formatter:function(t){if(!(n&&Object.keys(n).length>0))return"".concat(t.seriesName," <br/>\n                ").concat(t.name," : ").concat(t.data.value," (").concat(t.percent,"%)");for(var a in n)if(a==t.name)return"".concat(t.seriesName," <br/>\n                    ").concat(t.name," : ").concat(t.data.value," (").concat(t.percent,"%)<br/>\n                    size：").concat(n[a].db_total_size,"<br/>\n                    最大表数据：").concat(n[a].max_table||"--"," : ").concat(n[a].max_table_size||"--")}},legend:{textStyle:{fontStyle:12},icon:"circle",orient:"vertical",itemGap:5,itemHeight:10,right:0,top:20,data:e},toolbox:{show:!0,feature:{mark:{show:!1},dataView:{show:!1,readOnly:!1},magicType:{show:!0,type:["pie","funnel"],option:{funnel:{x:"25%",width:"50%",funnelAlign:"center",max:1548}}}}},calculable:!0,series:[{name:"访问来源",type:"pie",radius:r+"%",center:[r-36+"%","52%"],data:i,itemStyle:{normal:{color:function(t){return["#5B8FF9","#5AD8A6","rgba(93,112,146,0.85)","#F9915B","#F95B8E","#CB5BF9","#745AD8","#F7C739","rgba(38,154,153,0.85)","#F59CC1","#FFE699"," #69C0FF","#D3ADF7","#BDEFDB","#CBD0DB"][t.dataIndex]}}},label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"20",fontWeight:"bold"}}},labelLine:{normal:{show:!1}}}]});var o=this.charts;window.addEventListener("resize",(function(){o.resize()}))},drawAnnular:function(t,a){this.charts=s.a.init(document.getElementById(t)),this.charts.setOption({tooltip:{textStyle:{fontSize:"12"},trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},color:["#5B8FF9","#D9D9D9"],series:[{name:"访问来源",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"24",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:a[0]}]});var e=this.charts;window.addEventListener("resize",(function(){e.resize()}))},drawBar:function(t,a,e){this.charts=s.a.init(document.getElementById(t)),this.charts.setOption({title:{text:"任务告警",subtext:""},tooltip:{textStyle:{fontSize:"12"},trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:a,axisLabel:{formatter:function(t){return t.length>5?t.substring(0,5)+"...":t}}},series:[{name:"",type:"bar",data:e}]});var i=this.charts;window.addEventListener("resize",(function(){i.resize()}))},drawLine:function(t,a,e,i){this.charts=s.a.init(document.getElementById(t)),this.charts.setOption({title:{text:""},tooltip:{textStyle:{fontSize:"12"},trigger:"axis"},legend:{icon:"line",data:["失败数","成功数"]},color:["#F9915B","#5B8FF9"],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{title:"保存为图片"}}},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{name:"失败数",type:"line",data:i},{name:"成功数",type:"line",data:e}]});var n=this.charts;window.addEventListener("resize",(function(){n.resize()}))},Show1Hour:function(){var t=this;this.shows=1;this.$API.get(this.$URL.getProcDashLast1Hour+this.id,{},(function(a){0===a.code?a.data.runTime.length&&(t.linedata01=a.data.runTime,t.linedata02=a.data.success,t.linedata03=a.data.fail,t.drawLine("line",t.linedata01,t.linedata02,t.linedata03)):t.$message.error(a.msg)}))},Show6Hour:function(){var t=this;this.shows=2;this.$API.get(this.$URL.getProcDashLast6Hour+this.id,{},(function(a){0===a.code?a.data.runTime.length&&(t.linedata01=a.data.runTime,t.linedata02=a.data.success,t.linedata03=a.data.fail,t.drawLine("line",t.linedata01,t.linedata02,t.linedata03)):t.$message.error(a.msg)}))},Show1Day:function(){var t=this;this.shows=3;this.$API.get(this.$URL.getProcDashLast1Day+this.id,{},(function(a){0===a.code&&a.data.runTime.length&&(t.linedata01=a.data.runTime,t.linedata02=a.data.success,t.linedata03=a.data.fail,t.drawLine("line",t.linedata01,t.linedata02,t.linedata03))}))},Show1Week:function(){var t=this;this.shows=4;this.$API.get(this.$URL.getProcDashLast1Week+this.id,{},(function(a){0===a.code?a.data.runTime.length&&(t.linedata01=a.data.runTime,t.linedata02=a.data.success,t.linedata03=a.data.fail,t.drawLine("line",t.linedata01,t.linedata02,t.linedata03)):t.$message.error(a.msg)}))},Show1Month:function(){var t=this;this.shows=5;this.$API.get(this.$URL.getProcDashLast1Month+this.id,{},(function(a){0===a.code?a.data.runTime.length&&(t.linedata01=a.data.runTime,t.linedata02=a.data.success,t.linedata03=a.data.fail,t.drawLine("line",t.linedata01,t.linedata02,t.linedata03)):t.$message.error(a.msg)}))},getItemInfo:function(){var t=this;this.$API.get(this.$URL.getCountDbRowsAndSize+"/"+this.id,{},(function(a){0==a.code?t.itemData=a.data:t.$message.error(a.msg)}))}},mounted:function(){this.$nextTick((function(){var t=this,a={};this.$API.get(this.$URL.getProcDashConnectTypes+this.id,a,(function(a){var e=[],i=[];if(0===a.code){for(var s in a.data)e.push({value:a.data[s],name:s}),i.push(s);t.drawPie("pie01","",i,e)}else t.$message.error(a.msg)})),this.$API.get(this.$URL.getProcDashTableTypes+this.id,a,(function(a){var e=[],i=[];if(0===a.code){for(var s in a.data)e.push({value:a.data[s],name:s}),i.push(s);t.drawPie("pie02","",i,e,t.itemData.itemlist,"80")}else t.$message.error(a.msg)})),this.$API.get(this.$URL.getProcDashJobAlerts+this.id,a,(function(a){var e=[],i=[];if(0===a.code)if("{}"!=JSON.stringify(a.data)){for(var s in a.data)e.push(a.data[s]),i.push(s);t.drawBar("bar",i,e)}else t.jobAlertsShow=!1;else t.$message.error(a.msg)})),this.$API.get(this.$URL.getProcDashJobMonitor+this.id,a,(function(a){var e=[],i=[],s=[],n=[],r=[];if(0===a.code){for(var o in a.data)"last1HourRate"==o?(e.push([{value:a.data[o].success,name:"成功率"},{value:a.data[o].fail,name:"失败率"}]),t.sucessrate01=a.data[o].rate):"last6HourRate"==o?(i.push([{value:a.data[o].success,name:"成功率"},{value:a.data[o].fail,name:"失败率"}]),t.sucessrate02=a.data[o].rate):"last1DayRate"==o?(s.push([{value:a.data[o].success,name:"成功率"},{value:a.data[o].fail,name:"失败率"}]),t.sucessrate03=a.data[o].rate):"last1WeekRate"==o?(n.push([{value:a.data[o].success,name:"成功率"},{value:a.data[o].fail,name:"失败率"}]),t.sucessrate04=a.data[o].rate):"last1MonthRate"==o&&(r.push([{value:a.data[o].success,name:"成功率"},{value:a.data[o].fail,name:"失败率"}]),t.sucessrate05=a.data[o].rate);t.drawAnnular("annular01",e),t.drawAnnular("annular02",i),t.drawAnnular("annular03",s),t.drawAnnular("annular04",n),t.drawAnnular("annular05",r)}else t.$message.error(a.msg)})),this.Show1Day()})),this.getItemInfo()}}),r=(e("e647"),e("2877")),o=Object(r.a)(n,(function(){var t=this,a=t._self._c;return a("div",{staticClass:"overview"},[a("ul",{staticClass:"hd clearfix"},[t._m(0),a("li",{staticClass:"two"},[a("div",{staticClass:"tit"},[a("span",{staticClass:"fl"},[t._v("数据仓库")]),a("div",{staticClass:"fr data_item"},[a("div",[t._v("数据量总占空间："+t._s(t.itemData.total_size))])])]),a("div",{attrs:{id:"pie02"}})]),a("li",{staticClass:"three"},[a("div",{staticClass:"tit"},[t._v("任务告警")]),t.jobAlertsShow?a("div",{attrs:{id:"bar"}}):a("div",{attrs:{id:"barnodata"}},[a("div",{staticClass:"text"},[t._v("暂无数据")])])])]),a("div",{staticClass:"main"},[a("div",{staticClass:"tit"},[t._v("任务监控")]),a("ul",{staticClass:"annulars clearfix"},[a("li",{class:{active:1==t.shows},on:{click:function(a){return t.Show1Hour()}}},[a("div",{staticClass:"fl txt"},[a("div",[t._v("最近1小时"),a("span",[t._v("成功率")]),a("span",{staticClass:"count"},[t._v(t._s(t.sucessrate01)+"%")])])]),a("div",{staticClass:"fr annular",attrs:{id:"annular01"}})]),a("li",{class:{active:2==t.shows},on:{click:function(a){return t.Show6Hour()}}},[a("div",{staticClass:"fl txt"},[a("div",[t._v("最近6小时"),a("span",[t._v("成功率")]),a("span",{staticClass:"count"},[t._v(t._s(t.sucessrate02)+"%")])])]),a("div",{staticClass:"fr annular",attrs:{id:"annular02"}})]),a("li",{class:{active:3==t.shows},on:{click:function(a){return t.Show1Day()}}},[a("div",{staticClass:"fl txt"},[a("div",[t._v("最近1天"),a("span",[t._v("成功率")]),a("span",{staticClass:"count"},[t._v(t._s(t.sucessrate03)+"%")])])]),a("div",{staticClass:"fr annular",attrs:{id:"annular03"}})]),a("li",{class:{active:4==t.shows},on:{click:function(a){return t.Show1Week()}}},[a("div",{staticClass:"fl txt"},[a("div",[t._v("最近1周"),a("span",[t._v("成功率")]),a("span",{staticClass:"count"},[t._v(t._s(t.sucessrate04)+"%")])])]),a("div",{staticClass:"fr annular",attrs:{id:"annular04"}})]),a("li",{class:{active:5==t.shows},on:{click:function(a){return t.Show1Month()}}},[a("div",{staticClass:"fl txt"},[a("div",[t._v("最近1周"),a("span",[t._v("成功率")]),a("span",{staticClass:"count"},[t._v(t._s(t.sucessrate05)+"%")])])]),a("div",{staticClass:"fr annular",attrs:{id:"annular05"}})])]),a("div",{staticClass:"tit"},[t._v("数据加工任务")]),a("div",{staticClass:"rework",attrs:{id:"line"}})])])}),[function(){var t=this._self._c;return t("li",{staticClass:"one"},[t("div",{staticClass:"tit"},[this._v("数据源")]),t("div",{attrs:{id:"pie01"}})])}],!1,null,null,null);a.default=o.exports},"4b91":function(t,a,e){(t.exports=e("2350")(!1)).push([t.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.overview{width:100%;background:#f0f2f5}.overview .hd{display:-webkit-box;display:-ms-flexbox;display:flex}.overview .hd li{-webkit-box-flex:1;-ms-flex:1;flex:1;height:296px;-webkit-box-shadow:0 2px 12px 0 rgba(0,0,0,.1);box-shadow:0 2px 12px 0 rgba(0,0,0,.1);margin-right:1%;padding:0 16px 0;margin-right:10px;background:#fff;border:1px solid #e5e6e9}.overview .hd li .data_item{float:right;font-size:12px;line-height:1.4;color:#000;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.overview .hd li .tit{height:56px;line-height:56px;font-size:16px;color:#040c2c;margin:0 -16px;padding:0 16px 0;border-bottom:1px solid #e5e6e9;margin-bottom:4px}.overview .hd li #bar,.overview .hd li #pie01,.overview .hd li #pie02{width:100%;height:216px}.overview .hd li #barnodata{width:100%;height:100%}.overview .hd li #barnodata .tit{font-size:18px;font-weight:700}.overview .hd li #barnodata .text{text-align:center;padding-top:100px;line-height:20px}.overview .hd li:last-child{margin-right:0}.overview .main{margin-top:10px}.overview .main .tit{padding-left:20px;font-size:16px;height:48px;line-height:48px;background:#fff;border:1px solid #e5e6e9}.overview .main .annulars,.overview .main .rework{background:#fff;border:1px solid #e5e6e9;border-top-width:0}.overview .main .annulars{margin-bottom:10px;width:100%}.overview .main .annulars li{float:left;width:20%;height:230px;border-right:1px solid #e5e6e9;cursor:pointer}.overview .main .annulars li.active{cursor:pointer}.overview .main .annulars li .txt{font-size:12px;padding:20px 0 0 20px;color:rgba(0,0,0,.5)}.overview .main .annulars li .txt .count{padding-left:5px;font-size:16px;font-weight:700;color:#000}.overview .main .annulars li .annular{width:100%;height:180px}.overview .main #line{width:100%;height:300px}",""])},"7e11":function(t,a,e){var i=e("4b91");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e("499e").default)("3038999a",i,!0,{sourceMap:!1,shadowMode:!1})},e647:function(t,a,e){"use strict";e("7e11")}}]);