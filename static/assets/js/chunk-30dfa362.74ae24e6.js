(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-30dfa362","chunk-74af32dc"],{"0a49":function(e,t,a){var i=a("9b43"),r=a("626a"),o=a("4bf8"),n=a("9def"),s=a("cd1c");e.exports=function(e,t){var a=1==e,l=2==e,c=3==e,d=4==e,u=6==e,f=5==e||u,p=t||s;return function(t,s,h){for(var m,g,b=o(t),v=r(b),x=i(s,h,3),y=n(v.length),L=0,I=a?p(t,y):l?p(t,0):void 0;y>L;L++)if((f||L in v)&&(g=x(m=v[L],L,b),e))if(a)I[L]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return L;case 2:I.push(m)}else if(d)return!1;return u?-1:c||d?d:I}}},"20d6":function(e,t,a){"use strict";var i=a("5ca1"),r=a("0a49")(6),o="findIndex",n=!0;o in[]&&Array(1)[o]((function(){n=!1})),i(i.P+i.F*n,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},"26d2":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,'.primary-color[data-v-6707a1aa]{color:#1740dc}.success-color[data-v-6707a1aa]{color:#52c41a}.warning-color[data-v-6707a1aa]{color:#faad14}.error-color[data-v-6707a1aa]{color:#f5222d}.info-color[data-v-6707a1aa]{color:#909399}.border-color[data-v-6707a1aa]{border:1px solid #e5e6e9}.datasource[data-v-6707a1aa]{background:#f0f2f5}.datasource .content-card[data-v-6707a1aa]{background:#fff;margin-bottom:10px;border-radius:4px}.datasource .content-card .fail[data-v-6707a1aa]:before{background:#f04134}.datasource .content-card .fail[data-v-6707a1aa]:before,.datasource .content-card .normal[data-v-6707a1aa]:before{content:"";display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:5px}.datasource .content-card .normal[data-v-6707a1aa]:before{background:#0e77d1}.datasource .content-card .first-title[data-v-6707a1aa]{text-align:left;font-size:16px;color:#040c2c}.datasource .content-card .header-content[data-v-6707a1aa]{width:100%;line-height:1.8;font-size:12px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.datasource .content-card .header-content .h-item[data-v-6707a1aa]{width:45%;padding-top:10px}.datasource .content-card .header-content .h-item .sub-title[data-v-6707a1aa]{font-weight:700}.datasource .box-card[data-v-6707a1aa]{-webkit-box-sizing:border-box;box-sizing:border-box;width:300px;height:200px;float:left;margin-right:20px;margin-bottom:20px}.datasource .box-card .relevance[data-v-6707a1aa]{text-align:center;line-height:200px;cursor:pointer}.datasource .box-card .hd[data-v-6707a1aa]{-webkit-box-sizing:border-box;box-sizing:border-box;height:150px;margin:-20px -20px;padding:20px 20px;cursor:pointer}.datasource .box-card .hd[data-v-6707a1aa]:hover{background:hsla(0,0%,80%,.2)}.datasource .box-card .hd[data-v-6707a1aa]:active{background:rgba(54,54,54,.3)}.datasource .box-card .hd .tit[data-v-6707a1aa]{font-size:16px;line-height:32px;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.datasource .box-card .hd .bd li[data-v-6707a1aa]:first-child{width:60px;height:60px}.datasource .box-card .hd .bd li[data-v-6707a1aa]:nth-child(2){width:180px;line-height:24px;color:#909399;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden}.datasource .box-card .footer[data-v-6707a1aa]{padding:10px}.datasource .box-card .footer li[data-v-6707a1aa]{line-height:30px;cursor:pointer}.datasource .box-card .footer li.mysql[data-v-6707a1aa]{float:left;padding-left:10px;padding-right:10px;text-align:center;background:#eee;border-radius:5px;color:#909399;margin-right:72px}.datasource .box-card .footer li.editlink[data-v-6707a1aa]{float:right;margin-right:10px;color:#409eff}.datasource .box-card .footer li.cancellink[data-v-6707a1aa]{float:right;color:red}.datasource .box-card .footer li.info[data-v-6707a1aa]{color:#909399}.link[data-v-6707a1aa]{display:block;color:#1740dc;cursor:pointer}',""])},"2aee8":function(e,t,a){var i=a("3915");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("0d49644c",i,!0,{sourceMap:!1,shadowMode:!1})},3915:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,'.primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.el-tag{max-width:240px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;position:relative;padding-right:20px!important}.el-tag .el-icon-close{position:absolute;top:4px;right:5px}.customWidth{width:1200px!important;max-width:1200px!important}.customWidth .related-data-source{display:grid;grid-template-columns:3fr 1fr;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px}.customWidth .related-data-source .data-source-list{border:1px solid #eee}.customWidth .related-data-source .data-source-list-header{font-size:16px;padding:10px 15px;border-bottom:1px solid #eee}.customWidth .related-data-source .data-source-list-content{padding:15px}.customWidth .related-data-source .selected-data-source{border:1px solid #eee}.customWidth .related-data-source .selected-data-source-header{font-size:16px;padding:10px 15px;border-bottom:1px solid #eee;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.customWidth .related-data-source .selected-data-source-content{padding:15px;overflow:auto}.customWidth .fail:before{background:#f04134}.customWidth .fail:before,.customWidth .normal:before{content:"";display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:5px}.customWidth .normal:before{background:#0e77d1}',""])},"3e4b":function(e,t,a){"use strict";a("2aee8")},4342:function(e,t,a){"use strict";a("7f7f"),a("3b2b");var i={data:function(){var e=this;return{valiFile:function(t,a,i){e.hasFile?i():i(new Error("请上传文件"))},dialogVisible:!1,progress:0,isShowProgress:!1,form:{resourceName:"",typeResource:1,fileExtension:1,resourceDesc:"",file:"",fileList:[]},fileTypeList:[{name:"jar",value:1},{name:"py",value:2},{name:"txt",value:3},{name:"sh",value:4},{name:"excel",value:5}],fileList:[],rules:{resourceName:[{required:!0,validator:function(e,t,a){""==t?a(new Error("请输入资源名称")):!RegExp("^[-_a-zA-Z0-9一-龥]*$").test(t)||""==t||t.length>20||t.length<2?a(new Error("仅支持中英文、数字、下划线、中划线组合,2-20位字符")):a()},trigger:"blur"}],fileList:[{required:!0,message:"请上传文件",trigger:"change"}],fileExtension:[{required:!0,message:"请选择文件类型",trigger:"change"}],typeResource:[{required:!0,message:"请选择资源类型",trigger:"change"}],resourceDesc:[{max:200,message:"长度在200个字符以内",trigger:"blur"}]}}},computed:{},mounted:function(){},methods:{exceedFile:function(e,t){this.$message({message:"只能选择1个文件，若要替换，请先删除已选文件",type:"warning"})},fileChange:function(e,t){var a=e.name.substring(e.name.lastIndexOf(".")+1),i=e.size/1024/1024;return this.form.fileExtension=a,-1==e.name.lastIndexOf(".")?(this.$message({message:"文件后缀名不能为空",type:"warning"}),void(this.form.fileList=[])):i>200?(this.$message({message:"文件大小不得超过200M",type:"warning"}),void(this.form.fileList=[])):(t.length>1&&t.splice(0,1),this.form.fileList=t,this.form.file=e.raw,void this.$refs.upload.clearValidate())},handleRemove:function(e,t){this.form.fileList=t},beforeUploadFile:function(e){},handleSuccess:function(e,t,a){this.$message({message:"上传成功！",type:"success"})},handleError:function(e,t,a){this.$message.error("文件上传失败")},init:function(e){this.dialogVisible=!0},closeDialog:function(){this.$refs.form.resetFields(),this.form.file="",this.form.fileList=[],this.dialogVisible=!1},submitForm:function(){var e=this;this.$refs.form.validate((function(t){if(t){var a=new FormData;a.append("file",e.form.file),a.append("resourceName",e.form.resourceName),a.append("typeResource",e.form.typeResource),a.append("resourceDesc",e.form.resourceDesc),a.append("procId",parseInt(e.$route.query.id)),a.append("fileExtension",e.form.fileExtension),e.isShowProgress=!0,e.progress=0,e.$API.file(e.$URL.saveRealtimeresource,a,(function(t){e.isShowProgress=!1,0==t.code?(e.$message({message:"保存成功！",type:"success"}),e.$emit("refreshDataList"),e.closeDialog()):e.$message.error(t.msg)}),(function(e){}),(function(t){var a=t.loaded/t.total*100|0;e.progress=a}))}}))}}},r=(a("f0e0"),a("2877")),o={data:function(){return{formInline:{resourceName:"",searchUserId:"",typeResource:""},dataList:[],typeList:[{name:"全部",id:""},{name:"实时资源",id:1},{name:"离线资源",id:2},{name:"公共资源",id:3}],dataListLoading:!1,pageOption:{size:10,page:1,total:0}}},props:["tableType","createUserList"],components:{createResource:Object(r.a)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"createResource"},[t("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"新建资源",width:"600px",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("保存")])],1)]},proxy:!0}])},[t("div",[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isShowProgress,expression:"isShowProgress"}],ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"资源名称",prop:"resourceName"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"仅支持中英文、数字、下划线、中划线组合,2-20位字符"},model:{value:e.form.resourceName,callback:function(t){e.$set(e.form,"resourceName",t)},expression:"form.resourceName "}})],1),t("el-form-item",{attrs:{label:"资源类型",prop:"typeResource"}},[t("el-radio-group",{model:{value:e.form.typeResource,callback:function(t){e.$set(e.form,"typeResource",t)},expression:"form.typeResource"}},[t("el-radio",{attrs:{label:1}},[e._v("实时资源")]),t("el-radio",{attrs:{label:2}},[e._v("离线资源")]),t("el-radio",{attrs:{label:3}},[e._v("公共资源")])],1)],1),t("el-form-item",{ref:"upload",attrs:{label:"上传文件",prop:"fileList"}},[t("el-upload",{ref:"uploadFile",attrs:{action:"null",limit:1,"auto-upload":!1,"on-change":e.fileChange,"on-remove":e.handleRemove,"on-exceed":e.exceedFile,"file-list":e.form.fileList}},[t("el-button",{attrs:{size:"small",plain:""}},[e._v("选择文件")])],1)],1),t("el-form-item",{attrs:{label:"描述",prop:"resourceDesc"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:e.form.resourceDesc,callback:function(t){e.$set(e.form,"resourceDesc",t)},expression:"form.resourceDesc"}})],1)],1),e.isShowProgress?t("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:e.progress}}):e._e()],1)])],1)}),[],!1,null,null,null).exports},methods:{refreshDataList:function(){this.getDataTableList(),this.$emit("resetCreateUserList")},reset:function(){this.formInline=this.$options.data().formInline,this.getDataTableList(1)},getDataTableList:function(e){var t=this;this.dataListLoading=!0;var a={resourceName:this.formInline.resourceName,searchUserId:this.formInline.searchUserId,table_type:this.tableType,typeResource:this.formInline.typeResource,procId:parseInt(this.$route.query.id),page:e||this.pageOption.page,limit:this.pageOption.size};this.$API.post(this.$URL.getRealtimeresource,a,(function(e){if(0==e.code){t.dataListLoading=!1,t.dataList=e.page.list;var a=e.page,i=a.currPage,r=a.pageSize,o=a.totalCount;t.pageOption={page:i,size:r,total:o};e.data.length}else t.dataList=[],t.dataListLoading=!1,t.totalPage=0}))},addResource:function(){var e=this;this.$nextTick((function(){e.$refs.createResource.init()}))},deleteResource:function(e){var t=this;this.$confirm("确定进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={resourceId:e};t.$API.post(t.$URL.deleteRealtimeresource,a,(function(e){0==e.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataTableList()}}):t.$message.error(e.msg)}))})).catch((function(){}))},realtimeresourceDownload:function(e){var t=document.createElement("a");t.style.display="none",t.href=this.$URL.realtimeresourceDownload+"?resourceId="+e,t.click()},handleSizeChange:function(e){this.pageOption.size=e,this.getDataTableList()},handleCurrentChange:function(e){this.pageOption.page=e,this.getDataTableList()}},mounted:function(){this.getDataTableList()}},n=(a("55bf"),Object(r.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"RealtimeResource"},[t("div",{staticClass:"fl"},[t("el-button",{attrs:{type:"primary"},on:{click:e.addResource}},[e._v("新建资源")])],1),t("el-form",{staticClass:"fr",attrs:{inline:!0,model:e.formInline,"label-position":"left"}},[t("el-form-item",[t("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.formInline.typeResource,callback:function(t){e.$set(e.formInline,"typeResource",t)},expression:"formInline.typeResource "}},e._l(e.typeList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),t("el-form-item",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择创建人"},model:{value:e.formInline.searchUserId,callback:function(t){e.$set(e.formInline,"searchUserId",t)},expression:"formInline.searchUserId"}},e._l(e.createUserList,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入资源名"},model:{value:e.formInline.resourceName,callback:function(t){e.$set(e.formInline,"resourceName","string"==typeof t?t.trim():t)},expression:"formInline.resourceName"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getDataTableList(1)}}},[e._v("查询")])],1),t("el-form-item",{staticStyle:{"margin-right":"0"}},[t("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1),t("div",{staticClass:"cards clearfix"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList}},[t("el-table-column",{attrs:{prop:"resourceId",label:"资源ID"}}),t("el-table-column",{attrs:{prop:"resourceName",label:"资源名称"}}),t("el-table-column",{attrs:{label:"资源类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.typeResource?"实时资源":2==t.row.typeResource?"离线资源":"公共资源")+"\n        ")]}}])}),t("el-table-column",{attrs:{prop:"resourceFilename2",label:"资源文件"}}),t("el-table-column",{attrs:{prop:"username",label:"创建人"}}),t("el-table-column",{attrs:{prop:"resourceDesc",label:"描述"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),t("el-table-column",{attrs:{label:"操作",align:"right","header-align":"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteResource(i.resourceId)}}},[e._v("删除")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.realtimeresourceDownload(i.resourceId)}}},[e._v("下载")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pageOption.page,"page-sizes":[10,50,100,200],"page-size":e.pageOption.size,layout:"total, sizes, prev, pager, next, jumper",total:e.pageOption.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("createResource",{ref:"createResource",on:{refreshDataList:function(t){return e.refreshDataList()}}})],1)}),[],!1,null,"bd05e6aa",null));t.a=n.exports},"55bf":function(e,t,a){"use strict";a("a221")},"6fc3":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-bd05e6aa]{color:#1740dc}.success-color[data-v-bd05e6aa]{color:#52c41a}.warning-color[data-v-bd05e6aa]{color:#faad14}.error-color[data-v-bd05e6aa]{color:#f5222d}.info-color[data-v-bd05e6aa]{color:#909399}.border-color[data-v-bd05e6aa]{border:1px solid #e5e6e9}",""])},7514:function(e,t,a){"use strict";var i=a("5ca1"),r=a("0a49")(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),i(i.P+i.F*o,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("find")},8223:function(e,t,a){var i=a("ba5f");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("05344a5c",i,!0,{sourceMap:!1,shadowMode:!1})},"8cd2":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.createResource .el-form-item__label{width:110px!important}.createResource .handle{width:100%;text-align:right}",""])},9277:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-13909476]{color:#1740dc}.success-color[data-v-13909476]{color:#52c41a}.warning-color[data-v-13909476]{color:#faad14}.error-color[data-v-13909476]{color:#f5222d}.info-color[data-v-13909476]{color:#909399}.border-color[data-v-13909476]{border:1px solid #e5e6e9}.datawarehouse[data-v-13909476]{background:#fff}.datawarehouse .right-btn[data-v-13909476]{margin-left:10px}.datawarehouse .box-card[data-v-13909476]{-webkit-box-sizing:border-box;box-sizing:border-box;width:300px;height:200px;float:left;margin-right:20px;margin-bottom:20px}.datawarehouse .box-card .relevance[data-v-13909476]{color:#1740dc;text-align:center;line-height:200px;cursor:pointer}.datawarehouse .box-card .hd[data-v-13909476]{-webkit-box-sizing:border-box;box-sizing:border-box;height:150px;margin:-20px -20px;padding:20px 20px;cursor:pointer}.datawarehouse .box-card .hd[data-v-13909476]:hover{background:hsla(0,0%,80%,.2)}.datawarehouse .box-card .hd[data-v-13909476]:active{background:rgba(54,54,54,.3)}.datawarehouse .box-card .hd .tit[data-v-13909476]{font-size:16px;line-height:32px;color:#333;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.datawarehouse .box-card .hd .bd li[data-v-13909476]:first-child{width:60px;height:60px}.datawarehouse .box-card .hd .bd li[data-v-13909476]:nth-child(2){width:180px;height:72px;line-height:24px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;white-space:normal;word-wrap:break-word;word-break:break-all;text-overflow:ellipsis}.datawarehouse .box-card .footer[data-v-13909476]{padding:10px}.datawarehouse .box-card .footer li[data-v-13909476]{line-height:30px;cursor:pointer}.datawarehouse .box-card .footer li.mysql[data-v-13909476]{float:left;padding-left:10px;padding-right:10px;text-align:center;background:#eee;border-radius:5px;color:#909399;margin-right:72px}.datawarehouse .box-card .footer li.editlink[data-v-13909476]{float:right;margin-right:10px;color:#409eff}.datawarehouse .box-card .footer li.cancellink[data-v-13909476]{float:right;color:red}.datawarehouse .box-card .footer li.info[data-v-13909476]{color:#909399}",""])},a1ab:function(e,t,a){"use strict";a("c4e6")},a221:function(e,t,a){var i=a("6fc3");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("da9e3d3a",i,!0,{sourceMap:!1,shadowMode:!1})},ba5f:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.customWidth{width:1200px!important}.customWidth /deep/ .el-tag{max-width:240px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;position:relative;padding-right:20px!important}.customWidth /deep/ .el-tag .el-icon-close{position:absolute;top:4px;right:5px}.customWidth .related-data-table{display:grid;grid-template-columns:3fr 1fr;-webkit-column-gap:15px;-moz-column-gap:15px;column-gap:15px}.customWidth .related-data-table .data-table-list{border:1px solid #eee}.customWidth .related-data-table .data-table-list-header{font-size:16px;padding:10px 15px;border-bottom:1px solid #eee}.customWidth .related-data-table .data-table-list-content{padding:15px}.customWidth .related-data-table .selected-data-table{border:1px solid #eee}.customWidth .related-data-table .selected-data-table-header{font-size:16px;padding:10px 15px;border-bottom:1px solid #eee;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.customWidth .related-data-table .selected-data-table-content{padding:15px;overflow:auto}",""])},c118:function(e,t,a){var i=a("26d2");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("7b5315fb",i,!0,{sourceMap:!1,shadowMode:!1})},c211:function(e,t,a){"use strict";a("c118")},c4e6:function(e,t,a){var i=a("9277");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("c051faf8",i,!0,{sourceMap:!1,shadowMode:!1})},cd1c:function(e,t,a){var i=a("e853");e.exports=function(e,t){return new(i(e))(t)}},d595:function(e,t,a){var i=a("8cd2");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("04e96871",i,!0,{sourceMap:!1,shadowMode:!1})},dad2:function(e,t,a){"use strict";a.r(t);a("7f7f"),a("386d"),a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("7514"),a("20d6");var i=a("bd91");function r(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw n}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var n={data:function(){return{isShowAddConnect:!1,dialogVisible:!1,pageIndex:1,pageSize:10,totalPage:0,dataListLoading:!1,formInline:{name:""},options:[],className:{1:"normal",2:"fail"},status:{1:"正常",2:"失败"},dataList:[],dataListSelections:[],choiceDataSource:[],rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}]}}},components:{ConnectAddOrEidt:i.a},methods:{handleClearSelected:function(){var e,t=this,a=r(this.choiceDataSource);try{var i=function(){var a=e.value;t.$nextTick((function(){t.handleTagClose(a)}))};for(a.s();!(e=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}},handleTagClose:function(e){this.choiceDataSource.splice(this.choiceDataSource.findIndex((function(t){return t.id===e.id})),1);var t=this.dataList.findIndex((function(t){return t.id===e.id}));-1!==t&&this.$refs.table.toggleRowSelection(this.dataList[t],!1)},mapChoiceDataStatusToTable:function(){var e,t=this,a=r(this.choiceDataSource);try{var i=function(){var a=e.value,i=t.dataList.findIndex((function(e){return e.id===a.id}));t.$refs.table.toggleRowSelection(t.dataList[i],-1!==i)};for(a.s();!(e=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}},handleSelectAll:function(e){var t=this;if(0===e.length){var a,i=r(this.dataList);try{var o=function(){var e=a.value;t.choiceDataSource.find((function(t){return t.id===e.id}))&&t.choiceDataSource.splice(t.choiceDataSource.findIndex((function(t){return t.id===e.id})),1)};for(i.s();!(a=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}}},handleSelect:function(e,t){e.find((function(e){return e.id===t.id}))||this.choiceDataSource.splice(this.choiceDataSource.findIndex((function(e){return e.id===t.id})),1)},getTypeList:function(){var e=this;this.$API.get(this.$URL.getConfConnectListTypes,{requstId:1},(function(t){if(0==t.code)for(var a in t.data)e.options.push(t.data[a]);else e.$message.error(t.msg)}))},getTypeName:function(e){for(var t in this.options)if(this.options[t].id==e)return this.options[t].name},search:function(){this.pageIndex=1,this.getDataSourceList()},reset:function(){this.formInline.name="",this.search()},getDataSourceList:function(e){var t=this;if("close"!=e){this.dataListLoading=!0;var a={proc_id:this.$route.query.id,name:this.formInline.name,page:this.pageIndex,limit:this.pageSize};this.$API.get(this.$URL.getConfConnectListNoRelation,a,(function(e){0==e.code?(t.dataListLoading=!1,t.dataList=e.page.list,t.totalPage=e.page.totalCount):(t.dataList=[],t.totalPage=0),t.$nextTick((function(){t.mapChoiceDataStatusToTable()}))}))}},selectionChangeHandle:function(e){var t=this;this.dataListSelections=e;var a,i=r(this.dataListSelections);try{var o=function(){var e=a.value;if(t.choiceDataSource.find((function(t){return t.id===e.id})))return"continue";t.choiceDataSource.push(e)};for(i.s();!(a=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}},connectAddOrEidt:function(e,t){var a=this;this.$nextTick((function(){a.$refs.connectAddOrEidt.init(e,t)}))},linkDataSourceHandle:function(){var e=this,t=this.choiceDataSource.map((function(e){return e.id}));this.$confirm("确定进行关联操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={procId:e.$route.query.id,connectId:t};e.$API.post(e.$URL.getConfConnectProcRelation,a,(function(t){0==t.code?(e.choiceDataSource=[],e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.getDataSourceList(),e.dialogVisible=!1,e.$emit("refreshDataList")}})):e.$message.error(t.msg)}))})).catch((function(){}))},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataSourceList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataSourceList()},init:function(){this.dialogVisible=!0,this.getTypeList(),this.getDataSourceList()}},mounted:function(){}},s=(a("3e4b"),a("2877")),l=Object(s.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"linkData"},[t("el-dialog",{attrs:{title:"关联数据源",visible:e.dialogVisible,customClass:"customWidth"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"related-data-source"},[t("div",{staticClass:"data-source-list"},[t("div",{staticClass:"data-source-list-header"},[e._v("\n          选择数据源\n        ")]),t("div",{staticClass:"data-source-list-content"},[t("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.rules}},[t("el-form-item",{staticClass:"fr",staticStyle:{"margin-right":"0"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1),t("el-form-item",{staticClass:"fr"},[t("el-input",{attrs:{placeholder:"请输入数据源名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":e.selectionChangeHandle,select:e.handleSelect,"select-all":e.handleSelectAll}},[t("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),t("el-table-column",{attrs:{prop:"id","header-align":"center",align:"center",width:"80",label:"Id"}}),t("el-table-column",{attrs:{prop:"name","header-align":"center",align:"center",width:"200",label:"数据源名称"}}),t("el-table-column",{attrs:{"header-align":"center",align:"center",width:"80",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.getTypeName(t.row.typeId))+"\n              ")]}}])}),t("el-table-column",{attrs:{prop:"connectStatus",label:"连接状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{class:e.className[a.row.connectStatus]},[e._v(e._s(e.status[a.row.connectStatus]||"--"))])]}}])},[t("template",{slot:"header"},[t("span",[e._v("连接状态")]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每天早上7点和下午4点检测数据源的连接状态",placement:"top"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"vertical-align":"middle"}})])],1)],2),t("el-table-column",{attrs:{prop:"info","header-align":"center",align:"center",label:"连接信息"}}),t("el-table-column",{attrs:{prop:"desc","header-align":"center",align:"center",label:"描述"}})],1),t("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)]),t("div",{staticClass:"selected-data-source"},[t("div",{staticClass:"selected-data-source-header"},[t("span",[e._v("已选数据源")]),t("el-button",{attrs:{type:"text"},on:{click:e.handleClearSelected}},[e._v("清空")])],1),t("div",{staticClass:"selected-data-source-content zt-scrollbar"},e._l(e.choiceDataSource,(function(a,i){return t("el-tag",{key:i,staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{closable:""},on:{close:function(t){return e.handleTagClose(a)}}},[e._v(e._s(a.name))])})),1)])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.linkDataSourceHandle()}}},[e._v("关联")])],1)]),t("ConnectAddOrEidt",{ref:"connectAddOrEidt",attrs:{isShow:e.isShowAddConnect},on:{listenToChildEvent:e.getDataSourceList}})],1)}),[],!1,null,null,null).exports,c=(a("c5f6"),a("9306f"));function d(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var f={props:{tableType:{type:Number,default:1}},data:function(){return{formInline:{name:"",db_name:"",tableType:1},pageIndex:1,pageSize:10,totalPage:0,dialogVisible:!1,dataListLoading:!1,options01:[{value:"",name:"全部数据库"}],dataList:[],dataListSelections:[],choiceDataSource:[],rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}]}}},components:{TableAddOrEdit:c.a},methods:{handleClearSelected:function(){var e,t=this,a=d(this.choiceDataSource);try{var i=function(){var a=e.value;t.$nextTick((function(){t.handleTagClose(a)}))};for(a.s();!(e=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}},handleTagClose:function(e){this.choiceDataSource.splice(this.choiceDataSource.findIndex((function(t){return t.id===e.id})),1);var t=this.dataList.findIndex((function(t){return t.id===e.id}));-1!==t&&this.$refs.table.toggleRowSelection(this.dataList[t],!1)},mapChoiceDataStatusToTable:function(){var e,t=this,a=d(this.choiceDataSource);try{var i=function(){var a=e.value,i=t.dataList.findIndex((function(e){return e.id===a.id}));t.$refs.table.toggleRowSelection(t.dataList[i],-1!==i)};for(a.s();!(e=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}},handleSelectAll:function(e){var t=this;if(0===e.length){var a,i=d(this.dataList);try{var r=function(){var e=a.value;t.choiceDataSource.find((function(t){return t.id===e.id}))&&t.choiceDataSource.splice(t.choiceDataSource.findIndex((function(t){return t.id===e.id})),1)};for(i.s();!(a=i.n()).done;)r()}catch(e){i.e(e)}finally{i.f()}}},handleSelect:function(e,t){e.find((function(e){return e.id===t.id}))||this.choiceDataSource.splice(this.choiceDataSource.findIndex((function(e){return e.id===t.id})),1)},getlistDbs:function(){var e=this,t={dateType:this.tableType};this.$API.post(this.$URL.getListDbShare,t,(function(t){if(0==t.code){e.options01=[{value:"",name:"全部数据库"}];for(var a=0;a<t.data.length;a++)e.options01.push({value:t.data[a],name:t.data[a]})}else e.$message.error(t.msg)}))},search:function(){this.pageIndex=1,this.getDataTableList()},reset:function(){this.formInline.name="",this.formInline.db_name="",this.search()},getDataTableList:function(){var e=this;this.dataListLoading=!0;var t={proc_id:this.$route.query.id,table_type:this.formInline.tableType,table_name:this.formInline.name,db_name:this.formInline.db_name,page:this.pageIndex,limit:this.pageSize};this.$API.get(this.$URL.getTableInfoListNoRelation,t,(function(t){0==t.code?(e.dataListLoading=!1,e.dataList=t.page.list,e.totalPage=t.page.totalCount):(e.$message.error(t.msg),e.dataList=[],e.totalPage=0),e.$nextTick((function(){e.mapChoiceDataStatusToTable()}))}))},selectionChangeHandle:function(e){var t=this;this.dataListSelections=e;var a,i=d(this.dataListSelections);try{var r=function(){var e=a.value;if(t.choiceDataSource.find((function(t){return t.id===e.id})))return"continue";t.choiceDataSource.push(e)};for(i.s();!(a=i.n()).done;)r()}catch(e){i.e(e)}finally{i.f()}},tableAddOrEditHandle:function(){var e=this;this.$nextTick((function(){e.$refs.tableAddOrEdit.init()}))},linkDataTableHandle:function(){var e=this,t=this.choiceDataSource.map((function(e){return e.id}));this.$confirm("确定进行关联操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={procId:e.$route.query.id,tableId:t,tableType:e.formInline.tableType};e.dataListLoading=!0,e.$API.post(e.$URL.getTableInfoProcRelation,a,(function(t){0==t.code?(e.choiceDataSource=[],e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.getDataTableList(),e.dialogVisible=!1,e.$emit("refreshDataList")}})):e.$message.error(t.msg),e.dataListLoading=!1}))})).catch((function(){}))},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataTableList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataTableList()},init:function(){this.formInline.tableType=this.tableType,this.dialogVisible=!0,this.getlistDbs(),this.getDataTableList()}}};a("db4a");function p(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var m={data:function(){return{loading:!1,formInline:{name:this.$store.state.dataWarehouseName?this.$store.state.dataWarehouseName:"",type:this.$store.state.dataWarehouseType?this.$store.state.dataWarehouseType:"",tableType:1,searchUserId:""},options:[{name:"全部",value:""}],dataList:[],pageOption:{size:10,page:1,total:0}}},props:["procInfo","tableType","createUserList"],components:{LinkDataHouse:Object(s.a)(f,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"linkData"},[t("el-dialog",{attrs:{title:1==e.tableType?"关联离线表":"关联实时表",visible:e.dialogVisible,customClass:"customWidth"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"related-data-table"},[t("div",{staticClass:"data-table-list"},[t("div",{staticClass:"data-table-list-header"},[e._v("\n            请选择表\n          ")]),t("div",{staticClass:"data-table-list-content"},[t("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.rules}},[t("div",{staticClass:"fr"},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入表名"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name","string"==typeof t?t.trim():t)},expression:"formInline.name"}})],1),t("el-form-item",{attrs:{prop:"output_db_name"}},[t("el-select",{attrs:{placeholder:"请选择数据仓库"},on:{change:function(t){return e.getDataTableList()}},model:{value:e.formInline.db_name,callback:function(t){e.$set(e.formInline,"db_name",t)},expression:"formInline.db_name"}},e._l(e.options01,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),t("el-form-item",{staticStyle:{"margin-right":"0"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":e.selectionChangeHandle,select:e.handleSelect,"select-all":e.handleSelectAll}},[t("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"tableName","header-align":"center",align:"center",width:"100",label:"表名"}}),t("el-table-column",{attrs:{prop:"storeType","header-align":"center",align:"center",width:"100",label:"表分类"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(1==a.row.storeType?"离线表":"实时表"))])]}}])}),t("el-table-column",{attrs:{prop:"dbName","header-align":"center",align:"center",width:"100",label:"数据库"}}),t("el-table-column",{attrs:{prop:1==e.formInline.tableType?"desc":"tableDesc","header-align":"center",align:"center",label:"描述"}})],1),t("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)]),t("div",{staticClass:"selected-data-table"},[t("div",{staticClass:"selected-data-table-header"},[t("span",[e._v("已选择表")]),t("el-button",{attrs:{type:"text"},on:{click:e.handleClearSelected}},[e._v("清空")])],1),t("div",{staticClass:"selected-data-table-content zt-scrollbar"},e._l(e.choiceDataSource,(function(a,i){return t("el-tag",{key:i,staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{closable:""},on:{close:function(t){return e.handleTagClose(a)}}},[e._v(e._s(a.tableName))])})),1)])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.dataListLoading},on:{click:function(t){return e.linkDataTableHandle()}}},[e._v("关联")])],1)]),t("TableAddOrEdit",{ref:"tableAddOrEdit",on:{refreshDataList:e.getDataTableList}})],1)}),[],!1,null,null,null).exports,TableAddOrEdit:c.a},methods:{refreshDataList:function(){this.getDataTableList(),this.$emit("resetCreateUserList")},reset:function(){this.formInline.name=this.formInline.tableType=this.formInline.type=this.formInline.searchUserId="",this.getDataTableList(1)},getlistDbs:function(){var e=this;this.$API.get(this.$URL.getTableInfoListDbs,{},(function(t){if(0==t.code){var a,i=p(t.data);try{for(i.s();!(a=i.n()).done;){var r=a.value;e.options.push({name:r,value:r})}}catch(e){i.e(e)}finally{i.f()}}else e.$message.error({message:t.msg})}))},getDataTableList:function(e){var t=this;this.loading=!0;var a={proc_id:this.$route.query.id,table_name:this.formInline.name,table_type:this.tableType,db_name:this.formInline.type,page:e||this.pageOption.page,limit:this.pageOption.size,searchUserId:this.formInline.searchUserId};this.$API.post(this.$URL.getTableInfoListNew,a,(function(e){if(0==e.code){t.loading=!1,t.dataList=e.page.list;var a=e.page,i=a.currPage,r=a.pageSize,o=a.totalCount;t.pageOption={page:i,size:r,total:o};var n=e.data.length;t.$store.commit("changDataWarehouseName",t.formInline.name),t.$store.commit("changDataWarehouseType",t.formInline.type),t.$store.commit("curTables",n)}else t.$message.error(e.msg),t.dataList=[],t.totalPage=0}))},toDataSecurity:function(e){this.$router.push("/dataSetSecretOption1?id="+e)},toDataSecurityrule:function(e){this.$router.push("/dataSensitiveOption1?id="+e)},tableDetail:function(e){var t=this;this.$API.get(this.$URL.getTableInfoCheackTable+"/"+e.id,{},(function(a){0==a.code?t.$router.push({path:1==t.tableType?"/offlineTableDetail":"/onlineTableDetail",query:{tableId:e.id,from:"list",tableType:1==t.tableType?1:2,offline:0}}):t.$message.error(a.msg)}))},linkDataHouseHandle:function(){var e=this;this.linkDataHouse=!0,this.$nextTick((function(){e.$refs.linkDataHouse.init()}))},tableAddOrEditHandle:function(e){var t=this;this.$nextTick((function(){t.$refs.tableAddOrEdit.init(e,1)}))},canceLlinkHandle:function(e){var t=this;this.$confirm("确定进行取消关联操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={procId:t.$route.query.id,tableId:e,tableType:t.formInline.tableType};t.$API.post(t.$URL.getTableInfoProcUnRelation,a,(function(e){0==e.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataTableList()}}):t.$message.error(e.msg)}))})).catch((function(){}))},handleSizeChange:function(e){this.pageOption.size=e,this.getDataTableList()},handleCurrentChange:function(e){this.pageOption.page=e,this.getDataTableList()}},mounted:function(){this.formInline.tableType=this.tableType,this.getDataTableList(),this.getlistDbs()}},g=(a("a1ab"),Object(s.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"datawarehouse"},[t("div",{staticStyle:{float:"left",position:"relative","z-index":"999"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.linkDataHouseHandle}},[e._v(e._s(1==e.tableType?"关联离线表":"关联实时表"))])],1),t("el-form",{staticClass:"demo-form-inline",staticStyle:{"text-align":"right",float:"right"},attrs:{inline:!0,model:e.formInline}},[t("el-form-item",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择创建人"},model:{value:e.formInline.searchUserId,callback:function(t){e.$set(e.formInline,"searchUserId",t)},expression:"formInline.searchUserId"}},e._l(e.createUserList,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入表名"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name","string"==typeof t?t.trim():t)},expression:"formInline.name"}})],1),t("el-form-item",{staticStyle:{"margin-right":"0"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getDataTableList(1)}}},[e._v("查询")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1),t("div",{staticClass:"cards clearfix"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList}},[t("el-table-column",{attrs:{prop:"tableName",label:"表名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.tableDetail(a.row)}}},[e._v(e._s(a.row.tableName))])]}}])}),t("el-table-column",{attrs:{prop:"storeType",label:"表分类"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(1==a.row.storeType?"离线表":"实时表"))])]}}])}),t("el-table-column",{attrs:{prop:"dbName",label:"数据库"}}),t("el-table-column",{attrs:{prop:"createPerName",label:"创建人"}}),t("el-table-column",{attrs:{label:"操作",align:"right",width:"280"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.canceLlinkHandle(i.id)}}},[e._v("取消关联")]),1==e.tableType?t("el-dropdown",{staticClass:"right-btn"},[t("span",{staticClass:"el-dropdown-link"},[e._v("\n              更多"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("el-button",{attrs:{type:"text",disabled:e.$store.state.old.admin_info.userId!=i.createPer&&0!=e.$store.state.old.admin_info.roleType},on:{click:function(t){return e.toDataSecurityrule(i.id)}}},[e._v("配置脱敏规则")])],1),t("el-dropdown-item",[t("el-button",{attrs:{type:"text",disabled:e.$store.state.old.admin_info.userId!=i.createPer&&0!=e.$store.state.old.admin_info.roleType},on:{click:function(t){return e.toDataSecurity(i.id)}}},[e._v("配置加密")])],1)],1)],1):e._e()]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pageOption.page,"page-sizes":[10,50,100,200],"page-size":e.pageOption.size,layout:"total, sizes, prev, pager, next, jumper",total:e.pageOption.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("LinkDataHouse",{ref:"linkDataHouse",attrs:{tableType:e.tableType},on:{refreshDataList:e.refreshDataList}}),t("TableAddOrEdit",{ref:"tableAddOrEdit",on:{refreshDataList:function(t){return e.getDataTableList()}}})],1)}),[],!1,null,"13909476",null).exports),b=a("4342"),v={data:function(){return{createUserList:[],createPerInfo:{},formInline:{name:this.$store.state.dataSourceName?this.$store.state.dataSourceName:"",type_id:this.$store.state.dataSourceType?this.$store.state.dataSourceType:"",searchUserId:""},options:[{id:"",name:"全部"}],dataList:[],loading:!1,totalPage:0,linkDataVisible:!1,projectInfo:{},appStateList:{1:"使用中",2:"未使用"},className:{1:"normal",2:"fail"},status:{1:"正常",2:"失败"},activeName:"0",pageFirst:{size:10,total:0,page:1}}},computed:{},components:{LinkData:l,ConnectAddOrEidt:i.a,DataWarehouse:g,RealtimeResource:b.a},methods:{refreshDataList:function(){this.getCreateUserList(),this.getDataSourceList()},getCreateUserList:function(){var e=this,t={type:this.activeName,proc_id:this.$route.query.id};this.$API.get(this.$URL.getCreateUserList,t,(function(t){0==t.code?e.createUserList=t.data:e.$message.error(t.msg)}))},getTypeList:function(){var e=this;this.$API.get(this.$URL.getConfConnectListTypes,{requstId:1},(function(t){if(0==t.code)for(var a=0;a<t.data.length;a++)e.options.push(t.data[a]);else e.$message.error(t.msg)}))},get_factoryDetail:function(){var e=this;this.$API.get(this.$URL.getProcInfoInfo+this.$route.query.id,{},(function(t){0==t.code?e.createPerInfo=t.data:e.$message.error({message:t.msg})}))},getDataSourceList:function(e){var t=this,a={proc_id:this.$route.query.id,name:this.formInline.name,type_id:this.formInline.type_id,page:e||this.pageFirst.page,limit:this.pageFirst.size,searchUserId:this.formInline.searchUserId,table_type:this.activeName};this.loading=!0,this.$API.post(this.$URL.getConfConnectList,a,(function(e){if(0==e.code){t.dataList=e.page.list;var a=e.page.list.length,i=e.page,r=i.currPage,o=i.pageSize,n=i.totalCount;t.pageFirst={page:r,size:o,total:n},t.$store.commit("old/changDataSourceName",t.formInline.name),t.$store.commit("old/changDataSourceType",t.formInline.type_id),t.$store.commit("old/curConnects",a)}else t.dataList=[],t.totalPage=0;t.$nextTick((function(){t.loading=!1}))}))},resetForm:function(e){this.$refs[e].resetField()},reset:function(){this.formInline.type_id=this.formInline.name=this.formInline.searchUserId="",this.getDataSourceList(1)},onSubmit:function(){},handleClick:function(e){this.getCreateUserList()},linkDataHandle:function(){var e=this;this.$nextTick((function(){e.$refs.linkData.init()}))},connectAddOrEidt:function(e,t){var a=this;this.$nextTick((function(){a.$refs.connectAddOrEidt.init(e,t)}))},canceLlinkHandle:function(e){var t=this;this.$confirm("确定进行取消关联操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={procId:t.$route.query.id,connectId:e};t.$API.post(t.$URL.getConfConnectProcUnRelation,a,(function(e){0==e.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataSourceList()}}):t.$message.error(e.msg)}))})).catch((function(){}))},handleSizeChange:function(e){this.pageFirst.size=e,this.getDataSourceList()},handleCurrentChange:function(e){this.pageFirst.page=e,this.getDataSourceList()}},mounted:function(){this.getTypeList(),this.getDataSourceList(),this.get_factoryDetail(),this.getCreateUserList()}},x=(a("c211"),Object(s.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"datasource"},[t("div",{staticClass:"content-card",staticStyle:{padding:"16px 20px"}},[t("p",{staticStyle:{float:"right"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$router.push({path:"dataProcessTask",query:{id:e.createPerInfo.id}})}}},[e._v("进入开发")])],1),t("h3",{staticClass:"first-title"},[e._v("项目配置")]),t("div",{staticClass:"header-content"},[t("div",{staticClass:"h-item"},[t("span",{staticClass:"sub-title"},[e._v("项目编号：")]),e._v(" "+e._s(e.createPerInfo.id)+"\n      ")]),t("div",{staticClass:"h-item"},[t("span",{staticClass:"sub-title"},[e._v("项目名称：")]),e._v(" "+e._s(e.createPerInfo.name)+"\n      ")]),t("div",{staticClass:"h-item"},[t("span",{staticClass:"sub-title"},[e._v("创建人：")]),e._v("\n        "+e._s(e.createPerInfo.createPerName)+"\n      ")]),t("div",{staticClass:"h-item"},[t("span",{staticClass:"sub-title"},[e._v("创建时间：")]),e._v("\n        "+e._s(e.createPerInfo.createTime)+"\n      ")]),t("div",{staticClass:"h-item"},[t("span",{staticClass:"sub-title"},[e._v("项目描述：")]),e._v(" "+e._s(e.createPerInfo.desc)+"\n      ")])])]),t("div",{staticClass:"content-card",staticStyle:{padding:"0px 20px"}},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"关联数据源",name:"0"}},[t("div",[t("div",{staticStyle:{float:"left",position:"relative","z-index":"999"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.linkDataHandle}},[e._v("关联数据源")])],1),t("el-form",{ref:"formInline",staticClass:"demo-form-inline",staticStyle:{"text-align":"right",float:"right"},attrs:{inline:!0,model:e.formInline}},[t("el-form-item",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择创建人"},model:{value:e.formInline.searchUserId,callback:function(t){e.$set(e.formInline,"searchUserId",t)},expression:"formInline.searchUserId"}},e._l(e.createUserList,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1)],1),t("el-form-item",[t("el-select",{attrs:{placeholder:"请选择数据源类型"},model:{value:e.formInline.type_id,callback:function(t){e.$set(e.formInline,"type_id",t)},expression:"formInline.type_id"}},e._l(e.options,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入数据源名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name","string"==typeof t?t.trim():t)},expression:"formInline.name"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getDataSourceList(1)}}},[e._v("查询")])],1),t("el-form-item",{staticStyle:{"margin-right":"0"}},[t("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1),t("div",{staticClass:"cards clearfix"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList}},[t("el-table-column",{attrs:{prop:"name",label:"数据源名称"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.connectAddOrEidt("show",a.row.id)}}},[e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{prop:"typeName",label:"数据源类型"}}),t("el-table-column",{attrs:{prop:"desc",label:"描述"}}),t("el-table-column",{attrs:{prop:"connectStatus",label:"连接状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{class:e.className[a.row.connectStatus]},[e._v(e._s(e.status[a.row.connectStatus]||"--"))])]}}])},[t("template",{slot:"header"},[t("span",[e._v("连接状态")]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每天早上7点和下午4点检测数据源的连接状态",placement:"top"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"vertical-align":"middle"}})])],1)],2),t("el-table-column",{attrs:{prop:"info",label:"连接信息"}}),t("el-table-column",{attrs:{prop:"createPerName",label:"创建人"}}),t("el-table-column",{attrs:{label:"操作",align:"right","header-align":"right"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.canceLlinkHandle(i.id)}}},[e._v("取消关联")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.connectAddOrEidt("edit",i.id)}}},[e._v("编辑")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pageFirst.page,"page-sizes":[10,50,100,200],"page-size":e.pageFirst.size,layout:"total, sizes, prev, pager, next, jumper",total:e.pageFirst.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("LinkData",{ref:"linkData",on:{refreshDataList:e.refreshDataList}}),t("ConnectAddOrEidt",{ref:"connectAddOrEidt",on:{refreshDataList:function(t){return e.getDataSourceList()}}})],1),t("el-tab-pane",{attrs:{label:"关联离线表",name:"1"}},[t("DataWarehouse",{key:"offline",attrs:{procInfo:e.createPerInfo,tableType:1,createUserList:e.createUserList},on:{resetCreateUserList:function(t){return e.getCreateUserList()}}})],1),t("el-tab-pane",{attrs:{label:"关联实时表",name:"2"}},[t("DataWarehouse",{key:"online",attrs:{procInfo:e.createPerInfo,tableType:2,createUserList:e.createUserList},on:{resetCreateUserList:function(t){return e.getCreateUserList()}}})],1),t("el-tab-pane",{attrs:{label:"资源管理",name:"3"}},[t("Realtime-resource",{attrs:{procInfo:e.createPerInfo,tableType:3,createUserList:e.createUserList},on:{resetCreateUserList:function(t){return e.getCreateUserList()}}})],1)],1)],1)])}),[],!1,null,"6707a1aa",null));t.default=x.exports},db4a:function(e,t,a){"use strict";a("8223")},e853:function(e,t,a){var i=a("d3f4"),r=a("1169"),o=a("2b4c")("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},f0e0:function(e,t,a){"use strict";a("d595")}}]);