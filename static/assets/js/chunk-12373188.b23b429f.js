(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-12373188"],{1890:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-a82beb68]{color:#1740dc}.success-color[data-v-a82beb68]{color:#52c41a}.warning-color[data-v-a82beb68]{color:#faad14}.error-color[data-v-a82beb68]{color:#f5222d}.info-color[data-v-a82beb68]{color:#909399}.border-color[data-v-a82beb68]{border:1px solid #e5e6e9}.data_element_quick_add[data-v-a82beb68]{padding:20px}.data_element_quick_add[data-v-a82beb68] .el-form-item:last-child{margin-right:0}.data_element_quick_add .top[data-v-a82beb68]{border-bottom:1px solid #e9e9e9;margin-bottom:10px}.data_element_quick_add .top .title[data-v-a82beb68]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.data_element_quick_add .top .title .tips[data-v-a82beb68]{font-size:12px;color:#999}",""])},5817:function(e,t,a){var i=a("1890");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("e4ffac4a",i,!0,{sourceMap:!1,shadowMode:!1})},"9a25":function(e,t,a){"use strict";a("5817")},a83e:function(e,t,a){"use strict";a.r(t);a("8e6e"),a("ac6a"),a("456d");var i=a("ade3");a("6b54");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}a("5df3"),a("96cf");var n=a("1da1"),o={data:function(){return{dialogVisible:!1,treeList:[],tabinfoIds:[],cascaderVal:[],cascKey:0}},methods:{bdpDataCategoryList:function(){var e=this;this.$API.get(this.$URL.bdpDataCategoryList,{},(function(t){0==t.code?t.data&&t.data.length>0&&(e.treeList=t.data):e.$message.error(t.msg)}))},sure:function(){var e=this;if(this.$refs.cascader.getCheckedNodes().length<1)this.$message.error("请选择至少一个类目");else{var t=this.$refs.cascader.getCheckedNodes().map((function(e){return String(e.data.id)})),a={tabinfoIds:this.tabinfoIds.tabinfoIds,categoryIds:t,tableType:this.tabinfoIds.tableType};this.$API.put(this.$URL.bdpDataCategorySaveList,a,(function(t){0==t.code?(e.$message.success("已成功将表添加至类目中"),e.$emit("clearSelection"),e.dialogVisible=!1,e.$emit("refresh")):e.$message.error(t.msg)}))}},diaclose:function(){this.cascaderVal=[],this.cascKey++}},mounted:function(){this.bdpDataCategoryList()}},s=a("2877");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p,b={components:{addPop:Object(s.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"data_map_data_element_popup"},[t("el-dialog",{attrs:{title:"批量添加/添加",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.diaclose}},[t("el-form",{attrs:{"label-width":"120px","label-position":"left"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"请选择类目"}},[t("el-cascader-panel",{key:e.cascKey,ref:"cascader",attrs:{options:e.treeList,filterable:"",props:{multiple:!0,checkStrictly:!0,value:"id",label:"categoryName"},clearable:""},model:{value:e.cascaderVal,callback:function(t){e.cascaderVal=t},expression:"cascaderVal"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.sure}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{tableHeight:window.innerHeight-360,formInline:{proName:"",createPer:"",dbName:""},page:{list:[],currPage:1,pageSize:10,totalCount:0},pageSs:{list:[],currPage:1,pageSize:10,totalCount:0},isLoading:!1,isLoadingSs:!1,createPerList:[],proList:[],dbList:[],addAbled:!0,selectionList:[],selectionListSs:[],activeName:"1"}},methods:{bdpDataCategoryTableCreateName:function(){var e=this;this.$API.get(this.$URL.bdpDataCategoryTableCreateName,{page:1,limit:1e4,tableType:this.activeName},(function(t){0==t.code?t.data&&t.data.length>0&&(e.createPerList=t.data):e.$message.error(t.msg)}))},bdpDataCategoryProcInfoName:function(){var e=this;this.$API.get(this.$URL.bdpDataCategoryProcInfoName,{page:1,limit:1e4,tableType:this.activeName},(function(t){0==t.code?t.data&&t.data.length>0&&(e.proList=t.data):e.$message.error(t.msg)}))},bdpDataCategoryGetTable:function(){var e=this;this.isLoading=!0;var t=this.page,a=d({page:t.currPage,limit:t.pageSize},this.formInline);this.$API.get(this.$URL.bdpDataCategoryGetTable,a,(function(t){e.isLoading=!1,0==t.code?e.page=t.data:e.$message.error(t.msg)}))},bdpDataCategoryGetRealTable:function(){var e=this;this.isLoadingSs=!0;var t=this.pageSs,a=d({current:t.currPage,size:t.pageSize},this.formInline);this.$API.post(this.$URL.bdpDataCategoryGetRealTable,a,(function(t){e.isLoadingSs=!1,0===t.code?e.pageSs={list:t.page.records,currPage:t.page.current,pageSize:t.page.size,totalCount:t.page.total}:e.$message.error(t.msg)}))},getlistDbs:function(){var e=this;this.$API.get(this.$URL.getTableInfoListDbs,{},(function(t){0==t.code?t.data&&t.data.length>0?e.dbList=t.data:e.dbList=[]:(e.$message.error(t.msg),e.dbList=[])}))},batchAdd:function(){var e;"1"===this.activeName?e=this.selectionList.map((function(e){return String(e.id)})):"2"===this.activeName&&(e=this.selectionListSs.map((function(e){return String(e.id)}))),this.toAdd({tabinfoIds:e,tableType:this.activeName})},add:function(e){var t=[String(e.id)];this.toAdd({tabinfoIds:t,tableType:e.tableType})},toAdd:function(e){this.$refs.addPop.dialogVisible=!0,this.$refs.addPop.tabinfoIds=e},sizeChangeHandle:function(e){this.page.pageSize=e,this.bdpDataCategoryGetTable()},sizeChangeHandleSs:function(e){this.pageSs.pageSize=e,this.bdpDataCategoryGetRealTable()},currentChangeHandle:function(e){this.page.currPage=e,this.bdpDataCategoryGetTable()},currentChangeHandleSs:function(e){this.pageSs.currPage=e,this.bdpDataCategoryGetRealTable()},change:function(){this.page.currPage=1,"1"===this.activeName?this.bdpDataCategoryGetTable():"2"===this.activeName&&this.bdpDataCategoryGetRealTable()},refresh:function(){"1"===this.activeName?this.bdpDataCategoryGetTable():"2"===this.activeName&&this.bdpDataCategoryGetRealTable()},selectionChange:function(e){this.selectionList=e,this.selectionList&&this.selectionList.length>0&&"1"===this.activeName?this.addAbled=!1:this.addAbled=!0},selectionChangeSs:function(e){this.selectionListSs=e,this.selectionListSs&&this.selectionListSs.length>0&&"2"===this.activeName?this.addAbled=!1:this.addAbled=!0},handleTabClick:(p=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.bdpDataCategoryProcInfoName(),this.bdpDataCategoryTableCreateName()]);case 2:this.formInline.proName="",this.formInline.createPer="",this.formInline.dbName="","1"===this.activeName?this.bdpDataCategoryGetTable():"2"===this.activeName&&this.bdpDataCategoryGetRealTable(),this.selectionList.length>0&&"1"===this.activeName||this.selectionListSs.length>0&&"2"===this.activeName?this.addAbled=!1:this.addAbled=!0;case 7:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},mounted:function(){this.getlistDbs(),this.bdpDataCategoryTableCreateName(),this.bdpDataCategoryProcInfoName(),this.bdpDataCategoryGetTable(),this.bdpDataCategoryGetRealTable()}},g=(a("9a25"),Object(s.a)(b,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"data_element_quick_add"},[t("div",{staticClass:"top"},[t("div",{staticClass:"title"},[t("div",{staticClass:"tips"},[e._v("快速将表添加到数据类目中，以便观测表的数据分布情况")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$router.push("dataElement")}}},[e._v("返回数据类目")])],1)]),t("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-form",{staticClass:"fr",attrs:{inline:!0,model:e.formInline,size:"small"}},[t("el-form-item",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择项目"},on:{change:e.change},model:{value:e.formInline.proName,callback:function(t){e.$set(e.formInline,"proName",t)},expression:"formInline.proName"}},e._l(e.proList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择表的创建人"},on:{change:e.change},model:{value:e.formInline.createPer,callback:function(t){e.$set(e.formInline,"createPer",t)},expression:"formInline.createPer"}},e._l(e.createPerList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",[t("el-select",{attrs:{clearable:"",placeholder:"请选择数据库"},on:{change:e.change},model:{value:e.formInline.dbName,callback:function(t){e.$set(e.formInline,"dbName",t)},expression:"formInline.dbName"}},e._l(e.dbList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",disabled:e.addAbled},on:{click:e.batchAdd}},[e._v("批量添加")])],1)],1),t("el-tab-pane",{attrs:{label:"离线表",name:"1"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"table",staticStyle:{width:"100%"},attrs:{"max-height":e.tableHeight,data:e.page.list},on:{"selection-change":e.selectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"tableName",align:"center",label:"英文表名"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"tableAlias","header-align":"center",align:"center",label:"中文表名"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"dbName","header-align":"center",align:"center",label:"所属库"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"desc","header-align":"center",align:"center",label:"描述"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"left",align:"left",label:"所属项目"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("span",[e._v(e._s(i.proName&&i.proName.toString()))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userName","header-align":"center",align:"center",label:"创建人"}}),t("el-table-column",{attrs:{prop:"createTime","header-align":"center",align:"center",width:"180",label:"创建时间"}}),t("el-table-column",{attrs:{"header-align":"right",align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.add(l(l({},i),{},{tableType:1}))}}},[e._v("添加")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page.currPage,"page-sizes":[10,20,50,100],"page-size":e.page.pageSize,total:e.page.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1),t("el-tab-pane",{attrs:{label:"实时表",name:"2"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoadingSs,expression:"isLoadingSs"}],ref:"tableSs",staticStyle:{width:"100%"},attrs:{"max-height":e.tableHeight,data:e.pageSs.list},on:{"selection-change":e.selectionChangeSs}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"tableName",align:"center",label:"英文表名"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"dbName","header-align":"center",align:"center",label:"所属库"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"desc","header-align":"center",align:"center",label:"描述"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",align:"center",label:"所属项目"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("span",[e._v(e._s(i.proName&&i.proName.join(", ")))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"createName","header-align":"center",align:"center",label:"创建人"}}),t("el-table-column",{attrs:{prop:"createTime","header-align":"center",align:"center",width:"180",label:"创建时间"}}),t("el-table-column",{attrs:{"header-align":"right",align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.add(l(l({},i),{},{tableType:2}))}}},[e._v("添加")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pageSs.currPage,"page-sizes":[10,20,50,100],"page-size":e.pageSs.pageSize,total:e.pageSs.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandleSs,"current-change":e.currentChangeHandleSs}})],1)],1),t("add-pop",{ref:"addPop",on:{clearSelection:function(t){return e.$refs.table.clearSelection()},refresh:e.refresh}})],1)}),[],!1,null,"a82beb68",null));t.default=g.exports}}]);