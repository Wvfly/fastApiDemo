(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4b2c2a5f"],{"411b":function(t,e,o){"use strict";o("72ad")},"72ad":function(t,e,o){var a=o("7446");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,o("499e").default)("049fa171",a,!0,{sourceMap:!1,shadowMode:!1})},7446:function(t,e,o){(t.exports=o("2350")(!1)).push([t.i,".primary-color[data-v-05120561]{color:#1740dc}.success-color[data-v-05120561]{color:#52c41a}.warning-color[data-v-05120561]{color:#faad14}.error-color[data-v-05120561]{color:#f5222d}.info-color[data-v-05120561]{color:#909399}.border-color[data-v-05120561]{border:1px solid #e5e6e9}.status-dot[data-v-05120561]{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:5px}.templateDetail[data-v-05120561],.templateDetail .content[data-v-05120561]{background-color:#f7f7f8}.templateDetail .content .top-detail[data-v-05120561]{padding:20px;background:#fff;border:1px solid #e5e6e9}.templateDetail .content .top-detail .sub-title[data-v-05120561]{line-height:28px;font-weight:500;color:#040c2c;font-size:18px;margin-bottom:10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.templateDetail .content .top-detail .detail[data-v-05120561]{line-height:24px;font-size:12px;display:-webkit-box;display:-ms-flexbox;display:flex}.templateDetail .content .top-detail .detail .item[data-v-05120561]{width:250px}.templateDetail .content .bottom[data-v-05120561]{background:#fff;margin-top:10px;padding:0 20px;padding-top:15px;height:100%}[data-v-05120561] .el-drawer__header{padding:12px 20px;color:#040c2c;font-size:16px;margin-bottom:0;border-bottom:1px solid #e5e6e9;font-weight:600}",""])},"93dc":function(t,e,o){"use strict";o.r(e);o("a481"),o("386d"),o("8e6e"),o("ac6a"),o("456d");var a=o("ade3"),r=(o("96cf"),o("1da1")),s=o("8e5b"),n=o("c858"),i=o("c310");function l(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?l(Object(o),!0).forEach((function(e){Object(a.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var d,c,p,f,m={components:{LogDialog:n.a,OriginCompareLog:i.a},data:function(){return{page:1,pageSize:10,totalCount:0,form:{runMode:"",runResult:"",start_end_time:[]},execStyleList:[],execResultList:[],dataList:[{execTime:"2022-03-12 12:12:12",execStyle:"手动执行",runTime:1200,execResult:"正常",checkRuleNum:"3/5/8",checkInormal:"0/0",notifyStatus:"成功",operatorPer:"ting.ao"}],dataListLoading:!1,monitorHistoryId:"",rowData:JSON.parse(this.$route.query.rowData),logRow:{},monitorNodeInfo:{},runLogVisible:!1}},computed:{},watch:{},mounted:function(){this.getList(),this.getexecStyleList(),this.getExecResultList(),this.getMonitorInfo()},methods:{goToMonitor:function(){this.$router.push("/dataQualityNew/qualityTaskMonitor")},getList:(f=Object(r.a)(regeneratorRuntime.mark((function t(){var e,o,a,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dataListLoading=!1,this.getMonitorInfo(),delete(a=u(u({},this.form),{},{page:this.page,pageSize:this.pageSize,startTime:(null===(e=this.form.start_end_time)||void 0===e?void 0:e[0])||"",endTime:(null===(o=this.form.start_end_time)||void 0===o?void 0:o[1])||"",monitorId:this.rowData.id})).start_end_time,1!=this.rowData.isCross){t.next=12;break}return t.next=7,Object(s.s)(a);case 7:r=t.sent,this.dataList=r.data.data.records,this.totalCount=r.data.data.total,t.next=17;break;case 12:return t.next=14,Object(s.o)(a);case 14:n=t.sent,this.dataList=n.data.data.records,this.totalCount=n.data.data.total;case 17:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)}),getMonitorInfo:(p=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e={},1!=this.rowData.isCross){t.next=7;break}return t.next=4,Object(s.l)({monitorId:this.rowData.id,type:this.$route.query.type||null,monitorHistoryId:this.monitorHistoryId});case 4:e=t.sent,t.next=10;break;case 7:return t.next=9,Object(s.l)({monitorId:this.rowData.id,type:this.$route.query.type||null,monitorHistoryId:this.rowData.monitorHistoryId});case 9:e=t.sent;case 10:this.monitorNodeInfo=e.data.data;case 11:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)}),getexecStyleList:(c=Object(r.a)(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.q)();case 2:for(o in(e=t.sent).data.data)this.execStyleList.push({label:e.data.data[o],value:o});this.execStyleList.length=2;case 5:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)}),getExecResultList:(d=Object(r.a)(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.r)();case 2:for(o in(e=t.sent).data.data)this.execResultList.push({label:e.data.data[o],value:o});this.execResultList.length=4;case 5:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)}),gotoLog:function(t){this.logRow=t,this.monitorHistoryId=t.monitorHistoryId||t.id,1==this.rowData.isCross?this.runLogVisible=!0:this.$refs.logDialog.openDialog(t)},search:function(){this.page=1,this.getList()},reset:function(){this.form.start_end_time=["",""],this.$refs.form.resetFields(),this.search()},sizeChangeHandle:function(t){this.pageSize=t,this.page=1,this.getList()},currentChangeHandle:function(t){this.page=t,this.getList()}}},g=(o("411b"),o("2877")),h=Object(g.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"templateDetail"},[e("div",{staticClass:"content"},[e("div",{staticClass:"top-detail"},[e("div",{staticClass:"sub-title"},[e("span",{staticClass:"text"},[t._v(t._s(1==t.rowData.isCross?t.monitorNodeInfo.taskName:t.monitorNodeInfo.tableName)+"的历史详情")]),e("el-button",{attrs:{type:"text"},on:{click:t.goToMonitor}},[t._v("返回任务监控")])],1),e("div",{staticClass:"detail"},[e("div",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("最近运行时间：")]),e("span",{staticClass:"value"},[t._v(t._s(t.monitorNodeInfo.lastRunTime))])]),e("div",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("执行方式：")]),e("span",{staticClass:"value"},[t._v(t._s(1==t.monitorNodeInfo.runType?"调度":2==t.monitorNodeInfo.runType?"手动":3==t.monitorNodeInfo.runType?"任务节点":""))])]),3==t.monitorNodeInfo.runType?e("div",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("任务节点名称：")]),e("span",{staticClass:"value"},[t._v(t._s(t.monitorNodeInfo.nodeName))])]):t._e()]),e("div",{staticClass:"detail"},[e("div",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("运行耗时(s)：")]),e("span",{staticClass:"value"},[t._v(t._s(t.monitorNodeInfo.lastRunTimeConsuming))])]),e("div",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("责任人：")]),e("span",{staticClass:"value"},[t._v(t._s(t.monitorNodeInfo.liable))])]),3==t.monitorNodeInfo.runType?e("div",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("所属项目：")]),e("span",{staticClass:"value"},[t._v(t._s(t.monitorNodeInfo.procName))])]):t._e()]),e("div",{staticClass:"detail"},[e("div",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("运行结果：")]),e("span",{staticClass:"value",style:{color:1==t.monitorNodeInfo.runResult?"#52C41A":2==t.monitorNodeInfo.runResult?"#f5222d":3==t.monitorNodeInfo.runResult?"#1740dc":4==t.monitorNodeInfo.runResult?"#faad14":5==t.rowData.monitorNodeInfo?"#a61b3f":""}},[t._v("\n                "+t._s(1==t.monitorNodeInfo.runResult?"正常":2==t.monitorNodeInfo.runResult?"失败":3==t.monitorNodeInfo.runResult?"运行中":4==t.monitorNodeInfo.runResult?"告警":5==t.monitorNodeInfo.runResult?"阻断":""))])]),e("div",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("操作人：")]),e("span",{staticClass:"value"},[t._v(t._s(t.monitorNodeInfo.updatePer))])]),3==t.monitorNodeInfo.runType?e("div",{staticClass:"item"},[e("span",{staticClass:"label"},[t._v("任务节点运行方式：")]),e("span",{staticClass:"value"},[t._v(t._s(t.monitorNodeInfo.nodeRunType))])]):t._e()])]),e("div",{staticClass:"bottom"},[e("el-form",{ref:"form",attrs:{inline:!0,model:t.form}},[e("el-row",{attrs:{type:"flex",justify:"end",align:"middle"}},[e("el-form-item",{attrs:{prop:"runMode"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择执行方式",clearable:""},model:{value:t.form.runMode,callback:function(e){t.$set(t.form,"runMode",e)},expression:"form.runMode"}},t._l(t.execStyleList,(function(t,o){return e("el-option",{key:o,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{prop:"runResult"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择运行结果",clearable:""},model:{value:t.form.runResult,callback:function(e){t.$set(t.form,"runResult",e)},expression:"form.runResult"}},t._l(t.execResultList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{staticStyle:{position:"relative",top:"2px"},attrs:{label:"",prop:"start_end_time"}},[e("el-date-picker",{attrs:{placeholder:"请选择监控执行日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.form.start_end_time,callback:function(e){t.$set(t.form,"start_end_time",e)},expression:"form.start_end_time"}})],1),e("el-form-item",[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.reset()}}},[t._v("重置")])],1)],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList}},[e("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"lastRunTime",label:"执行时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v(t._s(o.lastRunTime?o.lastRunTime.replace("T"," "):""))]}}])}),e("el-table-column",{attrs:{width:"150",prop:"timeConsuming","show-overflow-tooltip":!0,label:"运行耗时(s)"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v("\n                "+t._s(3==o.runResult?"--":o.timeConsuming)+"\n              ")]}}])}),e("el-table-column",{attrs:{width:"130",prop:"nodeRunMode","show-overflow-tooltip":!0,label:"执行方式"},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.row;return[e("span",[t._v(t._s(1==a.runMode?"调度":2==a.runMode?"手动":3==a.runMode?"任务节点":""))])]}}])}),e("el-table-column",{attrs:{width:"130","show-overflow-tooltip":!0,label:"运行结果"},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.row;return[e("i",{staticClass:"status-dot",style:{background:1==a.runResult?"#52C41A":2==a.runResult?"#f5222d":3==a.runResult?"#1740dc":4==a.runResult?"#faad14":5==a.runResult?"#a61b3f":""}}),e("span",[t._v(t._s(1==a.runResult?"正常":2==a.runResult?"失败":3==a.runResult?"运行中":4==a.runResult?"告警":5==a.runResult?"阻断":""))])]}}])}),1==t.rowData.isCross?e("el-table-column",{attrs:{width:"180","show-overflow-tooltip":!0,label:"源查询结果/目标查询结果"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v("\n                "+t._s(o.sourceSqlResult?o.sourceSqlResult:"--")+"/"+t._s(o.targetSqlResult?o.targetSqlResult:"--")+"\n            ")]}}],null,!1,300963001)}):t._e(),1!=t.rowData.isCross?e("el-table-column",{attrs:{width:"180","show-overflow-tooltip":!0,label:"强规则/弱规则/校验规则",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v(t._s(o.strongRule)+"/"+t._s(o.weakRule)+"/"+t._s(o.validationRule))]}}],null,!1,2743873073)}):t._e(),1!=t.rowData.isCross?e("el-table-column",{attrs:{width:"160","show-overflow-tooltip":!0,label:"强校验异常/弱校验异常",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v(t._s(3==o.runResult?"--":o.strongRuleAbnormal+"/"+o.weakRuleAbnormal))]}}],null,!1,2435688620)}):t._e(),e("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"通知状态",prop:"notifyState"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v("\n              "+t._s(3==o.runResult?"--":0==o.notifyState?"未触发":1==o.notifyState?"失败":2==o.notifyState?"成功":3==o.notifyState?"未启用":"")+"\n            ")]}}])}),e("el-table-column",{attrs:{width:"150","show-overflow-tooltip":!0,label:"操作人",prop:"updatePer"}}),e("el-table-column",{attrs:{prop:"operationType","header-align":"right",align:"right",fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.row;return[e("el-button",{attrs:{disabled:3==a.runResult,type:"text"},on:{click:function(e){return t.gotoLog(a)}}},[t._v("日志")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1),e("el-drawer",{attrs:{title:"运行日志",visible:t.runLogVisible,direction:"rtl",size:"900px"},on:{"update:visible":function(e){t.runLogVisible=e}}},[t.runLogVisible?e("OriginCompareLog",{ref:"OriginCompareLogRef",attrs:{monitorHistoryId:t.monitorHistoryId,logRow:t.logRow,isHistory:0},on:{"update:monitorHistoryId":function(e){t.monitorHistoryId=e},"update:monitor-history-id":function(e){t.monitorHistoryId=e},"update:logRow":function(e){t.logRow=e},"update:log-row":function(e){t.logRow=e}}}):t._e()],1),e("log-dialog",{ref:"logDialog",attrs:{monitorHistoryId:t.monitorHistoryId,logRow:t.logRow,monitorId:t.rowData.id,isHistory:1},on:{"update:monitorHistoryId":function(e){t.monitorHistoryId=e},"update:monitor-history-id":function(e){t.monitorHistoryId=e},"update:logRow":function(e){t.logRow=e},"update:log-row":function(e){t.logRow=e}}})],1)])}),[],!1,null,"05120561",null);e.default=h.exports}}]);