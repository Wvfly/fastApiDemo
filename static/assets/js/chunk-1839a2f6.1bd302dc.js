(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1839a2f6"],{3255:function(e,t,r){(e.exports=r("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.operations_center_version_management{padding:20px;padding-top:15px}.operations_center_version_management .el-form-item--mini .el-form-item__content,.operations_center_version_management .el-form-item--mini .el-form-item__label{line-height:40px}",""])},"44d3":function(e,t,r){"use strict";r.r(t);r("8e6e"),r("ac6a"),r("456d");var a=r("ade3");r("7f7f"),r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("6b54"),r("3b2b");function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children",r=arguments.length>2?arguments[2]:void 0,a=[];function i(e,r){var o,s=n(e);try{for(s.s();!(o=s.n()).done;){var l=o.value;r(l),a.push(l),l[t]&&i(l[t],r)}}catch(e){s.e(e)}finally{s.f()}}return i(e,r),a};function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={data:function(){return{sliceNum:40,dropOptions:[],workMenuSliceNum:40,filterTableData:[],dropWorkMenuOptions:[],createLoading:!1,isLoading:!1,formDisabled:!1,dialogVisible:!1,isShowFoot:!0,checkStricyly:!1,diaTitle:"创建版本",form:{versionName:"",versionNum:"",procId:"",versionDesc:""},userProcsList:[],udfData:[],udfList:[],udfItemList:[],rightUdfData:[],connectData:[],connectList:[],connectItemList:[],rightConnectData:[],tableData:[],tableList:[],realTableList:[],realTableData:[],tableItemList:[],realTableItemList:[],rightTableData:[],rightRealTableData:[],workMenuDtoData:[],workMenuDtoList:[],realWorkMenuDtoData:[],realWorkMenuDtoList:[],defaultChecked:[],defaultRealChecked:[],notCheackWorkMenuList:[],notCheackRealWorkMenuList:[],formRules:{versionName:[{required:!0,validator:function(e,t,r){var a=new RegExp("^[a-zA-Z0-9_一-龥豈-鶴]+$");""===t?r(new Error("请输入版本名称")):a.test(t)?t.length>20?r(new Error("版本名称字符数不能超过20")):r():r(new Error("版本名称仅支持中英文、数字、下划线组合"))},trigger:"blur"}],versionNum:[{required:!0,validator:function(e,t,r){var a=new RegExp("^([a-z_A-Z-.0-9]+)$");""===t?r(new Error("请输入版本号")):a.test(t)?t.length>20?r(new Error("版本号字符数不能超过20")):r():r(new Error("版本号仅支持英文、数字、下划线、点组合"))},trigger:"blur"}],procId:[{required:!0,message:"请选择项目",trigger:"change"}]},defaultProps:{children:"children",label:"name"},defaultProps1:{children:"childList",label:"name"},sourceId:"1",filterText:"",sourceIdList:[{name:"作业流",id:1},{name:"数据源配置信息",id:2},{name:"表结构",id:3}]}},watch:{tableData:{deep:!0,handler:function(){this.dropOptions=this.tableData.slice(0,this.sliceNum)}},workMenuDtoData:{deep:!0,handler:function(){this.dropWorkMenuOptions=this.workMenuDtoData.slice(0,this.sliceNum)}},filterText:function(e){this.filterTableData=this.workMenuDtoData.filter((function(t){return t.name.indexOf(e)>-1})),this.dropWorkMenuOptions=this.filterTableData.slice(0,this.workMenuSliceNum)}},methods:{versionView:function(e){var t=this;return new Promise((function(r,a){t.isLoading=!0;t.udfData=t.connectData=t.tableData=t.realTableData=t.workMenuDtoData=t.realWorkMenuDtoData=t.udfList=t.connectList=t.tableList=t.realTableList=t.realWorkMenuDtoList=t.workMenuDtoList=[],t.$API.get(t.$URL.versionView+"/"+e,{},(function(e){t.isLoading=!1,0==e.code?(e.data.udfList&&(t.udfData=JSON.parse(e.data.udfList)),e.data.connectList&&(t.connectData=JSON.parse(e.data.connectList)),e.data.tableList&&(t.tableData=JSON.parse(e.data.tableList)),e.data.workMenuDtoList&&(t.workMenuDtoData=JSON.parse(e.data.workMenuDtoList)),e.data.realTableList&&(t.realTableData=JSON.parse(e.data.realTableList)),e.data.realWorkMenuDtoList&&(t.realWorkMenuDtoData=JSON.parse(e.data.realWorkMenuDtoList)),r()):t.$message.error(e)}))}))},viewVersion:function(e){var t=this;this.isLoading=!0,this.formDisabled=!0,this.dialogVisible=!0,this.checkStricyly=!0,this.isShowFoot=!1,this.diaTitle="版本信息",this.$API.get(this.$URL.viewVersion+"/"+e,{},(function(r){if(t.isLoading=!1,0==r.code){var a=r.data;t.form={versionName:a.versionName,versionNum:a.versionNum,procId:a.procId,versionDesc:a.versionDesc},t.versionView(e).then((function(){if(t.udfData=t.udfData.map((function(e){return u(u({},e),{},{disabled:!0})})),t.tableData=t.tableData.map((function(e){return u(u({},e),{},{disabled:!0,showName:"".concat(e.dbName,".").concat(e.tableName)})})),t.realTableData=t.realTableData.map((function(e){return u(u({},e),{},{disabled:!0,showName:"".concat(e.dbName,".").concat(e.tableName)})})),t.connectData=t.connectData.map((function(e){return u(u({},e),{},{disabled:!0})})),r.data.udfList){var e,a=s(r.data.udfList);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.rightUdfData.push(n.id),t.udfList=t.rightUdfData}}catch(e){a.e(e)}finally{a.f()}}if(r.data.tableList){var i,l=s(r.data.tableList);try{for(l.s();!(i=l.n()).done;){var c=i.value;t.rightTableData.push(c.id),t.tableList=t.rightTableData}}catch(e){l.e(e)}finally{l.f()}}if(r.data.realTableList){var d,f=s(r.data.realTableList);try{for(f.s();!(d=f.n()).done;){var m=d.value;t.rightRealTableData.push(m.id),t.realTableList=t.rightRealTableData}}catch(e){f.e(e)}finally{f.f()}}if(r.data.connectList){var h,p=s(r.data.connectList);try{for(p.s();!(h=p.n()).done;){var b=h.value;t.rightTableData.push(b.id),t.connectList=t.rightTableData}}catch(e){p.e(e)}finally{p.f()}}if(r.data.workMenuList){var v,g=s(r.data.workMenuList);try{for(g.s();!(v=g.n()).done;){var L=v.value;t.defaultChecked.push(L.id)}}catch(e){g.e(e)}finally{g.f()}t.$refs.workMenuTree.setCheckedKeys(t.defaultChecked),o(t.workMenuDtoData,"children",(function(e){e.disabled=!0}))}if(r.data.realWorkMenuList){var k,y=s(r.data.realWorkMenuList);try{for(y.s();!(k=y.n()).done;){var D=k.value;t.defaultRealChecked.push(D.id)}}catch(e){y.e(e)}finally{y.f()}t.$refs.realWorkMenuTree.setCheckedKeys(t.defaultRealChecked),o(t.realWorkMenuDtoData,"childList",(function(e){e.disabled=!0}))}}))}else t.$message.error(r.msg)}))},listUserProcs:function(){var e=this;this.isLoading=!0,this.$API.get(this.$URL.listUserProcs,{},(function(t){e.isLoading=!1,0==t.code?e.userProcsList=t.data:e.$message(t.msg)}))},setDisabled:function(e,t){var r=this;e.forEach((function(e){e.disabled=1===e.canEdit,"children"==t&&(e.disabled=!(0!=e.workflowType||e[t]&&e[t].length)),e[t]&&e[t].length&&r.setDisabled(e[t],t)}))},setDisabledAgain:function(e){var t=this;e.forEach((function(e){var r=0;e.children&&e.children.forEach((function(e){e.disabled&&r++})),e.children&&r==e.children.length&&(e.disabled=!0),e.children&&e.children.length&&t.setDisabledAgain(e.children)}))},resourceList:function(e){var t=this;return new Promise((function(r,a){t.isLoading=!0,t.udfData=t.connectData=t.tableData=t.workMenuDtoData=t.realTableData=t.realWorkMenuDtoData=t.udfList=t.connectList=t.realTableList=t.realWorkMenuDtoList=t.tableList=t.workMenuDtoList=[];e?t.$API.get(t.$URL.resourceList+"/"+e,{},(function(e){if(t.isLoading=!1,0==e.code){e.data.udfList&&(t.udfData=e.data.udfList),e.data.connectList&&(t.connectData=e.data.connectList),e.data.tableList&&(t.tableData=e.data.tableList.map((function(e){return u(u({},e),{},{showName:"".concat(e.dbName,".").concat(e.tableName)})}))),setTimeout((function(){var e=document.querySelectorAll(".el-checkbox-group");Array.prototype.forEach.call(e,(function(e){t.sliceNum=40,e.addEventListener("scroll",(function(){e.scrollHeight-(e.scrollTop+e.clientHeight)<1&&(t.sliceNum+=20,t.dropOptions=t.tableData.slice(0,t.sliceNum))}))}))}),100),e.data.workMenuDtoList&&(t.workMenuDtoData=e.data.workMenuDtoList),t.setDisabled(t.workMenuDtoData,"children");for(var a=0;a<7;a++)t.setDisabledAgain(t.workMenuDtoData);var n=document.querySelectorAll(".el-tabs__content");if(Array.prototype.forEach.call(n,(function(e){t.workMenuSliceNum=40,e.addEventListener("scroll",(function(){e.scrollHeight-(e.scrollTop+e.clientHeight)<1&&(t.workMenuSliceNum+=20,t.filterText?t.dropWorkMenuOptions=t.filterTableData.slice(0,t.workMenuSliceNum):t.dropWorkMenuOptions=t.workMenuDtoData.slice(0,t.workMenuSliceNum))}))})),e.data.realTableList&&(t.realTableData=e.data.realTableList.map((function(e){return u(u({},e),{},{showName:"".concat(e.dbName,".").concat(e.tableName)})}))),e.data.realWorkMenuDtoList){t.realWorkMenuDtoData=e.data.realWorkMenuDtoList,t.setDisabled(t.realWorkMenuDtoData,"childList");for(var i=0;i<7;i++)t.setDisabledAgain(t.realWorkMenuDtoData)}r()}else t.$message.error(e.msg)})):t.isLoading=!1}))},selectWorkMenuDtoList:function(){this.workMenuDtoList=[];var e=this.$refs.workMenuTree.getCheckedNodes(!1,!0);this.notCheackWorkMenuList=this.$refs.workMenuTree.getHalfCheckedNodes();var t,r=s(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;this.workMenuDtoList.push(a.id)}}catch(e){r.e(e)}finally{r.f()}},selectrealWorkMenuDtoList:function(){this.realWorkMenuDtoList=[];var e=this.$refs.realWorkMenuTree.getCheckedNodes(!1,!0);this.notCheackealWorkMenuList=this.$refs.realWorkMenuTree.getHalfCheckedNodes();var t,r=s(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;this.realWorkMenuDtoList.push(a.id)}}catch(e){r.e(e)}finally{r.f()}},submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.isLoading=!0,e.createLoading=!0;var r=u(u({},e.form),{},{udfList:e.udfItemList.map((function(e){return{id:e.id,name:e.jarMethodName}})),tableList:e.tableItemList.map((function(e){return{id:e.id,name:e.tableName}})),connectList:e.connectItemList.map((function(e){return{id:e.id,name:e.name}})),workMenuList:e.workMenuDtoList.map((function(e){return{id:e}})),notCheackWorkMenuList:e.notCheackWorkMenuList.map((function(e){return{id:e.id}})),realTableList:e.realTableItemList.map((function(e){return{id:e.id,name:e.tableName}})),realWorkMenuList:e.realWorkMenuDtoList.map((function(e){return{id:e}})),notCheackRealWorkMenuList:e.notCheackRealWorkMenuList.map((function(e){return{id:e.id}}))});e.$API.post(e.$URL.versionAdd,r,(function(t){e.isLoading=!1,e.createLoading=!1,0==t.code?(e.$message.success("创建成功"),e.dialogVisible=!1,e.$emit("refresh")):e.$message.error(t.msg)}))}))},diaClose:function(){this.udfData=this.udfItemList=this.connectItemList=this.tableItemList=this.realTableItemList=this.realTableList=this.realTableData=this.rightRealTableData=this.realWorkMenuDtoData=this.realWorkMenuDtoList=this.notCheackRealWorkMenuList=this.connectData=this.tableData=this.workMenuDtoData=this.udfList=this.connectList=this.tableList=this.workMenuDtoList=this.rightConnectData=this.rightTableData=this.rightUdfData=[],this.isLoading=!1,this.isShowFoot=!0,this.form=this.$options.data().form,this.$refs.form.resetFields(),this.formDisabled=!1,this.defaultChecked=[],this.defaultRealChecked=[],this.$refs.workMenuTree.setCheckedKeys([]),this.$refs.realWorkMenuTree.setCheckedKeys([]),this.checkStricyly=!1,this.diaTitle="创建版本"},udfTransfer:function(e){this.udfItemList=[];var t,r=s(this.udfData);try{for(r.s();!(t=r.n()).done;){var a,n=t.value,i=s(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;n.id==o&&this.udfItemList.push(n)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){r.e(e)}finally{r.f()}},connectTransfer:function(e){this.connectItemList=[];var t,r=s(this.connectData);try{for(r.s();!(t=r.n()).done;){var a,n=t.value,i=s(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;n.id==o&&this.connectItemList.push(n)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){r.e(e)}finally{r.f()}},tableTransfer:function(e){this.tableItemList=[];var t,r=s(this.tableData);try{for(r.s();!(t=r.n()).done;){var a,n=t.value,i=s(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;n.id==o&&this.tableItemList.push(n)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){r.e(e)}finally{r.f()}},realTableTransfer:function(e){this.realTableItemList=[];var t,r=s(this.realTableData);try{for(r.s();!(t=r.n()).done;){var a,n=t.value,i=s(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;n.id==o&&this.realTableItemList.push(n)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){r.e(e)}finally{r.f()}},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)}},mounted:function(){this.$nextTick((function(){})),this.listUserProcs()}},f=(r("5ab9"),r("2877"));function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={components:{creatVersion:Object(f.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"operations_cernter_version_manegement_creat_version"},[t("el-dialog",{attrs:{title:e.diaTitle,visible:e.dialogVisible},on:{closed:e.diaClose,"update:visible":function(t){e.dialogVisible=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.createLoading,expression:"createLoading"}]},[t("el-form",{ref:"form",attrs:{disabled:e.formDisabled,"label-position":"left",model:e.form,rules:e.formRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"版本名称",prop:"versionName"}},[t("el-input",{attrs:{placeholder:"仅支持字母、数字、下划线、中文组合的最多（含）20位字符",maxlength:"20"},model:{value:e.form.versionName,callback:function(t){e.$set(e.form,"versionName","string"==typeof t?t.trim():t)},expression:"form.versionName"}})],1),t("el-form-item",{attrs:{label:"版本号",prop:"versionNum"}},[t("el-input",{attrs:{placeholder:"仅支持字母、数字、下划线、点组合的最多（含）20位字符",maxlength:"20"},model:{value:e.form.versionNum,callback:function(t){e.$set(e.form,"versionNum","string"==typeof t?t.trim():t)},expression:"form.versionNum"}})],1),t("el-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{title:"更新内容为勾选项目下的代码文件，数据源配置信息，表结构。仅支持选择单个项目进行版本打包。",type:"info","show-icon":""}}),t("el-form-item",{attrs:{label:"请选择项目",prop:"procId"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择项目"},on:{change:e.resourceList},model:{value:e.form.procId,callback:function(t){e.$set(e.form,"procId",t)},expression:"form.procId"}},e._l(e.userProcsList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("div",{staticClass:"source-box"},[t("span",{staticClass:"source-label"},[e._v("请选择资源")]),t("el-tabs",{staticClass:"sourceId",model:{value:e.sourceId,callback:function(t){e.sourceId=t},expression:"sourceId"}},[t("el-tab-pane",{attrs:{label:"作业流",name:"1"}},[e.workMenuDtoData.length?t("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}):e._e(),t("el-tree",{ref:"workMenuTree",attrs:{data:e.dropWorkMenuOptions,"show-checkbox":"","node-key":"id","empty-text":e.isLoading?"":"暂无数据","check-strictly":e.checkStricyly,props:e.defaultProps,"filter-node-method":e.filterNode},on:{check:e.selectWorkMenuDtoList}})],1),t("el-tab-pane",{attrs:{label:"离线表结构",name:"2"}},[t("el-transfer",{ref:"transferLazy",attrs:{titles:["未选择","已选择"],props:{key:"id",label:"showName"},data:e.dropOptions,"right-default-checked":e.rightTableData},on:{change:e.tableTransfer},model:{value:e.tableList,callback:function(t){e.tableList=t},expression:"tableList"}})],1),t("el-tab-pane",{attrs:{label:"数据源配置信息",name:"3"}},[t("el-transfer",{attrs:{titles:["未选择","已选择"],filterable:"",props:{key:"id",label:"name"},data:e.connectData,"right-default-checked":e.rightConnectData},on:{change:e.connectTransfer},model:{value:e.connectList,callback:function(t){e.connectList=t},expression:"connectList"}})],1),t("el-tab-pane",{attrs:{label:"实时任务",name:"4"}},[t("el-tree",{ref:"realWorkMenuTree",attrs:{data:e.realWorkMenuDtoData,"show-checkbox":"","node-key":"id","empty-text":e.isLoading?"":"暂无数据","check-strictly":e.checkStricyly,props:e.defaultProps1},on:{check:e.selectrealWorkMenuDtoList}})],1),t("el-tab-pane",{attrs:{label:"实时表结构",name:"5"}},[t("el-transfer",{attrs:{titles:["未选择","已选择"],filterable:"",props:{key:"id",label:"showName"},data:e.realTableData,"right-default-checked":e.rightRealTableData},on:{change:e.realTableTransfer},model:{value:e.realTableList,callback:function(t){e.realTableList=t},expression:"realTableList"}})],1)],1)],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容",maxlength:"200"},model:{value:e.form.versionDesc,callback:function(t){e.$set(e.form,"versionDesc",t)},expression:"form.versionDesc"}})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowFoot,expression:"isShowFoot"}],staticClass:"dialog-footer",staticStyle:{display:"flex","margin-top":"15px","justify-content":"end"},attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.submit}},[e._v("确 定")])],1)],1)])],1)}),[],!1,null,null,null).exports},data:function(){return{isLoading:!1,pages:{currPage:1,pageSize:10,totalCount:0,list:[]},formInline:{versionName:"",versionNum:""},versionData:{}}},methods:{onpenCreatVersion:function(){this.$refs.creatVersion.dialogVisible=!0},versionList:function(){var e=this;this.isLoading=!0;var t=h(h({},this.formInline),{},{versionType:0,page:this.pages.currPage,limit:this.pages.pageSize});this.$API.post(this.$URL.versionList,t,(function(t){e.isLoading=!1,0==t.code?e.pages=t.page:e.$message.error(t.msg)}))},viewVersion:function(e){this.$refs.creatVersion.viewVersion(e)},downloadVersion:function(e){var t=this,r={versionId:e};this.$API.getDownLoad(this.$URL.downloadVersion,r,(function(e){t.download(e.data,e.headers.filename)}))},download:function(e,t){if(e){var r=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.style.display="none",a.href=r,a.setAttribute("download",decodeURI(t)),document.body.appendChild(a),a.click()}},deleteItem:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.isLoading=!0,t.$API.post(t.$URL.deleteVersion+"/"+e,{},(function(e){t.isLoading=!1,0==e.code?(t.$message({type:"success",message:"删除成功!"}),t.versionList(1,t.size)):t.$message.error(e.msg)}))}))},refresh:function(){this.versionList()},currentChangeHandle:function(e){this.pages.currPage=e,this.versionList()},handleSizeChaneg:function(e){this.pages.pageSize=e,this.versionList()},serch:function(){this.pages.currPage=1,this.versionList()},reset:function(){this.formInline.versionName="",this.formInline.versionNum="",this.versionList()}},mounted:function(){this.versionList(),this.$route.query.status&&this.$route.query.id&&(this.$refs.creatVersion.dialogVisible=!0,this.viewVersion(this.$route.query.id))}},b=(r("5068"),Object(f.a)(p,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"zt-head noBorder"},[e._v("版本管理")]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"operations_center_version_management"},[t("el-form",{staticClass:"demo-form-inline",staticStyle:{"text-align":"left"},attrs:{size:"mini",inline:!0,model:e.formInline}},[t("el-row",{attrs:{type:"flex",justify:"space-between"}},[t("el-col",{attrs:{span:4}},[t("el-form-item",{staticStyle:{"margin-right":"60px"}},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"versionManagement_create",expression:"'versionManagement_create'"}],attrs:{type:"primary"},on:{click:e.onpenCreatVersion}},[e._v("创建版本")])],1)],1),t("el-col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{span:20}},[t("el-form-item",{attrs:{label:""}},[t("el-input",{attrs:{placeholder:"请输入版本名称"},model:{value:e.formInline.versionName,callback:function(t){e.$set(e.formInline,"versionName","string"==typeof t?t.trim():t)},expression:"formInline.versionName"}})],1),t("el-form-item",{attrs:{label:""}},[t("el-input",{attrs:{placeholder:"请输入版本号"},model:{value:e.formInline.versionNum,callback:function(t){e.$set(e.formInline,"versionNum","string"==typeof t?t.trim():t)},expression:"formInline.versionNum"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.serch}},[e._v("查询")])],1),t("el-form-item",{staticStyle:{"margin-right":"0"}},[t("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),t("el-table",{attrs:{data:e.pages.list}},[t("el-table-column",{attrs:{label:"版本名称",prop:"versionName"}}),t("el-table-column",{attrs:{label:"版本号",prop:"versionNum"}}),t("el-table-column",{attrs:{label:"创建人",prop:"createPerName"}}),t("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),t("el-table-column",{attrs:{label:"备注",prop:"versionDesc"}}),t("el-table-column",{attrs:{label:"操作",width:"120","header-align":"right",align:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"versionManagement_download",expression:"'versionManagement_download'"}],attrs:{type:"text",disabled:0==r.row.isDownload},on:{click:function(t){return e.downloadVersion(r.row.id)}}},[e._v("下载")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"versionManagement_info",expression:"'versionManagement_info'"}],attrs:{disabled:e.$store.state.old.admin_info.userId!=r.row.createPer,type:"text"},on:{click:function(t){return e.viewVersion(r.row.id)}}},[e._v("查看")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"versionManagement_delete",expression:"'versionManagement_delete'"}],style:{color:e.$store.state.old.admin_info.userId==r.row.createPer?"#F56C6C":""},attrs:{disabled:e.$store.state.old.admin_info.userId!=r.row.createPer,type:"text"},on:{click:function(t){return e.deleteItem(r.row.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pages.currPage,"page-size":e.pages.pageSize,total:e.pages.totalCount,layout:"total,sizes,prev,pager,next,jumper"},on:{"current-change":e.currentChangeHandle,"size-change":e.handleSizeChaneg}}),t("creat-version",{ref:"creatVersion",on:{refresh:e.refresh}})],1)])}),[],!1,null,null,null));t.default=b.exports},5068:function(e,t,r){"use strict";r("f3dc")},"5ab9":function(e,t,r){"use strict";r("6883")},6883:function(e,t,r){var a=r("73d0");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("499e").default)("7dfbf886",a,!0,{sourceMap:!1,shadowMode:!1})},"73d0":function(e,t,r){(e.exports=r("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.operations_cernter_version_manegement_creat_version .el-alert--info.is-light{border:none}.operations_cernter_version_manegement_creat_version .el-tabs--left .el-tabs__item.is-left{padding-left:0;text-align:left}.operations_cernter_version_manegement_creat_version .el-dialog{width:760px!important}.operations_cernter_version_manegement_creat_version .source-box{display:-webkit-box;display:-ms-flexbox;display:flex}.operations_cernter_version_manegement_creat_version .source-box .source-label{line-height:50px;width:120px;color:rgba(4,12,44,.85);font-size:12px}.operations_cernter_version_manegement_creat_version .source-box .sourceId{-webkit-box-flex:1;-ms-flex:1;flex:1;height:360px}.operations_cernter_version_manegement_creat_version .source-box .sourceId .el-tabs__content{height:290px;overflow-y:auto}.operations_cernter_version_manegement_creat_version .el-transfer{text-align:left}.operations_cernter_version_manegement_creat_version .el-transfer-panel__item.el-checkbox .el-checkbox__label{overflow:initial}.operations_cernter_version_manegement_creat_version /deep/ .el-tabs__nav{padding-right:20px}.operations_cernter_version_manegement_creat_version /deep/ .el-transfer-panel .el-transfer-panel__header .el-checkbox .el-checkbox__label,.operations_cernter_version_manegement_creat_version /deep/ .el-transfer-panel__empty{font-size:12px}.operations_cernter_version_manegement_creat_version .select-content{position:relative;margin:15px 0;width:100%;min-height:150px;border:1px solid #dcdfe6;border-radius:2px;padding:10px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.operations_cernter_version_manegement_creat_version .select-content .el-tree{-webkit-box-flex:1;-ms-flex:1;flex:1}.operations_cernter_version_manegement_creat_version .select-content .el-tree__empty-text{width:60px}.operations_cernter_version_manegement_creat_version .select-content .load{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:1}.operations_cernter_version_manegement_creat_version .select-content .load i{font-style:normal;font-size:12px}",""])},f3dc:function(e,t,r){var a=r("3255");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("499e").default)("11ab0030",a,!0,{sourceMap:!1,shadowMode:!1})}}]);