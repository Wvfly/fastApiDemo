(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a0d8f704"],{"116da":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-4dfc61a0]{color:#1740dc}.success-color[data-v-4dfc61a0]{color:#52c41a}.warning-color[data-v-4dfc61a0]{color:#faad14}.error-color[data-v-4dfc61a0]{color:#f5222d}.info-color[data-v-4dfc61a0]{color:#909399}.border-color[data-v-4dfc61a0]{border:1px solid #e5e6e9}.over-flow[data-v-4dfc61a0]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.wid190[data-v-4dfc61a0]{width:100%}.align-center[data-v-4dfc61a0]{text-align:center}p[data-v-4dfc61a0]{margin:0}",""])},"2fd3":function(e,t,a){var i=a("116da");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("19c78659",i,!0,{sourceMap:!1,shadowMode:!1})},4363:function(e,t,a){"use strict";a("9651")},"4ea1":function(e,t,a){"use strict";a("2fd3")},"90a5":function(e,t,a){"use strict";a("e387")},9651:function(e,t,a){var i=a("d770");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("9a30e56a",i,!0,{sourceMap:!1,shadowMode:!1})},d770:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-37e5e54b]{color:#1740dc}.success-color[data-v-37e5e54b]{color:#52c41a}.warning-color[data-v-37e5e54b]{color:#faad14}.error-color[data-v-37e5e54b]{color:#f5222d}.info-color[data-v-37e5e54b]{color:#909399}.border-color[data-v-37e5e54b]{border:1px solid #e5e6e9}img[data-v-37e5e54b]{display:inline}.factory[data-v-37e5e54b]{text-align:left}.factory .dataLayered[data-v-37e5e54b]{height:100%}.factory .dataLayered h3.title[data-v-37e5e54b]{font-size:16px;padding:12px 20px;font-weight:400}.factory .dataLayered .layered-tips[data-v-37e5e54b]{padding:0 20px 12px 20px;border-bottom:1px solid #e5e6e9}.cards[data-v-37e5e54b]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-flow:wrap;flex-flow:wrap;padding:0 10px 0 20px}@media screen and (min-width:1200px){.box-card[data-v-37e5e54b]{width:20%}}@media screen and (min-width:1600px){.box-card[data-v-37e5e54b]{width:16%}}@media screen and (max-width:1200px){.box-card[data-v-37e5e54b]{max-width:25px}}.box-card[data-v-37e5e54b]{min-width:280px;margin-right:10px;margin-bottom:10px;height:230px;border:1px solid #e4e7ed;border-radius:3px}.box-card[data-v-37e5e54b],.card[data-v-37e5e54b]{position:relative}.card[data-v-37e5e54b]{height:180px;left:0;top:0;padding:10px 20px}.box-card .top[data-v-37e5e54b]{display:-webkit-box;display:box;margin-bottom:10px;line-height:20px;vertical-align:middle}.box-card .top .title[data-v-37e5e54b]{display:table;width:58px;height:58px;padding:5px;text-align:justify;text-justify:newspaper;word-break:break-all;background:#1a16d5;color:#fff;border-radius:9px;font-size:14px}.box-card .top .sizelage[data-v-37e5e54b]{font-size:22px}.box-card .top .action[data-v-37e5e54b]{padding-top:6px;min-width:38px}.box-card .top .action i[data-v-37e5e54b]{cursor:pointer;margin-right:10px}.box-card .top .action i[data-v-37e5e54b]:last-child{margin-right:0}.box-card .left[data-v-37e5e54b]{float:left;width:28%;text-align:center}.box-card .right[data-v-37e5e54b]{float:left;width:100%;height:80px;line-height:25px;color:#909399}.box-card .right .item[data-v-37e5e54b]{height:20px;line-height:20px;width:100%}.box-card .right .item.admin[data-v-37e5e54b]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.box-card .right .description[data-v-37e5e54b]{height:20px;line-height:20px;display:-webkit-box;word-break:break-all;overflow:hidden}.box-operation[data-v-37e5e54b]{position:relative;height:48px;line-height:50px;border-top:1px solid #ebeef5;text-align:right;padding:0 10px;background-color:#f7f9fa;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.box-operation .operation_btn[data-v-37e5e54b]{cursor:pointer}.box-operation[data-v-37e5e54b] :hover :after{background:#f2f6fc}.box-operation .item[data-v-37e5e54b]{padding:0 10px;line-height:30px;cursor:pointer}.link[data-v-37e5e54b]{display:block;color:#1740dc;cursor:pointer}.info[data-v-37e5e54b]{text-align:right;color:#909399}",""])},dddc:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".form[data-v-69edd294]{width:90%}",""])},e387:function(e,t,a){var i=a("dddc");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("5f13ca16",i,!0,{sourceMap:!1,shadowMode:!1})},e40a:function(e,t,a){"use strict";a.r(t);a("7f7f"),a("8e6e"),a("ac6a"),a("456d"),a("6762"),a("2fdb");var i=a("ade3");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}var s={props:{isShow:!1,isAdd:!0,editId:0},data:function(){return{submitLoading:!1,dialogVisible:!0,queue:[],item_data:{nameAb:"",nameCn:"",nameEn:"",remark:"",roleId:"",reference:!1},rules:{nameAb:[{required:!0,message:"必须以英文开头，数字，下划线组合，1-10字符以内",trigger:"blur",pattern:"^[a-zA-Z][a-zA-Z0-9_]*$"}],nameCn:[{required:!0,message:"必须以中文/英文/数字开头，数字，下划线组合，1-256字符以内",trigger:"blur",pattern:"^[一-龥a-zA-Z0-9][一-龥a-zA-Z0-9_]{1,256}$"}],nameEn:[{required:!0,message:"必须以英文开头，数字，下划线组合，1-256字符以内",trigger:"blur",pattern:"^[a-zA-Z][a-zA-Z0-9_]{1,256}$"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}],roleId:[{required:!0,message:"请输入角色",trigger:"blur"}]}}},computed:{},mounted:function(){this.getRealtimequeue()},methods:{getRealtimequeue:function(e){var t=this;this.$API.get(this.$URL.getRoleSelectNew,{},(function(e){0==e.code&&e.data?t.queue=e.data:t.$message.error(e.msg)}))},getItem:function(e){var t=this;this.$API.post(this.$URL.getdataHierarchyById,{id:this.editId},(function(e){0==e.code?t.item_data=e.data:t.$message.error(e.msg)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.isAdd?t.create_item():t.edit_item()}))},create_item:function(){var e=this;this.submitLoading=!0,this.$API.post(this.$URL.addDataHierarchy,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.item_data),(function(t){0==t.code?(e.$message({message:"创建成功！",type:"success"}),e.dialogVisible=!1,e.$emit("listenToChildEvent","success")):e.$message.error({dangerouslyUseHTMLString:!0,message:t.msg}),e.submitLoading=!1}))},edit_item:function(){var e=this;this.submitLoading=!0,this.$API.post(this.$URL.updateDataHierarchy,{id:this.item_data.id,nameAb:this.item_data.nameAb,nameCn:this.item_data.nameCn,nameEn:this.item_data.nameEn,roleId:this.item_data.roleId,remark:this.item_data.remark},(function(t){0==t.code?(e.$message({message:"修改成功！",type:"success"}),e.dialogVisible=!1,e.$emit("listenToChildEvent","success")):e.$message.error(t.msg),e.submitLoading=!1}))}},watch:{dialogVisible:function(e,t){0==e&&(this.dialogVisible=!0,this.$emit("listenToChildEvent","close"),this.item_data.item_name="",this.item_data.queueId="",this.item_data.item_description="")},isShow:function(e){if(1==e)if(0==this.isAdd)this.getItem(this.itemId);else for(var t in this.item_data)this.item_data[t]=""}}},o=(a("90a5"),a("2877")),n=Object(o.a)(s,(function(){var e=this,t=e._self._c;return e.isShow?t("div",[t("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:(e.isAdd?"创建":"编辑")+"分层",width:"600px",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("el-form",{ref:"item_data",staticClass:"form",attrs:{model:e.item_data,rules:e.rules,"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"英文缩写",prop:"nameAb"}},[t("el-input",{attrs:{maxlength:10,disabled:!e.isAdd&&e.item_data.reference,placeholder:"支持英文、数字、下划线组合，以英文开头，最大10字符"},model:{value:e.item_data.nameAb,callback:function(t){e.$set(e.item_data,"nameAb",t)},expression:"item_data.nameAb"}})],1),t("el-form-item",{attrs:{label:"英文名",prop:"nameEn"}},[t("el-input",{attrs:{maxlength:256,placeholder:"支持英文、数字、下划线组合，以英文开头，最大256字符"},model:{value:e.item_data.nameEn,callback:function(t){e.$set(e.item_data,"nameEn",t)},expression:"item_data.nameEn"}})],1),t("el-form-item",{attrs:{label:"中文名",prop:"nameCn"}},[t("el-input",{attrs:{maxlength:256,placeholder:"支持英文、数字、下划线组合，以中文/英文/数字开头，最大256字符"},model:{value:e.item_data.nameCn,callback:function(t){e.$set(e.item_data,"nameCn",t)},expression:"item_data.nameCn"}})],1),t("el-form-item",{attrs:{label:"授权角色",prop:"roleId"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.item_data.roleId,callback:function(t){e.$set(e.item_data,"roleId",t)},expression:"item_data.roleId"}},e._l(e.queue,(function(e,a){return t("el-option",{key:a,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"输入备注",maxlength:"2048"},model:{value:e.item_data.remark,callback:function(t){e.$set(e.item_data,"remark",t)},expression:"item_data.remark"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.submitLoading,type:"primary"},on:{click:function(t){return e.submitForm("item_data")}}},[e._v(e._s(e.isAdd?"创建":"保存"))]),t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)])],1):e._e()}),[],!1,null,"69edd294",null).exports,d={name:"textTooltip",props:{content:{type:String,default:function(){return""}},className:{type:String,default:function(){return""}},refName:{type:String,default:function(){return""}}},data:function(){return{isShowTooltip:!0}},computed:{contents:function(){var e=this.content;return"tooltipOver"==this.refName&&this.content.length>13&&(e=e.substring(0,13)+"..."),"tipsnameCn"==this.refName&&this.content.length>10&&(e=e.substring(0,9)+"..."),"tipsnameEn"==this.refName&&this.content.length>20&&(e=e.substring(0,19)+"..."),e}},methods:{onMouseOver:function(e){var t=this.$refs[e].parentNode.offsetWidth,a=this.$refs[e].offsetWidth;this.isShowTooltip=!(a>t),"tooltipOver"!=this.refName&&"tipsnameEn"!=this.refName&&"tipsnameCn"!=this.refName||(this.isShowTooltip=!1)}}};a("4ea1");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}var c={data:function(){var e;return e={formInline:{id:void 0,word:""},delLoading:!1,layeredLoading:!1},Object(i.a)(e,"delLoading",!1),Object(i.a)(e,"show_addItem",!1),Object(i.a)(e,"show_deleteItem",!1),Object(i.a)(e,"isAdd",!0),Object(i.a)(e,"editId","1"),Object(i.a)(e,"items",[]),Object(i.a)(e,"createList",[]),Object(i.a)(e,"page",{page:1,limit:8,totalCount:0}),Object(i.a)(e,"limit",10),Object(i.a)(e,"currentPage",1),e},components:{additem:n,tooltipsOver:Object(o.a)(d,(function(){var e=this,t=e._self._c;return t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",disabled:e.isShowTooltip,content:e.content,placement:"top"}},[t("p",{staticClass:"over-flow",class:e.className,on:{mouseover:function(t){return e.onMouseOver(e.refName)}}},[t("span",{ref:e.refName},[e._v(e._s(e.contents||"-"))])])])}),[],!1,null,"4dfc61a0",null).exports},computed:{},mounted:function(){this.get_items(this.page.page,this.limit)},created:function(){this.getCreateList()},methods:{getCreateList:function(){var e=this;this.$API.get(this.$URL.getdataHierarchyUserList,{},(function(t){0==t.code?e.createList=t.data:e.$message.error(t.msg)}))},do_search:function(){this.page.currPage=1,this.get_items(this.page.currPage,this.limit)},reset:function(){this.formInline.id="",this.formInline.word="",this.do_search()},toDetail:function(e,t){t.auth?this.$router.push({path:"/"+e,query:{id:t.id,userId:t.createPer,projectId:t.id}}):this.$message({message:"仅本项目创建人及项目组成员可操作！",type:"warning"})},get_items:function(e,t){var a=this;this.layeredLoading=!0,this.$API.post(this.$URL.getDataHierarchyList,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({page:e,limit:t},this.formInline),(function(e){0==e.code?(a.items=e.data.records,a.page.totalCount=e.data.total):a.$message.error(e.msg),a.layeredLoading=!1}))},noticeFromItemManage:function(e){this.get_items(1,this.limit)},handleSizeChange:function(e){this.limit=e,this.get_items(1,this.limit)},handleCurrentChange:function(e){this.currentPage=e,this.get_items(this.currentPage,this.limit)},create_item:function(){this.show_addItem=!0,this.isAdd=!0},show_edit_item:function(e){this.show_addItem=!0,this.isAdd=!1,this.editId=e},show_item_manage:function(e){this.$router.push("/factoryDetails/projectManagement?id="+e.id)},action:function(e,t,a){t.auth?e.target.className.includes("edit")?this.show_edit_item(t.id,a):e.target.className.includes("delete")&&this.show_delete_item(t.id,a):this.$message({message:"仅本项目创建人及项目组成员可操作！",type:"warning"})},show_delete_item:function(e){this.show_deleteItem=!0,this.layeredId=e},delete_item:function(){var e=this;this.delLoading=!0,this.$API.post(this.$URL.delDataHierarchy,{id:this.layeredId},(function(t){0==t.code?(e.$message({message:"删除成功！",type:"success"}),e.show_deleteItem=!1,e.get_items(1,e.limit)):e.$message.error({message:t.msg}),e.delLoading=!1}))},close_create_item:function(e){switch(e){case"close":this.show_addItem=!1;break;case"success":this.get_items(1,this.limit)}},routerTo:function(e){this.$router.push({path:"/projectConfig",query:{id:e}})}}},m=(a("4363"),Object(o.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"factory"},[e._m(0),t("el-form",{staticClass:"demo-form-inline zt-table-search-form",staticStyle:{"margin-left":"20px","margin-top":"20px"},attrs:{inline:!0,model:e.formInline}},[t("el-row",[t("div",{staticClass:"fr",staticStyle:{"margin-right":"12px"}},[t("el-form-item",{attrs:{label:""}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择创建人"},on:{change:e.do_search},model:{value:e.formInline.id,callback:function(t){e.$set(e.formInline,"id",t)},expression:"formInline.id"}},e._l(e.createList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:""}},[t("el-input",{attrs:{clearable:"",placeholder:"输入缩写/英文名/中文名查询"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.do_search.apply(null,arguments)}},model:{value:e.formInline.word,callback:function(t){e.$set(e.formInline,"word","string"==typeof t?t.trim():t)},expression:"formInline.word"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.do_search}},[e._v("查询")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)])],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.layeredLoading,expression:"layeredLoading"}],staticClass:"cards clearfix"},[e.$checkPermission("dataLayered_add")?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"link",staticStyle:{"margin-top":"110px","text-align":"center"},on:{click:e.create_item}},[e._v("+ 创建分层")])]):e._e(),e._l(e.items,(function(a,i){return t("el-card",{key:i,staticClass:"box-card",staticStyle:{padding:"0px"}},[t("div",{staticClass:"card"},[t("div",{staticClass:"top"},[t("div",{staticClass:"title"},[t("div",{class:a.nameAb.length<4?"sizelage":"",staticStyle:{display:"table-cell","vertical-align":"middle","text-align":"center"}},[e._v(e._s(a.nameAb))])]),t("div",{staticClass:"action",staticStyle:{"margin-left":"10px"}},[t("div",[a.nameCn.length<10?t("span",[e._v(e._s(a.nameCn))]):t("tooltips-over",{staticClass:"wid190",attrs:{content:a.nameCn,refName:"tipsnameCn"}})],1),t("div",[a.nameEn.length<20?t("span",[e._v(e._s(a.nameEn))]):t("tooltips-over",{staticClass:"wid190",attrs:{content:a.nameEn,refName:"tipsnameEn"}})],1)])]),t("div",{staticStyle:{position:"relative",cursor:"pointer"}},[t("div",{staticClass:"right"},[t("div",{staticClass:"item admin",attrs:{title:a.createPerName}},[e._v("创建人："+e._s(a.createName||"--"))]),t("div",{staticClass:"item"},[e._v("最新修改人："+e._s(a.updateName||"--"))]),t("div",{},[e._v("最新修改时间："+e._s(a.updateTime||"--"))]),t("div",{staticClass:"description"},[e._v("备注：\n                  "),a.remark.length<13?t("span",[e._v(e._s(a.remark||"-"))]):t("tooltips-over",{staticClass:"wid190",attrs:{content:a.remark,refName:"tooltipOver"}})],1)]),t("div",{staticStyle:{clear:"both"}})])]),a.auth?t("div",{staticClass:"box-operation"},[t("span",{staticClass:"operation_btn",on:{click:function(t){return e.show_edit_item(a.id)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),a.reference?t("span",{staticClass:"operation_btn",staticStyle:{color:"#DCDFE6"}},[e._v("删除")]):t("span",{staticClass:"operation_btn",on:{click:function(t){return e.show_delete_item(a.id)}}},[e._v("删除")])],1):t("div",{staticClass:"box-operation"},[t("span",{staticClass:"operation_btn",staticStyle:{color:"#DCDFE6"}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{staticClass:"operation_btn",staticStyle:{color:"#DCDFE6"}},[e._v("删除")])],1)])}))],2),t("div",{staticStyle:{margin:"0 30px 20px 0","padding-bottom":"5px"}},[t("el-pagination",{attrs:{"current-page":e.page.currPage,"page-sizes":[10,15,20,50],"page-size":e.page.pageSize,total:e.page.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"删除分层",visible:e.show_deleteItem,width:"400px"},on:{"update:visible":function(t){e.show_deleteItem=t}}},[t("span",[e._v("确认删除分层？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.show_deleteItem=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.delLoading},on:{click:function(t){e.dialogVisible=!1,e.delete_item()}}},[e._v("删除")])],1)]),t("additem",{attrs:{isShow:e.show_addItem,isAdd:e.isAdd,editId:e.editId},on:{listenToChildEvent:e.close_create_item}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"dataLayered"},[e("h3",{staticClass:"title"},[this._v("数据分层")]),e("div",{staticClass:"layered-tips"},[this._v("\n          数据分层根据实际数仓架构设计进行管理使用，平台默认提供8层：ODS、DWD、DWS、ADS、DIM、TEST、STG、TEMP。如果不满足使用需求，可自行定义新的数据分层进行使用。\n默认的分层所有租户内共享使用，自建分层只限所属自建租户内使用。\n      ")])])}],!1,null,"37e5e54b",null));t.default=m.exports}}]);