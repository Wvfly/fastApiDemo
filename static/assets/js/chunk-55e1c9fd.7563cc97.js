(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-55e1c9fd"],{"1d76":function(e,t,a){"use strict";a.d(t,"h",(function(){return l})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return m})),a.d(t,"i",(function(){return c})),a.d(t,"j",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"k",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"g",(function(){return h}));var r=a("2b0e"),o=a("fedb"),l=function(){return r.default.http.get(o.a.getModelTypeList)},n=function(e){return r.default.http.post(o.a.addNewModel,e)},i=function(e){var t=e.modelTypeName;return r.default.http.get(o.a.getAlgorithmTypeList+"/".concat(t))},s=function(e){return r.default.http.post(o.a.getAlgorithmParams,e)},m=function(){return r.default.http.get(o.a.getDbs)},c=function(e){var t=e.dbName;return r.default.http.get(o.a.getTablesByDb+"/".concat(t))},d=function(e){var t=e.tableId;return r.default.http.get(o.a.getTablesDetails+"/".concat(t))},u=function(e){var t=e.id;return r.default.http.get(o.a.getModelDetail+"/".concat(t))},p=function(e){return r.default.http.post(o.a.updateModel,e)},f=function(e){var t=e.modelId;return r.default.http.get(o.a.getModelFitting+"/".concat(t))},h=function(e){var t=e.modelId;return r.default.http.get(o.a.getModelImportant+"/".concat(t))}},"1f59":function(e,t,a){"use strict";a("f9ad")},"6dc3":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,'.primary-color[data-v-aedf30e6]{color:#1740dc}.success-color[data-v-aedf30e6]{color:#52c41a}.warning-color[data-v-aedf30e6]{color:#faad14}.error-color[data-v-aedf30e6]{color:#f5222d}.info-color[data-v-aedf30e6]{color:#909399}.border-color[data-v-aedf30e6]{border:1px solid #e5e6e9}.create-edit-model[data-v-aedf30e6]{width:100%;height:100%;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;background:#f0f2f5}.create-edit-model[data-v-aedf30e6] .el-form-item__error{position:relative!important}.create-edit-model[data-v-aedf30e6] .el-form-item.is-required:not(.is-no-asterisk)>.el-form-item__label:before{float:right;margin-left:4px;margin-right:0}.create-edit-model .model-form[data-v-aedf30e6] .el-form-item__label-wrap{min-width:60px;max-width:155px}.create-edit-model .model-header[data-v-aedf30e6]{line-height:48px;padding-left:20px;font-size:16px;color:#000;border-bottom:1px solid #e8e8ea;background:#fff}.create-edit-model .model-container[data-v-aedf30e6]{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;overflow-y:hidden}.create-edit-model .model-container .model-content[data-v-aedf30e6]{height:92.3%;padding:20px;padding-top:0;background:#fff;overflow-y:scroll}.create-edit-model .model-container .model-content[data-v-aedf30e6] .el-input{width:180px!important}.create-edit-model .model-container .model-content[data-v-aedf30e6] .el-textarea{width:100%!important}.create-edit-model .model-container .model-content[data-v-aedf30e6] .el-select{width:180px}.create-edit-model .model-container .model-content[data-v-aedf30e6] .el-select .el-input{width:180px!important}.create-edit-model .model-container .model-content .model-name[data-v-aedf30e6] .el-input{width:66%!important}.create-edit-model .model-container .model-content .params-container[data-v-aedf30e6]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.create-edit-model .model-container .model-content .params-container .params-item[data-v-aedf30e6]{width:33.33%}.create-edit-model .model-container .model-content .cq-way[data-v-aedf30e6]{text-align:center;line-height:22px;background:#f0f1f3;font-size:10px;color:rgba(4,12,44,.65);width:180px;position:relative;bottom:8px}.create-edit-model .model-container .model-content .model-title[data-v-aedf30e6]{font-size:14px;font-weight:700;margin:20px 0}.create-edit-model .model-container .model-content .model-title[data-v-aedf30e6]:before{content:"";display:inline-block;width:3px;height:16px;background:#1740dc;margin-right:10px;position:relative;top:2px}.create-edit-model .buttons[data-v-aedf30e6]{position:fixed;height:6.3%;background:#fff;left:208px;right:0;bottom:0;text-align:right;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding-right:30px;z-index:10}',""])},"8bd8":function(e,t,a){"use strict";a.r(t);a("8e6e"),a("456d");var r=a("ade3"),o=(a("ac6a"),a("5df3"),a("96cf"),a("1da1")),l=(a("6762"),a("2fdb"),a("1d76"));function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s,m,c,d,u,p,f,h,g,b,y,x,v,w={name:"CreateOrEditModel",data:function(){return{form:{modelName:"",modelDesc:"",modelTypeName:"",modelClassifyType:null,algorithmTypeName:"",algorithmParams:[],trainRatio:"",databaseName:null,tabelId:null,primaryKey:null,inputs:[],outputs:[]},modelTypeNameList:[],algorithmTypeNameList:[],databaseNameList:[],tabelIdList:[],tableParamsList:[],modelClassifyTypeList:[{label:"二分类",value:"dichotomy"},{label:"多分类",value:"multi"}],state:""}},computed:{keyList:function(){var e=this;return this.tableParamsList.filter((function(t){return!(e.form.inputs.includes(t.value)||e.form.outputs.includes(t.value))}))},xList:function(){var e=this;return this.tableParamsList.filter((function(t){return!(e.form.outputs.includes(t.value)||e.form.primaryKey===t.value)}))},yList:function(){var e=this;return this.tableParamsList.filter((function(t){return!(e.form.inputs.includes(t.value)||e.form.primaryKey===t.value)}))}},mounted:(v=Object(o.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(localStorage.modelManagementState).state,this.state=t,"new"!==t){e.next=7;break}return e.next=5,Promise.all([this.modelSetFlow(),this.dataSetFlow()]);case 5:e.next=8;break;case 7:"edit"===t&&(a=JSON.parse(localStorage.modelManagementId).id,this.getModelDetail({id:a}));case 8:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)}),methods:{modelSetFlow:(x=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getModelTypeList();case 2:return this.form.modelTypeName="regression",e.next=5,this.getAlgorithmTypeList();case 5:return this.form.algorithmTypeName="linear",e.next=8,this.getAlgorithmParams();case 8:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)}),dataSetFlow:(y=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDbs();case 2:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)}),cancel:function(){this.$router.push("/modelManagement/algorithmModel"),this.$refs.form.resetFields()},save:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.saveModel()}))},getModelTypeList:(b=Object(o.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.h)();case 2:t=e.sent,a=t.data.data,this.modelTypeNameList=a;case 5:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)}),getAlgorithmTypeList:(g=Object(o.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.c)({modelTypeName:this.form.modelTypeName});case 2:t=e.sent,a=t.data.data,this.algorithmTypeNameList=a,this.form.algorithmTypeName=null;case 6:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)}),getAlgorithmParams:(h=Object(o.a)(regeneratorRuntime.mark((function e(){var t,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.b)({modelTypeName:this.form.modelTypeName,algorithmTypeName:this.form.algorithmTypeName});case 2:for(o in t=e.sent,a=t.data.data,this.form.algorithmParams=[],a)this.form.algorithmParams.push(Object(r.a)({},o,a[o]));case 6:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)}),getDbs:(f=Object(o.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.d)();case 2:t=e.sent,a=t.data.data,this.databaseNameList=a.map((function(e){return{label:e,value:e}}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)}),getTablesByDb:(p=Object(o.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.i)({dbName:this.form.databaseName});case 2:t=e.sent,a=t.data.data,this.tabelIdList=a;case 5:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)}),getTablesDetails:(u=Object(o.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.j)({tableId:this.form.tabelId});case 2:t=e.sent,a=t.data.data,this.tableParamsList=a;case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)}),saveModel:(d=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.form.algorithmParams.map((function(e){return{algorithmParamName:Object.keys(e)[0],algorithmParamValue:e[Object.keys(e)[0]]}})),"new"!==this.state){e.next=9;break}return e.next=4,Object(l.a)(i(i({},this.form),{},{algorithmParams:t}));case 4:0===e.sent.data.code&&(this.$message.success("模型创建成功！"),this.$refs.form.resetFields(),this.$router.push("/modelManagement/algorithmModel")),e.next=15;break;case 9:if("edit"!==this.state){e.next=15;break}return e.next=12,Object(l.k)(i(i({id:JSON.parse(localStorage.modelManagementId).id},this.form),{},{algorithmParams:t}));case 12:0===e.sent.data.code&&(this.$message.success("模型报错成功！"),this.$refs.form.resetFields(),this.$router.push("/modelManagement/algorithmModel"));case 15:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)}),getModelDetail:(c=Object(o.a)(regeneratorRuntime.mark((function e(t){var a,o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,Object(l.e)({id:a});case 3:return o=e.sent,n=o.data.data,this.form.modelName=n.modelName,this.form.modelDesc=n.modelDesc,this.form.trainRatio=n.trainRatio,this.form.algorithmParams=n.algorithmParams.map((function(e){return Object(r.a)({},e.algorithmParamName,e.algorithmParamValue)})),e.next=12,Promise.all([this.modelSetFlowDetails(n),this.dataSetFlowDetails(n)]);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)}),modelSetFlowDetails:(m=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getModelTypeList();case 2:return this.form.modelTypeName=t.modelTypeName,"classification"===this.form.modelTypeName&&(this.form.modelClassifyType=t.modelClassifyType),e.next=6,this.getAlgorithmTypeList();case 6:this.form.algorithmTypeName=t.algorithmTypeName;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)}),dataSetFlowDetails:(s=Object(o.a)(regeneratorRuntime.mark((function e(t){var a,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDbs();case 2:return this.form.databaseName=t.databaseName,e.next=5,this.getTablesByDb();case 5:return this.form.tabelId=t.tabelId,e.next=8,this.getTablesDetails();case 8:a=t.primaryKey,r=t.inputs,o=t.outputs,this.form.primaryKey=a,this.form.inputs=r,this.form.outputs=o;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)}),handleModelTypeNameChange:function(){this.getAlgorithmTypeList()},handleAlgorithmTypeNameChange:function(e){e&&this.getAlgorithmParams()},handleDatabaseNameChange:function(e){e&&this.getTablesByDb()},handleTableIdChange:function(e){e&&this.getTablesDetails()}}},k=(a("1f59"),a("2877")),N=Object(k.a)(w,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"create-edit-model"},[t("div",{staticClass:"model-header"},[e._v("\n    "+e._s("new"===e.state?"创建模型":"编辑模型")+"\n  ")]),t("div",{staticClass:"model-container"},[t("div",{staticClass:"model-content zt-scrollbar"},[t("el-form",{ref:"form",staticClass:"form model-form",attrs:{model:e.form,"label-width":"59px"}},[t("div",{staticClass:"model-title"},[e._v("基本信息")]),t("el-form-item",{staticClass:"model-name",attrs:{prop:"modelName",label:"模型名称","label-width":"70px",rules:[{max:15,message:"15个字符以内",trigger:"blur"},{required:!0,message:"请输入模型名称",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入模型名称"},model:{value:e.form.modelName,callback:function(t){e.$set(e.form,"modelName",t)},expression:"form.modelName"}})],1),t("el-form-item",{attrs:{prop:"modelDesc",label:"模型描述",rules:[{max:200,message:"200个字符以内",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"输入200字以内的模型描述",type:"textarea",rows:4},model:{value:e.form.modelDesc,callback:function(t){e.$set(e.form,"modelDesc",t)},expression:"form.modelDesc"}})],1),t("div",{staticClass:"model-title"},[e._v("模型配置")]),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"modelTypeName",label:"模型类型","label-width":"70px",rules:[{required:!0,message:"请旋转模型类型",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择模型类型"},on:{change:e.handleModelTypeNameChange},model:{value:e.form.modelTypeName,callback:function(t){e.$set(e.form,"modelTypeName",t)},expression:"form.modelTypeName"}},e._l(e.modelTypeNameList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1),"classification"===e.form.modelTypeName?t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"modelClassifyType",label:"分类类型","label-width":"70px",rules:[{required:!0,message:"请选择分类类型",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择分类类型"},model:{value:e.form.modelClassifyType,callback:function(t){e.$set(e.form,"modelClassifyType",t)},expression:"form.modelClassifyType"}},e._l(e.modelClassifyTypeList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1):e._e(),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"algorithmTypeName",label:"算法类型","label-width":"70px",rules:[{required:!0,message:"请输入算法类型",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择算法类型"},on:{change:e.handleAlgorithmTypeNameChange},model:{value:e.form.algorithmTypeName,callback:function(t){e.$set(e.form,"algorithmTypeName",t)},expression:"form.algorithmTypeName"}},e._l(e.algorithmTypeNameList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1),t("el-row",[t("div",{staticStyle:{margin:"0px 0px 10px 2px","font-size":"12px"}},[e._v("算法参数")]),t("div",{staticClass:"params-container"},e._l(e.form.algorithmParams,(function(a,r){return t("div",{key:r,staticClass:"params-item"},e._l(a,(function(o,l){return t("el-form-item",{key:l,attrs:{prop:"algorithmParams."+r+"."+l,label:l,"label-width":"auto"}},[t("el-input",{attrs:{placeholder:"输入数值"},model:{value:a[l],callback:function(t){e.$set(a,l,t)},expression:"param[k]"}})],1)})),1)})),0)]),t("div",{staticClass:"model-title"},[e._v("训练验证集")]),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"trainRatio",label:"验证集比例","label-width":"85px",rules:[{required:!0,message:"请输入验证集比例",trigger:"blur"},{pattern:/^0\.\d{2}$/,message:"请输入0.01~0.99之间的数值",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入0.01~0.99之间的数值"},model:{value:e.form.trainRatio,callback:function(t){e.$set(e.form,"trainRatio",t)},expression:"form.trainRatio"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",[t("div",{staticClass:"cq-way"},[e._v("抽取方式：随机抽取")])])],1)],1),t("div",{staticClass:"model-title"},[e._v("配置数据")]),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"databaseName",label:"数据库",rules:[{required:!0,message:"请选择数据库",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择数据库"},on:{change:e.handleDatabaseNameChange},model:{value:e.form.databaseName,callback:function(t){e.$set(e.form,"databaseName",t)},expression:"form.databaseName"}},e._l(e.databaseNameList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"tabelId",label:"表",rules:[{required:!0,message:"请选择表",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择表"},on:{change:e.handleTableIdChange},model:{value:e.form.tabelId,callback:function(t){e.$set(e.form,"tabelId",t)},expression:"form.tabelId"}},e._l(e.tabelIdList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"primaryKey",label:"主键",rules:[{required:!0,message:"请选择主键",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择主键",clearable:""},model:{value:e.form.primaryKey,callback:function(t){e.$set(e.form,"primaryKey",t)},expression:"form.primaryKey"}},e._l(e.keyList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1),t("el-row",{attrs:{type:"flex"}},["clustering"!==e.form.modelTypeName?t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"outputs",label:"选择y",rules:[{required:!0,message:"请选择字段",trigger:"blur"}]}},[t("el-select",{attrs:{placeholder:"请选择字段",multiple:"","collapse-tags":"",clearable:""},model:{value:e.form.outputs,callback:function(t){e.$set(e.form,"outputs",t)},expression:"form.outputs"}},e._l(e.yList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1):e._e(),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"inputs",label:"选择x",rules:[{required:!0,message:"请选择字段",trigger:"blur"}]}},[t("el-select",{attrs:{placeholder:"请选择字段",multiple:"","collapse-tags":"",clearable:""},model:{value:e.form.inputs,callback:function(t){e.$set(e.form,"inputs",t)},expression:"form.inputs"}},e._l(e.xList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1)],1)],1),t("div",{staticClass:"buttons"},[t("el-button",{on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)])])}),[],!1,null,"aedf30e6",null);t.default=N.exports},f9ad:function(e,t,a){var r=a("6dc3");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("0a1d3c9e",r,!0,{sourceMap:!1,shadowMode:!1})}}]);