(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-62c57827"],{"002e":function(e,t,a){"use strict";a("bdb5")},"0053":function(e,t,a){"use strict";a.d(t,"B",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"u",(function(){return o})),a.d(t,"A",(function(){return c})),a.d(t,"s",(function(){return l})),a.d(t,"E",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"J",(function(){return p})),a.d(t,"I",(function(){return f})),a.d(t,"H",(function(){return v})),a.d(t,"G",(function(){return h})),a.d(t,"M",(function(){return m})),a.d(t,"z",(function(){return g})),a.d(t,"t",(function(){return b})),a.d(t,"r",(function(){return y})),a.d(t,"f",(function(){return S})),a.d(t,"l",(function(){return x})),a.d(t,"d",(function(){return w})),a.d(t,"i",(function(){return _})),a.d(t,"p",(function(){return k})),a.d(t,"m",(function(){return C})),a.d(t,"g",(function(){return D})),a.d(t,"C",(function(){return I})),a.d(t,"o",(function(){return O})),a.d(t,"h",(function(){return j})),a.d(t,"y",(function(){return L})),a.d(t,"x",(function(){return T})),a.d(t,"e",(function(){return A})),a.d(t,"n",(function(){return P})),a.d(t,"D",(function(){return R})),a.d(t,"k",(function(){return N})),a.d(t,"j",(function(){return $})),a.d(t,"F",(function(){return G})),a.d(t,"q",(function(){return z})),a.d(t,"L",(function(){return B})),a.d(t,"v",(function(){return U})),a.d(t,"w",(function(){return M})),a.d(t,"c",(function(){return E})),a.d(t,"K",(function(){return q}));var r=a("2b0e"),i=a("fedb"),n=function(e){return r.default.http.post(i.a.getDataServiceGroupList,e)},s=function(e){return r.default.http.post(i.a.addDataServiceGroup,e)},o=function(e){return r.default.http.post(i.a.editDataServiceGroup,e)},c=function(e){return r.default.http.get(i.a.getDataServiceGroupDetailById+"/".concat(e))},l=function(e){return r.default.http.get(i.a.deleteDataServiceGroupById+"/".concat(e))},u=function(e){return r.default.http.post(i.a.getDataServiceListPage,e)},d=function(e){return r.default.http.post(i.a.addDataService,e)},p=function(e){return r.default.http.get(i.a.getGroupServiceUrl+e)},f=function(e){var t=e.conId;return r.default.http.get(i.a.getDataserviceDataBase+"/".concat(t))},v=function(e){var t=e.dbName,a=e.conId;return r.default.http.get(i.a.getDataServiceTables+"?dbName=".concat(t,"&conId=").concat(a))},h=function(e){var t=e.conId,a=e.dbName,n=e.tableName;return r.default.http.get(i.a.getDataServiceTableStructure+"?conId=".concat(t,"&dbName=").concat(a,"&tableName=").concat(n))},m=function(e){return r.default.http.get(i.a.getTableInfoListDataTypes+"?type="+e)},g=function(e){var t=e.id;return r.default.http.get(i.a.getDataServiceDetailById+"/".concat(t))},b=function(e){return r.default.http.post(i.a.editDataService,e)},y=function(e){var t=e.limit,a=e.page,n=e.serviceId;return r.default.http.get(i.a.dataServiceUserAuthorizationList+"?limit=".concat(t,"&page=").concat(a,"&serviceId=").concat(n))},S=function(e){var t=e.applyId;return r.default.http.get(i.a.dataServiceApprove+"?applyId=".concat(t))},x=function(e){var t=e.applyId;return r.default.http.get(i.a.dataServiceReject+"?applyId=".concat(t))},w=function(e){return r.default.http.post(i.a.dataServiceActiveApprove,e)},_=function(e){var t=e.serviceId;return r.default.http.get(i.a.dataServiceGetParams+"?serviceId=".concat(t))},k=function(e){return r.default.http.post(i.a.dataServiceTest,e,{timeout:18e4})},C=function(e){var t=e.serviceId;return r.default.http.get(i.a.dataServiceRelease+"?serviceId=".concat(t))},D=function(e){return r.default.http.post(i.a.dataServiceCopy,e)},I=function(){return r.default.http.get(i.a.getDataServiceGroupListWithoutPagination)},O=function(e){var t=e.serviceId;return r.default.http.get(i.a.dataServiceRevoke+"?serviceId=".concat(t))},j=function(e){var t=e.serviceId;return r.default.http.get(i.a.dataServiceDelete+"?serviceId=".concat(t))},L=function(e){return r.default.http.post(i.a.getDataServiceAuthList,e)},T=function(e){return r.default.http.post(i.a.getDataServiceApplyList,e)},A=function(e){var t=e.applyId;return r.default.http.get(i.a.dataServiceApplyDelete+"?applyId=".concat(t))},P=function(e){return r.default.http.post(i.a.dataServiceRenewal,e)},R=function(e){return r.default.http.post(i.a.getDataServiceListGroupPage,e)},N=function(e){return r.default.http.post(i.a.dataServiceNewApply,e)},$=function(e){var t=e.serviceId;return r.default.http.get(i.a.dataServiceInfo+"?serviceId=".concat(t))},G=function(e){var t=e.serviceId,a=e.type;return r.default.http.get(i.a.getDataServiceMonitorInfo+"/".concat(t,"/").concat(a))},z=function(e){var t=e.serviceId;return r.default.http.get(i.a.dataServiceUser+"?serviceId=".concat(t))},B=function(e){return r.default.http.post(i.a.getServiceLogList,e)},U=function(){return r.default.http.post(i.a.getCallUserList)},M=function(){return r.default.http.post(i.a.getCreateUserListOfService)},E=function(e){return r.default.http.get(i.a.checkServiceName,{params:e})},q=function(){return r.default.http.get(i.a.getServeLimitDictionary)}},"181c":function(e,t,a){"use strict";a("96cf");var r,i,n,s=a("1da1"),o=a("ade3"),c=(a("ac6a"),a("c5f6"),a("0053")),l={name:"TestAndPublish",props:{isShowTest:{type:Boolean,default:!1},mode:{type:String,default:"test"},serviceId:{type:Number},typeId:{type:String,default:""}},data:function(){return{testLoading:!1,publicLoading:!1,form:{paramsList:[]},serviceName:"",serviceUrl:"",requestType:null,appId:null,token:null,testResult:null,testCode:null,responseTime:null,dataTypeListRegExp:{INT:/^-?\d+$/,BIGINT:/^-?\d+$/,FLOAT:/^(-?\d+)(\.\d+)?$/,DOUBLE:/^(-?\d+)(\.\d+)?$/,BOOLEAN:/true|false/,STRING:/.*/,DATE:/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/,DATETIME:/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])\s+(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/,TIMESTAMP:/\d{13}/}}},computed:{requestBody:function(){var e,t=[];return this.form.paramsList&&null!==(e=this.form.paramsList)&&void 0!==e&&e.length&&this.form.paramsList.forEach((function(e){t.push(Object(o.a)({},e.paramName,e.value))})),t}},methods:{handleDialogClose:function(){this.testCode=null,this.testResult=[],this.$refs.form.resetFields(),this.$emit("close")},handleTest:function(){var e=this;this.testLoading=!0,this.$refs.form.validate((function(t){if(!t)return!1;e.dataServiceTest()}))},handlePublish:function(){this.publicLoading=!0,this.dataServiceRelease()},handleCancel:function(){this.testCode=null,this.testResult=[],this.$emit("close")},handleDialogOpen:function(){this.dataServiceGetParams()},dataServiceGetParams:(n=Object(s.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,n,s,o,l,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.i)({serviceId:this.serviceId});case 2:t=e.sent,a=t.data,r=a.code,i=a.data,n=i.params,s=i.requestType,o=i.serviceName,l=i.serviceUrl,u=i.appId,d=i.token,0===r&&(this.form.paramsList=n,this.requestType=s,this.serviceName=o,this.serviceUrl=l,this.appId=u,this.token=d);case 13:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),dataServiceTest:(i=Object(s.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.p)({serviceId:this.serviceId,params:this.form.paramsList});case 3:t=e.sent,a=t.data,r=a.code,i=a.data,n=i.jsonData,s=i.responseTime,this.testLoading=!1,this.testCode=r,this.testResult=n,this.responseTime=s,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),this.testLoading=!1,this.testCode=-1;case 19:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(){return i.apply(this,arguments)}),dataServiceRelease:(r=Object(s.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.m)({serviceId:this.serviceId});case 2:t=e.sent,a=t.data.code,this.publicLoading=!1,0===a&&(this.$message.success("服务发布成功"),this.handleDialogClose(),this.$emit("refresh"));case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}},u=(a("002e"),a("2877")),d=Object(u.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"test-and-publish"},[t("el-dialog",{attrs:{visible:e.isShowTest,title:"test"===e.mode?"测试服务":"发布到服务中心"},on:{close:e.handleDialogClose,open:e.handleDialogOpen}},["-3"!=e.typeId?t("el-alert",{attrs:{title:"提示：发布"+e.serviceName+"到服务中心之前，请先测试",type:"info",closable:!1}}):e._e(),t("div",{staticClass:"basic-info"},[t("div",{staticClass:"title"},[e._v("基本信息")]),t("div",{staticClass:"content"},[t("div",{staticClass:"item"},[e._v("数据服务名称： "+e._s(e.serviceName))]),t("div",{staticClass:"item"},[e._v("数据服务路径： "+e._s(e.serviceUrl))]),t("div",{staticClass:"item"},[e._v("请求方式："+e._s(0===e.requestType?"GET":"POST"))])])]),t("div",{staticClass:"params-list"},[t("div",{staticClass:"title"},[e._v(e._s(0===e.requestType?"GET":"POST")+"请求")]),t("el-form",{ref:"form",attrs:{model:e.form,size:"mini"}},[t("el-table",{attrs:{"max-height":"200px",data:e.form.paramsList}},[t("el-table-column",{attrs:{prop:"paramName",label:"参数名称"}}),t("el-table-column",{attrs:{prop:"paramType",label:"参数类型"}}),t("el-table-column",{attrs:{label:"是否必填"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.isRequired?"必填":"非必填")+"\n            ")]}}])}),t("el-table-column",{attrs:{label:"值",prop:"value"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"paramsList."+a.$index+".value",rules:a.row.isRequired?[{required:!0,message:"请输入参数值",trigger:"blur"},{pattern:e.dataTypeListRegExp[a.row.paramType],message:"请输入正确的参数类型",trigger:"blur"}]:[{pattern:e.dataTypeListRegExp[a.row.paramType],message:"请输入正确的参数类型",trigger:"blur"}]}},[t("el-input",{model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}})],1)]}}])})],1)],1)],1),null!==e.testCode?t("div",{staticClass:"test-result"},[0===e.testCode?t("div",{staticClass:"success"},[e._v("已通过测试")]):e._e(),0!==e.testCode?t("div",{staticClass:"error"},[e._v("测试失败")]):e._e()]):e._e(),t("div",{staticClass:"request-detail"},[t("div",{staticClass:"title"},[t("span",[e._v("请求详情："),null!==e.testCode?t("span",[e._v(e._s(0===e.testCode?"成功":"失败"))]):e._e()]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",[e._v("响应时间："+e._s(e.responseTime)+"ms")])],1),t("div",{staticClass:"content"},[t("div",{staticClass:"item"},[e._v(e._s(0===e.requestType?"GET":"POST")+"  "+e._s(e.serviceUrl))]),t("div",{staticClass:"item"},[e._v(e._s("header: {appid="+e.appId+",timestamp="+(new Date).getTime()+",token="+e.token+"}"))]),t("div",{staticClass:"item"},[e._v(e._s("body: "+JSON.stringify(e.requestBody)))])])]),t("div",{staticClass:"response-detail"},[t("div",{staticClass:"title"},[e._v("返回内容")]),t("div",{staticClass:"content"},e._l(e.testResult,(function(a,r){return t("div",{key:r,staticClass:"item"},[e._v(e._s(a))])})),0)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["-3"==e.typeId?t("div",[t("el-button",{attrs:{type:"primary",loading:e.publicLoading},on:{click:e.handlePublish}},[e._v("发 布")]),t("el-button",{on:{click:e.handleCancel}},[e._v("取 消")])],1):t("div",["publish"===e.mode?t("el-button",{attrs:{type:"primary",disabled:0!==e.testCode,loading:e.publicLoading},on:{click:e.handlePublish}},[e._v("发 布")]):e._e(),t("el-button",{attrs:{type:"primary",loading:e.testLoading},on:{click:e.handleTest}},[e._v("测 试")]),t("el-button",{on:{click:e.handleCancel}},[e._v("取 消")])],1)])],1)],1)}),[],!1,null,"efa3c94c",null);t.a=d.exports},"21a9":function(e,t,a){var r=a("77fe");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("61b708bf",r,!0,{sourceMap:!1,shadowMode:!1})},"22f9":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-7a62240a]{color:#1740dc}.success-color[data-v-7a62240a]{color:#52c41a}.warning-color[data-v-7a62240a]{color:#faad14}.error-color[data-v-7a62240a]{color:#f5222d}.info-color[data-v-7a62240a]{color:#909399}.border-color[data-v-7a62240a]{border:1px solid #e5e6e9}.filter_conter[data-v-7a62240a]{font-size:12px;color:rgba(4,12,44,.85);padding-bottom:13px}.filter_conter ul>li[data-v-7a62240a]{height:28px;line-height:28px;padding-left:12px}.filter_conter ul>li.active[data-v-7a62240a]{background:#f2f3f4}.filter_footer[data-v-7a62240a]{border-top:1px solid #e5e6e9;margin:0 -12px;text-align:center;padding-top:10px}.filter_footer .el-button--mini[data-v-7a62240a]{padding:5px 14px}",""])},"386b":function(e,t,a){var r=a("5ca1"),i=a("79e5"),n=a("be13"),s=/"/g,o=function(e,t,a,r){var i=String(n(e)),o="<"+t;return""!==a&&(o+=" "+a+'="'+String(r).replace(s,"&quot;")+'"'),o+">"+i+"</"+t+">"};e.exports=function(e,t){var a={};a[e]=t(o),r(r.P+r.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",a)}},"46b0":function(e,t,a){"use strict";a("52eb")},"52eb":function(e,t,a){var r=a("6fe8");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("45440b17",r,!0,{sourceMap:!1,shadowMode:!1})},6626:function(e,t,a){var r=a("c119b");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("485d558b",r,!0,{sourceMap:!1,shadowMode:!1})},"6fe8":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-18fa3ff0]{color:#1740dc}.success-color[data-v-18fa3ff0]{color:#52c41a}.warning-color[data-v-18fa3ff0]{color:#faad14}.error-color[data-v-18fa3ff0]{color:#f5222d}.info-color[data-v-18fa3ff0]{color:#909399}.border-color[data-v-18fa3ff0]{border:1px solid #e5e6e9}.customer-table[data-v-18fa3ff0]{width:100%;height:100%}",""])},"77fe":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.apply-btn{vertical-align:initial}",""])},"7ced":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-efa3c94c]{color:#1740dc}.success-color[data-v-efa3c94c]{color:#52c41a}.warning-color[data-v-efa3c94c]{color:#faad14}.error-color[data-v-efa3c94c]{color:#f5222d}.info-color[data-v-efa3c94c]{color:#909399}.border-color[data-v-efa3c94c]{border:1px solid #e5e6e9}.test-and-publish[data-v-efa3c94c] .el-form-item__error{position:relative!important}.test-and-publish .basic-info .title[data-v-efa3c94c]{font-size:14px;font-weight:700;margin:15px 0}.test-and-publish .basic-info .content[data-v-efa3c94c]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.test-and-publish .basic-info .content .item[data-v-efa3c94c]{padding-left:30px;margin-bottom:15px}.test-and-publish .basic-info .content .item[data-v-efa3c94c]:first-child{width:30%}.test-and-publish .basic-info .content .item[data-v-efa3c94c]:nth-child(2){width:50%}.test-and-publish .basic-info .content .item[data-v-efa3c94c]:nth-child(3){width:20%}.test-and-publish .params-list .title[data-v-efa3c94c]{font-size:14px;font-weight:700;margin-bottom:15px}.test-and-publish .test-result[data-v-efa3c94c]{margin:15px;font-size:12px}.test-and-publish .test-result .success[data-v-efa3c94c]{color:#1740dc;text-align:right;line-height:25px}.test-and-publish .test-result .error[data-v-efa3c94c]{color:#f5222d;text-align:right;line-height:25px}.test-and-publish .request-detail[data-v-efa3c94c],.test-and-publish .response-detail[data-v-efa3c94c]{margin-top:10px}.test-and-publish .request-detail .title[data-v-efa3c94c],.test-and-publish .response-detail .title[data-v-efa3c94c]{font-size:14px;font-weight:700;margin-bottom:15px}.test-and-publish .request-detail .content[data-v-efa3c94c],.test-and-publish .response-detail .content[data-v-efa3c94c]{max-height:200px;border:1px solid #d7d7d7;background:#f2f2f2;overflow:auto;padding:15px;margin-bottom:15px}.test-and-publish .request-detail .content .item[data-v-efa3c94c],.test-and-publish .response-detail .content .item[data-v-efa3c94c]{font-size:12px;line-height:30px}",""])},"7df0":function(e,t,a){"use strict";a("bcb8")},8010:function(e,t,a){"use strict";a("6626")},"876f":function(e,t,a){var r=a("22f9");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("4aaa896b",r,!0,{sourceMap:!1,shadowMode:!1})},"895c":function(e,t,a){"use strict";a("876f")},a80f:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-3e4f1f4e]{color:#1740dc}.success-color[data-v-3e4f1f4e]{color:#52c41a}.warning-color[data-v-3e4f1f4e]{color:#faad14}.error-color[data-v-3e4f1f4e]{color:#f5222d}.info-color[data-v-3e4f1f4e]{color:#909399}.border-color[data-v-3e4f1f4e]{border:1px solid #e5e6e9}.service-copy .title[data-v-3e4f1f4e]{font-weight:700;font-size:14px;margin-bottom:15px}",""])},bcb8:function(e,t,a){var r=a("a80f");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("07846c22",r,!0,{sourceMap:!1,shadowMode:!1})},bdb5:function(e,t,a){var r=a("7ced");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("70ee8477",r,!0,{sourceMap:!1,shadowMode:!1})},bee8:function(e,t,a){"use strict";a.r(t);a("386d"),a("8e6e"),a("ac6a"),a("456d"),a("96cf");var r=a("1da1"),i=a("ade3"),n=a("0053"),s=a("d672"),o=a("181c");a("c5f6");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u,d,p,f,v={name:"ActiveAuth",props:{isShowActiveAuth:{type:Boolean,default:!1},serviceId:{type:Number}},data:function(){return{form:{userNameId:"",applierDeadline:"",isForever:0,applyReason:""},pickerBeginDateBefore:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},methods:{handleClose:function(){this.$emit("close"),this.$refs.form.resetFields()},handleCancel:function(){this.$emit("close")},activeApprove:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.dataServiceActiveApprove()}))},dataServiceActiveApprove:(u=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.d)(l(l({},this.form),{},{applyServiceId:this.serviceId}));case 2:0===e.sent.data.code&&(this.$message.success("授权成功！"),this.$emit("close"));case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})}},h=a("2877"),m=Object(h.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"active-auth"},[t("el-dialog",{attrs:{title:"主动授权",visible:e.isShowActiveAuth},on:{close:e.handleClose}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"left","label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名：",prop:"userNameId",rules:{required:!0,message:"请输入用户ID或用户名",trigger:"blur"}}},[t("el-input",{attrs:{placeholder:"请输入用户ID或用户名"},model:{value:e.form.userNameId,callback:function(t){e.$set(e.form,"userNameId",t)},expression:"form.userNameId"}})],1),t("el-form-item",{attrs:{label:"有效期：",required:!0}},[t("el-row",{attrs:{type:"flex"}},[t("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{prop:"applierDeadline",rules:e.form.isForever?null:{required:!0,message:"请选择日期",trigger:"change"}}},[t("el-date-picker",{attrs:{disabled:!!e.form.isForever,type:"datetime",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerBeginDateBefore},model:{value:e.form.applierDeadline,callback:function(t){e.$set(e.form,"applierDeadline",t)},expression:"form.applierDeadline"}})],1),t("el-form-item",{attrs:{prop:"isForever"}},[t("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.form.isForever,callback:function(t){e.$set(e.form,"isForever",t)},expression:"form.isForever"}},[e._v("长期")])],1)],1)],1),t("el-form-item",{attrs:{prop:"applyReason",label:"理由",rules:[{required:!0,message:"请输入理由",trigger:"blur"},{max:50,min:2,message:"请输入2-50个字符",trigger:"blur"}]}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.applyReason,callback:function(t){e.$set(e.form,"applyReason",t)},expression:"form.applyReason"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.activeApprove}},[e._v("确定授权")]),t("el-button",{on:{click:e.handleCancel}},[e._v("取 消")])],1)],1)],1)}),[],!1,null,"cc08a628",null).exports,g={name:"ApplyAuth",props:{isShowApplyAuth:{type:Boolean,default:!1},serviceId:{type:Number}},data:function(){return{authList:[],limit:10,page:1,total:null}},mounted:function(){},methods:{handleDialogClose:function(){this.$emit("close")},handlePass:function(e){this.dataServiceApprove({applyId:e.row.applyId})},handleReject:function(e){this.dataServiceReject({applyId:e.row.applyId})},handleSizeChange:function(e){this.limit=e},handleCurrentChange:function(e){this.page=e},dataServiceUserAuthorizationList:(f=Object(r.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.r)({limit:this.limit,page:this.page,serviceId:this.serviceId});case 2:t=e.sent,a=t.data,r=a.page,i=r.records,s=r.total,0===a.code&&(this.authList=i,this.total=s);case 9:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)}),dataServiceReject:(p=Object(r.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.applyId,e.next=3,Object(n.l)({applyId:a});case 3:0===e.sent.data.code&&(this.$message.success("授权已拒绝"),this.dataServiceUserAuthorizationList(),this.$emit("refresh"));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)}),dataServiceApprove:(d=Object(r.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.applyId,e.next=3,Object(n.f)({applyId:a});case 3:0===e.sent.data.code&&(this.$message.success("授权成功"),this.dataServiceUserAuthorizationList(),this.$emit("refresh"));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})}},b=Object(h.a)(g,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"apply-auth"},[t("el-dialog",{attrs:{visible:e.isShowApplyAuth,title:"审批"},on:{close:e.handleDialogClose,open:e.dataServiceUserAuthorizationList}},[t("el-table",{attrs:{data:e.authList}},[t("el-table-column",{attrs:{width:"140",prop:"applyTime",label:"申请时间"}}),t("el-table-column",{attrs:{prop:"applyUserName",label:"用户名"}}),t("el-table-column",{attrs:{prop:"applyReason",label:"申请理由"}}),t("el-table-column",{attrs:{width:"140",label:"失效时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1===t.row.isForever?"长期":t.row.applierDeadline)+"\n        ")]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handlePass(a)}}},[e._v("通过")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleReject(a)}}},[e._v("拒绝")])]}}])})],1),t("div",{staticClass:"pagation"},[t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)}),[],!1,null,"22f855ea",null).exports;function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x,w,_={name:"ServiceCopy",props:{isShowServiceCopy:{type:Boolean,default:!1},serviceDetail:{type:Object,default:function(){return{}}}},data:function(){return{copyLoading:!1,form:{serviceName:"",groupId:null},serviceGroupList:[],btnState:!1}},methods:{handleDialogClose:function(){this.$refs.form.resetFields(),this.$emit("close")},handleDialogOpen:function(){this.getDataServiceGroupListWithoutPagination()},getDataServiceGroupListWithoutPagination:(w=Object(r.a)(regeneratorRuntime.mark((function e(){var t,a,r,i,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.C)();case 2:t=e.sent,a=t.data,r=a.code,i=a.data,0===r&&(this.serviceGroupList=[],i.forEach((function(e){s.serviceGroupList.push({label:e.serviceGroupName,value:String(e.id)})})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)}),dataServiceCopy:(x=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.btnState=!0,e.prev=1,e.next=4,Object(n.g)(S({serviceId:this.serviceDetail.id},this.form));case 4:0===e.sent.data.code&&(this.$message.success("复制成功"),this.$emit("refresh"),this.$emit("close"));case 7:return e.prev=7,this.btnState=!1,this.copyLoading=!1,e.finish(7);case 11:case"end":return e.stop()}}),e,this,[[1,,7,11]])}))),function(){return x.apply(this,arguments)}),copyService:function(){var e=this;this.$refs.form.validate(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(a){var r,i,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=22;break}return e.copyLoading=!0,t.prev=2,t.next=5,Object(n.c)({serviceName:e.form.serviceName});case 5:if(r=t.sent,i=r.data,s=i.msg,o=i.code,e.copyLoading=!1,0===o){t.next=13;break}return e.$message.error(s),t.abrupt("return");case 13:t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(2),e.copyLoading=!1,t.abrupt("return");case 19:e.dataServiceCopy(),t.next=23;break;case 22:return t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e){return t.apply(this,arguments)}}())}}},k=(a("7df0"),Object(h.a)(_,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"service-copy"},[t("el-dialog",{attrs:{visible:e.isShowServiceCopy,title:"复制服务"},on:{close:e.handleDialogClose,open:e.handleDialogOpen}},[t("div",{staticClass:"title"},[e._v("复制【"+e._s(e.serviceDetail&&e.serviceDetail.serviceName)+"】")]),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[t("el-form-item",{attrs:{prop:"serviceName",label:"服务名称：",rules:[{required:!0,message:"请输入服务名称",trigger:"blur"}]}},[t("el-input",{attrs:{maxlength:"20",placeholder:"请输入"},model:{value:e.form.serviceName,callback:function(t){e.$set(e.form,"serviceName",t)},expression:"form.serviceName"}})],1),t("el-form-item",{attrs:{prop:"groupId",label:"复制到服务组：",rules:[{required:!0,messge:"请选择服务组"}]}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.groupId,callback:function(t){e.$set(e.form,"groupId",t)},expression:"form.groupId"}},e._l(e.serviceGroupList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",disabled:e.btnState,loading:e.copyLoading},on:{click:e.copyService}},[e._v("确认")]),t("el-button",{on:{click:e.handleDialogClose}},[e._v("取消")])],1)],1)],1)}),[],!1,null,"3e4f1f4e",null).exports),C=a("2f62");function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var I,O,j,L,T={name:"ServiceList",data:function(){return{loading:!1,isHighLevelSearch:!1,dialogVisible:!1,isShowToken:!1,resetServeName:"",newToken:"",serviceName:"",serviceState:null,searchUserId:"",serviceDescription:"",appidToken:"",createUserList:[],dataList:[],labelMap:{serviceName:{name:"服务名称"},serviceDescription:{name:"服务描述"},dataSourceTypeName:{name:"数据源类型"},serviceState:{name:"服务状态",filters:[{text:"全部",value:null},{text:"未发布",value:0},{text:"已发布",value:1}]},createName:{name:"创建人"},useNum:{name:"使用人数"},createTime:{name:"创建时间",sortable:!0},operator:{name:"操作",align:"right"}},createTimeSort:null,currentPage:1,currentSize:10,total:0,isShowTest:!1,mode:"test",isShowActiveAuth:!1,isShowApplyAuth:!1,isShowServiceCopy:!1,serviceStateList:[],dataServiceGroupDetail:null,serviceId:null,ptypeId:"",serviceDetail:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(C.c)("old",["admin_info"])),activated:function(){this.getDataServiceListPage(),this.getDataServiceGroupDetailById()},mounted:function(){this.getDataServiceListPage(),this.getDataServiceGroupDetailById(),this.getCreateUserList()},methods:{getCreateUserList:function(){var e=this;this.$API.get(this.$URL.getServiceListCreateUserList+localStorage.dataServiceGroupId,{},(function(t){0==t.code?e.createUserList=t.data:e.$message.error(t.msg)}))},getDetail:function(e){this.$router.push({name:"getServiceDetail",params:{id:e.id}})},handleFilterChange:function(e){"serviceState"===e.prop&&(this.serviceState=e.value,this.currentPage=1,this.getDataServiceListPage())},handleRefresh:function(){this.getDataServiceListPage()},look:function(){this.isShowToken=!0},copy:function(){var e=document.querySelector(".copied"),t=document.createRange(),a=e.childNodes.length;t.setStart(e,0),t.setEnd(e,a);var r=window.getSelection();r.removeAllRanges(),r.addRange(t),document.execCommand("copy",!1,null),r.removeRange(t)},handleSortChange:function(e){"createTime"===e.prop&&(this.createTimeSort=e.order?{ascending:"asc",descending:"desc"}[e.order]:null),this.getDataServiceListPage()},handleSizeChange:function(e){this.currentSize=e,this.getDataServiceListPage()},handleCurrentChange:function(e){this.currentPage=e,this.getDataServiceListPage()},handleNewService:function(){this.$router.push("/newService"),localStorage.dataServiceNewOrEdit="new"},edit:function(e){if(localStorage.dataServiceNewOrEdit="edit",localStorage.dataServiceId=e.id,"-3"==e.typeId)return this.$router.push("/dataTaskServer?dataServiceId=".concat(e.id));this.$router.push("/newService?connectId=".concat(e.connectId))},handleTest:function(e){this.isShowTest=!0,this.mode="test",this.serviceId=e.id},handlePublish:function(e){this.isShowTest=!0,this.mode="publish",this.serviceId=e.id,this.ptypeId=e.typeId},handleActiveAuth:function(e){this.isShowActiveAuth=!0,this.serviceId=e.id},handleApplyAuth:function(e){this.serviceId=e.id,this.isShowApplyAuth=!0},handleDown:function(e){this.dataServiceRevoke({serviceId:e.id})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.dataServiceDelete({serviceId:e.id})})).catch((function(){}))},copyService:function(e){this.isShowServiceCopy=!0,this.serviceDetail=e},resetToken:function(e){var t=this;this.$confirm("重置后将影响原有线上服务，确认重置？","提示",{confirmButtonText:"重置",cancelButtonText:"取消",type:"warning"}).then((function(){var a={serviceId:e.id};t.$API.get(t.$URL.dataServiceResetPerminssion,a,(function(e){0==e.code?(t.resetServeName="",t.dialogVisible=!0,t.newToken=e.data,t.getDataServiceListPage()):t.$message.error(e.msg)}))})).catch((function(){}))},dataServiceResetGroupPerminssion:function(){var e=this;this.$confirm("重置后将影响原有线上服务，确认重置？","提示",{confirmButtonText:"重置",cancelButtonText:"取消",type:"warning"}).then((function(){var t={groupId:localStorage.dataServiceGroupId};e.$API.get(e.$URL.dataServiceResetGroupPerminssion,t,(function(t){0==t.code?(e.resetServeName="服务组",e.dialogVisible=!0,e.newToken=t.data,e.getDataServiceListPage()):e.$message.error(t.msg)}))})).catch((function(){}))},getDataServiceListPage:(L=Object(r.a)(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Object(n.E)({current:this.currentPage,size:this.currentSize,serviceName:this.serviceName,serviceState:this.serviceState,searchUserId:this.searchUserId,serviceDescription:this.serviceDescription,appidToken:this.appidToken,groupId:localStorage.dataServiceGroupId,sort:this.createTimeSort});case 3:t=e.sent,a=t.data.page,r=a.records,i=a.total,this.total=i,this.dataList=r,this.loading=!1,this.currentPage>1&&!this.dataList.length&&(this.currentPage=1,this.getDataServiceListPage());case 11:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)}),dataServiceRevoke:(j=Object(r.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.serviceId,e.next=3,Object(n.o)({serviceId:a});case 3:0===e.sent.data.code&&(this.$message.success("下线成功"),this.getDataServiceListPage());case 6:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)}),dataServiceDelete:(O=Object(r.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.serviceId,e.next=3,Object(n.h)({serviceId:a});case 3:0===e.sent.data.code&&(this.$message({type:"success",message:"删除成功!"}),this.getDataServiceListPage());case 6:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)}),search:function(){this.handleCurrentChange(1)},reset:function(){this.serviceName="",this.searchUserId="",this.serviceDescription="",this.appidToken="",this.search()},getDataServiceGroupDetailById:(I=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.A)(localStorage.dataServiceGroupId);case 2:a=e.sent,r=a.data,i=r.code,s=r.data,0===i&&(this.dataServiceGroupDetail=s);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)}),gotoDetail:function(e){localStorage.dataServiceDetailId=e.id,this.$router.push("/dataServiceDetail")}},components:{CustomerTable:s.a,TestAndPublish:o.a,ActiveAuth:m,ApplyAuth:b,ServiceCopy:k}},A=(a("f8c8"),a("8010"),Object(h.a)(T,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"service-list"},[e.dataServiceGroupDetail?t("div",{staticClass:"service-list-header"},[t("div",{staticClass:"title"},[e._v(e._s(e.dataServiceGroupDetail.serviceGroupName))]),t("div",{staticClass:"list-detail"},[t("div",{staticClass:"item"},[e._v("创建人："+e._s(e.dataServiceGroupDetail.createName))]),t("div",{staticClass:"item"},[e._v("创建时间："+e._s(e.dataServiceGroupDetail.createTime))]),t("div",{staticClass:"item"},[e._v("服务组路径：\n        "),t("el-tooltip",{attrs:{effect:"dark",content:e.dataServiceGroupDetail.serviceGroupPath,placement:"top-start"}},[t("div",{staticClass:"desc"},[e._v(e._s(e.dataServiceGroupDetail.serviceGroupPath))])])],1),t("div",{staticClass:"item"},[e.dataServiceGroupDetail.serviceGroupDesc?t("el-tooltip",{attrs:{effect:"dark",content:e.dataServiceGroupDetail.serviceGroupDesc,placement:"top-start"}},[t("span",{staticClass:"desc"},[e._v("服务组描述："+e._s(e.dataServiceGroupDetail.serviceGroupDesc))])]):t("span",[e._v("服务组描述："+e._s(e.dataServiceGroupDetail.serviceGroupDesc))])],1)])]):e._e(),t("div",{staticClass:"service-list-content"},[t("div",{staticClass:"content-header"},[t("div",{staticClass:"new-service"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleNewService}},[e._v("新建服务")]),t("el-button",{attrs:{type:"primary"},on:{click:e.dataServiceResetGroupPerminssion}},[e._v("重置服务组Token")]),t("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px","line-height":"32px"},attrs:{effect:"dark",content:"当前用户重置服务组Token变更的是当前用户的服务组Token以及申请授权通过的使用人员服务组Token；但重置服务组token将会影响到该服务组下所有继承服务组token的服务，请谨慎操作",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind"})])],1),t("div",{staticClass:"search-service"},[t("el-row",{attrs:{type:"flex",justify:"end"}},[t("el-input",{attrs:{placeholder:"请输入服务名称"},model:{value:e.serviceName,callback:function(t){e.serviceName="string"==typeof t?t.trim():t},expression:"serviceName"}}),t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择创建人"},model:{value:e.searchUserId,callback:function(t){e.searchUserId=t},expression:"searchUserId"}},e._l(e.createUserList,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1),t("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),t("el-button",{on:{click:e.reset}},[e._v("重置")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.isHighLevelSearch=!e.isHighLevelSearch}}},[e._v("\n          "+e._s(e.isHighLevelSearch?"普通搜索":"高级搜索")+"\n        ")])],1),e.isHighLevelSearch?t("el-row",{staticStyle:{"margin-top":"15px","margin-right":"0"},attrs:{type:"flex",justify:"end"}},[t("el-input",{attrs:{placeholder:"请输入服务描述"},model:{value:e.serviceDescription,callback:function(t){e.serviceDescription="string"==typeof t?t.trim():t},expression:"serviceDescription"}}),t("el-input",{staticStyle:{"margin-right":"0"},attrs:{placeholder:"请输入appId/Token"},model:{value:e.appidToken,callback:function(t){e.appidToken="string"==typeof t?t.trim():t},expression:"appidToken"}})],1):e._e()],1)]),t("customer-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{height:425,dataList:e.dataList,labelMap:e.labelMap},on:{sortChange:e.handleSortChange,"filter-change":e.handleFilterChange},scopedSlots:e._u([{key:"row",fn:function(a){var r=a.row,i=a.prop,n=a.label;return["服务名称"===n?t("div",{staticClass:"service-name",on:{click:function(t){return e.gotoDetail(r)}}},[e._v("\n          "+e._s(r[i])+"\n        ")]):"服务状态"===n?t("div",[t("i",{class:["dot",1===r[i]?"publish":"unpublish"]}),e._v(e._s(1===r[i]?"已发布":"未发布")+"\n        ")]):"操作"===n?t("div",[t("el-button",{attrs:{disabled:!r.auth||1===r.serviceState,type:"text"},on:{click:function(t){return e.edit(r)}}},[e._v("编辑")]),t("el-button",{attrs:{disabled:!r.auth||0===r.serviceState,type:"text"},on:{click:function(t){return e.handleApplyAuth(r)}}},[t("el-badge",{staticClass:"apply-btn",attrs:{value:r.applyNum,hidden:!r.applyNum||0===r.serviceState||e.admin_info.userName!==r.createName}},[e._v("\n                审批\n              ")])],1),t("el-popover",{attrs:{placement:"bottom",width:"80",trigger:"hover"}},[t("ul",{staticClass:"ops-list"},[t("li",{staticClass:"item"},[t("el-button",{attrs:{disabled:!r.auth,type:"text"},on:{click:function(t){return e.getDetail(r)}}},[e._v("查看详情")])],1),t("li",{staticClass:"item"},[t("el-button",{attrs:{disabled:!r.auth||0===r.serviceState,type:"text"},on:{click:function(t){return e.handleActiveAuth(r)}}},[e._v("主动授权")])],1),t("li",{staticClass:"item"},[t("el-button",{attrs:{disabled:!r.auth||1===r.serviceState,type:"text"},on:{click:function(t){return e.handlePublish(r)}}},[e._v("发布")])],1),t("li",{staticClass:"item"},[t("el-button",{attrs:{disabled:!r.auth||"-3"==r.typeId,type:"text"},on:{click:function(t){return e.handleTest(r)}}},[e._v("测试")])],1),t("li",{staticClass:"item"},[t("el-button",{attrs:{disabled:!r.auth||0===r.serviceState,type:"text"},on:{click:function(t){return e.handleDown(r)}}},[e._v("下线")])],1),t("li",{staticClass:"item"},[t("el-button",{attrs:{disabled:!r.auth||"-3"==r.typeId,type:"text"},on:{click:function(t){return e.copyService(r)}}},[e._v("复制")])],1),t("li",{staticClass:"item"},[t("el-button",{attrs:{disabled:!r.auth||1===r.isExtendToken||0===r.serviceState,type:"text"},on:{click:function(t){return e.resetToken(r)}}},[e._v("重置Token")])],1),t("li",{staticClass:"item"},[t("el-button",{attrs:{disabled:!r.auth,type:"text"},on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])],1)]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("更多")])],1)],1):t("div",[e._v("\n          "+e._s(r[i])+"\n        ")])]}}])}),t("div",{staticClass:"pagation"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{staticClass:"noBorder",attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"dialogBox"},[t("div",[t("i",{staticClass:"el-notification__icon el-icon-success"}),t("span",{},[e._v("重置"+e._s(e.resetServeName)+"token成功")])]),t("p",[e._v(e._s(e.resetServeName)+"token："+e._s(e.newToken))]),t("p",[e._v("也可前往服务详情中查看凭证信息")])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),t("test-and-publish",{attrs:{typeId:e.ptypeId,serviceId:e.serviceId,isShowTest:e.isShowTest,mode:e.mode},on:{refresh:e.handleRefresh,close:function(t){e.isShowTest=!1}}}),t("active-auth",{attrs:{serviceId:e.serviceId,isShowActiveAuth:e.isShowActiveAuth},on:{close:function(t){e.isShowActiveAuth=!1}}}),t("apply-auth",{attrs:{serviceId:e.serviceId,isShowApplyAuth:e.isShowApplyAuth},on:{refresh:e.handleRefresh,close:function(t){e.isShowApplyAuth=!1}}}),t("service-copy",{attrs:{serviceDetail:e.serviceDetail,isShowServiceCopy:e.isShowServiceCopy},on:{refresh:e.handleRefresh,close:function(t){e.isShowServiceCopy=!1}}})],1)}),[],!1,null,"7e0f0b31",null));t.default=A.exports},c119b:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-7e0f0b31]{color:#1740dc}.success-color[data-v-7e0f0b31]{color:#52c41a}.warning-color[data-v-7e0f0b31]{color:#faad14}.error-color[data-v-7e0f0b31]{color:#f5222d}.info-color[data-v-7e0f0b31]{color:#909399}.border-color[data-v-7e0f0b31]{border:1px solid #e5e6e9}.ops-list[data-v-7e0f0b31]{width:100%}.ops-list .item[data-v-7e0f0b31]{cursor:pointer;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.service-list[data-v-7e0f0b31]{background:#f2f2f2}.service-list[data-v-7e0f0b31] .noBorder .el-dialog__footer,.service-list[data-v-7e0f0b31] .noBorder .el-dialog__header{border:none}.service-list[data-v-7e0f0b31] .noBorder .el-dialog__body{padding:20px}.service-list .dialogBox i[data-v-7e0f0b31]{color:#67c23a;vertical-align:middle}.service-list .dialogBox span[data-v-7e0f0b31]{font-weight:700;font-size:16px;color:#333;margin-left:10px}.service-list .dialogBox p[data-v-7e0f0b31]{padding-left:34px}.service-list .service-list-header[data-v-7e0f0b31]{margin-bottom:10px;padding:20px;padding-bottom:15px;background:#fff}.service-list .service-list-header .title[data-v-7e0f0b31]{font-weight:700;margin-bottom:10px;font-size:16px}.service-list .service-list-header .list-detail[data-v-7e0f0b31]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.service-list .service-list-header .list-detail .item[data-v-7e0f0b31]{width:33%;line-height:30px;color:rgba(4,12,44,.85);display:-webkit-box;display:-ms-flexbox;display:flex;white-space:nowrap}.service-list .service-list-header .list-detail .item .desc[data-v-7e0f0b31]{display:inline-block;width:90%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.service-list .service-list-content[data-v-7e0f0b31]{padding:20px;background:#fff}.service-list .service-list-content .service-name[data-v-7e0f0b31]{color:#1740dc;cursor:pointer}.service-list .service-list-content .dot[data-v-7e0f0b31]{width:8px;height:8px;border-radius:100%;margin-right:5px;display:inline-block}.service-list .service-list-content .dot.publish[data-v-7e0f0b31]{background:#00a854}.service-list .service-list-content .dot.unpublish[data-v-7e0f0b31]{background:#bfbfbf}.service-list .service-list-content .content-header[data-v-7e0f0b31]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:20px}.service-list .service-list-content .content-header .new-service[data-v-7e0f0b31]{width:30%}.service-list .service-list-content .content-header .search-service[data-v-7e0f0b31]{width:85%}.service-list .service-list-content .content-header .search-service label[data-v-7e0f0b31]{font-size:12px}.service-list .service-list-content .content-header .search-service[data-v-7e0f0b31] .el-input{width:200px;margin-right:10px}",""])},d263:function(e,t,a){"use strict";a("386b")("fixed",(function(e){return function(){return e(this,"tt","","")}}))},d672:function(e,t,a){"use strict";a("8e6e"),a("ac6a"),a("456d");var r=a("ade3");a("d263"),a("7f7f");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("c5f6");var s={props:{label:{type:String,default:""},filterValue:{type:Array,default:function(){return[]}},initValue:{type:[String,Number]}},data:function(){return{val:null,visible:!1}},mounted:function(){this.val=this.initValue},methods:{comfirm:function(){this.$emit("change",this.val),this.visible=!1},reset:function(){this.val=null,this.$emit("change",this.val)}}},o=(a("895c"),a("2877")),c=Object(o.a)(s,(function(){var e=this,t=e._self._c;return t("span",[t("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("span",{style:{color:""==e.val||null==e.val?"":"#1740DC",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.label)+"\n        "),t("i",{staticClass:"icon icon-funnelplot-fill",style:{color:""==e.val||null==e.val?"#040C2C":"#1740DC",opacity:.55,marginLeft:"2px",position:"relative",fontSize:"12px"}})]),t("div",{staticClass:"filter_conter"},[t("el-scrollbar",[t("ul",{staticStyle:{"max-height":"200px",width:"100%"}},e._l(e.filterValue,(function(a){return t("li",{key:a.value,class:{active:a.value===e.val}},[t("el-radio",{staticStyle:{width:"100%"},attrs:{label:a.value},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},[e._v(e._s(a.text))])],1)})),0)])],1),t("div",{staticClass:"filter_footer"},[t("div",{staticClass:"btg"},[t("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.comfirm}},[e._v("确定")])],1)])])],1)}),[],!1,null,"7a62240a",null).exports;function l(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw n}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var d={name:"CustomerTable",props:{dataList:{type:Array,default:function(){return[]}},labelMap:{type:Object,default:function(){return[]}},height:{type:Number,default:540},isShowToolTip:{type:Boolean,default:!0}},data:function(){return{scale:1,filterValue:null,isLoading:!1}},methods:{handleFilterChange:function(e,t){this.$emit("filter-change",{value:e,prop:t})},headerCellStyle:function(){return{}},headerRowStyle:function(){return{}},cellStyle:function(){return{}},rowStyle:function(){return{}},handleSortChange:function(e){this.$emit("sortChange",e)},triggerSearch:function(){},doLayout:function(){this.$refs.customerTable.doLayout()},reset:function(){var e=this;this.$nextTick((function(){var t,a=l(e.$refs.singleFileter);try{for(a.s();!(t=a.n()).done;){t.value.reset()}}catch(e){a.e(e)}finally{a.f()}}))}},components:{SingleFilter:c},watch:{dataList:function(e){e.length>0&&(this.isLoading=!1)}}},p=(a("46b0"),Object(o.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"customer-table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"customerTable",attrs:{data:e.dataList,"header-cell-style":e.headerCellStyle,"header-row-style":e.headerRowStyle,"cell-style":e.cellStyle,"row-style":e.rowStyle,"max-height":e.height},on:{"sort-change":e.handleSortChange}},e._l(e.labelMap,(function(a,r){return a.isShow?e._e():t("el-table-column",{key:r,attrs:{prop:r,label:a.name,align:a.align||"left",sortable:a.sortable,width:a.width,fixed:a.fixed,"show-overflow-tooltip":e.isShowToolTip},scopedSlots:e._u([a.header?{key:"header",fn:function(r){return[e._t(a.header,(function(){return[t("span",[e._v(e._s(a.name))])]}),{scope:n({header:a.name},r)})]}}:null,{key:"default",fn:function(t){var i=t.row;return[e._t("row",null,{row:i,prop:r,label:a.name})]}}],null,!0)},[a.filters?t("template",{slot:"header"},[t("single-filter",{ref:"singleFileter",refInFor:!0,attrs:{label:a.name,filterValue:a.filters,initValue:a.initValue},on:{change:function(t){return e.handleFilterChange(t,r)}}})],1):e._e()],2)})),1)],1)}),[],!1,null,"18fa3ff0",null));t.a=p.exports},f8c8:function(e,t,a){"use strict";a("21a9")}}]);