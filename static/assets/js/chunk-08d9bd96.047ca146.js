(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-08d9bd96","chunk-74af32dc"],{"0a49":function(t,e,n){var i=n("9b43"),r=n("626a"),a=n("4bf8"),o=n("9def"),s=n("cd1c");t.exports=function(t,e){var n=1==t,l=2==t,u=3==t,c=4==t,d=6==t,f=5==t||d,p=e||s;return function(e,s,h){for(var b,m,g=a(e),v=r(g),x=i(s,h,3),y=o(v.length),w=0,_=n?p(e,y):l?p(e,0):void 0;y>w;w++)if((f||w in v)&&(m=x(b=v[w],w,g),t))if(n)_[w]=m;else if(m)switch(t){case 3:return!0;case 5:return b;case 6:return w;case 2:_.push(b)}else if(c)return!1;return d?-1:u||c?c:_}}},"0ecf":function(t,e,n){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=6)}([function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(t,e){t.exports=function(t,e,n,i,r,a){var o,s=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(o=t,s=t.default);var u,c="function"==typeof s?s.options:s;if(e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId=r),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=i),u){var d=c.functional,f=d?c.render:c.beforeCreate;d?(c._injectStyles=u,c.render=function(t,e){return u.call(e),f(t,e)}):c.beforeCreate=f?[].concat(f,u):[u]}return{esModule:o,exports:s,options:c}}},function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],i=c[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(a(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var o=[];for(r=0;r<n.parts.length;r++)o.push(a(n.parts[r]));c[n.id]={id:n.id,refs:1,parts:o}}}}function r(){var t=document.createElement("style");return t.type="text/css",d.appendChild(t),t}function a(t){var e,n,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(h)return b;i.parentNode.removeChild(i)}if(m){var a=p++;i=f||(f=r()),e=o.bind(null,i,a,!1),n=o.bind(null,i,a,!0)}else i=r(),e=s.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}function o(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=g(e,r);else{var a=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function s(t,e){var n=e.css,i=e.media,r=e.sourceMap;if(i&&t.setAttribute("media",i),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(19),c={},d=l&&(document.head||document.getElementsByTagName("head")[0]),f=null,p=0,h=!1,b=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){h=n;var r=u(t,e);return i(r),function(e){for(var n=[],a=0;a<r.length;a++){var o=r[a];(s=c[o.id]).refs--,n.push(s)}for(e?i(r=u(t,e)):r=[],a=0;a<n.length;a++){var s;if(0===(s=n[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete c[s.id]}}}};var g=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),r=n.n(i),a=n(15),o=function(t){n(18)},s=n(1)(r.a,a.a,!1,o,"data-v-65e34201",null);e.default=s.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),r=n.n(i),a=n(14),o=function(t){n(17)},s=n(1)(r.a,a.a,!1,o,"data-v-59237a36",null);e.default=s.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=n.n(i),a=n(13),o=function(t){n(16)},s=n(1)(r.a,a.a,!1,o,"data-v-5048c4bf",null);e.default=s.exports},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.install=e.dragContent=e.dragHandle=e.dragZone=void 0;var r=i(n(5)),a=i(n(4)),o=i(n(3)),s=function(t){t.component(r.default.name,r.default),t.component(a.default.name,a.default),t.component(o.default.name,o.default)},l={dragZone:r.default,dragHandle:a.default,dragContent:o.default,install:s};e.default=l,e.dragZone=r.default,e.dragHandle=a.default,e.dragContent=o.default,e.install=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"drag-content",props:{fixed:{type:[Number,Boolean],default:!1}},data:function(){return{sizeAttr:null,isMinSize:!1,isMaxSize:!1}},methods:{getCss:function(t,e){var n=document.defaultView.getComputedStyle(t,null);return e?n[e]:n},getSize:function(t){return t.getBoundingClientRect()[this.horizontal?"width":"height"]},getSizeAttr:function(t){return t+(this.horizontal?"Width":"Height")},getMinSize:function(){if(this.fixed)return this.getSize(this.$el);var t=this.getCss(this.$el,this.getSizeAttr("min"));return"0px"===t?t=0:t.includes("%")?t=parseFloat(t)/100*this.getSize(this.$parent.$el):t.includes("px")&&(t=parseFloat(t)),t<0&&(t=0),t},getMaxSize:function(){if(this.fixed)return this.getSize(this.$el);var t=this.getCss(this.$el,this.getSizeAttr("max"));return t.includes("%")?t=parseFloat(t)/100*this.getSize(this.$parent.$el):t.includes("px")&&(t=parseFloat(t)),t}},computed:{size:{get:function(){return this.sizeAttr},set:function(t){this.sizeAttr=t}},parentOptions:function(){return this.$parent&&this.$parent.options&&this.$parent.options},horizontal:function(){return"horizontal"===this.parentOptions.direction},isThreshold:function(){return this.isMinSize||this.isMaxSize},style:function(){var t={};return!this.fixed&&null!==this.size&&this.parentOptions&&(this.horizontal?t.width=this.size+"px":t.height=this.size+"px"),t}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"drag-handle",props:{disabled:{type:Boolean,default:!1}},data:function(){return{canDrag:!1,todoContentsMaxSize:0,mouseHandleOffsetPrev:0,mouseHandleOffsetNext:0,nextHandleOffsetPosition:0}},computed:{direction:function(){return this.$parent.options.direction},horizontal:function(){return"horizontal"===this.direction},vertical:function(){return"vertical"===this.direction}},methods:{getAllHandles:function(){return this.$parent.$children.filter((function(t){return t.$vnode&&t.$vnode.componentOptions&&"drag-handle"===t.$vnode.componentOptions.tag}))},getHandles:function(){var t=this,e=this.getAllHandles(),n=[],i=[],r=!1;return e.forEach((function(e){var a=e===t;r=r||a,a||(r?i:n).push(e)})),{all:e,prev:n,next:i}},getHandle:function(){var t=this,e=this.getAllHandles(),n=null,i=null;return e.forEach((function(r,a){r===t&&(n=e[a-1],i=e[a+1])})),{prev:n,next:i}},getAllContents:function(){return this.$parent.$children.filter((function(t){return t.$vnode&&t.$vnode.componentOptions&&"drag-content"===t.$vnode.componentOptions.tag}))},getTodoContents:function(){var t=this,e=this.$parent.$children,n=[],i=[],r=[],a=!1,o=!1;return e.forEach((function(e){var s=e===t;a=a||s,e.$vnode&&e.$vnode.componentOptions&&("drag-content"===e.$vnode.componentOptions.tag?(n.push(e),a?o||i.push(e):r.push(e)):s||(a?o=!0:r=[]))})),{all:n,prev:r,next:i}},getSize:function(t){return t.getBoundingClientRect()[this.horizontal?"width":"height"]},getOffsetPosition:function(t){return this[this.horizontal?"offsetLeft":"offsetTop"](t)},getSizePlus:function(t){var e=this;return t.reduce((function(t,n){return t+e.getSize(n.$el)}),0)},getLiveContentsSize:function(){var t=this.getTodoContents(),e=(t.all,t.prev),n=t.next,i=this.getSizePlus(e),r=this.getSizePlus(n);return{all:i+r,prev:i,next:r}},offsetTop:function(t){var e=t.offsetTop;return null!=t.offsetParent&&(e+=this.offsetTop(t.offsetParent)),e},offsetLeft:function(t){var e=t.offsetLeft;return null!=t.offsetParent&&(e+=this.offsetLeft(t.offsetParent)),e},mousePosition:function(t){return t[this.horizontal?"pageX":"pageY"]},handleSize:function(){return this.getSize(this.$el)},handleOffsetPosition:function(){return this.getOffsetPosition(this.$el)},handleMouseUp:function(){this.canDrag=!1,this.mouseHandleOffsetPrev=0,this.mouseHandleOffsetNext=0,this.nextHandleOffsetPosition=0,this.removeMouseEvents()},handleMouseDown:function(t){this.canDrag=!0;var e=this.handleSize(),n=this.mousePosition(t),i=this.handleOffsetPosition();this.todoContentsMaxSize=this.getLiveContentsSize().all,this.mouseHandleOffsetPrev=n-i,this.mouseHandleOffsetNext=e-this.mouseHandleOffsetPrev;var r=this.getHandle().next;this.nextHandleOffsetPosition=r?this.getOffsetPosition(r.$el):this.getOffsetPosition(this.$parent.$el)+this.getSize(this.$parent.$el),this.bindMouseEvents()},handleMouseMove:function(t){var e=this;if(this.disabled||!this.canDrag)return!1;var n=this.mousePosition(t),i=(this.handleOffsetPosition(),this.getOffsetPosition(this.$parent.$el)),r=this.getHandle(),a=r.prev,o=(r.next,this.getTodoContents()),s=(o.all,o.prev),l=o.next,u=n-this.mouseHandleOffsetPrev-(a?this.getOffsetPosition(a.$el)+this.getSize(a.$el):i),c=this.nextHandleOffsetPosition-n-this.mouseHandleOffsetNext;u<0&&(u=0),c<0&&(c=0),u>this.todoContentsMaxSize&&(u=this.todoContentsMaxSize),c>this.todoContentsMaxSize&&(c=this.todoContentsMaxSize);var d=s.reduce((function(t,e){return t+e.getMinSize()}),0),f=l.reduce((function(t,e){return t+e.getMinSize()}),0),p=s.reduce((function(t,e){return t+e.getMaxSize()}),0),h=l.reduce((function(t,e){return t+e.getMaxSize()}),0);if("string"==typeof p&&(p=this.todoContentsMaxSize-f),"string"==typeof h&&(h=this.todoContentsMaxSize-d),u>p||u<d||c>h||c<f)return!1;var b=function(t,n){var i=n/t.length,r=[],a=[],o=0;t.forEach((function(t){var n=e.getSize(t.$el);if(t.fixed)o+=n,a.push(t);else{var s=t.getMinSize(),l=t.getMaxSize(),u=n<=s,c=n>=l;t.isMinSize=u,t.isMaxSize=c,u&&i<s||c&&i>l?(t.size=u?s:l,o+=u?s:l,a.push(t)):r.push(t)}})),r.forEach((function(t){t.size=(n-o)/r.length}))};b(s,u),b(l,c)},bindMouseEvents:function(){document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove)},removeMouseEvents:function(){document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"drag-zone",props:{options:{type:Object,default:function(){return{direction:"horizontal"}}}},computed:{horizontal:function(){return"horizontal"===this.options.direction}}}},function(t,e,n){(t.exports=n(0)()).push([t.i,".drag-zone[data-v-5048c4bf]{position:relative}",""])},function(t,e,n){(t.exports=n(0)()).push([t.i,".drag-handle.horizontal[data-v-59237a36]{cursor:col-resize}.drag-handle.vertical[data-v-59237a36]{cursor:row-resize}.drag-handle.disabled[data-v-59237a36]{opacity:.5;cursor:no-drop}",""])},function(t,e,n){(t.exports=n(0)()).push([t.i,"",""])},function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"drag-zone"},[t._t("default")],2)},staticRenderFns:[]};e.a=i},function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"drag-handle",class:{disabled:t.disabled,horizontal:"horizontal"===t.direction,vertical:"vertical"===t.direction},on:{mousedown:t.handleMouseDown}},[t._t("default")],2)},staticRenderFns:[]};e.a=i},function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"drag-content",class:{threshold:t.isThreshold},style:t.style},[t._t("default")],2)},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(10);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),n(2)("317119e1",i,!0)},function(t,e,n){var i=n(11);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),n(2)("55546ba7",i,!0)},function(t,e,n){var i=n(12);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),n(2)("28d2c7b4",i,!0)},function(t,e){t.exports=function(t,e){for(var n=[],i={},r=0;r<e.length;r++){var a=e[r],o=a[0],s={id:t+":"+r,css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(s):n.push(i[o]={id:o,parts:[s]})}return n}}])},"23cc":function(t,e,n){var i=n("9d27");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("499e").default)("3b45ad81",i,!0,{sourceMap:!1,shadowMode:!1})},"2f21":function(t,e,n){"use strict";var i=n("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"4d38":function(t,e,n){var i=n("82f5");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("499e").default)("f334d266",i,!0,{sourceMap:!1,shadowMode:!1})},"4d41":function(t,e,n){"use strict";n("23cc")},"55dd":function(t,e,n){"use strict";var i=n("5ca1"),r=n("d8e8"),a=n("4bf8"),o=n("79e5"),s=[].sort,l=[1,2,3];i(i.P+i.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),r(t))}})},"56e6":function(t,e,n){var i=n("a056");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("499e").default)("1ee31830",i,!0,{sourceMap:!1,shadowMode:!1})},"74a9":function(t,e,n){"use strict";n("4d38")},7514:function(t,e,n){"use strict";var i=n("5ca1"),r=n("0a49")(5),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),i(i.P+i.F*a,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("find")},"82f5":function(t,e,n){(t.exports=n("2350")(!1)).push([t.i,".primary-color[data-v-36f85b99]{color:#1740dc}.success-color[data-v-36f85b99]{color:#52c41a}.warning-color[data-v-36f85b99]{color:#faad14}.error-color[data-v-36f85b99]{color:#f5222d}.info-color[data-v-36f85b99]{color:#909399}.border-color[data-v-36f85b99]{border:1px solid #e5e6e9}.bar[data-v-36f85b99]{padding:40px 0;position:relative}",""])},"86b9":function(t,e,n){"use strict";n.d(e,"n",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"h",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"f",(function(){return b})),n.d(e,"m",(function(){return m})),n.d(e,"b",(function(){return g})),n.d(e,"q",(function(){return v})),n.d(e,"p",(function(){return x})),n.d(e,"o",(function(){return y})),n.d(e,"i",(function(){return w})),n.d(e,"k",(function(){return _})),n.d(e,"j",(function(){return R})),n.d(e,"l",(function(){return C})),n.d(e,"c",(function(){return k}));n("8e6e"),n("ac6a"),n("456d");var i=n("ade3"),r=n("2b0e"),a=n("fedb"),o=n("ca00");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=function(t){return r.default.http.post(a.a.saveNodeData,t)},c=function(t){return r.default.http.get(a.a.getMetaDbListByConnect+"/".concat(t))},d=function(t){return r.default.http.get(a.a.getConfDbListByConnect+"/".concat(t))},f=function(t){return r.default.http.get(a.a.getConfConnectListAllKafka,{params:t})},p=function(t){return r.default.http.get(a.a.getNodeDetail,{params:t})},h=function(t){return r.default.http.post(a.a.deleteNodeConnect,t)},b=function(){return r.default.http.get(a.a.getFieldTypes)},m=function(t){return r.default.http.get(Object(o.e)(a.a.reviewSql,{id:t}))},g=function(){return r.default.http.get(a.a.downLoadFieldFile,{responseType:"arraybuffer"})},v=function(t){return r.default.http.post(a.a.uploadFieldFile,t)},x=function(t){return r.default.http.get(a.a.taskGetPartFields,{params:t})},y=function(t){return r.default.http.post(a.a.tableViewData,t)},w=function(t){return r.default.http.post(a.a.getProcInfoListDbs,l({},t))},_=function(t){return r.default.http.post(a.a.getRealTimeTableList,t)},R=function(t){var e=t.id;return r.default.http.get(a.a.getRealTimeDetail+"/".concat(e))},C=function(t){return r.default.http.post(a.a.getTableInfoListNew,t)},k=function(t){return r.default.http.get(a.a.getAllFields,{params:t})}},"9d27":function(t,e,n){(t.exports=n("2350")(!1)).push([t.i,'.primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color,.viewReport{border:1px solid #e5e6e9}.viewReport{width:100%;height:100%}.viewReport .main-title{line-height:48px;font-size:16px;color:#040c2c;padding:0 20px;border-bottom:1px solid #e5e6e9}.viewReport .main-content{padding:0 5px;overflow:auto;-webkit-box-sizing:border-box;box-sizing:border-box}.viewReport .input-with-select .el-input-group__prepend{background-color:#fff}.viewReport .lt{width:22%;background:#fff;text-align:left;border:1px solid #e5e6e9;border-right-width:0;padding:10px}.viewReport .lt .tit{font-size:20px;font-weight:700}.viewReport .lt .tables{width:100%}.viewReport .lt .tables li{font-size:12px;height:30px;padding-left:10px;line-height:30px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;position:relative}.viewReport .lt .tables li .icon{margin-right:5px}.viewReport .lt .tables li:before{content:"";position:absolute;left:0;height:100%;width:2px;background-color:#fff}.viewReport .lt .tables li:hover{background:#f0f1f3;cursor:pointer}.viewReport .lt .tables .curColor{color:#1740dc;background:#f0f1f3}.viewReport .lt .tables .curColor:before{background-color:#1740dc}.viewReport .lt .tables .curColor .icon{color:#1740dc;margin-right:5px}.viewReport .rt{-webkit-box-flex:1;-ms-flex:1;flex:1;background:#fff;text-align:left;margin-left:5px;border:none}.viewReport .rt .tips{color:#ccc;line-height:24px;margin-bottom:18px}.viewReport .rt .titWrap{border:1px solid #e5e6e9;border-bottom:0}.viewReport .rt .titWrap .txt{color:#ccc}.viewReport .rt .tableInfo .nums,.viewReport .rt .tableInfo .title{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.viewReport .rt .tableInfo .nums{color:#666;border:1px solid #e5e6e9}.viewReport .rt .tableInfo .nums li{padding:20px;text-align:center;-webkit-box-flex:0;-ms-flex:0 0 20%;flex:0 0 20%;font-size:14px;border-right:1px solid #e5e6e9;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.viewReport .rt .tableInfo .nums li .box{text-align:left}.viewReport .rt .tableInfo .nums li .box p:first-child{font-size:12px;font-weight:400;color:rgba(0,0,0,.45)}.viewReport .rt .tableInfo .nums li .icon{-webkit-box-flex:0;-ms-flex:0 0 34px;flex:0 0 34px;height:34px;font-size:22px;background-color:rgba(28,145,255,.2);color:#1740dc;line-height:34px;border-radius:50%}.viewReport .rt .tableInfo .nums li .num{font-size:34px;font-weight:400;color:rgba(4,12,44,.85)}.viewReport .rt .tableInfo .nums li .num .mark{color:#1740dc}.viewReport .rt .wrap{width:100%;margin-top:10px}.viewReport .rt .wrap .bar{width:100%;height:520px;border:1px solid #e5e6e9}.right-choice-report{text-align:right;float:right}div.active[data-v-report]{border-color:#1740dc;color:#1740dc}div.active[data-v-report] /deep/ .el-input__inner{border-color:#1740dc!important}div[data-v-report]{display:inline-block}span[data-v-report]{padding:2px 16px 2px 16px;border:1px solid #ccc;border-radius:5px;color:rgba(0,0,0,.64705882);font-size:14px;margin-right:5px;cursor:pointer}span[data-v-report].active{border-color:#1740dc;color:#1740dc}',""])},a056:function(t,e,n){(t.exports=n("2350")(!1)).push([t.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.subscriptionDialog .sub-ctr{display:-webkit-box;display:-ms-flexbox;display:flex}.subscriptionDialog .sub-ctr .time .el-form-item__content{margin-left:10!important}.subscriptionDialog .group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.subscriptionDialog .group .item-label{padding-top:8px;padding-right:12px;width:100px;text-align:right}.subscriptionDialog .group .subscriptions{-webkit-box-flex:1;-ms-flex:1;flex:1}.subscriptionDialog .group .subscriptions .items{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.subscriptionDialog .group .subscriptions .items .name{width:100px}.subscriptionDialog .group .subscriptions .items .name .el-form-item__content{margin-left:0!important}.subscriptionDialog .group .subscriptions .items .cros-line{padding-top:10px;margin:0 8px}.subscriptionDialog .group .subscriptions .items .email{-webkit-box-flex:1;-ms-flex:1;flex:1}.subscriptionDialog .group .subscriptions .items .email .el-form-item__content{margin-left:0!important}.subscriptionDialog .group .subscriptions .items .delete-item{margin-left:8px;height:40px}.subscriptionDialog .group .subscriptions .addNew{width:100%;height:32px;line-height:32px;color:#000;text-align:center;border:1px dashed #d9d9d9;cursor:pointer;margin-bottom:20px}",""])},b087:function(t,e,n){"use strict";n("56e6")},c466:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("3b2b"),n("a481");function i(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var i in n)if(new RegExp("(".concat(i,")")).test(e)){var a=n[i]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?a:r(a))}return e}function r(t){return("00"+t).substr(t.length)}},cb29:function(t,e,n){"use strict";n.d(e,"M",(function(){return a})),n.d(e,"L",(function(){return o})),n.d(e,"s",(function(){return s})),n.d(e,"W",(function(){return l})),n.d(e,"w",(function(){return u})),n.d(e,"x",(function(){return c})),n.d(e,"j",(function(){return d})),n.d(e,"t",(function(){return f})),n.d(e,"V",(function(){return p})),n.d(e,"B",(function(){return h})),n.d(e,"C",(function(){return b})),n.d(e,"k",(function(){return m})),n.d(e,"Z",(function(){return g})),n.d(e,"ab",(function(){return v})),n.d(e,"r",(function(){return x})),n.d(e,"y",(function(){return y})),n.d(e,"l",(function(){return w})),n.d(e,"G",(function(){return _})),n.d(e,"O",(function(){return R})),n.d(e,"N",(function(){return C})),n.d(e,"d",(function(){return k})),n.d(e,"E",(function(){return D})),n.d(e,"f",(function(){return T})),n.d(e,"fb",(function(){return S})),n.d(e,"A",(function(){return L})),n.d(e,"X",(function(){return I})),n.d(e,"Y",(function(){return z})),n.d(e,"z",(function(){return O})),n.d(e,"db",(function(){return M})),n.d(e,"K",(function(){return $})),n.d(e,"h",(function(){return N})),n.d(e,"g",(function(){return P})),n.d(e,"F",(function(){return j})),n.d(e,"u",(function(){return A})),n.d(e,"p",(function(){return E})),n.d(e,"q",(function(){return q})),n.d(e,"P",(function(){return H})),n.d(e,"I",(function(){return F})),n.d(e,"J",(function(){return U})),n.d(e,"e",(function(){return V})),n.d(e,"D",(function(){return B})),n.d(e,"H",(function(){return Q})),n.d(e,"a",(function(){return W})),n.d(e,"gb",(function(){return Z})),n.d(e,"eb",(function(){return G})),n.d(e,"bb",(function(){return J})),n.d(e,"cb",(function(){return X})),n.d(e,"b",(function(){return Y})),n.d(e,"i",(function(){return K})),n.d(e,"Q",(function(){return tt})),n.d(e,"m",(function(){return et})),n.d(e,"v",(function(){return nt})),n.d(e,"c",(function(){return it})),n.d(e,"T",(function(){return rt})),n.d(e,"U",(function(){return at})),n.d(e,"R",(function(){return ot})),n.d(e,"S",(function(){return st})),n.d(e,"o",(function(){return lt})),n.d(e,"n",(function(){return ut}));var i=n("2b0e"),r=n("fedb"),a=function(){return i.default.http.get(r.a.getRuleCreateUserList)},o=function(t){return i.default.http.post(r.a.getRuleDetailCreateUserListNew,t)},s=function(t){return i.default.http.post(r.a.getQualityInfoList,t)},l=function(t){return i.default.http.get(r.a.qualityRuleDeleteAll+"?qualityInfoId=".concat(t.qualityInfoId))},u=function(t){return i.default.http.get(r.a.getRuleDataSourceList+"?typeId=".concat(t.typeId))},c=function(){return i.default.http.get(r.a.getRuleDataSourceList)},d=function(){return i.default.http.get(r.a.getDatasourceTypeList)},f=function(t){return i.default.http.post(r.a.getQualityRuleList,t)},p=function(t){return i.default.http.get(r.a.qualityRuleDelete+"?ruleId=".concat(t.ruleId))},h=function(t){return i.default.http.get(r.a.getRuleTabelList+"?connectId=".concat(t.connectId,"&databaseName=").concat(t.databaseName))},b=function(t){return i.default.http.get(r.a.getRuleTemplateList+"?ruleType=".concat(t.ruleType))},m=function(t){return i.default.http.post(r.a.getFieldList,t)},g=function(t){return i.default.http.post(r.a.qualityRuleSave,t)},v=function(t){return i.default.http.post(r.a.qualityRuleVerify,t)},x=function(t){return i.default.http.post(r.a.getPartitionList,t)},y=function(t){return i.default.http.get(r.a.getRuleDetail+"?ruleId=".concat(t.ruleId))},w=function(t){return i.default.http.post(r.a.getListByDbAndConnent,t)},_=function(t){return i.default.http.get(r.a.getTableQualitys,{params:t})},R=function(t){return i.default.http.post(r.a.getlistTableQualitySumCount,t)},C=function(t){return i.default.http.post(r.a.getlistTableQualityCharts,t)},k=function(t){return i.default.http.post(r.a.downLoadRuleReport,t,{responseType:"arraybuffer"})},D=function(t){return i.default.http.get(r.a.getSubscribeInfo,{params:t})},T=function(){return i.default.http.get(r.a.getAllUsers)},S=function(t){return i.default.http.post(r.a.updateSubscribeInfo,t)},L=function(){return i.default.http.get(r.a.getRuleProjectList)},I=function(t){return i.default.http.get(r.a.qualityRuleJobList+"?procId=".concat(t.procId))},z=function(t){return i.default.http.get(r.a.qualityRuleNodeList+"?jobId=".concat(t.jobId))},O=function(t){return i.default.http.post(r.a.getRuleJobList,t)},M=function(t){return i.default.http.post(r.a.saveBatchAdd,t)},$=function(){return i.default.http.get(r.a.getUserProjectList)},N=function(){return i.default.http.get(r.a.getCategoryList)},P=function(t){return i.default.http.get(r.a.getAssetCategoryList+"?categoryId=".concat(t.categoryId))},j=function(t){return i.default.http.get(r.a.getTableQualityScore+"?procId=".concat(t.procId))},A=function(t){return i.default.http.post(r.a.getQualityScoreHistoryList,t)},E=function(t){return i.default.http.post(r.a.getPageExceptionTopList,t)},q=function(t){return i.default.http.post(r.a.getPageScoreTopList,t)},H=function(t){return i.default.http.post(r.a.immediateExecution+"".concat(t.ruleId))},F=function(t){return i.default.http.get(r.a.getTodayAvgScoreAndRatio+"?assetId=".concat(t.assetId))},U=function(t){return i.default.http.post(r.a.getTrendList,t)},V=function(t){return i.default.http.post(r.a.getAlarmRank,t)},B=function(t){return i.default.http.post(r.a.getScoreRank,t)},Q=function(t){return i.default.http.post(r.a.getTemplateList,t)},W=function(t){return i.default.http.post(r.a.addTemplate,t)},Z=function(t){return i.default.http.post(r.a.updateTemplate,t)},G=function(t){return i.default.http.get(r.a.templateDetail+"?id=".concat(t.id))},J=function(t){return i.default.http.post(r.a.ruleAppList,t)},X=function(t){return i.default.http.post(r.a.ruleLogList,t)},Y=function(t){return i.default.http.post(r.a.delTemplate+"?id=".concat(t.id))},K=function(t){return i.default.http.get(r.a.getCreatePerList)},tt=function(t){return i.default.http.get(r.a.monitorDetail+t.monitorId)},et=function(t){return i.default.http.get(r.a.getMonitorCreatePerList)},nt=function(t){return i.default.http.get(r.a.getRuleCreatePerList)},it=function(t){return i.default.http.post(r.a.deleteMonitorRule+t.id)},rt=function(t){return i.default.http.post(r.a.monitorRelRuleList,t)},at=function(t){return i.default.http.post(r.a.monitorlogList,t)},ot=function(t){return i.default.http.post(r.a.monitorHistoryList,t)},st=function(t){return i.default.http.get(r.a.monitorHistoryResultList+t.id)},lt=function(t){return i.default.http.post(r.a.getNotificationUser,t)},ut=function(){return i.default.http.get(r.a.getMonitorObjectList)}},cb2b:function(t,e,n){"use strict";n.r(e);n("7f7f"),n("ac6a"),n("96cf");var i,r,a,o,s,l,u,c=n("1da1"),d=n("313e"),f=n.n(d),p=n("c466"),h=(n("7514"),n("55dd"),n("cb29")),b={props:["userList"],computed:{monthList:function(){for(var t=[],e=0;e<31;e++)t.push({label:e+1,value:e+1});return t}},data:function(){return{dialogVisible:!1,dialogType:"add",weekList:[{label:"周一",value:1},{label:"周二",value:2},{label:"周三",value:3},{label:"周四",value:4},{label:"周五",value:5},{label:"周六",value:6},{label:"周日",value:7}],form:{title:"",subscribeType:1,subscribeDataDur:1,subscribeDate:"",subscribeTime:"8:00:00",subscriptions:[{name:"",email:""}]},rules:{title:[{required:!0,validator:function(t,e,n){return e.trim()?e.length<2||e.length>50?n(new Error("长度在2-50个字符")):void(n&&n()):n(new Error("请输入订阅标题"))},trigger:"blur"}]}}},watch:{},methods:{checkPeriod:function(t){switch(t){case"week":case"month":this.form.subscribeDate=1;break;default:this.form.subscribeDate=""}},removeDomain:function(t){this.form.subscriptions.splice(t,1)},addNew:function(){this.form.subscriptions.push({name:"",email:""})},duplicate:function(t){var e=[];t.forEach((function(t){e.push(t.name)}));var n=[];return e.sort().sort((function(t,e){t==e&&-1===n.indexOf(t)&&n.push(t)})),n},submitForm:function(){var t=this;this.$refs.form.validate(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(n){var i,r,a,o,s,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.duplicate(t.form.subscriptions).length){e.next=3;break}return t.$message.warning("存在重复订阅对象，请确认后再次提交！"),e.abrupt("return");case 3:if(!n){e.next=20;break}return i=t.form,r=i.title,a=i.subscribeType,o=i.subscribeDate,s=i.subscribeTime,l=i.subscribeDataDur,u={qualityInfoId:t.qualityInfoId,title:r,subscribeType:a,subscribeDate:o,subscribeTime:s,subscribeDataDur:l,userIds:t.form.subscriptions.map((function(t){return t.name}))},e.prev=6,e.next=9,Object(h.fb)(u);case 9:e.sent,t.$message.success("订阅成功"),t.$emit("refresh",t.qualityInfoId),t.close(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6);case 18:e.next=21;break;case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}())},close:function(){this.$refs.form.resetFields(),this.dialogVisible=!1},openModal:(i=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,i,r,a,o,s,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,this.dialogVisible=!0,this.qualityInfoId=e.id,!e.isSubscribe){t.next=13;break}return t.next=6,Object(h.E)({qualityInfoId:e.id});case 6:i=t.sent,r=i.data.data,a=r.title,o=r.subscribeType,s=r.subscribeDate,l=r.subscribeTime,u=r.subscribeDataDur,this.form={title:a,subscribeType:o,subscribeDate:s,subscribeTime:l,subscribeDataDur:u,subscriptions:[]},r.userIds.forEach((function(t,e){n.form.subscriptions.push({name:t,email:""}),n.changeUser(e)})),t.next=14;break;case 13:this.form.subscriptions=[{name:"",email:""}];case 14:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)}),changeUser:function(t){var e=this;this.form.subscriptions[t].email=this.userList.find((function(n){return n.userId===e.form.subscriptions[t].name})).email}},created:function(){},mounted:function(){}},m=(n("b087"),n("2877")),g=Object(m.a)(b,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"subscriptionDialog"},[e("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"订阅",width:"600px",visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close}},[e("div",[e("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{key:"title",attrs:{label:"订阅标题",prop:"title"}},[e("el-input",{attrs:{placeholder:"请输入订阅标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("el-form-item",{key:"subscribeDataDur",attrs:{label:"订阅数据范围",prop:"subscribeDataDur"}},[e("el-radio-group",{attrs:{size:"medium"},model:{value:t.form.subscribeDataDur,callback:function(e){t.$set(t.form,"subscribeDataDur",e)},expression:"form.subscribeDataDur"}},[e("el-radio-button",{attrs:{label:1}},[t._v("本周")]),e("el-radio-button",{attrs:{label:2}},[t._v("本月")])],1)],1),e("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[e("el-form-item",{key:"subscribeType",attrs:{label:"订阅发送时间",prop:"subscribeType"}},[e("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择周期"},on:{change:t.checkPeriod},model:{value:t.form.subscribeType,callback:function(e){t.$set(t.form,"subscribeType",e)},expression:"form.subscribeType"}},[e("el-option",{attrs:{label:"日",value:1}}),e("el-option",{attrs:{label:"周",value:2}}),e("el-option",{attrs:{label:"月",value:3}})],1)],1),1!=t.form.subscribeType?e("el-form-item",{key:"date",attrs:{"label-width":"0",label:"",prop:"subscribeDate"}},[e("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.form.subscribeDate,callback:function(e){t.$set(t.form,"subscribeDate",e)},expression:"form.subscribeDate"}},[2==t.form.subscribeType?e("div",t._l(t.weekList,(function(t,n){return e("el-option",{key:n,attrs:{label:t.label,value:t.value}})})),1):t._e(),3==t.form.subscribeType?e("div",t._l(t.monthList,(function(t,n){return e("el-option",{key:n,attrs:{label:t.label,value:t.value}})})),1):t._e()])],1):t._e(),e("el-form-item",{key:"time",staticClass:"time",attrs:{label:"",prop:"subscribeTime","label-width":"0"}},[e("el-time-picker",{attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"请选择时间"},model:{value:t.form.subscribeTime,callback:function(e){t.$set(t.form,"subscribeTime",e)},expression:"form.subscribeTime"}})],1)],1),e("div",{staticClass:"group"},[e("div",{staticClass:"item-label"},[t._v("订阅对象")]),e("ul",{staticClass:"subscriptions"},[t._l(t.form.subscriptions,(function(n,i){return e("li",{key:i,staticClass:"items"},[e("el-form-item",{staticClass:"name",attrs:{label:"",prop:"subscriptions."+i+".name",rules:{required:!0,message:"用户名不能为空",trigger:"blur"}}},[e("el-select",{attrs:{filterable:""},on:{change:function(e){return t.changeUser(i)}},model:{value:n.name,callback:function(e){t.$set(n,"name",e)},expression:"item.name"}},t._l(t.userList,(function(t){return e("el-option",{key:t.userId,attrs:{label:t.username,value:t.userId,disabled:t.disabled}})})),1)],1),e("div",{staticClass:"cros-line"},[t._v("--")]),e("el-form-item",{staticClass:"email",attrs:{label:"",prop:"subscriptions."+i+".email",rules:{required:!0,message:"邮箱不能为空",trigger:"blur"}}},[e("el-input",{attrs:{disabled:""},model:{value:n.email,callback:function(e){t.$set(n,"email",e)},expression:"item.email"}})],1),e("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"20px","line-height":"40px",cursor:"pointer"},on:{click:function(e){return e.preventDefault(),t.removeDomain(i)}}})],1)})),e("div",{staticClass:"addNew",on:{click:function(e){return t.addNew()}}},[t._v("添加+")])],2)]),e("el-form-item",[e("el-button",{on:{click:t.close}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确定")])],1)],1)],1)])],1)}),[],!1,null,null,null).exports,v=n("86b9"),x=n("0ecf"),y={range:0,week:1,month:2},w={data:function(){return{dataQuality_height:document.body.offsetHeight-70-17,dataQuality_width:document.body.offsetWidth,mainContentHeight:document.body.offsetHeight-110-48-17,time:null,tableId:null,hasParams:!1,ruleLoading:!1,tableName:"",curTableName:"",curTableId:"",pageIndex:1,pageSize:10,select:{startTime:"",start_end_time:"",ruleId:null},startTime:[],downLoad:{start_end_time:null},dbName:null,connectId:"",tables:[],qualityRulesCount:0,qualitys:{},options_dbName:[],connect_list:[],options_dataRules:[],type:"week",daterange:"",userList:[],pickerOptions1:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]}}},computed:{params:function(){return this.$route.query}},created:function(){},components:{subscriptionDialog:g,dragZone:x.dragZone,dragHandle:x.dragHandle,dragContent:x.dragContent},methods:{getRuleDataSourceList:(u=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ruleLoading=!0,t.prev=1,t.next=4,Object(h.x)();case 4:0===(e=t.sent).data.code&&(e.data.data.forEach((function(t){n.options_dbName.push({value:t.id,label:t.name})})),this.hasParams?(this.dbName=JSON.parse(this.params.connectId),this.qualityRuleDatabase({connectId:this.dbName},this.params.dbName)):(this.dbName=this.options_dbName[0].value,this.qualityRuleDatabase({connectId:this.dbName})),this.ruleLoading=!1),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return u.apply(this,arguments)}),qualityRuleDatabase:(l=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.connectId,t.prev=1,t.next=4,Object(v.e)(i);case 4:r=t.sent,this.connect_list=r.data.data,this.connect_list.length>0&&(this.connectId=n||this.connect_list[0],this.hasParams&&(this.tableName=this.params.tableName,this.hasParams=!1),this.getRulesTableList()),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(t,e){return l.apply(this,arguments)}),dataBaseChange:function(t){this.tableName="",this.qualityRuleDatabase({connectId:this.dbName},t)},rangeChange:function(t){this.type=null==t?"week":"range"},toView:function(){this.$router.push({path:"/ruleView",query:{tableId:this.tableId,tableName:this.curTableName}})},subscription:function(){this.$refs.subscript.openModal(this.qualitys)},refreshList:function(t){this.getAllResult(t)},getRulesTableList:(s=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,i,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={connectId:this.dbName,databaseName:this.connectId||"",tableName:this.tableName||""},t.next=3,Object(h.l)(e);case 3:n=t.sent,i=n.data,this.tables=i.data,i.data.length?(r=i.data[0].id,a=i.data[0].tableName,this.tableIdCorrelation(r,a)):this.tableId="";case 8:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)}),changeDbName:function(t){this.connectId="",this.tables=[],this.qualityRuleDatabase({connectId:this.dbName})},tableIdCorrelation:function(t,e){this.tableId=t,this.curTableName=e,this.curTableId=t,this.getAllResult(),this.getAllRuleCounts(),this.getDataRuleList()},getAllResult:(o=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={qualityInfoId:this.tableId},t.next=3,Object(h.G)(n);case 3:i=t.sent,r=i.data,this.qualitys=r.data,this.get_dict_list();case 7:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)}),get_dict_list:function(){var t=this,e={page:this.pageIndex,limit:this.pageSize,searchText:"hive_source_data_statistics"};this.$API.post(this.$URL.getDictPage,e,(function(e){if(0==e.code){var n=e.page.list[0]?e.page.list[0].dictId:null;t.getDictTagList(n)}else t.$message.error(e.msg)}))},getAllUsers:(a=Object(c.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.f)();case 2:e=t.sent,this.userList=e.data.data;case 4:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)}),getDictTagList:function(t){var e=this;t&&this.$API.get(this.$URL.getDictTagList+t,{},(function(t){0==t.code?t.data.length>0&&(e.time=t.data[0].tagValue):e.$message.error({message:t.msg})}))},getAllRuleCounts:(r=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n,i,r,a,o,s,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="range"===this.type&&this.startTime?this.startTime[0]:"",n="range"===this.type&&this.startTime?this.startTime[1]:"",i={qualityInfoId:this.tableId,dateType:y[this.type],startTime:e,endTime:n},t.prev=4,t.next=7,Object(h.O)(i);case 7:r=t.sent,a=r.data.data,o=[],s=[],l=[],u=[],a.forEach((function(t){var e=t.repeatRate,n=t.nullRate,i=t.uniqueRate,r=t.statisticDate;o.push(e||0),s.push(n||0),l.push(i||0),r&&u.push(r)})),this.drawBar01("bar01",o,s,l,u),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(4);case 21:case"end":return t.stop()}}),t,this,[[4,18]])}))),function(){return r.apply(this,arguments)}),getDataRuleList:function(){this.tableId},getDataManagerQualityRulesViewRuleReport:function(){var t=this;if(null==this.select.start_end_time||null==this.select.ruleId)return this.$message.error("日期和规则不能为空！"),!1;this.downLoad.start_end_time=this.select.start_end_time;var e={startTime:Object(p.a)(new Date(this.select.start_end_time[0]),"yyyy-MM-dd hh:mm:ss"),endTime:Object(p.a)(new Date(this.select.start_end_time[1]),"yyyy-MM-dd hh:mm:ss"),ruleId:this.select.ruleId};this.$API.post(this.$URL.getDataManagerQualityRulesViewRuleReport,e,(function(e){if(0==e.code){var n,i=[],r=[],a=[],o=[];if(e.data.dataQualityResultVos.length)for(var s=0;s<e.data.dataQualityResultVos.length;s++)n=e.data.dataQualityResultVos[0].ruleModelEnName,i.push(e.data.dataQualityResultVos[s].totalNum),r.push(e.data.dataQualityResultVos[s].resultNum),a.push(e.data.dataQualityResultVos[s].countDate),o.push(e.data.dataQualityResultVos[s].resultCount);else n=e.data.ruleModelEnName;t.drawBar02("bar02",n,a,i,r,o)}else t.$message.error(e.msg)}))},drawBar01:function(t,e,n,i,r){this.charts=f.a.init(document.getElementById(t)),this.charts.setOption({tooltip:{trigger:"axis",formatter:function(t){var e="";return e+=t[0].name+"</br>",e+="重复率："+t[0].value+"%</br>",e+="空值率："+t[1].value+"%</br>",e+="唯一值率："+t[2].value+"%</br>"}},legend:{data:["重复值","空值","唯一值"],top:0,itemWidth:14,itemHeight:2},color:["#F88168","#379EFD","#7AD4DF","#7ADF91","#9E87FF"],grid:{left:"3%",right:"10%",containLabel:!0},xAxis:[{type:"category",data:r,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",name:"占比",axisLabel:{show:!0,interval:"auto",formatter:"{value}%"}}],series:[{name:"重复值",type:"bar",barMaxWidth:20,itemStyle:{normal:{label:{}}},data:e},{name:"空值",type:"bar",barMaxWidth:20,itemStyle:{normal:{label:{}}},data:n},{name:"唯一值",type:"bar",barMaxWidth:20,barCategoryGap:"0%",itemStyle:{normal:{label:{}}},data:i}],dataZoom:{show:!0,type:"slider",bottom:30,height:18,start:20,end:80}});var a=this.charts;window.addEventListener("resize",(function(){a.resize()}))},drawBar02:function(t,e,n,i,r,a){var o=this;this.charts=f.a.init(document.getElementById(t));var s={backgroundColor:"#fff",title:{text:e+"率统计",x:"4%",top:"2%",textStyle:{color:"#333",fontSize:"14"},subtextStyle:{color:"#90979c",fontSize:"16"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow",textStyle:{color:"#fff"}},formatter:function(t){for(var e=t[0].name+"<br>",n="",i=0;i<t.length;i++)i==t.length-1?n+=t[i].marker+t[i].seriesName+":"+t[i].value+"%":n+=t[i].marker+t[i].seriesName+":"+t[i].value+"<br>";return e+n}},grid:{borderWidth:0,top:100,bottom:70,left:70,right:70,textStyle:{color:"#fff"}},legend:{x:"4%",top:"8%",textStyle:{color:"#90979c"},data:[e+"量","数据总量",e+"率"]},calculable:!0,xAxis:[{type:"category",axisLine:{lineStyle:{color:"#90979c"}},position:"bottom",splitLine:{show:!1},axisTick:{show:!1},splitArea:{show:!1},axisLabel:{interval:"auto"},data:n}],yAxis:[{type:"value",splitLine:{show:!1},axisLine:{show:!1,lineStyle:{color:"#90979c"}},axisTick:{show:!1},axisLabel:{show:!1,interval:0},splitArea:{show:!1}}],dataZoom:[{show:!0,height:30,xAxisIndex:[0],bottom:20,start:10,end:80,handleIcon:"path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z",handleSize:"110%",handleStyle:{color:"#d3dee5"},textStyle:{color:"#666"},borderColor:"#90979c"},{type:"inside",show:!0,height:15,start:1,end:35}],series:[{name:e+"量",type:"bar",stack:e+"总量",barMaxWidth:35,barGap:"10%",itemStyle:{normal:{color:"rgba(216,30,6,1)",label:{show:!0,textStyle:{color:"#fff"},position:"insideTop",formatter:function(t){return t.value>0?t.value:""}}}},data:r},{name:"数据总量",type:"bar",stack:e+"总量",itemStyle:{normal:{color:"rgba(64,158,255,1)",barBorderRadius:0,label:{show:!0,position:"insideTop",formatter:function(t){return t.value>0?t.value:""}}}},data:i},{name:e+"率",type:"line",stack:e+"总量",symbolSize:8,symbol:"circle",itemStyle:{normal:{color:"rgba(245,149,53,1)",barBorderRadius:0,label:{show:!0,position:"top",formatter:function(t){return t.value>0?t.value+"%":""}}}},data:a}]};this.$checkPermission("qualityReport_download")&&(s.toolbox={feature:{myDownload:{show:!0,title:"下载",icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",onclick:function(){o.downloadFile()}}}}),this.charts.setOption(s);var l=this.charts;window.addEventListener("resize",(function(){l.resize()}))},downloadFile:function(){var t=this,e={startTime:Object(p.a)(new Date(this.downLoad.start_end_time[0]),"yyyy-MM-dd hh:mm:ss"),endTime:Object(p.a)(new Date(this.downLoad.start_end_time[1]),"yyyy-MM-dd hh:mm:ss"),ruleId:this.select.ruleId};this.$API.downLoad(this.$URL.getDataManagerQualityRulesDownLoadRuleReport,e,(function(e){t.download(e.data,e.headers.filename)}))},download:function(t,e){if(t){var n=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.style.display="none",i.href=n,i.setAttribute("download",e),document.body.appendChild(i),i.click()}}},mounted:function(){var t=this.$route.query,e=t.connectId,n=t.dbName,i=t.tableName;e&&(this.dbName=n,this.connectId=e,this.tableName=i),this.params.dbName&&(this.hasParams=!0),this.getRuleDataSourceList(),this.getAllUsers()},watch:{type:function(t){this.getAllRuleCounts()},startTime:function(t){"range"===this.type&&this.getAllRuleCounts()}}},_=(n("4d41"),n("74a9"),Object(m.a)(w,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.ruleLoading,expression:"ruleLoading"}],staticClass:"viewReport",style:{height:t.dataQuality_height+"px"}},[e("div",{staticClass:"main-title"},[t._v("\n    质量报告\n  ")]),e("dragZone",{staticClass:"zt-drag-container clearfix main-content",style:{height:t.mainContentHeight+"px"}},[e("drag-content",{staticClass:"fl lt zt-scrollbar",staticStyle:{height:"100%",overflow:"auto"}},[e("div",{staticStyle:{display:"flex"}},[e("el-select",{staticStyle:{flex:"1","margin-bottom":"10px"},attrs:{placeholder:"请选择数据源"},on:{change:t.changeDbName},model:{value:t.dbName,callback:function(e){t.dbName=e},expression:"dbName"}},t._l(t.options_dbName,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px","line-height":"28px"},attrs:{effect:"dark",content:"支持的数据源类型：默认hive、Hive、SQL Server、Oracle、MySQL",placement:"top-start"}},[e("i",{staticClass:"icon icon-ic_remind"})])],1),e("el-select",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{placeholder:"请选择数据库"},on:{change:t.dataBaseChange},model:{value:t.connectId,callback:function(e){t.connectId=e},expression:"connectId"}},t._l(t.connect_list,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1),e("div",{staticStyle:{"margin-top":"10px"}},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入表名"},model:{value:t.tableName,callback:function(e){t.tableName="string"==typeof e?e.trim():e},expression:"tableName"}},[e("el-button",{attrs:{slot:"append"},on:{click:t.getRulesTableList},slot:"append"},[e("i",{staticClass:"icon icon-sousuochaxunchakan"})])],1)],1),e("ol",{staticClass:"tables",staticStyle:{"margin-top":"20px"}},t._l(t.tables,(function(n,i){return e("li",{key:i,class:{curColor:t.curTableId==n.id},attrs:{title:n.tableName},on:{click:function(e){return t.tableIdCorrelation(n.id,n.tableName)}}},[e("i",{staticClass:"icon icon-ic_table"}),t._v(t._s(n.tableName)+"\n          ")])})),0)],1),e("drag-handle"),e("drag-content",{staticClass:"fr rt",staticStyle:{height:"100%",overflow:"auto"}},[t.tableId?t._e():e("div",[t._v("点击左侧筛选的表查看质量报告")]),t.tableId?e("div",[e("div",{staticClass:"tableInfo"},[e("div",{staticClass:"main-title titWrap title"},[e("div",{staticClass:"tit"},[t._v("表"+t._s(t.curTableName)+"质量概览")]),e("span",{staticClass:"txt"},[t._v("  ")]),e("div",{staticClass:"right-ctr"},[e("el-button",{attrs:{type:"text"},on:{click:t.toView}},[t._v("查看该表质量规则概览\n              ")]),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.subscription}},[t._v("订阅\n              ")])],1)]),e("ol",{staticClass:"nums"},[e("li",[e("div",{staticClass:"box"},[e("p",[t._v("表质量分(分)")]),e("p",{staticClass:"num"},[e("span",{staticClass:"mark"},[t._v(t._s(null==t.qualitys.score?"--":t.qualitys.score))])])]),e("i",{staticClass:"icon icon-ic_quality"})]),e("li",[e("div",{staticClass:"box"},[e("p",[t._v("表数据总量(条)")]),e("p",{staticClass:"num"},[t._v(t._s(t.qualitys.dataTotalNum||0))])]),e("i",{staticClass:"icon icon-ic_data"})]),e("li",[e("div",{staticClass:"box"},[e("p",[t._v("总规则(条)")]),e("p",{staticClass:"num"},[t._v(t._s(t.qualitys.ruleTotalNum||0))])]),e("i",{staticClass:"icon icon-ic_total"})]),e("li",[e("div",{staticClass:"box"},[e("p",[t._v("异常规则(条)")]),e("p",{staticClass:"num"},[t._v(t._s(t.qualitys.exceptionTotalNum||0))])]),e("i",{staticClass:"icon icon-ic_abnormal"})]),e("li",{staticStyle:{"border-right-width":"0px"}},[e("div",{staticClass:"box"},[e("p",[t._v("强规则(条)")]),e("p",{staticClass:"num"},[t._v(t._s(t.qualitys.strongRuleTotalNum||0))])]),e("i",{staticClass:"icon icon-ic_strong"})])])]),e("div",{staticClass:"wrap"},[e("div",{staticClass:"main-title titWrap",staticStyle:{display:"flex"}},[e("span",{staticClass:"tit",staticStyle:{flex:"1",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:"表"+t.curTableName+"质量总计"}},[t._v("表"+t._s(t.curTableName)+"质量总计")]),e("div",{staticClass:"right-choice-report right-choice",staticStyle:{width:"540px"}},[e("span",{class:["week"===t.type?"active":""],attrs:{"data-v-report":""},on:{click:function(e){t.type="week"}}},[t._v("本周")]),e("span",{class:["month"===t.type?"active":""],attrs:{"data-v-report":""},on:{click:function(e){t.type="month"}}},[t._v("本月")]),e("div",{class:["range"===t.type?"active":""],attrs:{"data-v-report":""}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:"",size:"mini"},on:{change:t.rangeChange},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1)])]),e("div",{staticClass:"bar",attrs:{id:"bar01"}})])]):t._e()])],1),e("subscription-dialog",{ref:"subscript",attrs:{userList:t.userList},on:{refresh:t.refreshList}})],1)}),[],!1,null,"36f85b99",null));e.default=_.exports},cd1c:function(t,e,n){var i=n("e853");t.exports=function(t,e){return new(i(t))(e)}},e853:function(t,e,n){var i=n("d3f4"),r=n("1169"),a=n("2b4c")("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}}}]);