(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-745b0e60"],{"0227":function(e,t,a){"use strict";a("7044")},1845:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-05defe10]{color:#1740dc}.success-color[data-v-05defe10]{color:#52c41a}.warning-color[data-v-05defe10]{color:#faad14}.error-color[data-v-05defe10]{color:#f5222d}.info-color[data-v-05defe10]{color:#909399}.border-color[data-v-05defe10]{border:1px solid #e5e6e9}.customer-table[data-v-05defe10]{width:100%;height:100%}",""])},7044:function(e,t,a){var i=a("1845");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("b423f812",i,!0,{sourceMap:!1,shadowMode:!1})},"790d":function(e,t,a){var i=a("8549");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("61bd7ded",i,!0,{sourceMap:!1,shadowMode:!1})},8549:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-3d529ce0]{color:#1740dc}.success-color[data-v-3d529ce0]{color:#52c41a}.warning-color[data-v-3d529ce0]{color:#faad14}.error-color[data-v-3d529ce0]{color:#f5222d}.info-color[data-v-3d529ce0]{color:#909399}.border-color[data-v-3d529ce0]{border:1px solid #e5e6e9}.flex-column[data-v-3d529ce0]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.flex-align-center[data-v-3d529ce0],.flex-column[data-v-3d529ce0]{display:-webkit-box;display:-ms-flexbox;display:flex}.flex-align-center[data-v-3d529ce0]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.quality-list[data-v-3d529ce0]{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.quality-list .list-top[data-v-3d529ce0]{width:100%;-webkit-box-shadow:0 2px 12px 0 rgba(54,52,52,.1);box-shadow:0 2px 12px 0 rgba(54,52,52,.1);padding:15px 20px}.quality-list .list-top .title[data-v-3d529ce0]{font-size:16px;color:rgba(0,0,0,.847);font-weight:400}.quality-list .list-top .list-choice[data-v-3d529ce0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px}.quality-list .list-top .list-choice span[data-v-3d529ce0]{font-size:14px}.quality-list .list-top .list-choice span[data-v-3d529ce0]:nth-child(3){margin-left:20px}.quality-list .list-content[data-v-3d529ce0]{margin-top:10px;-webkit-box-shadow:0 2px 12px 0 rgba(54,52,52,.1);box-shadow:0 2px 12px 0 rgba(54,52,52,.1);width:100%;-webkit-box-flex:1;-ms-flex:1;flex:1;padding:15px 20px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.quality-list .list-content .search[data-v-3d529ce0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.quality-list .list-content .search .right i[data-v-3d529ce0]{margin-left:10px}.quality-list .list-content .search[data-v-3d529ce0] .el-input{margin-right:10px;width:200px}.quality-list .list-content .search[data-v-3d529ce0] .el-button{padding:7px 15px!important}.quality-list .list-content .search span[data-v-3d529ce0]:nth-child(3){margin-left:15px}.quality-list .list-content .search-list[data-v-3d529ce0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1;flex:1}.quality-list .list-content .search-list .search-table[data-v-3d529ce0]{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:14px}.quality-list .list-content .search-list .search-table .blue[data-v-3d529ce0]{color:#1740dc;cursor:pointer;margin-right:15px}.quality-list .list-content .search-list .search-table .red[data-v-3d529ce0]{color:#d9001b;margin-left:10px;cursor:pointer}.quality-list .list-content .search-list .search-pagination[data-v-3d529ce0]{height:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}",""])},"8a96":function(e,t,a){"use strict";a("790d")},aabb:function(e,t,a){"use strict";a.r(t);a("a481"),a("386d"),a("7f7f"),a("ac6a"),a("96cf");var i,l,s,n,r,o,c=a("1da1"),d=(a("d263"),a("c5f6"),a("50f0")),u={name:"CustomerTable",props:{dataList:{type:Array,default:function(){return[]}},labelMap:{type:Object,default:function(){return[]}},height:{type:Number,default:540}},data:function(){return{scale:1}},components:{filterTBHeader:d.a},created:function(){},computed:{},methods:{headerCellStyle:function(){return{}},headerRowStyle:function(){return{}},cellStyle:function(){return{}},rowStyle:function(){return{}},handleSortChange:function(e){this.$emit("sortChange",e)}}},p=(a("0227"),a("2877")),h=Object(p.a)(u,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"customer-table"},[t("el-table",{attrs:{data:e.dataList,"header-cell-style":e.headerCellStyle,"header-row-style":e.headerRowStyle,"cell-style":e.cellStyle,"row-style":e.rowStyle,height:e.height},on:{"sort-change":e.handleSortChange}},e._l(e.labelMap,(function(a,i){return t("el-table-column",{key:i,attrs:{prop:i,label:a.name,sortable:a.sortable,width:a.width,fixed:a.fixed,align:a.align||"left"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._t("row",null,{row:l,prop:i,label:a.name})]}}],null,!0)})})),1)],1)}),[],!1,null,"05defe10",null).exports,f=a("1cda"),m=a("cb29"),b=a("86b9"),x={name:"QualityList",data:function(){return{loading:!1,moreType:!1,createPerList:[{userId:121,userName:"张三"}],dataSourceList:[],dataBaseList:[],typeId:null,typeList:[],connectId:null,databaseName:null,searchUserId:null,tableName:null,qualityList:[],createUserList:[],labelMap:{typeName:{name:"数据源类型",sortable:!1},sourceName:{name:"数据源名称",sortable:!1},databaseName:{name:"数据库",sortable:!1},tableName:{name:"表名",sortable:!1},createPerName:{name:"质量责任人",sortable:!1},ruleTotalNum:{name:"规则总数",sortable:"custom",width:100},exceptionTotalNum:{name:"规则异常条数",sortable:"custom",width:120},alarmTotalNum:{name:"规则触发告警次数",sortable:!1,width:140},lastExecutionTime:{name:"最新执行时间",sortable:!1,width:160},operator:{name:"操作",align:"right",sortable:!1,width:170}},currentPage:1,pageTotal:0,pageSize:10,visible:!1,ruleTotalNumSort:null,exceptionTotalNumSort:null,isShowDia:!1}},computed:{connectName:function(){var e=this;return this.dataSourceList.length>0?this.dataSourceList.filter((function(t){return t.value===e.connectId}))[0].label:""}},methods:{searchMore:function(){this.moreType=!this.moreType},getcreateUserList:(o=Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.M)({});case 3:0===(t=e.sent).data.code?this.createUserList=t.data.data:this.$message.error(t.data.msg),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return o.apply(this,arguments)}),handleSortChange:function(e){var t={ascending:"asc",descending:"desc"};"ruleTotalNum"===e.prop?(this.ruleTotalNumSort=e.order?t[e.order]:null,this.exceptionTotalNumSort=null):"exceptionTotalNum"===e.prop&&(this.exceptionTotalNumSort=e.order?t[e.order]:null,this.ruleTotalNumSort=null),this.getQualityInfoList()},handlePageChange:function(e){this.currentPage=e},handleSizeChange:function(e){this.pageSize=e},clearAllRules:function(e){var t=this;this.$confirm("你确定要清空全部规则吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){t.qualityRuleDeleteAll({qualityInfoId:e.id})})).catch((function(){}))},setRules:function(e){localStorage.tableDetail=JSON.stringify({typeId:e.typeId,connectId:e.connectId,connectName:e.sourceName,databaseName:e.databaseName,tableName:e.tableName,id:e.id}),this.$router.push("/qualityListDetail")},fastCreateRules:function(){var e=this;this.isShowDia=!0,this.visible=!0,setTimeout((function(){e.$refs.rulesdialog.handleOpenDialog()}),10)},handleDialogClose:function(){this.visible=!1},getQualityInfoList:(r=Object(c.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,t={page:this.currentPage,pageSize:this.pageSize,typeId:this.typeId,ruleTotalNumSort:this.ruleTotalNumSort,exceptionTotalNumSort:this.exceptionTotalNumSort,connectId:this.connectId,databaseName:this.databaseName,searchUserId:this.searchUserId,tableName:this.tableName},e.prev=2,e.next=5,Object(m.s)(t);case 5:a=e.sent,this.qualityList=a.data.data.records,this.pageTotal=a.data.data.total,this.loading=!1,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(){return r.apply(this,arguments)}),qualityRuleDeleteAll:(n=Object(c.a)(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.qualityInfoId,i={qualityInfoId:a},e.prev=2,e.next=5,Object(m.W)(i);case 5:0===e.sent.data.code&&(this.$message({type:"success",message:"清空成功!"}),this.getQualityInfoList()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.$message.error("接口请求错误");case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return n.apply(this,arguments)}),getDatasourceTypeList:(s=Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.j)();case 3:0===(t=e.sent).data.code&&(this.typeList=t.data.data,this.typeId=this.typeList[0].typeId,this.getRuleDataSourceList(),this.getQualityInfoList()),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return s.apply(this,arguments)}),getRuleDataSourceList:(l=Object(c.a)(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.w)({typeId:this.typeId});case 3:0===(t=e.sent).data.code&&(this.dataSourceList=[{label:"全部数据源",value:"-1"}],t.data.data.forEach((function(e){a.dataSourceList.push({value:e.id,label:e.name})})),this.connectId=this.dataSourceList.length?this.dataSourceList[0].value:"",""===this.connectId&&this.$message.warning("请检查当前用户下是否有该数据源类型的数据源权限"),this.getQualityInfoList()),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return l.apply(this,arguments)}),qualityRuleDatabase:(i=Object(c.a)(regeneratorRuntime.mark((function e(t){var a,i,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.connectId,e.prev=1,e.next=4,Object(b.e)(a);case 4:if(i=e.sent,this.dataBaseList=[{label:"全部数据库",value:""}],this.databaseName=this.dataBaseList[0].value,"-1"!=a){e.next=9;break}return e.abrupt("return");case 9:i.data.data.forEach((function(e){l.dataBaseList.push({value:e,label:e})})),this.dataBaseList.length>0?this.databaseName=this.dataBaseList[0].value:this.databaseName=null,this.getQualityInfoList(),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return i.apply(this,arguments)}),search:function(){this.currentPage=1,this.getQualityInfoList()},reset:function(){this.currentPage=1,this.searchUserId="",this.tableName="",this.typeId=this.typeList[0].typeId,this.connectId=this.dataSourceList[0].value,this.qualityRuleDatabase({connectId:this.connectId}),this.getQualityInfoList()},handleRefresh:function(){this.getQualityInfoList()}},mounted:function(){this.getDatasourceTypeList(),this.getcreateUserList()},watch:{currentPage:function(){this.getQualityInfoList()},connectId:function(e){""!==e?this.qualityRuleDatabase({connectId:this.connectId}):(this.databaseName="",this.dataBaseList=[])},databaseName:function(){this.currentPage=1,this.getQualityInfoList()},pageSize:function(){this.getQualityInfoList()}},components:{CustomerTable:h,RulesDialog:f.a}},g=(a("8a96"),Object(p.a)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"quality-list"},[e._m(0),t("div",{staticClass:"list-content"},[t("el-form",{ref:"search",staticClass:"demo-form-inline",attrs:{inline:!0}},[t("el-row",{attrs:{gutter:10}},[t("el-col",{staticStyle:{"font-size":"12px"},attrs:{md:4,lg:5,xl:12}},[t("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.fastCreateRules}},[e._v("快速创建规则")])],1),t("el-col",{staticStyle:{padding:"0px"},attrs:{md:20,lg:19,xl:12}},[t("div",{staticClass:"fr"},[t("el-form-item",[t("el-select",{attrs:{filterable:"",placeholder:"请选择数据源分类",size:"mini"},on:{change:e.getRuleDataSourceList},model:{value:e.typeId,callback:function(t){e.typeId=t},expression:"typeId"}},e._l(e.typeList,(function(e){return t("el-option",{key:e.typeId,attrs:{label:e.typeName,value:e.typeId}})})),1)],1),t("el-form-item",[t("el-select",{attrs:{filterable:"",placeholder:"请选择数据源",size:"mini"},model:{value:e.connectId,callback:function(t){e.connectId=t},expression:"connectId"}},e._l(e.dataSourceList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-tooltip",{staticStyle:{"margin-left":"10px"},attrs:{effect:"dark",content:"支持的数据源类型：默认hive、Hive、SQL Server、Oracle、MySQL",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind"})])],1),t("el-form-item",[t("el-select",{attrs:{filterable:"",placeholder:"请选择数据库",size:"mini"},model:{value:e.databaseName,callback:function(t){e.databaseName=t},expression:"databaseName"}},e._l(e.dataBaseList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.search}},[e._v("查询")]),t("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v("重置")]),t("el-button",{attrs:{type:"text"},on:{click:e.searchMore}},[e._v(e._s(e.moreType?"普通查询":"高级查询"))])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.moreType,expression:"moreType"}]},[t("el-form-item",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选质量责任人"},model:{value:e.searchUserId,callback:function(t){e.searchUserId=t},expression:"searchUserId"}},e._l(e.createUserList,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入表名"},model:{value:e.tableName,callback:function(t){e.tableName="string"==typeof t?t.trim():t},expression:"tableName"}})],1)],1)],1)])],1)],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"search-list"},[t("div",{staticClass:"search-table"},[t("customer-table",{attrs:{dataList:e.qualityList,labelMap:e.labelMap,height:610},on:{sortChange:e.handleSortChange},scopedSlots:e._u([{key:"row",fn:function(a){var i=a.row,l=a.prop,s=a.label;return["表名"===s?t("div",[t("span",[e._v(e._s(i[l]))])]):"最新执行时间"===s?t("div",[e._v("\n              "+e._s(i[l]?i[l].replace("T"," "):"")+"\n            ")]):"操作"===s?t("div",[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.setRules(i)}}},[e._v("配置规则")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clearAllRules(i)}}},[e._v("清空全部规则")])],1):t("div",[e._v(e._s(i[l]))])]}}])})],1),t("div",{staticClass:"search-pagination"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}})],1)])],1),e.isShowDia?t("rules-dialog",{ref:"rulesdialog",attrs:{isFastCreate:!0,visible:e.visible},on:{close:e.handleDialogClose,fresh:e.handleRefresh}}):e._e()],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"list-top"},[e("div",{staticClass:"title"},[this._v("表质量列表")])])}],!1,null,"3d529ce0",null));t.default=g.exports}}]);