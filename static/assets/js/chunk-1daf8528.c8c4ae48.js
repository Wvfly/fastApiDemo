(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1daf8528"],{"1a57":function(t,e,n){"use strict";n.r(e);n("386d"),n("8e6e"),n("ac6a"),n("456d");var a=n("ade3"),r=n("cb29");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={components:{},data:function(){return{operateUserName:"",detail:{monitorName:"",createPerName:"",createTime:"",alarmObjectList:[]},activeName:"list",list:[],log:[],listPage:{page:1,pageSize:10,totalCount:0},logPage:{page:1,pageSize:10,totalCount:0}}},computed:{id:function(){return this.$route.query.id}},watch:{},methods:{getDetail:function(){var t=this;Object(r.Q)({monitorId:this.id}).then((function(e){0===e.data.code&&(t.detail=e.data.data)})).catch((function(e){t.$message.error("规则详情接口请求错误")}))},getList:function(){var t=this,e=i(i({},this.listPage),{},{monitorId:this.id});Object(r.T)(e).then((function(e){0===e.data.code&&(t.list=e.data.data.records,t.listPage.totalCount=e.data.data.total)})).catch((function(e){t.$message.error("应用列表接口请求错误")}))},getlog:function(){var t=this,e=i(i({},this.logPage),{},{monitorId:this.id,operateUserName:this.operateUserName});Object(r.U)(e).then((function(e){0===e.data.code&&(t.log=e.data.data.records,t.logPage.totalCount=e.data.data.total)})).catch((function(e){t.$message.error("日志接口请求错误")}))},remove:function(t){var e=this;1!=this.list.length?this.$confirm("删除后，数据无法恢复。","确定要删除吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r.c)({id:t}).then((function(t){0===t.data.code&&(e.$message.success("删除成功"),1==e.list.length&&e.listPage.page>1&&e.page.page--,e.getList())})).catch((function(t){}))})).catch((function(){return!1})):this.$message.warning("监控应用列表中必须至少存在一条质量规则！")},search:function(){this.logPage.page=1,this.getlog()},sizeChangeHandle:function(t){this.listPage.pageSize=t,this.listPage.page=1,this.getList()},currentChangeHandle:function(t){this.listPage.page=t,this.getList()},sizeChangeHandle1:function(t){this.logPage.pageSize=t,this.logPage.page=1,this.getlog()},currentChangeHandle1:function(t){this.logPage.page=t,this.getlog()}},created:function(){},mounted:function(){this.getDetail(),this.getList(),this.getlog()}},l=(n("ac0d"),n("2877")),c=Object(l.a)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"monitorInfo"},[e("div",{staticClass:"content"},[e("div",{staticClass:"top-detail"},[e("div",{staticClass:"sub-title"},[e("span",{staticClass:"text"},[t._v("监控名称："+t._s(t.detail.monitorName))]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回配置监控")])],1),e("div",{staticClass:"detail-items"},[e("p",{staticClass:"detail"},[e("span",{staticClass:"label"},[t._v("创建人：")]),e("span",{staticClass:"value"},[t._v(t._s(t.detail.createPerName))])]),t._m(0),e("p",{staticClass:"detail"},[e("span",{staticClass:"label"},[t._v("创建时间：")]),e("span",{staticClass:"value"},[t._v(t._s(t.detail.createTime))])]),e("p",{staticClass:"detail"},[e("span",{staticClass:"label"},[t._v("接受告警人：")]),e("span",{staticClass:"value"},t._l(t.detail.alarmObjectList,(function(n,a){return e("span",{key:a,staticClass:"value-item"},[t._v(t._s(n.alarmObject)+t._s(a==t.detail.alarmObjectList.length-1?"":"、"))])})),0)])])]),e("div",{staticClass:"bottom"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"应用列表",name:"list"}},[e("div",{staticClass:"tips"},[t._v("\r\n                        提示：监控应用列表中必须至少存在一条质量规则。\r\n                    ")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[e("el-table-column",{attrs:{prop:"ruleName",label:"质量规则名称"}}),e("el-table-column",{attrs:{prop:"tableName",label:"表"}}),e("el-table-column",{attrs:{prop:"ruleCreatePerName",label:"质量规则创建人"}}),e("el-table-column",{attrs:{prop:"createTime",label:"加入日期"}}),e("el-table-column",{attrs:{prop:"createDate","header-align":"right",align:"right",width:"50",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[e("el-button",{attrs:{disabled:1==t.list.length,type:"text"},on:{click:function(e){return t.remove(a.id)}}},[t._v("移除")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.listPage.page,"page-sizes":[10,20,50,100],"page-size":t.listPage.pageSize,total:t.listPage.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1),e("el-tab-pane",{attrs:{label:"日志",name:"log"}},[e("div",{staticClass:"sub-ctr"},[e("el-form",{staticClass:"form",attrs:{inline:!0}},[e("el-form-item",{staticClass:"fr",staticStyle:{"margin-right":"0"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查询")])],1),e("el-form-item",{staticClass:"fr",staticStyle:{"margin-right":"10px"},attrs:{label:"操作人",prop:"operateUserName"}},[e("el-input",{attrs:{placeholder:"输入操作人"},model:{value:t.operateUserName,callback:function(e){t.operateUserName=e},expression:"operateUserName"}})],1)],1)],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.log}},[e("el-table-column",{attrs:{"min-width":"200","show-overflow-tooltip":!0,prop:"operateContent",label:"操作内容"}}),e("el-table-column",{attrs:{prop:"operateUserName",label:"操作人"}}),e("el-table-column",{attrs:{prop:"operateTime","header-align":"right",align:"right",width:"140",label:"操作时间"}})],1),e("el-pagination",{attrs:{"current-page":t.logPage.page,"page-sizes":[10,20,50,100],"page-size":t.logPage.pageSize,total:t.logPage.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle1,"current-change":t.currentChangeHandle1}})],1)],1)],1)])])}),[function(){var t=this._self._c;return t("p",{staticClass:"detail"},[t("span",{staticClass:"label"},[this._v("告警方式：")]),t("span",{staticClass:"value"},[this._v("邮件")])])}],!1,null,null,null);e.default=c.exports},5539:function(t,e,n){var a=n("7250");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n("499e").default)("94cccadc",a,!0,{sourceMap:!1,shadowMode:!1})},7250:function(t,e,n){(t.exports=n("2350")(!1)).push([t.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.monitorInfo .content{background-color:#f7f7f8}.monitorInfo .content .top-detail{padding:20px;background:#fff;border:1px solid #e5e6e9}.monitorInfo .content .top-detail .sub-title{line-height:28px;font-weight:500;color:#040c2c;font-size:20px;margin-bottom:10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.monitorInfo .content .top-detail .detail-items{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.monitorInfo .content .top-detail .detail-items .detail{width:50%;line-height:24px}.monitorInfo .content .top-detail .detail-items .detail .label{margin-right:10px;display:inline-block}.monitorInfo .content .top-detail .detail-items .detail .value{display:inline-block;vertical-align:middle;word-wrap:break-word;width:400px;overflow:auto;max-height:50px;overflow-y:auto}.monitorInfo .content .bottom{background:#fff;margin-top:10px;padding:0 20px;height:100%}.monitorInfo .content .bottom .el-form-item__label{font-size:12px}.monitorInfo .content .bottom .tips{font-size:12px;font-weight:400;color:#5c6176;margin-bottom:15px}",""])},ac0d:function(t,e,n){"use strict";n("5539")},cb29:function(t,e,n){"use strict";n.d(e,"M",(function(){return o})),n.d(e,"L",(function(){return i})),n.d(e,"s",(function(){return u})),n.d(e,"W",(function(){return l})),n.d(e,"w",(function(){return c})),n.d(e,"x",(function(){return s})),n.d(e,"j",(function(){return d})),n.d(e,"t",(function(){return f})),n.d(e,"V",(function(){return p})),n.d(e,"B",(function(){return g})),n.d(e,"C",(function(){return h})),n.d(e,"k",(function(){return m})),n.d(e,"Z",(function(){return b})),n.d(e,"ab",(function(){return y})),n.d(e,"r",(function(){return v})),n.d(e,"y",(function(){return C})),n.d(e,"l",(function(){return w})),n.d(e,"G",(function(){return L})),n.d(e,"O",(function(){return x})),n.d(e,"N",(function(){return I})),n.d(e,"d",(function(){return P})),n.d(e,"E",(function(){return j})),n.d(e,"f",(function(){return O})),n.d(e,"fb",(function(){return _})),n.d(e,"A",(function(){return R})),n.d(e,"X",(function(){return T})),n.d(e,"Y",(function(){return k})),n.d(e,"z",(function(){return N})),n.d(e,"db",(function(){return S})),n.d(e,"K",(function(){return z})),n.d(e,"h",(function(){return D})),n.d(e,"g",(function(){return U})),n.d(e,"F",(function(){return H})),n.d(e,"u",(function(){return q})),n.d(e,"p",(function(){return A})),n.d(e,"q",(function(){return Q})),n.d(e,"P",(function(){return $})),n.d(e,"I",(function(){return M})),n.d(e,"J",(function(){return B})),n.d(e,"e",(function(){return E})),n.d(e,"D",(function(){return J})),n.d(e,"H",(function(){return F})),n.d(e,"a",(function(){return V})),n.d(e,"gb",(function(){return G})),n.d(e,"eb",(function(){return K})),n.d(e,"bb",(function(){return W})),n.d(e,"cb",(function(){return X})),n.d(e,"b",(function(){return Y})),n.d(e,"i",(function(){return Z})),n.d(e,"Q",(function(){return tt})),n.d(e,"m",(function(){return et})),n.d(e,"v",(function(){return nt})),n.d(e,"c",(function(){return at})),n.d(e,"T",(function(){return rt})),n.d(e,"U",(function(){return ot})),n.d(e,"R",(function(){return it})),n.d(e,"S",(function(){return ut})),n.d(e,"o",(function(){return lt})),n.d(e,"n",(function(){return ct}));var a=n("2b0e"),r=n("fedb"),o=function(){return a.default.http.get(r.a.getRuleCreateUserList)},i=function(t){return a.default.http.post(r.a.getRuleDetailCreateUserListNew,t)},u=function(t){return a.default.http.post(r.a.getQualityInfoList,t)},l=function(t){return a.default.http.get(r.a.qualityRuleDeleteAll+"?qualityInfoId=".concat(t.qualityInfoId))},c=function(t){return a.default.http.get(r.a.getRuleDataSourceList+"?typeId=".concat(t.typeId))},s=function(){return a.default.http.get(r.a.getRuleDataSourceList)},d=function(){return a.default.http.get(r.a.getDatasourceTypeList)},f=function(t){return a.default.http.post(r.a.getQualityRuleList,t)},p=function(t){return a.default.http.get(r.a.qualityRuleDelete+"?ruleId=".concat(t.ruleId))},g=function(t){return a.default.http.get(r.a.getRuleTabelList+"?connectId=".concat(t.connectId,"&databaseName=").concat(t.databaseName))},h=function(t){return a.default.http.get(r.a.getRuleTemplateList+"?ruleType=".concat(t.ruleType))},m=function(t){return a.default.http.post(r.a.getFieldList,t)},b=function(t){return a.default.http.post(r.a.qualityRuleSave,t)},y=function(t){return a.default.http.post(r.a.qualityRuleVerify,t)},v=function(t){return a.default.http.post(r.a.getPartitionList,t)},C=function(t){return a.default.http.get(r.a.getRuleDetail+"?ruleId=".concat(t.ruleId))},w=function(t){return a.default.http.post(r.a.getListByDbAndConnent,t)},L=function(t){return a.default.http.get(r.a.getTableQualitys,{params:t})},x=function(t){return a.default.http.post(r.a.getlistTableQualitySumCount,t)},I=function(t){return a.default.http.post(r.a.getlistTableQualityCharts,t)},P=function(t){return a.default.http.post(r.a.downLoadRuleReport,t,{responseType:"arraybuffer"})},j=function(t){return a.default.http.get(r.a.getSubscribeInfo,{params:t})},O=function(){return a.default.http.get(r.a.getAllUsers)},_=function(t){return a.default.http.post(r.a.updateSubscribeInfo,t)},R=function(){return a.default.http.get(r.a.getRuleProjectList)},T=function(t){return a.default.http.get(r.a.qualityRuleJobList+"?procId=".concat(t.procId))},k=function(t){return a.default.http.get(r.a.qualityRuleNodeList+"?jobId=".concat(t.jobId))},N=function(t){return a.default.http.post(r.a.getRuleJobList,t)},S=function(t){return a.default.http.post(r.a.saveBatchAdd,t)},z=function(){return a.default.http.get(r.a.getUserProjectList)},D=function(){return a.default.http.get(r.a.getCategoryList)},U=function(t){return a.default.http.get(r.a.getAssetCategoryList+"?categoryId=".concat(t.categoryId))},H=function(t){return a.default.http.get(r.a.getTableQualityScore+"?procId=".concat(t.procId))},q=function(t){return a.default.http.post(r.a.getQualityScoreHistoryList,t)},A=function(t){return a.default.http.post(r.a.getPageExceptionTopList,t)},Q=function(t){return a.default.http.post(r.a.getPageScoreTopList,t)},$=function(t){return a.default.http.post(r.a.immediateExecution+"".concat(t.ruleId))},M=function(t){return a.default.http.get(r.a.getTodayAvgScoreAndRatio+"?assetId=".concat(t.assetId))},B=function(t){return a.default.http.post(r.a.getTrendList,t)},E=function(t){return a.default.http.post(r.a.getAlarmRank,t)},J=function(t){return a.default.http.post(r.a.getScoreRank,t)},F=function(t){return a.default.http.post(r.a.getTemplateList,t)},V=function(t){return a.default.http.post(r.a.addTemplate,t)},G=function(t){return a.default.http.post(r.a.updateTemplate,t)},K=function(t){return a.default.http.get(r.a.templateDetail+"?id=".concat(t.id))},W=function(t){return a.default.http.post(r.a.ruleAppList,t)},X=function(t){return a.default.http.post(r.a.ruleLogList,t)},Y=function(t){return a.default.http.post(r.a.delTemplate+"?id=".concat(t.id))},Z=function(t){return a.default.http.get(r.a.getCreatePerList)},tt=function(t){return a.default.http.get(r.a.monitorDetail+t.monitorId)},et=function(t){return a.default.http.get(r.a.getMonitorCreatePerList)},nt=function(t){return a.default.http.get(r.a.getRuleCreatePerList)},at=function(t){return a.default.http.post(r.a.deleteMonitorRule+t.id)},rt=function(t){return a.default.http.post(r.a.monitorRelRuleList,t)},ot=function(t){return a.default.http.post(r.a.monitorlogList,t)},it=function(t){return a.default.http.post(r.a.monitorHistoryList,t)},ut=function(t){return a.default.http.get(r.a.monitorHistoryResultList+t.id)},lt=function(t){return a.default.http.post(r.a.getNotificationUser,t)},ct=function(){return a.default.http.get(r.a.getMonitorObjectList)}}}]);