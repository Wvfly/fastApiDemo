(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-bc563460"],{"32f1":function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.ruleTemplate{text-align:left}.ruleTemplate>.title{height:48px;line-height:48px;border-bottom:1px solid #e5e6e9;font-weight:400;color:#040c2c;font-size:16px;padding:0 20px}.ruleTemplate .add-btn{padding:15px 20px 0}.ruleTemplate .add-btn,.ruleTemplate .add-btn .ctr{display:-webkit-box;display:-ms-flexbox;display:flex}.ruleTemplate .add-btn .ctr{width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.ruleTemplate .add-btn .ctr .el-form-item__label{font-size:12px}.ruleTemplate .right-select .el-input__inner{width:80px}.ruleTemplate .content{padding:0 20px}",""])},4520:function(t,e,r){"use strict";r("faf9")},cb29:function(t,e,r){"use strict";r.d(e,"M",(function(){return u})),r.d(e,"L",(function(){return i})),r.d(e,"s",(function(){return o})),r.d(e,"W",(function(){return l})),r.d(e,"w",(function(){return c})),r.d(e,"x",(function(){return s})),r.d(e,"j",(function(){return d})),r.d(e,"t",(function(){return p})),r.d(e,"V",(function(){return f})),r.d(e,"B",(function(){return m})),r.d(e,"C",(function(){return g})),r.d(e,"k",(function(){return h})),r.d(e,"Z",(function(){return b})),r.d(e,"ab",(function(){return y})),r.d(e,"r",(function(){return T})),r.d(e,"y",(function(){return L})),r.d(e,"l",(function(){return v})),r.d(e,"G",(function(){return x})),r.d(e,"O",(function(){return k})),r.d(e,"N",(function(){return I})),r.d(e,"d",(function(){return w})),r.d(e,"E",(function(){return C})),r.d(e,"f",(function(){return S})),r.d(e,"fb",(function(){return N})),r.d(e,"A",(function(){return P})),r.d(e,"X",(function(){return j})),r.d(e,"Y",(function(){return O})),r.d(e,"z",(function(){return R})),r.d(e,"db",(function(){return _})),r.d(e,"K",(function(){return D})),r.d(e,"h",(function(){return q})),r.d(e,"g",(function(){return z})),r.d(e,"F",(function(){return $})),r.d(e,"u",(function(){return A})),r.d(e,"p",(function(){return E})),r.d(e,"q",(function(){return Q})),r.d(e,"P",(function(){return V})),r.d(e,"I",(function(){return H})),r.d(e,"J",(function(){return F})),r.d(e,"e",(function(){return M})),r.d(e,"D",(function(){return U})),r.d(e,"H",(function(){return B})),r.d(e,"a",(function(){return J})),r.d(e,"gb",(function(){return Z})),r.d(e,"eb",(function(){return G})),r.d(e,"bb",(function(){return K})),r.d(e,"cb",(function(){return W})),r.d(e,"b",(function(){return X})),r.d(e,"i",(function(){return Y})),r.d(e,"Q",(function(){return tt})),r.d(e,"m",(function(){return et})),r.d(e,"v",(function(){return rt})),r.d(e,"c",(function(){return nt})),r.d(e,"T",(function(){return at})),r.d(e,"U",(function(){return ut})),r.d(e,"R",(function(){return it})),r.d(e,"S",(function(){return ot})),r.d(e,"o",(function(){return lt})),r.d(e,"n",(function(){return ct}));var n=r("2b0e"),a=r("fedb"),u=function(){return n.default.http.get(a.a.getRuleCreateUserList)},i=function(t){return n.default.http.post(a.a.getRuleDetailCreateUserListNew,t)},o=function(t){return n.default.http.post(a.a.getQualityInfoList,t)},l=function(t){return n.default.http.get(a.a.qualityRuleDeleteAll+"?qualityInfoId=".concat(t.qualityInfoId))},c=function(t){return n.default.http.get(a.a.getRuleDataSourceList+"?typeId=".concat(t.typeId))},s=function(){return n.default.http.get(a.a.getRuleDataSourceList)},d=function(){return n.default.http.get(a.a.getDatasourceTypeList)},p=function(t){return n.default.http.post(a.a.getQualityRuleList,t)},f=function(t){return n.default.http.get(a.a.qualityRuleDelete+"?ruleId=".concat(t.ruleId))},m=function(t){return n.default.http.get(a.a.getRuleTabelList+"?connectId=".concat(t.connectId,"&databaseName=").concat(t.databaseName))},g=function(t){return n.default.http.get(a.a.getRuleTemplateList+"?ruleType=".concat(t.ruleType))},h=function(t){return n.default.http.post(a.a.getFieldList,t)},b=function(t){return n.default.http.post(a.a.qualityRuleSave,t)},y=function(t){return n.default.http.post(a.a.qualityRuleVerify,t)},T=function(t){return n.default.http.post(a.a.getPartitionList,t)},L=function(t){return n.default.http.get(a.a.getRuleDetail+"?ruleId=".concat(t.ruleId))},v=function(t){return n.default.http.post(a.a.getListByDbAndConnent,t)},x=function(t){return n.default.http.get(a.a.getTableQualitys,{params:t})},k=function(t){return n.default.http.post(a.a.getlistTableQualitySumCount,t)},I=function(t){return n.default.http.post(a.a.getlistTableQualityCharts,t)},w=function(t){return n.default.http.post(a.a.downLoadRuleReport,t,{responseType:"arraybuffer"})},C=function(t){return n.default.http.get(a.a.getSubscribeInfo,{params:t})},S=function(){return n.default.http.get(a.a.getAllUsers)},N=function(t){return n.default.http.post(a.a.updateSubscribeInfo,t)},P=function(){return n.default.http.get(a.a.getRuleProjectList)},j=function(t){return n.default.http.get(a.a.qualityRuleJobList+"?procId=".concat(t.procId))},O=function(t){return n.default.http.get(a.a.qualityRuleNodeList+"?jobId=".concat(t.jobId))},R=function(t){return n.default.http.post(a.a.getRuleJobList,t)},_=function(t){return n.default.http.post(a.a.saveBatchAdd,t)},D=function(){return n.default.http.get(a.a.getUserProjectList)},q=function(){return n.default.http.get(a.a.getCategoryList)},z=function(t){return n.default.http.get(a.a.getAssetCategoryList+"?categoryId=".concat(t.categoryId))},$=function(t){return n.default.http.get(a.a.getTableQualityScore+"?procId=".concat(t.procId))},A=function(t){return n.default.http.post(a.a.getQualityScoreHistoryList,t)},E=function(t){return n.default.http.post(a.a.getPageExceptionTopList,t)},Q=function(t){return n.default.http.post(a.a.getPageScoreTopList,t)},V=function(t){return n.default.http.post(a.a.immediateExecution+"".concat(t.ruleId))},H=function(t){return n.default.http.get(a.a.getTodayAvgScoreAndRatio+"?assetId=".concat(t.assetId))},F=function(t){return n.default.http.post(a.a.getTrendList,t)},M=function(t){return n.default.http.post(a.a.getAlarmRank,t)},U=function(t){return n.default.http.post(a.a.getScoreRank,t)},B=function(t){return n.default.http.post(a.a.getTemplateList,t)},J=function(t){return n.default.http.post(a.a.addTemplate,t)},Z=function(t){return n.default.http.post(a.a.updateTemplate,t)},G=function(t){return n.default.http.get(a.a.templateDetail+"?id=".concat(t.id))},K=function(t){return n.default.http.post(a.a.ruleAppList,t)},W=function(t){return n.default.http.post(a.a.ruleLogList,t)},X=function(t){return n.default.http.post(a.a.delTemplate+"?id=".concat(t.id))},Y=function(t){return n.default.http.get(a.a.getCreatePerList)},tt=function(t){return n.default.http.get(a.a.monitorDetail+t.monitorId)},et=function(t){return n.default.http.get(a.a.getMonitorCreatePerList)},rt=function(t){return n.default.http.get(a.a.getRuleCreatePerList)},nt=function(t){return n.default.http.post(a.a.deleteMonitorRule+t.id)},at=function(t){return n.default.http.post(a.a.monitorRelRuleList,t)},ut=function(t){return n.default.http.post(a.a.monitorlogList,t)},it=function(t){return n.default.http.post(a.a.monitorHistoryList,t)},ot=function(t){return n.default.http.get(a.a.monitorHistoryResultList+t.id)},lt=function(t){return n.default.http.post(a.a.getNotificationUser,t)},ct=function(){return n.default.http.get(a.a.getMonitorObjectList)}},e70e:function(t,e,r){"use strict";r.r(e);r("386d"),r("8e6e"),r("ac6a"),r("456d");var n=r("ade3"),a=(r("96cf"),r("1da1")),u=r("cb29");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var o,l,c={data:function(){return{btnLoading:!1,isSubmit:!1,checkNum:function(t){return function(e,r,n){if(!/^[1-9]\d*$/g.test(t))return n(new Error("请输入大于0的正整数"));n()}},formInline:{ruleTemplateName:"",createPer:""},createPerList:[],pageIndex:1,pageSize:10,totalCount:0,dataListLoading:!1,dataList:[],choosedId:"",loading:!1,ruleList:[{label:"表级规则",value:1},{label:"字段级规则",value:2}],checkList:[{label:"数值型",value:1},{label:"波动型",value:2}],form:{ruleType:1,ruleTemplateName:"",ruleCheckType:1,ruleFiledType:1,compareDayNum:"",dayType:1,ruleSql:""},rules:{},dialogType:"add",dialogVisible:!1}},components:{},computed:{ruleExpectedType:function(){return 1==this.form.ruleCheckType?"固定值":"波动率"}},mounted:function(){this.getList(),this.getCreatePerList()},methods:{search:function(){this.pageIndex=1,this.getList()},reset:function(){this.formInline.ruleTemplateName="",this.formInline.createPer="",this.search()},getList:(l=Object(a.a)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={ruleTemplateName:this.formInline.ruleTemplateName,createPer:this.formInline.createPer,page:this.pageIndex,pageSize:this.pageSize},t.prev=1,t.next=4,Object(u.H)(e);case 4:0===(r=t.sent).data.code?(this.dataListLoading=!1,this.dataList=r.data.data.records,this.totalCount=r.data.data.total):(this.dataList=[],this.totalCount=0),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return l.apply(this,arguments)}),getCreatePerList:(o=Object(a.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u.i)({});case 3:0===(e=t.sent).data.code?this.createPerList=e.data.data:this.createPerList=[],t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return o.apply(this,arguments)}),deleteTemplate:function(t){var e=this;this.$confirm("确定进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u.b)({id:t}).then((function(t){0===t.data.code&&(e.$message.success("删除成功！"),e.getList())})).catch((function(t){}))})).catch((function(){}))},submitForm:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;if(!t.isSubmit){t.isSubmit=!0;var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t.form);1==r.ruleCheckType&&(delete r.compareDayNum,delete r.dayType),t.btnLoading=!0,"edit"==t.dialogType?(r.id=t.choosedId,Object(u.gb)(r).then((function(e){0===e.data.code&&(t.dialogVisible=!1,t.btnLoading=!1,t.isSubmit=!1,t.$message.success("模板规则编辑成功！"),t.getList(),t.getCreatePerList())})).catch((function(e){t.isSubmit=!1,t.btnLoading=!1}))):Object(u.a)(r).then((function(e){0===e.data.code&&(t.dialogVisible=!1,t.btnLoading=!1,t.isSubmit=!1,t.$message.success("模板规则创建成功！"),t.getList(),t.getCreatePerList())})).catch((function(e){t.isSubmit=!1,t.btnLoading=!1}))}}))},sizeChangeHandle:function(t){this.pageSize=t,this.pageIndex=1,this.getList()},currentChangeHandle:function(t){this.pageIndex=t,this.getList()},addTemplate:function(){this.dialogType="add",this.dialogVisible=!0},editTemplate:function(t){var e=this;this.choosedId=t,this.dialogType="edit",Object(u.eb)({id:t}).then((function(t){0===t.data.code&&(e.dialogVisible=!0,Object.assign(e.form,t.data.data),1==e.form.ruleCheckType&&(e.form.dayType=1))})).catch((function(t){e.$message.error("接口请求错误")}))},close:function(){this.form={ruleType:1,ruleTemplateName:"",ruleCheckType:1,ruleFiledType:1,compareDayNum:"",dayType:1,ruleSql:""},this.$refs.form.resetFields(),this.dialogVisible=!1}}},s=(r("4520"),r("2877")),d=Object(s.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ruleTemplate"},[e("div",{staticClass:"title"},[t._v("规则模板库")]),e("div",{staticClass:"add-btn"},[e("el-form",{staticClass:"ctr",attrs:{inline:!0,model:t.formInline,size:"small"}},[e("div",{staticClass:"right-ctr"},[e("el-form-item",[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.addTemplate}},[t._v("新建自定义模板")])],1)],1),e("el-form-item",{staticStyle:{margin:"0"}},[e("el-form-item",{attrs:{label:""}},[e("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择创建人",size:"mini"},model:{value:t.formInline.createPer,callback:function(e){t.$set(t.formInline,"createPer",e)},expression:"formInline.createPer"}},t._l(t.createPerList,(function(t){return e("el-option",{key:t.userId,attrs:{label:t.username,value:t.userId}})})),1)],1),e("el-form-item",{attrs:{label:""}},[e("el-input",{attrs:{placeholder:"请输入自定义模板名称",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.formInline.ruleTemplateName,callback:function(e){t.$set(t.formInline,"ruleTemplateName","string"==typeof e?e.trim():e)},expression:"formInline.ruleTemplateName"}})],1),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("查询")]),e("el-button",{attrs:{size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1),e("div",{staticClass:"content"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList}},[e("el-table-column",{attrs:{prop:"ruleTemplateName",label:"自定义模板名称"}}),e("el-table-column",{attrs:{prop:"ruleType",label:"自定义模板类型"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("span",[t._v(t._s(1==r.row.ruleType?"表级规则":"字段级规则"))])]}}])}),e("el-table-column",{attrs:{"min-width":"200","show-overflow-tooltip":!0,prop:"ruleSql",label:"自定义SQL"}}),e("el-table-column",{attrs:{prop:"createPerName",label:"创建人"}}),e("el-table-column",{attrs:{prop:"createTime",width:"160",label:"创建时间"}}),e("el-table-column",{attrs:{prop:"operationType","header-align":"right",align:"right",width:"120",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.editTemplate(r.row.id)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.$router.push("/templateDetail?id="+r.row.id)}}},[t._v("详情")]),e("el-button",{staticClass:"delete",attrs:{type:"text"},on:{click:function(e){return t.deleteTemplate(r.row.id)}}},[t._v("删除")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1),e("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"add"==t.dialogType?"新建自定义模板":"编辑自定义模板",width:"600px",visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close},scopedSlots:t._u([{key:"footer",fn:function(){return[e("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.submitForm}},[t._v(t._s("add"==t.dialogType?"创建":"保存"))]),e("el-button",{on:{click:t.close}},[t._v("取消")])]},proxy:!0}])},[e("div",[e("el-form",{ref:"form",staticClass:"form reset-ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{key:"name",attrs:{label:"模板名称",prop:"ruleTemplateName",rules:[{required:!0,message:"请输入模板名称",trigger:"blur"},{min:2,max:30,message:"请输入2-30字符，支持中英文开头，数字，下划线组合",trigger:"blur",pattern:"^[一-龥a-zA-Z][一-龥a-zA-Z0-9_]{1,29}$"}]}},[e("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.form.ruleTemplateName,callback:function(e){t.$set(t.form,"ruleTemplateName",e)},expression:"form.ruleTemplateName"}})],1),e("el-form-item",{key:"ruleType",attrs:{label:"规则类型",prop:"ruleType",rules:{required:!0,message:"请选择规则类型",trigger:"change"}}},[e("el-select",{staticStyle:{width:"460px"},attrs:{filterable:"",placeholder:"请选择规则类型"},model:{value:t.form.ruleType,callback:function(e){t.$set(t.form,"ruleType",e)},expression:"form.ruleType"}},t._l(t.ruleList,(function(t,r){return e("el-option",{key:r,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{key:"ruleCheckType",attrs:{label:"校验类型",prop:"ruleCheckType",rules:{required:!0,message:"请选择校验类型",trigger:"change"}}},[e("el-select",{staticStyle:{width:"460px"},attrs:{filterable:"",placeholder:"请选择校验类型"},model:{value:t.form.ruleCheckType,callback:function(e){t.$set(t.form,"ruleCheckType",e)},expression:"form.ruleCheckType"}},t._l(t.checkList,(function(t,r){return e("el-option",{key:r,attrs:{label:t.label,value:t.value}})})),1)],1),2==t.form.ruleCheckType?e("el-form-item",{key:"compareDayNum",attrs:{label:"波动范围",prop:"compareDayNum",rules:[{required:!0,message:"请输入数字",trigger:"blur"},{required:!0,validator:t.checkNum(t.form.compareDayNum),trigger:"blur"}]}},[e("el-input",{staticClass:"input-with-select",attrs:{type:"number",placeholder:"请输入数字"},model:{value:t.form.compareDayNum,callback:function(e){t.$set(t.form,"compareDayNum",e)},expression:"form.compareDayNum"}},[e("el-select",{staticClass:"right-select",attrs:{slot:"append",placeholder:"请选择"},slot:"append",model:{value:t.form.dayType,callback:function(e){t.$set(t.form,"dayType",e)},expression:"form.dayType"}},[e("el-option",{attrs:{label:"天",value:1}}),e("el-option",{attrs:{label:"月",value:2}}),e("el-option",{attrs:{label:"年",value:3}})],1)],1)],1):t._e(),e("el-form-item",{key:"ruleExpectedType",attrs:{label:"校验方式"}},[e("el-input",{attrs:{disabled:""},model:{value:t.ruleExpectedType,callback:function(e){t.ruleExpectedType=e},expression:"ruleExpectedType"}})],1),e("el-form-item",{key:"ruleSql",attrs:{label:"SQL语句",prop:"ruleSql",rules:{required:!0,message:"请输入SQL语句",trigger:"blur"}}},[e("el-input",{attrs:{rows:4,type:"textarea"},model:{value:t.form.ruleSql,callback:function(e){t.$set(t.form,"ruleSql",e)},expression:"form.ruleSql"}})],1)],1)],1)])],1)}),[],!1,null,null,null);e.default=d.exports},faf9:function(t,e,r){var n=r("32f1");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("499e").default)("89d3a000",n,!0,{sourceMap:!1,shadowMode:!1})}}]);