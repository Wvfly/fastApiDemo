(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-de0391d0"],{"286a":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-60d21bc0]{color:#1740dc}.success-color[data-v-60d21bc0]{color:#52c41a}.warning-color[data-v-60d21bc0]{color:#faad14}.error-color[data-v-60d21bc0]{color:#f5222d}.info-color[data-v-60d21bc0]{color:#909399}.border-color[data-v-60d21bc0]{border:1px solid #e5e6e9}.catalog[data-v-60d21bc0]{padding:15px}.catalog .catalog-header[data-v-60d21bc0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.catalog .catalog-header i[data-v-60d21bc0]{cursor:pointer}.catalog .tree-container[data-v-60d21bc0]{max-height:calc(100vh - 445px);overflow-y:auto}",""])},"746b":function(e,t,a){"use strict";a("b7c5")},"99aa":function(e,t,a){"use strict";a("6762"),a("2fdb"),a("386d"),a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("7f7f"),a("6b54"),a("8e6e"),a("ac6a"),a("456d"),a("20d6");var n=a("2909"),r=(a("a481"),a("96cf"),a("1da1")),i=a("ade3"),c=a("2f62"),o=a("05f1"),l=a("de63"),s=a("4297"),d=a("ca00"),u=a("a8df"),h=a("2820"),p=a("d8ad");function f(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return c=e.done,e},e:function(e){o=!0,i=e},f:function(){try{c||null==a.return||a.return()}finally{if(o)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v,b,k,x,C,w,S,O={name:"Catalog",data:function(){return{activeCatalog:"my",allTree:[],allTreeLength:0,allSearch:"",myTree:[],myTreeLength:0,mySearch:"",collectTree:[],collectTreeLength:0,collectSearch:"",defaultProps:{children:"children",label:"label",disabled:this.handleDisabled},isEditMenuShow:!1,rightMenuId:"",targetData:null,nodeData:{isConcern:!1},childrenNum:0,checkedKeyList:{all:[],my:[],collect:[]},expandKeyList:{all:["0"],my:["0"],collect:["0"]},expandAllKeys:{all:!1,my:!1,collect:!1},isLoading:!1,auth:!1,expandList:[],tenantName:"",tenantTree:[],tenantAuth:null,del:null,create:null,write:null,update:null,isMenuLoading:!1}},computed:m(m({},Object(c.c)({userId:function(e){return e.old.admin_info.userId},tenantAdmin:function(e){return e.old.admin_info.tenantAdmin}})),{},{selectCatagoryIds:function(){return this.checkedKeyList[this.activeCatalog]},isThemeOrBusiness:function(){return["1","2"].includes(this.rightMenuId)||1===this.nodeData.type||2===this.nodeData.type},isMy:function(){return"my"===this.activeCatalog},isCustomer:function(){return 3===this.nodeData.type},isBzf:function(){var e=this.nodeData.label,t=e.lastIndexOf("(");return e=e.slice(t),"("+this.tenantName+")"===e}}),methods:{handleNodeRightClickAll:(S=Object(r.a)(regeneratorRuntime.mark((function e(t,a,n){var r,i,c,o,l,s,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.targetData=n,this.nodeData=a,this.$refs.editMenu.event=t,this.isEditMenuShow=!0,this.rightMenuId=a.id,this.childrenNum=Object(d.c)([a]),this.isMenuLoading=!0,e.prev=7,e.next=10,Object(h.k)({id:this.rightMenuId});case 10:r=e.sent,i=r.data,c=i.code,o=i.data,l=o.create,s=o.delete,u=o.write,p=o.update,0===c&&(this.del=s,this.create=l,this.write=u,this.update=p);case 19:return e.prev=19,this.isMenuLoading=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[7,,19,22]])}))),function(e,t,a){return S.apply(this,arguments)}),relatedTable:function(){null!==this.rightMenuId&&"0"!==this.rightMenuId&&"1"!==this.rightMenuId&&"2"!==this.rightMenuId&&this.$refs.relevance.openDialog()},operatorCatalog:function(e){this.$refs.editPop.dialogVisible=!0,this.$refs.editPop.editType=e},removeCatalog:function(){var e=this;this.$confirm("删除类目后，数据无法恢复。","确定要删除吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteCategoryById(e.rightMenuId)})).catch((function(){return!1}))},deleteCategoryById:(w=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.h)({id:t});case 2:a=e.sent,(n=a.data).msg,0===n.code&&(this.$message.success("类目删除成功！"),this.categoryConcernSearch());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)}),concernCategoryById:(C=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.f)({categoryId:t});case 2:a=e.sent,(n=a.data).msg,0===n.code&&(this.$message.success("目录收藏成功！"),this.categoryConcernSearch());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)}),deleteConcernById:(x=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.i)({categoryId:t});case 2:a=e.sent,(n=a.data).msg,0===n.code&&(this.$message.success("目录收藏已取消!"),this.categoryConcernSearch());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)}),collectCatalog:function(){this.concernCategoryById(this.rightMenuId)},uncollectCatalog:function(){this.deleteConcernById(this.rightMenuId),this.categoryConcernSearch()},openUploadDialog:function(){this.$refs.uploadDialog.openDialog()},handleCheck:function(e,t){var a=t.checkedKeys;this.checkedKeyList[this.activeCatalog]=a},categoryConcernSearch:(k=Object(r.a)(regeneratorRuntime.mark((function e(){var t,a,n,r,i,c,o,l,s,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,Object(h.e)({name:this[this.activeCatalog+"Search"],type:this.activeCatalog});case 3:t=e.sent,a=t.data.data,n=a.count,r=n.all,i=n.tenant,c=n.concern,o=a.list,l=a.auth,s=a.expandList,d=a.tenantName,this.isLoading=!1,this.allTreeLength=r,this.myTreeLength=i,this.collectTreeLength=c,this.auth=l,this.expandList=s,this.tenantName=d,"all"===this.activeCatalog?this.allTree=[o]:"my"===this.activeCatalog?this.myTree=[o]:"collect"===this.activeCatalog&&(this.collectTree=[o]);case 21:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)}),catagoryTenantSearch:(b=Object(r.a)(regeneratorRuntime.mark((function e(){var t,a,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)({name:"",type:"my"});case 2:t=e.sent,a=t.data.data,(n=a.count).all,n.tenant,n.concern,r=a.list,i=a.auth,a.expandList,a.tenantName,this.tenantTree=[r],this.deepDelTenantName(this.tenantTree),this.tenantAuth=i;case 15:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)}),handleTabClick:function(){this.categoryConcernSearch()},deepDelTenantName:function(e){var t,a=f(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.label=n.label.replace(/\([^)]*\)$/g,""),n.children&&this.deepDelTenantName(n.children)}}catch(e){a.e(e)}finally{a.f()}},search:(v=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.categoryConcernSearch();case 2:this.expandList.length>0&&(t=this.expandKeyList[this.activeCatalog]).push.apply(t,Object(n.a)(this.expandList));case 3:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)}),reset:function(){var e=this;this[this.activeCatalog+"Search"]="",this.$refs[this.activeCatalog]&&this.$refs[this.activeCatalog].setCheckedKeys([]),this.checkedKeyList={all:[],my:[],collect:[]},this.$nextTick((function(){e.categoryConcernSearch(),p.a.$emit("selectedKeys",[])}))},refresh:function(){this.categoryConcernSearch(),this.catagoryTenantSearch()},handleNodeExpand:function(e){this.expandKeyList[this.activeCatalog].push(e.id)},handleNodeCollapse:function(e){this.expandKeyList[this.activeCatalog].splice(this.expandKeyList[this.activeCatalog].findIndex((function(t){return t===e.id})),1)},handleDisabled:function(e){if(["0","1","2"].includes(e.id))return!0}},watch:{selectCatagoryIds:{handler:function(){var e=this;this.$nextTick((function(){p.a.$emit("selectedKeys",e.selectCatagoryIds)}))},deep:!0},isMy:{handler:function(e){p.a.$emit("isMyChange",e)},immediate:!0}},mounted:function(){this.categoryConcernSearch(),this.catagoryTenantSearch()},components:{editMenu:o.a,relevanceTable:l.a,editOrAddPop:s.a,uploadDialog:u.a}},L=(a("746b"),a("2877")),I=Object(L.a)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"catalog"},[t("div",{staticClass:"catalog-header"},[t("span",[e._v("资产类目\n            "),t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    1、集团租户管理员才能管理主题域和业务域，其他租户管理员可管理自建类目"),t("br"),e._v("\n                    2、最多只支持创建5层类目"),t("br"),e._v("\n                    3、主题域/业务域中类目名称不能重复\n                ")]),t("i",{staticClass:"el-icon-question"})])],1),t("el-button",{attrs:{type:"text"},on:{click:e.reset}},[e._v("重置")])],1),t("div",{staticClass:"catalog-content"},[t("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeCatalog,callback:function(t){e.activeCatalog=t},expression:"activeCatalog"}},[t("el-tab-pane",{attrs:{label:"本租户("+e.myTreeLength+")",name:"my"}},[t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"10px"}},[t("el-input",{attrs:{placeholder:"请输入类目","suffix-icon":"el-icon-search"},on:{input:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.mySearch,callback:function(t){e.mySearch="string"==typeof t?t.trim():t},expression:"mySearch"}}),0===e.tenantAdmin||1===e.userId?t("i",{staticClass:"icon icon-shangchuan",staticStyle:{cursor:"pointer","margin-left":"5px"},on:{click:e.openUploadDialog}}):e._e()],1),t("div",{staticClass:"tree-container zt-scrollbar"},[t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"my",attrs:{data:e.myTree,props:e.defaultProps,"node-key":"id","show-checkbox":"","check-strictly":"","highlight-current":"","default-expanded-keys":e.expandKeyList.my,"default-checked-keys":e.checkedKeyList.my,"default-expand-all":e.expandAllKeys.my},on:{"node-contextmenu":e.handleNodeRightClickAll,check:e.handleCheck,"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse},scopedSlots:e._u([{key:"default",fn:function(a){a.node;var n=a.data;return t("span",{},["1"===n.id||"2"===n.id?t("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(n.label))]):t("span",[e._v(e._s(n.label))])])}}])})],1)]),t("el-tab-pane",{attrs:{label:"全部("+e.allTreeLength+")",name:"all"}},[t("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入类目","suffix-icon":"el-icon-search"},on:{input:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.allSearch,callback:function(t){e.allSearch="string"==typeof t?t.trim():t},expression:"allSearch"}}),t("div",{staticClass:"tree-container zt-scrollbar"},[t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"all",attrs:{data:e.allTree,props:e.defaultProps,"node-key":"id","show-checkbox":"","check-strictly":"","highlight-current":"","check-on-click-node":"","default-expanded-keys":e.expandKeyList.all,"default-checked-keys":e.checkedKeyList.all,"default-expand-all":e.expandAllKeys.all},on:{"node-contextmenu":e.handleNodeRightClickAll,check:e.handleCheck,"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse},scopedSlots:e._u([{key:"default",fn:function(a){a.node;var n=a.data;return t("span",{},["1"===n.id||"2"===n.id?t("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(n.label))]):t("span",[e._v(e._s(n.label))])])}}])})],1)],1),t("el-tab-pane",{attrs:{label:"已收藏("+e.collectTreeLength+")",name:"collect"}},[t("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入类目","suffix-icon":"el-icon-search"},on:{input:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.collectSearch,callback:function(t){e.collectSearch="string"==typeof t?t.trim():t},expression:"collectSearch"}}),t("div",{staticClass:"tree-container zt-scrollbar"},[t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"collect",attrs:{data:e.collectTree,props:e.defaultProps,"node-key":"id","show-checkbox":"","check-strictly":"","highlight-current":"","default-expanded-keys":e.expandKeyList.collect,"default-checked-keys":e.checkedKeyList.collect,"default-expand-all":e.expandAllKeys.collect},on:{"node-contextmenu":e.handleNodeRightClickAll,check:e.handleCheck,"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse},scopedSlots:e._u([{key:"default",fn:function(a){a.node;var n=a.data;return t("span",{},["1"===n.id||"2"===n.id?t("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(n.label))]):t("span",[e._v(e._s(n.label))])])}}])})],1)],1)],1)],1),t("edit-menu",{ref:"editMenu",attrs:{editMenuShow:e.isEditMenuShow,loading:e.isMenuLoading},on:{"update:editMenuShow":function(t){e.isEditMenuShow=t},"update:edit-menu-show":function(t){e.isEditMenuShow=t}}},["my"===e.activeCatalog&&e.create?t("li",{on:{click:function(t){return e.operatorCatalog("add")}}},[e._v("新增子类目")]):e._e(),("all"===e.activeCatalog&&1===e.userId&&!["0","1","2"].includes(e.rightMenuId)||"my"===e.activeCatalog&&!["0","1","2"].includes(e.rightMenuId))&&e.update?t("li",{on:{click:function(t){return e.operatorCatalog("edit")}}},[e._v("编辑")]):e._e(),("all"===e.activeCatalog&&1===e.userId&&!["0","1","2"].includes(e.rightMenuId)||"my"===e.activeCatalog&&!["0","1","2"].includes(e.rightMenuId))&&e.del?t("li",{on:{click:e.removeCatalog}},[e._v("删除")]):e._e(),"all"===e.activeCatalog&&!["0","1","2"].includes(e.rightMenuId)&&!e.nodeData.isConcern||"my"===e.activeCatalog&&!["0","1","2"].includes(e.rightMenuId)&&!e.nodeData.isConcern?t("li",{on:{click:e.collectCatalog}},[e._v("收藏")]):e._e(),"collect"!==e.activeCatalog||["0","1","2"].includes(e.rightMenuId)?e._e():t("li",{on:{click:e.uncollectCatalog}},[e._v("取消收藏")])]),""!==e.rightMenuId?t("relevance-table",{ref:"relevance",attrs:{nodeId:e.rightMenuId}}):e._e(),t("edit-or-add-pop",{ref:"editPop",attrs:{target:e.targetData,childrenNum:e.childrenNum,treeData:e.tenantTree,tenantAuth:e.tenantAuth},on:{treeUpdata:e.refresh}}),t("upload-dialog",{ref:"uploadDialog"})],1)}),[],!1,null,"60d21bc0",null);t.a=I.exports},b7c5:function(e,t,a){var n=a("286a");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("284af00f",n,!0,{sourceMap:!1,shadowMode:!1})}}]);