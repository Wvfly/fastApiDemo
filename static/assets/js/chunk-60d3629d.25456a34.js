(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-60d3629d","chunk-66c5f607"],{"021d":function(e,t,a){var o=a("725f");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("09d826bd",o,!0,{sourceMap:!1,shadowMode:!1})},"0420":function(e,t,a){"use strict";a("934f")},"05f1":function(e,t,a){"use strict";var o={props:{editMenuShow:{type:Boolean,default:function(){return!1}},loading:{type:Boolean,default:function(){return!1}}},data:function(){return{isShow:this.editMenuShow,event:"",el:null}},methods:{onBlur:function(e){this.isShow=!1}},mounted:function(){var e=this;document.body.addEventListener("click",(function(){e.isShow=!1}))},watch:{editMenuShow:function(e){var t=this;this.isShow=e,e&&this.$nextTick((function(){t.$refs.edit_menu.focus()}))},isShow:function(e){this.$emit("update:editMenuShow",e)},event:{handler:function(e){var t=this;this.isShow&&this.$nextTick((function(){var a=t.$refs.edit_menu;document.body.clientHeight-e.clientY-40>a.offsetHeight?a.style.top=e.clientY+5+"px":a.style.top=e.clientY-a.offsetHeight+"px",document.body.clientWidth-e.clientX-20>a.offsetWidth?a.style.left=e.clientX-20+"px":a.style.left=e.clientX-a.offsetWidth+"px"}))},deep:!0}}},i=(a("e6c7"),a("2877")),r=Object(i.a)(o,(function(){return(0,this._self._c)("ul",{directives:[{name:"show",rawName:"v-show",value:this.isShow,expression:"isShow"},{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],ref:"edit_menu",attrs:{id:"edit_menu",tabindex:"1"},on:{blur:this.onBlur}},[this._t("default")],2)}),[],!1,null,"009710ad",null);t.a=r.exports},"06f0":function(e,t,a){"use strict";a("1e74")},"0757":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-28cd7a3e]{color:#1740dc}.success-color[data-v-28cd7a3e]{color:#52c41a}.warning-color[data-v-28cd7a3e]{color:#faad14}.error-color[data-v-28cd7a3e]{color:#f5222d}.info-color[data-v-28cd7a3e]{color:#909399}.border-color[data-v-28cd7a3e]{border:1px solid #e5e6e9}.data_process_task_algorithm[data-v-28cd7a3e]{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex}.data_process_task_algorithm .left[data-v-28cd7a3e]{height:100%;-webkit-box-flex:1;-ms-flex:1;flex:1;overflow-x:auto;overflow-y:hidden}.data_process_task_algorithm .left .button_out[data-v-28cd7a3e]{height:30px;position:sticky;top:0;background:#fff;z-index:100}.data_process_task_algorithm .left .form_content[data-v-28cd7a3e]{margin-top:6px;overflow:auto;height:calc(100% - 30px)}.data_process_task_algorithm .left .title[data-v-28cd7a3e]{background:#fff;padding-left:8px;border-left:3px solid #1740dc;margin:20px 0;height:16px;line-height:16px;color:#040c2c;font-weight:600}.data_process_task_algorithm .right[data-v-28cd7a3e]{width:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:12px}.data_process_task_algorithm .right .attribute[data-v-28cd7a3e]{text-align:center;color:#666;font-size:12px;cursor:pointer;padding:12px 5px;width:30px;background:#e9e9eb;border:1px solid #e5e6e9}.data_process_task_algorithm .right .attribute[data-v-28cd7a3e]:hover{color:#1740dc}.data_process_task_algorithm .sebar[data-v-28cd7a3e]{padding:0 11px}.data_process_task_algorithm .task_edit .el-form-item__content[data-v-28cd7a3e]{margin-left:0!important;margin-top:-7px!important}.data_process_task_algorithm .cod_m_o[data-v-28cd7a3e]{position:relative;margin-bottom:16px;margin-top:42px!important}.data_process_task_algorithm .cod_m_o .ctr[data-v-28cd7a3e]{line-height:30px;height:30px;position:absolute;top:-60px;right:20px}.data_process_task_algorithm .cod_m_o .cede_editor[data-v-28cd7a3e]{position:relative;margin-top:-32px;max-height:300px;overflow:auto}.data_process_task_algorithm .cod_m_o .cede_editor[data-v-28cd7a3e] .format-btn{margin-right:20px}.data_process_task_algorithm .itemtooltip[data-v-28cd7a3e]{margin-left:4px}",""])},"0818":function(e,t,a){var o=a("c2a4");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("5250ff2e",o,!0,{sourceMap:!1,shadowMode:!1})},"0855":function(e,t,a){var o=a("5f19");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("61a4731a",o,!0,{sourceMap:!1,shadowMode:!1})},"08c5":function(e,t,a){"use strict";a("0818")},"0bdc":function(e,t,a){"use strict";a("1e73")},"0ca0":function(e,t,a){"use strict";a("e823")},"0d75":function(e,t,a){var o=a("f27d");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("3bf113c3",o,!0,{sourceMap:!1,shadowMode:!1})},"0ecf":function(e,t,a){e.exports=function(e){function t(o){if(a[o])return a[o].exports;var i=a[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,o){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=6)}([function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var a=this[t];a[2]?e.push("@media "+a[2]+"{"+a[1]+"}"):e.push(a[1])}return e.join("")},e.i=function(t,a){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var n=t[i];"number"==typeof n[0]&&o[n[0]]||(a&&!n[2]?n[2]=a:a&&(n[2]="("+n[2]+") and ("+a+")"),e.push(n))}},e}},function(e,t){e.exports=function(e,t,a,o,i,r){var n,s=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(n=e,s=e.default);var c,d="function"==typeof s?s.options:s;if(t&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0),a&&(d.functional=!0),i&&(d._scopeId=i),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=c):o&&(c=o),c){var u=d.functional,f=u?d.render:d.beforeCreate;u?(d._injectStyles=c,d.render=function(e,t){return c.call(t),f(e,t)}):d.beforeCreate=f?[].concat(f,c):[c]}return{esModule:n,exports:s,options:d}}},function(e,t,a){function o(e){for(var t=0;t<e.length;t++){var a=e[t],o=d[a.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](a.parts[i]);for(;i<a.parts.length;i++)o.parts.push(r(a.parts[i]));o.parts.length>a.parts.length&&(o.parts.length=a.parts.length)}else{var n=[];for(i=0;i<a.parts.length;i++)n.push(r(a.parts[i]));d[a.id]={id:a.id,refs:1,parts:n}}}}function i(){var e=document.createElement("style");return e.type="text/css",u.appendChild(e),e}function r(e){var t,a,o=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(o){if(m)return h;o.parentNode.removeChild(o)}if(b){var r=p++;o=f||(f=i()),t=n.bind(null,o,r,!1),a=n.bind(null,o,r,!0)}else o=i(),t=s.bind(null,o),a=function(){o.parentNode.removeChild(o)};return t(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;t(e=o)}else a()}}function n(e,t,a,o){var i=a?"":o.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var r=document.createTextNode(i),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(r,n[t]):e.appendChild(r)}}function s(e,t){var a=t.css,o=t.media,i=t.sourceMap;if(o&&e.setAttribute("media",o),i&&(a+="\n/*# sourceURL="+i.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=a(19),d={},u=l&&(document.head||document.getElementsByTagName("head")[0]),f=null,p=0,m=!1,h=function(){},b="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,a){m=a;var i=c(e,t);return o(i),function(t){for(var a=[],r=0;r<i.length;r++){var n=i[r];(s=d[n.id]).refs--,a.push(s)}for(t?o(i=c(e,t)):i=[],r=0;r<a.length;r++){var s;if(0===(s=a[r]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete d[s.id]}}}};var g=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join("\n")}}()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),i=a.n(o),r=a(15),n=function(e){a(18)},s=a(1)(i.a,r.a,!1,n,"data-v-65e34201",null);t.default=s.exports},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=a.n(o),r=a(14),n=function(e){a(17)},s=a(1)(i.a,r.a,!1,n,"data-v-59237a36",null);t.default=s.exports},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=a.n(o),r=a(13),n=function(e){a(16)},s=a(1)(i.a,r.a,!1,n,"data-v-5048c4bf",null);t.default=s.exports},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.install=t.dragContent=t.dragHandle=t.dragZone=void 0;var i=o(a(5)),r=o(a(4)),n=o(a(3)),s=function(e){e.component(i.default.name,i.default),e.component(r.default.name,r.default),e.component(n.default.name,n.default)},l={dragZone:i.default,dragHandle:r.default,dragContent:n.default,install:s};t.default=l,t.dragZone=i.default,t.dragHandle=r.default,t.dragContent=n.default,t.install=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"drag-content",props:{fixed:{type:[Number,Boolean],default:!1}},data:function(){return{sizeAttr:null,isMinSize:!1,isMaxSize:!1}},methods:{getCss:function(e,t){var a=document.defaultView.getComputedStyle(e,null);return t?a[t]:a},getSize:function(e){return e.getBoundingClientRect()[this.horizontal?"width":"height"]},getSizeAttr:function(e){return e+(this.horizontal?"Width":"Height")},getMinSize:function(){if(this.fixed)return this.getSize(this.$el);var e=this.getCss(this.$el,this.getSizeAttr("min"));return"0px"===e?e=0:e.includes("%")?e=parseFloat(e)/100*this.getSize(this.$parent.$el):e.includes("px")&&(e=parseFloat(e)),e<0&&(e=0),e},getMaxSize:function(){if(this.fixed)return this.getSize(this.$el);var e=this.getCss(this.$el,this.getSizeAttr("max"));return e.includes("%")?e=parseFloat(e)/100*this.getSize(this.$parent.$el):e.includes("px")&&(e=parseFloat(e)),e}},computed:{size:{get:function(){return this.sizeAttr},set:function(e){this.sizeAttr=e}},parentOptions:function(){return this.$parent&&this.$parent.options&&this.$parent.options},horizontal:function(){return"horizontal"===this.parentOptions.direction},isThreshold:function(){return this.isMinSize||this.isMaxSize},style:function(){var e={};return!this.fixed&&null!==this.size&&this.parentOptions&&(this.horizontal?e.width=this.size+"px":e.height=this.size+"px"),e}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"drag-handle",props:{disabled:{type:Boolean,default:!1}},data:function(){return{canDrag:!1,todoContentsMaxSize:0,mouseHandleOffsetPrev:0,mouseHandleOffsetNext:0,nextHandleOffsetPosition:0}},computed:{direction:function(){return this.$parent.options.direction},horizontal:function(){return"horizontal"===this.direction},vertical:function(){return"vertical"===this.direction}},methods:{getAllHandles:function(){return this.$parent.$children.filter((function(e){return e.$vnode&&e.$vnode.componentOptions&&"drag-handle"===e.$vnode.componentOptions.tag}))},getHandles:function(){var e=this,t=this.getAllHandles(),a=[],o=[],i=!1;return t.forEach((function(t){var r=t===e;i=i||r,r||(i?o:a).push(t)})),{all:t,prev:a,next:o}},getHandle:function(){var e=this,t=this.getAllHandles(),a=null,o=null;return t.forEach((function(i,r){i===e&&(a=t[r-1],o=t[r+1])})),{prev:a,next:o}},getAllContents:function(){return this.$parent.$children.filter((function(e){return e.$vnode&&e.$vnode.componentOptions&&"drag-content"===e.$vnode.componentOptions.tag}))},getTodoContents:function(){var e=this,t=this.$parent.$children,a=[],o=[],i=[],r=!1,n=!1;return t.forEach((function(t){var s=t===e;r=r||s,t.$vnode&&t.$vnode.componentOptions&&("drag-content"===t.$vnode.componentOptions.tag?(a.push(t),r?n||o.push(t):i.push(t)):s||(r?n=!0:i=[]))})),{all:a,prev:i,next:o}},getSize:function(e){return e.getBoundingClientRect()[this.horizontal?"width":"height"]},getOffsetPosition:function(e){return this[this.horizontal?"offsetLeft":"offsetTop"](e)},getSizePlus:function(e){var t=this;return e.reduce((function(e,a){return e+t.getSize(a.$el)}),0)},getLiveContentsSize:function(){var e=this.getTodoContents(),t=(e.all,e.prev),a=e.next,o=this.getSizePlus(t),i=this.getSizePlus(a);return{all:o+i,prev:o,next:i}},offsetTop:function(e){var t=e.offsetTop;return null!=e.offsetParent&&(t+=this.offsetTop(e.offsetParent)),t},offsetLeft:function(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=this.offsetLeft(e.offsetParent)),t},mousePosition:function(e){return e[this.horizontal?"pageX":"pageY"]},handleSize:function(){return this.getSize(this.$el)},handleOffsetPosition:function(){return this.getOffsetPosition(this.$el)},handleMouseUp:function(){this.canDrag=!1,this.mouseHandleOffsetPrev=0,this.mouseHandleOffsetNext=0,this.nextHandleOffsetPosition=0,this.removeMouseEvents()},handleMouseDown:function(e){this.canDrag=!0;var t=this.handleSize(),a=this.mousePosition(e),o=this.handleOffsetPosition();this.todoContentsMaxSize=this.getLiveContentsSize().all,this.mouseHandleOffsetPrev=a-o,this.mouseHandleOffsetNext=t-this.mouseHandleOffsetPrev;var i=this.getHandle().next;this.nextHandleOffsetPosition=i?this.getOffsetPosition(i.$el):this.getOffsetPosition(this.$parent.$el)+this.getSize(this.$parent.$el),this.bindMouseEvents()},handleMouseMove:function(e){var t=this;if(this.disabled||!this.canDrag)return!1;var a=this.mousePosition(e),o=(this.handleOffsetPosition(),this.getOffsetPosition(this.$parent.$el)),i=this.getHandle(),r=i.prev,n=(i.next,this.getTodoContents()),s=(n.all,n.prev),l=n.next,c=a-this.mouseHandleOffsetPrev-(r?this.getOffsetPosition(r.$el)+this.getSize(r.$el):o),d=this.nextHandleOffsetPosition-a-this.mouseHandleOffsetNext;c<0&&(c=0),d<0&&(d=0),c>this.todoContentsMaxSize&&(c=this.todoContentsMaxSize),d>this.todoContentsMaxSize&&(d=this.todoContentsMaxSize);var u=s.reduce((function(e,t){return e+t.getMinSize()}),0),f=l.reduce((function(e,t){return e+t.getMinSize()}),0),p=s.reduce((function(e,t){return e+t.getMaxSize()}),0),m=l.reduce((function(e,t){return e+t.getMaxSize()}),0);if("string"==typeof p&&(p=this.todoContentsMaxSize-f),"string"==typeof m&&(m=this.todoContentsMaxSize-u),c>p||c<u||d>m||d<f)return!1;var h=function(e,a){var o=a/e.length,i=[],r=[],n=0;e.forEach((function(e){var a=t.getSize(e.$el);if(e.fixed)n+=a,r.push(e);else{var s=e.getMinSize(),l=e.getMaxSize(),c=a<=s,d=a>=l;e.isMinSize=c,e.isMaxSize=d,c&&o<s||d&&o>l?(e.size=c?s:l,n+=c?s:l,r.push(e)):i.push(e)}})),i.forEach((function(e){e.size=(a-n)/i.length}))};h(s,c),h(l,d)},bindMouseEvents:function(){document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove)},removeMouseEvents:function(){document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove)}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"drag-zone",props:{options:{type:Object,default:function(){return{direction:"horizontal"}}}},computed:{horizontal:function(){return"horizontal"===this.options.direction}}}},function(e,t,a){(e.exports=a(0)()).push([e.i,".drag-zone[data-v-5048c4bf]{position:relative}",""])},function(e,t,a){(e.exports=a(0)()).push([e.i,".drag-handle.horizontal[data-v-59237a36]{cursor:col-resize}.drag-handle.vertical[data-v-59237a36]{cursor:row-resize}.drag-handle.disabled[data-v-59237a36]{opacity:.5;cursor:no-drop}",""])},function(e,t,a){(e.exports=a(0)()).push([e.i,"",""])},function(e,t,a){"use strict";var o={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"drag-zone"},[e._t("default")],2)},staticRenderFns:[]};t.a=o},function(e,t,a){"use strict";var o={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"drag-handle",class:{disabled:e.disabled,horizontal:"horizontal"===e.direction,vertical:"vertical"===e.direction},on:{mousedown:e.handleMouseDown}},[e._t("default")],2)},staticRenderFns:[]};t.a=o},function(e,t,a){"use strict";var o={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"drag-content",class:{threshold:e.isThreshold},style:e.style},[e._t("default")],2)},staticRenderFns:[]};t.a=o},function(e,t,a){var o=a(10);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),a(2)("317119e1",o,!0)},function(e,t,a){var o=a(11);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),a(2)("55546ba7",o,!0)},function(e,t,a){var o=a(12);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),a(2)("28d2c7b4",o,!0)},function(e,t){e.exports=function(e,t){for(var a=[],o={},i=0;i<t.length;i++){var r=t[i],n=r[0],s={id:e+":"+i,css:r[1],media:r[2],sourceMap:r[3]};o[n]?o[n].parts.push(s):a.push(o[n]={id:n,parts:[s]})}return a}}])},"0eef":function(e,t,a){"use strict";a("9faa")},"0ffa":function(e,t,a){"use strict";a("e8a7")},1e3:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_output .vue-codemirror{border:none!important}.data_process_task_output .el-drawer__body{overflow:auto;padding-bottom:4px}.data_process_task_output .ds_dialog .el-dialog{margin-top:5vh!important;overflow:hidden;height:90vh;width:90%!important}.data_process_task_output .ds_dialog .el-dialog .edit{height:calc(90vh - 150px)}",""])},"111b":function(e,t,a){var o=a("9f9e");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("608b9900",o,!0,{sourceMap:!1,shadowMode:!1})},1320:function(e,t,a){"use strict";a("e9b0")},"13a8":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-1e47e6ae]{color:#1740dc}.success-color[data-v-1e47e6ae]{color:#52c41a}.warning-color[data-v-1e47e6ae]{color:#faad14}.error-color[data-v-1e47e6ae]{color:#f5222d}.info-color[data-v-1e47e6ae]{color:#909399}.border-color[data-v-1e47e6ae]{border:1px solid #e5e6e9}.realtime_task_flink[data-v-1e47e6ae]{height:100%}.realtime_task_flink .sub-title[data-v-1e47e6ae]{margin:10px 0}.realtime_task_flink .run_state_out[data-v-1e47e6ae]{margin-left:auto;margin-right:20px}.realtime_task_flink .lay_out[data-v-1e47e6ae]{display:-webkit-box;display:-ms-flexbox;display:flex;height:calc(100% - 26px);position:relative}.realtime_task_flink .lay_out .form_out[data-v-1e47e6ae]{padding-top:20px;-webkit-box-flex:1;-ms-flex:1;flex:1}.realtime_task_flink .lay_out .lock-modal[data-v-1e47e6ae]{position:absolute;left:0;right:30px;top:0;bottom:0;z-index:100;background:rgba(0,0,0,.3)}.realtime_task_flink .lay_out .right[data-v-1e47e6ae]{width:30px;margin-left:12px;float:right;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.realtime_task_flink .lay_out .right li[data-v-1e47e6ae]{background:#f0f1f3;text-align:center;color:#666;font-size:12px;padding:8px 5px;cursor:pointer;border:1px solid #e5e6e9;border-bottom:0}.realtime_task_flink .lay_out .right li[data-v-1e47e6ae]:last-child{border-bottom:1px solid #e5e6e9}.realtime_task_flink .lay_out .right li[data-v-1e47e6ae]:hover{color:#1740dc}.realtime_task_flink .layOutCode[data-v-1e47e6ae]{display:block;position:relative}.realtime_task_flink .layOutCode .form_out[data-v-1e47e6ae]{padding-top:20px;-webkit-box-flex:0;-ms-flex:none;flex:none;overflow:auto auto;height:calc(100vh - 220px);width:calc(100% - 40px)}.realtime_task_flink .layOutCode .right[data-v-1e47e6ae]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}",""])},"15d9":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.config.is-checked .el-switch__core{background-color:#cdced5!important;border-color:#cdced5!important}.config .el-switch__label *{font-size:12px}.config .el-switch__label{position:absolute;display:none;font-size:12px;color:#fff}.config .el-switch__label.is-active{color:#fff}.config .el-switch__label--right{z-index:1;right:20px}.config .el-switch__label--left{z-index:1;left:20px}.config .el-switch__label.is-active{display:block}.config .el-switch__core{border-color:#1740dc;background-color:#1740dc;width:78px!important}.real_time_collection .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;margin:10px 0;height:16px;line-height:16px;color:#040c2c;font-weight:600}.real_time_collection .el-collapse-item__header .el-collapse-item__arrow{color:#040c2c}.real_time_collection .el-collapse-item__wrap{padding:10px}.real_time_collection .el-collapse-item__wrap .add_button{width:100%;height:30px;font-size:12px;color:#040c2c;text-align:center;border:1px dashed #cdced5;cursor:pointer;margin:10px 0}.real_time_collection .el-collapse-item__wrap .add_button:hover{border-color:#1740dc;color:#1740dc}.real_time_collection .el-collapse-item__wrap .add_button.is-disabled{background-color:#f5f7fa;border-color:#e4e7ed;color:#c0c4cc;cursor:not-allowed}.el-popover.el-popper.reatime_view_data.reatime_view_data{background:rgba(9,16,47,.8);color:#fff;bottom:12px;overflow:auto}",""])},"15fd":function(e,t,a){"use strict";function o(e,t){if(null==e)return{};var a,o,i=function(e,t){if(null==e)return{};var a,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}a.d(t,"a",(function(){return o}))},"166a":function(e,t,a){"use strict";a("6811")},"16f8":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,'.primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_ds .short .el-form-item__content{width:500px;z-index:1}.data_process_task_ds .params_table_jdbc .el-form-item__content{margin-left:0!important}.data_process_task_ds .el-select{display:block}.data_process_task_ds .ds_dialog .el-dialog{margin-top:5vh!important;overflow:hidden;height:90vh;width:90%!important}.data_process_task_ds .ds_dialog .el-dialog .edit{height:calc(90vh - 150px)}.data_process_task_ds .red_start .el-form-item__label:after{content:"*";color:#f5222d;margin-left:4px}.data_process_task_ds .el-drawer__body{overflow:auto}.data_process_task_ds .cede_editor .el-button--mini,.data_process_task_ds .cede_editor .el-button--mini.is-round{padding:0!important;margin-right:10px;margin-bottom:10px}',""])},"19cf":function(e,t,a){"use strict";a("b2ca")},"1b46":function(e,t,a){"use strict";a("9fc5")},"1b7a":function(e,t,a){"use strict";a("26ea")},"1bf5":function(e,t,a){"use strict";a("2421")},"1c90":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_realtime_main_index .el-tabs.el-tabs--card.el-tabs--top{height:100%}.data_process_task_realtime_main_index .el-tabs.el-tabs--card.el-tabs--top .el-tabs__content{height:calc(100% - 56px)}.data_process_task_realtime_main_index .el-tabs.el-tabs--card.el-tabs--top .el-tabs__content .el-tab-pane{height:100%;margin-left:10px;padding-bottom:20px}.data_process_task_realtime_main_index .el-tabs--card>.el-tabs__header .el-tabs__nav{border-top:none}",""])},"1d7c":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-5d78ff62]{color:#1740dc}.success-color[data-v-5d78ff62]{color:#52c41a}.warning-color[data-v-5d78ff62]{color:#faad14}.error-color[data-v-5d78ff62]{color:#f5222d}.info-color[data-v-5d78ff62]{color:#909399}.border-color[data-v-5d78ff62]{border:1px solid #e5e6e9}.data_process_task_checkTask[data-v-5d78ff62]{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex}.data_process_task_checkTask .left[data-v-5d78ff62]{height:100%;-webkit-box-flex:1;-ms-flex:1;flex:1;overflow-x:auto;overflow-y:hidden}.data_process_task_checkTask .left .button_out[data-v-5d78ff62]{height:30px}.data_process_task_checkTask .left .form_content[data-v-5d78ff62]{margin-top:6px;overflow:auto;height:calc(100% - 100px)}.data_process_task_checkTask .left .title[data-v-5d78ff62]{background:#fff;padding-left:8px;border-left:3px solid #1740dc;margin:20px 0;height:16px;line-height:16px;color:#040c2c;font-weight:600}.data_process_task_checkTask .right[data-v-5d78ff62]{width:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:12px}.data_process_task_checkTask .right .attribute[data-v-5d78ff62]{text-align:center;color:#666;font-size:12px;cursor:pointer;padding:12px 5px;width:30px;background:#e9e9eb;border:1px solid #e5e6e9}.data_process_task_checkTask .right .attribute[data-v-5d78ff62]:hover{color:#1740dc}.data_process_task_checkTask .sebar[data-v-5d78ff62]{padding:0 11px}.data_process_task_checkTask .task_edit .el-form-item__content[data-v-5d78ff62]{margin-left:0!important;margin-top:-7px!important}.data_process_task_checkTask .cod_m_o[data-v-5d78ff62]{position:relative;margin-bottom:16px;margin-top:42px!important}.data_process_task_checkTask .cod_m_o .ctr[data-v-5d78ff62]{line-height:30px;height:30px;position:absolute;top:-60px;right:20px}.data_process_task_checkTask .cod_m_o .cede_editor[data-v-5d78ff62]{position:relative;margin-top:-32px;max-height:300px;overflow:auto}.data_process_task_checkTask .cod_m_o .cede_editor[data-v-5d78ff62] .format-btn{margin-right:20px}.data_process_task_checkTask .itemtooltip[data-v-5d78ff62]{margin-left:4px}",""])},"1e73":function(e,t,a){var o=a("e7f9");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("8bb32c46",o,!0,{sourceMap:!1,shadowMode:!1})},"1e74":function(e,t,a){var o=a("a0bc");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("71cb7ffc",o,!0,{sourceMap:!1,shadowMode:!1})},"1ea7":function(e,t,a){var o=a("e505");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("2e0004f5",o,!0,{sourceMap:!1,shadowMode:!1})},"1fd1":function(e,t,a){var o=a("46e6");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("5fde22ff",o,!0,{sourceMap:!1,shadowMode:!1})},"20d6":function(e,t,a){"use strict";var o=a("5ca1"),i=a("0a49")(6),r="findIndex",n=!0;r in[]&&Array(1)[r]((function(){n=!1})),o(o.P+o.F*n,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"21bff":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_output.flow .page-modal{background:rgba(0,0,0,.3);height:calc(100vh - 200px);width:calc(100% - 40px);position:absolute;top:28px;z-index:10}.data_process_task_output.flow .tips{padding:0 10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:12px}.data_process_task_output.flow .vue-codemirror{border:none!important}.data_process_task_output.flow .el-drawer__body{overflow:auto;padding-bottom:4px}.data_process_task_output.flow .design_task_switch .el-switch__label{position:absolute;display:none;font-size:12px;color:#fff}.data_process_task_output.flow .design_task_switch .el-switch__label--right{z-index:1;right:-4px;top:0}.data_process_task_output.flow .design_task_switch .el-switch__label--left{z-index:1;left:20px}.data_process_task_output.flow .design_task_switch .el-switch__label.is-active{display:block}.data_process_task_output.flow .design_task_switch.el-switch .el-switch__core,.data_process_task_output.flow .el-switch .el-switch__label{width:90px!important}.data_process_task_output.flow .design_task_switch2.el-switch .el-switch__core,.data_process_task_output.flow .design_task_switch2.el-switch .el-switch__label{width:100px!important}",""])},2353:function(e,t,a){var o=a("1c90");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("bce31788",o,!0,{sourceMap:!1,shadowMode:!1})},"23e7":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-33e9c252]{color:#1740dc}.success-color[data-v-33e9c252]{color:#52c41a}.warning-color[data-v-33e9c252]{color:#faad14}.error-color[data-v-33e9c252]{color:#f5222d}.info-color[data-v-33e9c252]{color:#909399}.border-color[data-v-33e9c252]{border:1px solid #e5e6e9}#edit_menu[data-v-33e9c252],#line_menu[data-v-33e9c252]{position:fixed;padding:4px 0;line-height:2.4;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);background:#fff;color:#040c2c;z-index:2;outline:none}#edit_menu li[data-v-33e9c252],#line_menu li[data-v-33e9c252]{padding:0 20px;cursor:pointer}#edit_menu li[data-v-33e9c252]:hover,#line_menu li[data-v-33e9c252]:hover{background:#f2f3f4;color:#1740dc}.left-menu[data-v-33e9c252]{width:125px;border-right:1px solid #dce3e8;overflow-y:auto;position:absolute;top:0;bottom:20px}#efContainer[data-v-33e9c252]{margin-left:125px}",""])},2421:function(e,t,a){var o=a("15d9");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("0fe7f38b",o,!0,{sourceMap:!1,shadowMode:!1})},"25fa":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.process_algo_attribute .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}.process_algo_attribute .section{padding:10px 12px}.process_algo_attribute .el-form-item--small.el-form-item{margin-bottom:10px}",""])},"260a":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.realtime_task_params_config .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}.realtime_task_params_config .item input[type=number].el-input__inner{padding-right:0}.realtime_task_params_config .item .el-input,.realtime_task_params_config .item .el-input-number--small{width:80%}",""])},"26ea":function(e,t,a){var o=a("4f0b");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("13a75d22",o,!0,{sourceMap:!1,shadowMode:!1})},2744:function(e,t,a){var o=a("16f8");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("584dba56",o,!0,{sourceMap:!1,shadowMode:!1})},"27ab":function(e,t,a){var o=a("e6771");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("39e51650",o,!0,{sourceMap:!1,shadowMode:!1})},2948:function(e,t,a){"use strict";a("79db")},"29c2":function(e,t,a){var o=a("c6a2");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("35e6fea6",o,!0,{sourceMap:!1,shadowMode:!1})},"2ada":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_headbar{display:-webkit-box;display:-ms-flexbox;display:flex;padding:8px 0;border-radius:4px}.data_process_task_headbar>div{margin-left:22px}.data_process_task_headbar>div:first-child{margin-left:0}.data_process_task_headbar>div.save .el-button--primary>i,.data_process_task_headbar>div.save .el-button--primary>span{vertical-align:middle}",""])},"2b34":function(e,t,a){"use strict";a.r(t);var o=a("d8ad"),i=(a("7f7f"),a("8e6e"),a("456d"),a("ade3"));a("ac6a");var r=function(e,t,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children",i=[];function r(e,t,a){if(e)for(var n in e)e[n][t]==a?i.push(e[n]):e[n][o]&&r(e[n][o],t,a)}return r(e,t,a),i};function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l={data:function(){return{dialogVisible:!1,isLoading:!1,confirmLoading:!1,defaultProps:{label:"name",value:"id"},isRick:0,type:0,title:["新建目录","新建子目录","新建作业流","新建任务节点","重命名节点任务","重命名","复制任务","新建作业流依赖目录","编辑任务节点"],defaultProps1:{checkStrictly:!0,label:"name",value:"id"},nodeData:{data:{parentId:0}},job:{},jobTypeList:[{label:"数据同步",typeId:1},{label:"job任务",typeId:2},{label:"输出任务",typeId:4},{label:"shell任务",typeId:6},{label:"检测任务",typeId:8}],parentDirList:[],filters:[{text:"MySQL",value:"1"},{text:"Oracle",value:"2"},{text:"SQL_Server",value:"3"},{text:"PostgreSQL",value:"4"},{text:"Kafka",value:"6"},{text:"Sap",value:"8"},{text:"SAPHANA",value:"10"},{text:"Hive",value:"11"},{text:"HBase",value:"13"},{text:"Kudu",value:"14"},{text:"ClickHouse",value:"15"},{text:"MongoDB",value:"17"}],treeDataListMenu:[],form:{name:"",typeId:"",descName:"",parentDir:"",hostUrl:"",port:"",username:"",password:"",menu:""},ruleForm:{name:[{required:!0,message:"请输入名称",trigger:"blur",pattern:'[^ "]+'}],parentDir:[{required:!0,message:"请选择目录",trigger:"change"}],menu:[{required:!0,message:"请选择目录",trigger:"change"}],hostUrl:[{required:!0,message:"请输入服务器地址",trigger:"blur",pattern:'[^ "]+'}],port:[{required:!0,message:"请输入端口",trigger:"blur"},{type:"number",message:"端口必须为数字值"}],username:[{required:!0,message:"请输入用户名",trigger:"blur",pattern:'[^ "]+'}],password:[{required:!0,message:"请输入密码",trigger:"blur",pattern:'[^ "]+'}]}}},props:["target"],methods:{diaClose:function(){this.$refs.ruleForm.resetFields(),this.type=0,this.nodeData={data:{parentId:0}},this.$data.form=this.$options.data().form,this.isLoading=!1,sessionStorage.removeItem("isRickDialog")},submitForm:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.isLoading=!0,e.confirmLoading=!0;var a=0;0!=e.nodeData.data.parentId&&(a=e.nodeData.data.id),0==e.type&&(a=e.form.menu[e.form.menu.length-1]);var o={name:e.form.name,procId:e.$route.query.id,parentId:a};0==e.type||1==e.type||7==e.type?(o.parentId=e.target&&e.target.id||e.form.menu[e.form.menu.length-1],e.addWork(o,"addsubWorkFlowMenu")):2==e.type?(o.parentId=e.target.id,e.addWork(o,"addDefaultWorkFlowMenu")):3==e.type?(o=s(s({},o),e.form),e.addWork(o,"addWorkJob")):4==e.type?(o.id=o.parentId,delete o.parentId,e.rename(o,"updateWorkFlowName")):5==e.type?(0==o.parentId&&(o.parentId=e.nodeData.data.id),o.id=o.parentId,delete o.parentId,e.rename(o,"updateWorkFlowMenuName")):6==e.type?e.copyWorkJob():8==e.type&&e.workMenuUpdateShellJob()}))},rename:function(e,t){var a=this;this.$API.post(this.$URL[t],e,(function(t){a.isLoading=!1,0==t.code?(a.$emit("addFileSucess"),o.a.$emit("dataProcessTaskToChangeJob",a.nodeData.data,"rename",e.name),o.a.$emit("workInfoUpdata",a.nodeData.data),a.confirmLoading=!1,a.dialogVisible=!1):a.$message.error(t.msg)}))},workMenuUpdateShellJob:function(){var e=this,t=s(s({},this.form),{},{procId:this.$route.query.id});this.$API.post(this.$URL.workMenuUpdateShellJob,t,(function(a){e.isLoading=!1,0==a.code?(e.confirmLoading=!1,e.dialogVisible=!1,o.a.$emit("dataProcessTaskToChangeJob",e.nodeData.data,"rename",t.name),e.$emit("addFileSucess"),o.a.$emit("workInfoUpdata")):e.$message.error(a.msg)}))},addWork:function(e,t){var a=this;this.confirmLoading=!0,this.$API.post(this.$URL[t],e,(function(t){0==t.code?(a.$emit("addFileSucess"),Object.assign(e,t.data),e.tabType="new",o.a.$emit("dataProcessTaskToChangeJob",e),sessionStorage.removeItem("isRickDialog"),a.dialogVisible=!1):a.$message.error(t.msg),a.isLoading=!1,setTimeout((function(){a.confirmLoading=!1}),3e3)}))},copyWorkJob:function(){var e=this,t={id:this.job.COPIEDID,name:this.form.name,workFlowId:this.form.parentDir[this.form.parentDir.length-1],jobNodeInfo:this.nodeData.data};this.$API.post(this.$URL.copySaveJobNodeConfig,t,(function(a){e.isLoading=!1,0==a.code?(e.dialogVisible=!1,o.a.$emit("dataProcessTaskToChangeJob",s(s({},e.nodeData.data),{},{workflowType:"copy"}),"copySave",t.name),e.$message.success("保存复制任务成功"),e.$emit("addFileSucess"),o.a.$emit("workInfoUpdata",s(s({},e.nodeData.data),{},{copyCom:!0}))):e.$message.error(a.msg),e.isLoading=!1,e.confirmLoading=!1}))},getWorkFlows:function(){var e=this;this.$API.get(this.$URL.getWorkFlows+"/"+this.$route.query.id,{},(function(t){0==t.code?e.parentDirList=t.data:e.$message.error(t.msg)}))},checkEnum:function(e){var t="";return this.filters.forEach((function(a){a.value==e&&(t=a.text)})),t},open:function(e,t){if(this.type=e,this.dialogVisible=!0,this.isRick=t,1==this.isRick){var a=JSON.parse(sessionStorage.getItem("isRickInfo")),o=a.dbName,i=a.tableName,r=(a.sourceId,a.projectName),n=this.$route.query,s=n.databaseType,l=n.jobFlow;n.id;s&&(this.nodeData.data.id=l,this.form.name="".concat(r||"","_").concat(this.checkEnum(s),"_").concat(o||"","_").concat(i||"","初始化入湖任务"))}}},mounted:function(){var e=this;o.a.$off("copySaveJobNodeConfig"),o.a.$on("copySaveJobNodeConfig",(function(t){e.nodeData.data=t.params,e.job=t.job,e.dialogVisible=!0,e.type=6}))},watch:{type:function(e){6==e?this.getWorkFlows():3==e&&(this.form.typeId=1)}}},c=(a("dd7a"),a("2877")),d=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"data_process_task_addfile"},[t("el-dialog",{attrs:{title:e.title[e.type],visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.diaClose}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"ruleForm",attrs:{rules:e.ruleForm,model:e.form,"label-width":"100px","label-position":"left"},nativeOn:{submit:function(e){e.preventDefault()}}},[0==e.type||1==e.type||2==e.type||7==e.type?t("el-form-item",{attrs:{label:7==e.type||2==e.type?"名称":"目录名称",prop:"name"}},[t("el-input",{attrs:{maxlength:"150",placeholder:"输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1):e._e(),4==e.type||5==e.type?t("el-form-item",{attrs:{label:4==e.type?"任务名称":"目录名称",prop:"name"}},[t("el-input",{attrs:{maxlength:"150",placeholder:"输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1):e._e(),0==e.type?t("el-form-item",{attrs:{label:"存储目录:",prop:"menu"}},[t("el-cascader",{ref:"cascader",staticStyle:{width:"100%"},attrs:{options:e.treeDataListMenu,filterable:"",clearable:"",props:e.defaultProps1,placeholder:"请输入目录名称匹配数据"},model:{value:e.form.menu,callback:function(t){e.$set(e.form,"menu",t)},expression:"form.menu"}})],1):e._e(),3==e.type||8==e.type?t("div",[t("div",{staticClass:"title"},[e._v("任务信息")]),t("el-form-item",{attrs:{prop:"typeId",label:"任务类型"}},[t("el-select",{attrs:{disabled:8===e.type},model:{value:e.form.typeId,callback:function(t){e.$set(e.form,"typeId",t)},expression:"form.typeId"}},e._l(e.jobTypeList,(function(e){return t("el-option",{key:e.typeId,attrs:{label:e.label,value:e.typeId}})})),1)],1),t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{maxlength:"150",placeholder:"输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"描述"}},[t("el-input",{attrs:{placeholder:"输入描述"},model:{value:e.form.descName,callback:function(t){e.$set(e.form,"descName",t)},expression:"form.descName"}})],1),6==e.form.typeId||8==e.type?t("div",[t("div",{staticClass:"title"},[e._v("服务器配置")]),t("el-form-item",{attrs:{label:"服务器地址",prop:"hostUrl"}},[t("el-input",{attrs:{maxlength:"15","show-word-limit":"",placeholder:"输入服务器地址"},model:{value:e.form.hostUrl,callback:function(t){e.$set(e.form,"hostUrl",t)},expression:"form.hostUrl"}})],1),t("el-form-item",{attrs:{label:"端口",prop:"port"}},[t("el-input",{attrs:{maxlength:"5","show-word-limit":"",placeholder:"输入端口"},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",e._n(t))},expression:"form.port"}})],1),t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{maxlength:"20","show-word-limit":"",placeholder:"输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{maxlength:"20","show-word-limit":"","show-password":"","auto-complete":"new-password",placeholder:"输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1):e._e()],1):e._e(),6==e.type?t("div",[t("el-form-item",{attrs:{label:"上级作业流",prop:"parentDir"}},[t("el-cascader",{attrs:{options:e.parentDirList,props:e.defaultProps,clearable:""},model:{value:e.form.parentDir,callback:function(t){e.$set(e.form,"parentDir",t)},expression:"form.parentDir"}})],1),t("el-form-item",{attrs:{label:"任务类型"}},e._l(e.jobTypeList,(function(a){return t("span",{key:"n"+a.typeId},[e.nodeData.data.typeId==a.typeId?t("span",[e._v(e._s(a.label))]):e._e()])})),0),t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{maxlength:"150",placeholder:"输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:function(t){return t.preventDefault(),e.submitForm(e.type)}}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,null,null).exports,u=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("2909")),f=a("05f1");a("3467");function p(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={props:["filterText","jobStreamTree","creator","searchBool"],components:{editMenu:f.a,addFile:d},data:function(){return{defaultExpandedKeysComputedLazy:[],showData2:[],showData3:[],allNodeKeys:[],resolveInstance:null,nodeInstance:null,defaultExpandedKeys:[],defaultExpandedKeys2:[],defaultExpandedKeysSearch:[],defaultExpandedKeysSearch2:[],jobStreamTree1:[],defaultProps1:{checkStrictly:!0,label:"name",value:"id"},dialogFormVisible:!1,taskIdList:[],isOnBoard:!1,isOnboardType:-1,isLoading:!1,data:[],showData:[],isEditMenuShow:!1,loadIndex:0,expandKeys:[],lockPerName:"",targetData:{data:{workType:""}},workTypeClass:{0:"icon-wenjianjia",1:"icon-liucheng",2:"icon-wenjianjia",3:"icon-liucheng1",4:"icon-liuchengtu",5:"icon-wenjianjia",8:"icon-jiansuo"},jobType:{1:"icon-ic_datarsync",2:"icon-ic_job",4:"icon-ic_output",6:"icon-shellzhongduan",7:"icon-daima",8:"icon-jiansuo"},defaultProps:{children:"children",label:"name",isLeaf:"leaf"},jobDrag:!1,isMoving:!1,moveNode:null,isExpandAll:!localStorage.offLineTaskFoldStyle||"fold"!==localStorage.offLineTaskFoldStyle}},computed:{defaultExpandedKeysComputed:function(){return[].concat(Object(u.a)(this.defaultExpandedKeys),Object(u.a)(this.defaultExpandedKeysSearch))},username:function(){var e=this.$store.state.old.admin_info.userName;return e}},methods:{setDefaultExpandedKeysComputedLazy:function(){this.defaultExpandedKeysComputedLazy=this.defaultExpandedKeysComputed},deleteNode:function(e){var t=this;e.forEach((function(a,o){t.defaultExpandedKeysSearch.some((function(e){return e==a.id}))||a.children&&a.children.length||e.splice(o,1),a.children&&a.children.length&&t.deleteNode(a.children)}))},setDisabled:function(e,t){var a=this;e.forEach((function(e){(1==t&&3!==e.workType||3==t&&2!==e.workType&&5!==e.workType||4==t&&1!==e.workType)&&(e.disabled=!0),e.children&&e.children.length&&a.setDisabled(e.children,t)}))},getMenus:function(){var e=this,t=1==this.targetData.data.workflowType?"":this.targetData.data.workType;this.$API.get(this.$URL.getWorkFlowsMenus+this.$route.query.id+"/"+t,{},(function(t){if(0==t.code){var a=t.data;e.setDisabled(a,1==e.targetData.data.workflowType?1:e.targetData.data.workType),e.jobStreamTree1=a}else e.$message.error(t.msg)}))},move:function(){(this.lockPerName&&this.username===this.lockPerName||1!=this.targetData.data.workflowType&&3!=this.targetData.data.workType&&4!=this.targetData.data.workType)&&(this.getMenus(),this.dialogFormVisible=!0)},close:function(){this.taskIdList=[],this.dialogFormVisible=!1},action:function(){var e=this;if(this.taskIdList.length){var t={id:this.targetData.data.id,workFlowId:this.taskIdList[this.taskIdList.length-1],workType:1==this.targetData.data.workflowType?null:this.targetData.data.workType};this.$API.post(this.$URL.mvJobNodeConfig,t,(function(t){0==t.code?(o.a.$emit("offlineMenuTreeDataUpData"),e.dialogFormVisible=!1,e.close()):e.$message.error(t.msg)}))}else this.$message.warning("请至少选择一项进行操作！")},filterNode2:function(e,t,a){var o=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e)return this.defaultExpandedKeys=Object(u.a)(this.defaultExpandedKeys2),void(this.defaultExpandedKeysSearch=Object(u.a)(this.defaultExpandedKeys));this.defaultExpandedKeys=[],t.forEach((function(t){var r=t.name,n=t.id,s=t.children;s&&s.length&&o.filterNode2(e,s,[].concat(Object(u.a)(a),[n]),!1),(-1!=r.indexOf(e)||i)&&(s&&s.length&&o.filterNode2(e,s,[].concat(Object(u.a)(a),[n]),!0),o.defaultExpandedKeysSearch=[].concat(Object(u.a)(o.defaultExpandedKeysSearch),Object(u.a)(a),[t.id]))}))},filterNode:function(e,t,a){return!e||-1!==t.name.indexOf(e)},getReturnNode:function(e,t,a){var o=e.data&&e.data.name&&-1!==e.data.name.indexOf(a);o&&t.push(o),!o&&1!=e.level&&e.parent&&this.getReturnNode(e.parent,t,a)},nodeContextmenu:function(e,t,a,o){this.lockPerName=t.lockPerName,this.targetData=a,this.$refs.editMenu.event=e,this.isEditMenuShow=!0},loadNode:function(e,t){this.resolveInstance=t,this.nodeInstance=e;var a=e.data,o=a.isExist,i=a.children,r=a.id;a.jobId?o&&(!i||!i.length||i&&"default"==i[0].pageType)?this.$API.get(this.$URL.lazyLoadTree+"?parentId=".concat(r),{},(function(e){var a=e.data.map((function(e){return b(b({},e),{},{leaf:!e.isExist})}));t(a)})):t(e.data.children?e.data.children:[]):o&&(!i||!i.length||i&&"default"==i[0].pageType)?this.$API.get(this.$URL.getWorkFlowMenuTreeSonNew+"?menuId=".concat(r,"&procId=").concat(this.$route.query.id,"&userId=").concat(this.creator,"&lockUser=").concat(this.searchBool?this.$store.state.old.admin_info.userId:"","&searchName=").concat(this.filterText),{},(function(e){var a=e.data.map((function(e){return b(b({},e),{},{leaf:!e.isExist})}));t(a)})):t(e.data.children?e.data.children:[])},expand:function(e){this.expandKeys.push(e.id)},collapse:function(e){var t=this;!function e(a){if(t.expandKeys.remove(a.id),a.children){var o,i=p(a.children);try{for(i.s();!(o=i.n()).done;){e(o.value)}}catch(e){i.e(e)}finally{i.f()}}}(e)},nodeClick:function(e){this.isMoving=!1,this.isEditMenuShow=!1,this.toView(e)},addFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$refs.addFile.nodeData=this.targetData,e&&(this.$refs.addFile.type=e),(this.lockPerName&&this.username===this.lockPerName||1!=this.targetData.data.workflowType&&3!=this.targetData.data.workType&&4!=this.targetData.data.workType||4!=e&&5!=e)&&(this.$refs.addFile.dialogVisible=!0,4!=e&&5!=e||(this.$refs.addFile.form.name=this.targetData.label),8==e&&(this.$refs.addFile.form=JSON.parse(JSON.stringify(this.targetData.data))),this.$refs.addFile.open(e,t))},deleted:function(){var e=this;(this.lockPerName&&this.username===this.lockPerName||1!=this.targetData.data.workflowType&&3!=this.targetData.data.workType&&4!=this.targetData.data.workType)&&this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t,a={procId:e.$route.query.id,id:e.targetData.data.id};t=1==e.targetData.data.workflowType?"delWorkFlow":"delWorkFlowMenu",e.$API.post(e.$URL[t],a,(function(t){0==t.code?(o.a.$emit("dataProcessTaskToChangeJob",e.targetData.data,"remove"),e.$emit("getRef")):e.$message.error(t.msg)}))})).catch((function(){}))},copy:function(){var e=this;this.isMoving=!1,this.isEditMenuShow=!1,this.isLoading=!0,this.$API.get("".concat(this.$URL.copyVirJobNode,"/").concat(this.targetData.data.id),{},(function(t){e.isLoading=!1,0==t.code?o.a.$emit("dataProcessTaskToChangeJob",b(b({},e.targetData.data),{},{id:t.data,name:"未命名",COPYING:!0,COPIEDID:e.targetData.data.id,workflowType:"copy"})):e.$message.error(t.msg)}))},addFileSucess:function(){this.$emit("getRef")},mouseDown:function(e,t){this.isMoving=!1,this.isOnBoard&&(3!=this.isOnboardType||1==t.workflowType&&this.$store.state.old.jobBoardKey==t.parentId)&&(4==this.isOnboardType&&3!=t.workType||(this.jobDrag=!0,this.mouseMove(e,t)))},mouseMove:function(e,t){var a=this;this.isMoving=!1,document.onmousemove=function(o){var i=Math.abs(e.pageX-o.pageX),r=Math.abs(e.pageY-o.pageY);(i>7||r>7)&&(a.jobDrag?(a.isMoving=!0,a.moveNode=t,a.$nextTick((function(){var e=a.$refs.dragModel;e.style.top=o.pageY-10+"px",e.style.left=o.pageX-20+"px"}))):(document.onmousemove=null,a.isMoving=!1,a.moveNode=null))},document.onmouseup=function(e){if(a.isMoving=!1,document.onmousemove=null,a.jobDrag){var i=document.querySelector(".data_process_task_main_index").getBoundingClientRect(),r=i.top,n=i.left,s=i.bottom,l=i.right;n<e.clientX&&e.clientX<l&&r<e.clientY&&e.clientY<s&&o.a.$emit("modelDragIn"+a.$store.state.old.jobBoardKey,e,t),a.jobDrag=!1}}},toView:function(e){1!=e.workflowType&&3!=e.workType&&4!=e.workType||(o.a.$emit("dataProcessTaskToChangeJob",e),sessionStorage.removeItem("isRickData"))},addDefaultPage:function(e){var t=this;e.forEach((function(e){e.isExist;var a=e.children;e.leaf=!(a&&a.length||e.isExist),!t.isExpandAll&&t.filterText&&a&&a.length&&t.defaultExpandedKeys.push(e.id),a&&a.length&&t.addDefaultPage(a)}))}},mounted:function(){var e=this;o.a.$off("jobStreamIsOnBoard"),o.a.$on("jobStreamIsOnBoard",(function(t,a){e.isOnBoard=t,e.isOnboardType=a})),o.a.$off("changeTabOffline"),o.a.$on("changeTabOffline",(function(t){e.$refs.jobStreamTree.setCurrentKey(t.id)}));this.$route.query;sessionStorage.getItem("isRickDialog")&&this.addFile(3)},watch:{defaultExpandedKeysComputed:{deep:!0,handler:function(){!this.defaultExpandedKeysComputed.length&&this.isExpandAll?this.showData=[]:this.showData=JSON.parse(JSON.stringify(this.showData2))}},jobStreamTree:{handler:function(e){var t=this;if(this.showTree=!1,this.data=JSON.parse(JSON.stringify(e)),this.showData=[{name:"离线任务开发",children:this.data,type:"root",id:20220615}],this.loadIndex<1){var a,o=p(this.showData);try{for(o.s();!(a=o.n()).done;)!function e(a){if(t.expandKeys.push(a.id),a.children){var o,i=p(a.children);try{for(i.s();!(o=i.n()).done;)e(o.value)}catch(e){i.e(e)}finally{i.f()}}}(a.value)}catch(e){o.e(e)}finally{o.f()}}this.loadIndex++,this.defaultExpandedKeys=[],this.allNodeKeys=[],this.addDefaultPage(this.showData),this.defaultExpandedKeys2=Object(u.a)(this.defaultExpandedKeys),this.showData2=JSON.parse(JSON.stringify(this.showData)),this.showData3=JSON.parse(JSON.stringify(this.showData))},deep:!0},filterText:function(e){this.$nextTick((function(){}))},creator:{handler:function(e){var t=this;if(!e)return this.showData=this.data;this.$nextTick((function(){var a=t.$route.params.workId?t.data:r(t.data,"createPer",e);t.showData=a;var o,i=p(t.showData);try{for(i.s();!(o=i.n()).done;)!function e(a){if(t.expandKeys.push(a.id),a.children){var o,i=p(a.children);try{for(i.s();!(o=i.n()).done;)e(o.value)}catch(e){i.e(e)}finally{i.f()}}}(o.value)}catch(e){i.e(e)}finally{i.f()}}))}}}},v=(a("8ca0"),a("19cf"),Object(c.a)(g,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_process_task_job_srteam zt-scrollbar"},[t("el-tree",{key:"1",ref:"jobStreamTree",attrs:{"filter-node-method":e.filterNode,data:e.showData,load:e.loadNode,lazy:"",props:e.defaultProps,"node-key":"id","default-expanded-keys":e.defaultExpandedKeysComputedLazy,"expand-on-click-node":!1,"highlight-current":""},on:{"node-click":e.nodeClick,"node-contextmenu":e.nodeContextmenu,"node-expand":e.expand,"node-collapse":e.collapse,"update:defaultExpandedKeys":function(t){e.defaultExpandedKeysComputedLazy=t},"update:default-expanded-keys":function(t){e.defaultExpandedKeysComputedLazy=t}},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.node,i=a.data;return t("span",{style:{color:3==i.workType&&0==i.scheduleType?"":3!=i.workType&&4!=i.workType||1!=i.scheduleType?"#040C2C":"green"},on:{mousedown:function(t){return e.mouseDown(t,i)}}},[t("i",{staticClass:"icon",class:e.workTypeClass[i.workType]||e.jobType[i.typeId]}),t("span",{staticStyle:{"padding-left":"4px"}},[e._v(e._s(o.label))]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.jobInfoLock?"当前上锁人："+i.lockPerName:"当前未上锁",placement:"right"}},[void 0!==i.workType&&0!=i.workType&&2!=i.workType&&5!=i.workType&&1!=i.workType?t("span",{staticClass:"icon",class:{"icon-ic_locking_pre":!i.jobInfoLock,"icon-ic_locking":i.jobInfoLock},staticStyle:{"padding-left":"4px","font-size":"14px"}}):e._e()])],1)}}])}),e.jobDrag&&e.isMoving?t("span",{ref:"dragModel",staticClass:"drag_model"},[t("i",{staticClass:"el-icon-s-operation"}),t("span",{staticStyle:{"padding-left":"4px"}},[e._v(e._s(e.moveNode.name))])]):e._e(),t("edit-menu",{ref:"editMenu",attrs:{editMenuShow:e.isEditMenuShow},on:{"update:editMenuShow":function(t){e.isEditMenuShow=t},"update:edit-menu-show":function(t){e.isEditMenuShow=t}}},[2!=e.targetData.data.workType&&6!=e.targetData.data.typeId&&"root"!=e.targetData.data.type&&1!=e.targetData.data.deleteFlag?t("li",{class:{cannotEdit:!(e.lockPerName&&e.username===e.lockPerName||1!=e.targetData.data.workflowType&&3!=e.targetData.data.workType&&4!=e.targetData.data.workType)},on:{click:function(t){0==e.targetData.data.workflowType?e.addFile(5,0):e.addFile(4,0)}}},[e._v("重命名")]):e._e(),2!=e.targetData.data.workType&&"root"!=e.targetData.data.type&&1!=e.targetData.data.deleteFlag?t("li",{class:{cannotEdit:!(e.lockPerName&&e.username===e.lockPerName||1!=e.targetData.data.workflowType&&3!=e.targetData.data.workType&&4!=e.targetData.data.workType)},on:{click:e.deleted}},[e._v("删除")]):e._e(),2==e.targetData.data.workType||5==e.targetData.data.workType?t("li",{on:{click:function(t){return e.addFile(1,0)}}},[e._v("新建子目录")]):e._e(),2==e.targetData.data.workType||5==e.targetData.data.workType?t("li",{on:{click:function(t){return e.addFile(2,0)}}},[e._v("新建作业流")]):e._e(),3==e.targetData.data.workType?t("li",{on:{click:function(t){return e.addFile(3,0)}}},[e._v("新建任务")]):e._e(),1==e.targetData.data.workflowType?t("li",{on:{click:e.copy}},[e._v("复制")]):e._e(),1==e.targetData.data.workType?t("li",{on:{click:function(t){return e.addFile(7,0)}}},[e._v("新建作业流依赖")]):e._e(),6==e.targetData.data.typeId?t("li",{on:{click:function(t){return e.addFile(8,0)}}},[e._v("编辑")]):e._e(),1==e.targetData.data.workflowType||3==e.targetData.data.workType||4==e.targetData.data.workType?t("li",{class:{cannotEdit:!e.lockPerName||e.username!==e.lockPerName},on:{click:e.move}},[e._v("移动")]):e._e()]),t("add-file",{ref:"addFile",attrs:{target:e.targetData.data},on:{addFileSucess:e.addFileSucess}}),t("el-dialog",{attrs:{title:1==e.targetData.data.workflowType?"移动任务":3==e.targetData.data.workType?"移动作业流":4==e.targetData.data.workType?"移动作业流依赖":"--",visible:e.dialogFormVisible,"before-close":e.close},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:1==e.targetData.data.workflowType?"任务名称":3==e.targetData.data.workType?"作业流名称":4==e.targetData.data.workType?"作业流依赖名称":"--"}},[t("span",[e._v(e._s(e.targetData.data.name))])]),t("el-form-item",{attrs:{label:"移动到"}},[t("el-cascader",{ref:"jobStreamTree",staticStyle:{width:"100%"},attrs:{options:e.jobStreamTree1,placeholder:"请选择",props:e.defaultProps1,clearable:""},model:{value:e.taskIdList,callback:function(t){e.taskIdList=t},expression:"taskIdList"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.close()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.action}},[e._v("确定")])],1)],1)],1)}),[],!1,null,null,null).exports),y=a("a5d3");function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x={props:["allUsers"],data:function(){return{searchBool:!1,isLoading:!1,btnLoading:!1,serchText:"",funType:0,funTypeList:[{name:"数据开发",id:0},{name:"作业流依赖",id:1}],creator:"",jobStreamTree:[],jobStreamTree1:[],resetTree:[],allUserList:[],batchType:"lock",dialogFunVisible:!1,dialogFormVisible:!1,taskIdList:[],funIdList:[],defaultPropsFun:{multiple:!0,checkStrictly:!0,label:"name",value:"id",emitPath:!1},defaultProps:{multiple:!0,checkStrictly:!0,label:"name",value:"id",emitPath:!1},taskFoldStyle:"fold"}},components:{jobStream:v,addFile:d},methods:{addDefaultPage:function(e){var t=this,a={name:"",pageType:"default"};e.forEach((function(e){var o=e.isExist,i=e.children;i&&i.length&&t.addDefaultPage(i),!o||i&&i.length||(e.children=[a])}))},updateShowData:function(e,t){var a=this,o=[];return e?(e.forEach((function(e){var i=e,r=i.jobId,n=i.id;(r&&r==t.jobId||n==t.id)&&(e=k(k({},e),t)),e.children=a.updateShowData(e.children,t),o.push(e)})),o):o},loadChildren:function(e){var t=e.isExist,a=e.children,o=e.id;e.jobId?t&&(!a||!a.length||a&&"default"==a[0].pageType)&&this.$API.get(this.$URL.lazyLoadTree+"?parentId=".concat(o),{},(function(t){e.children=t.data})):t&&(!a||!a.length||a&&"default"==a[0].pageType)&&this.$API.get(this.$URL.getWorkFlowMenuTreeSonNew+"?menuId=".concat(o,"&procId=").concat(this.$route.query.id,"&userId=").concat(this.creator,"&lockUser=").concat(this.searchBool?this.$store.state.old.admin_info.userId:"","&searchName=").concat(this.serchText),{},(function(t){e.children=t.data}))},handleCommand:function(e){"unfold"==e||"fold"==e||("fun"==e?(this.getBatchRunLimit(),this.jobStreamTree1=[JSON.parse(JSON.stringify(this.jobStreamTree[this.funType]))],this.dialogFunVisible=!0):this.batch(e))},getBatchRunLimit:function(){var e=this;this.$API.get(this.$URL.getBatchRunLimit,{},(function(t){0==t.code?e.funIdListLength=t.data[0]:e.$message.error(t.msg)}))},changeFunIdList:function(){this.funIdList.length>this.funIdListLength&&this.$message.warning("最多可批量运行".concat(this.funIdListLength,"条~"))},changeFunType:function(e){this.funIdList=[],this.jobStreamTree1=[JSON.parse(JSON.stringify(this.jobStreamTree[this.funType]))]},batch:function(e){this.batchType=e,this.jobStreamTree1=JSON.parse(JSON.stringify(this.jobStreamTree)),this.addDefaultPage(this.jobStreamTree1),this.dialogFormVisible=!0},action:function(){var e=this,t={jobId:[],jobInfoId:[],workFlowId:[],lock:"lock"==this.batchType?1:0},a=this.$refs.jobStreamTree.getCheckedNodes();a.length?(a.forEach((function(e){1==e.data.workflowType&&t.jobId.push(e.data.lockId),3==e.data.workType&&t.jobInfoId.push(e.data.lockId),4==e.data.workType&&t.workFlowId.push(e.data.lockId)})),this.$API.post(this.$URL.workMenuJobsLock,t,(function(t){0==t.code?(e.dialogFormVisible=!1,e.taskIdList=[],o.a.$emit("refreshTabs1"),e.getWorkFlowMenues(),e.$message.success("lock"==e.batchType?"批量上锁成功":"批量解锁成功")):e.$message.error(t.msg)}))):this.$message.warning("请至少选择一项进行操作！")},actionFun:function(){var e=this;if(this.funIdList.length)if(this.funIdList.length>this.funIdListLength)this.$message.warning("最多可批量运行".concat(this.funIdListLength,"条~"));else{this.btnLoading=!0;var t={};0==this.funType&&(t={ids:this.funIdList}),1==this.funType&&(t={workFlowIds:this.funIdList}),this.$API.post(this.$URL.batchWeighingRun,t,(function(t){e.btnLoading=!1,0==t.code?(e.funIdList=[],e.dialogFunVisible=!1,e.$message.success("批量运行成功")):(e.dialogFunVisible=!1,e.$message.error(t.msg))}))}else this.$message.warning("请至少选择一项进行操作！")},close:function(){this.taskIdList=[],this.dialogFormVisible=!1},closeFun:function(){this.funIdList=[],this.dialogFunVisible=!1},setDisabled:function(e){var t=this;e.forEach((function(e){0!=e.workType&&1!=e.workType&&2!=e.workType&&5!=e.workType||(e.disabled=!0),e.children&&e.children.length&&t.setDisabled(e.children)}))},getWorkFlowMenues:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1?arguments[1]:void 0;return a&&(this.searchBool=t),this.isLoading=!0,this.jobStreamTree=[],this.serchText="",new Promise((function(t,a){e.$API.post(e.$URL.getWorkFlowMenuTreeNew,{procId:e.$route.query.id,userId:e.creator,lockUser:e.searchBool?e.$store.state.old.admin_info.userId:"",searchName:e.serchText},(function(a){if(e.isLoading=!1,0==a.code){var o=JSON.parse(JSON.stringify(a.data));e.setDisabled(o),e.resetTree=a.data,e.jobStreamTree=o,t(a.data),e.$nextTick((function(){e.$refs.jobStreams.setDefaultExpandedKeysComputedLazy()}))}else e.$message.error(a.msg)}))}))},getWorkFlowMenuesBySearchText:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1?arguments[1]:void 0;return a&&(this.searchBool=t),this.isLoading=!0,this.jobStreamTree=[],new Promise((function(t,a){e.$API.post(e.$URL.getWorkFlowMenuTreeNew,{procId:e.$route.query.id,userId:e.creator,lockUser:e.searchBool?e.$store.state.old.admin_info.userId:"",searchName:e.serchText},(function(a){if(e.isLoading=!1,0==a.code){var o=JSON.parse(JSON.stringify(a.data));e.setDisabled(o),e.resetTree=a.data,e.jobStreamTree=o,t(a.data),e.$nextTick((function(){e.$refs.jobStreams.setDefaultExpandedKeysComputedLazy()}))}else e.$message.error(a.msg)}))}))},changeData:function(e){for(var t=0;t<e.length;t++)1!=e[t].workflowType&&3!=e[t].workType||(e.splice(t,1),t--),e[t]&&e[t].children&&e[t].children.length&&this.changeData(e[t].children)},deleteChildren:function(e){var t=this;e.forEach((function(e){e.children&&e.children.length&&t.deleteChildren(e.children),e.children&&!e.children.length&&(e.children=null)}))},addRoot:function(){var e=[];this.resetTree.forEach((function(t){2==t.workType&&e.push(t)})),this.changeData(e),this.$refs.addFile.treeDataListMenu=e,this.deleteChildren(this.$refs.addFile.treeDataListMenu),this.$refs.addFile.dialogVisible=!0}},mounted:function(){var e=this;localStorage.offLineTaskFoldStyle="fold",this.creator="",o.a.$off("createOffLineTask"),o.a.$on("createOffLineTask",(function(){e.addRoot()})),o.a.$off("offlineMenuTreeDataUpData"),o.a.$on("offlineMenuTreeDataUpData",(function(t){e.getWorkFlowMenues()})),this.$route.params.workId?this.getWorkFlowMenues().then((function(t){var a=Object(y.a)(t,e.$route.params.workId);a&&(o.a.$emit("dataProcessTaskToChangeJob",a),e.$refs.jobStreams.expand(a))})):this.getWorkFlowMenues()},watch:{allUsers:{handler:function(e){e&&(this.allUserList=JSON.parse(JSON.stringify(e)))},deep:!0,immediate:!0},taskFoldStyle:function(e){}}},w=(a("5fb7"),Object(c.a)(x,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_process_task_leftbar"},[t("div",{staticClass:"top"},[t("div",{staticClass:"title"},[t("span",[e._v("离线任务")]),t("el-dropdown",{on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[t("i",{staticClass:"el-icon-setting",staticStyle:{"font-size":"16px",background:"#eee","margin-left":"5px",cursor:"pointer",padding:"3px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"lock"}},[e._v("批量上锁")]),t("el-dropdown-item",{attrs:{command:"unlock"}},[e._v("批量解锁")]),t("el-dropdown-item",{attrs:{command:"fun"}},[e._v("批量运行")])],1)],1)],1),t("div",{staticClass:"add_root",attrs:{title:"添加目录"},on:{click:e.addRoot}},[t("i",{staticClass:"icon-zengjiatianjiaxinzenggengduo icon"})])]),t("div",{staticClass:"serch_out"},[t("el-input",{attrs:{size:"mini",placeholder:"请输入作业流或作业流依赖查询",clearable:""},on:{change:e.getWorkFlowMenuesBySearchText},model:{value:e.serchText,callback:function(t){e.serchText="string"==typeof t?t.trim():t},expression:"serchText"}}),t("div",{staticStyle:{"margin-top":"20px"}},[e.searchBool?t("el-tag",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.getWorkFlowMenues(!1,1)}}},[e._v("全部")]):t("el-tag",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.getWorkFlowMenues(!0,1)}}},[e._v("当前用户上锁")])],1)],1),t("job-stream",{ref:"jobStreams",attrs:{jobStreamTree:e.jobStreamTree,searchBool:e.searchBool,filterText:e.serchText,creator:e.creator},on:{getRef:e.getWorkFlowMenues}}),t("add-file",{ref:"addFile",on:{addFileSucess:e.getWorkFlowMenues}}),t("el-dialog",{attrs:{title:"lock"==e.batchType?"批量上锁":"批量解锁","before-close":e.close,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"离线开发列表"}},[t("el-cascader",{ref:"jobStreamTree",staticStyle:{width:"100%"},attrs:{options:e.jobStreamTree1,placeholder:"请选择",props:e.defaultProps,clearable:""},scopedSlots:e._u([{key:"default",fn:function(a){a.node;var o=a.data;return[t("span",{staticStyle:{display:"inline-block",width:"130%"},on:{click:function(t){return e.loadChildren(o)}}},[e._v(e._s(o.name))])]}}]),model:{value:e.taskIdList,callback:function(t){e.taskIdList=t},expression:"taskIdList"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.close()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.action}},[e._v(e._s("lock"==e.batchType?"批量上锁":"批量解锁"))])],1)],1),t("el-dialog",{attrs:{title:"批量运行","before-close":e.closeFun,visible:e.dialogFunVisible},on:{"update:visible":function(t){e.dialogFunVisible=t}}},[t("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"离线开发类型"}},[t("el-select",{attrs:{placeholder:"请选择离线开发类型"},on:{change:e.changeFunType},model:{value:e.funType,callback:function(t){e.funType=t},expression:"funType"}},e._l(e.funTypeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"离线开发列表"}},[t("el-cascader",{ref:"jobStreamTree",staticStyle:{width:"100%"},attrs:{options:e.jobStreamTree1,placeholder:"请选择",props:e.defaultPropsFun,clearable:""},on:{change:e.changeFunIdList},model:{value:e.funIdList,callback:function(t){e.funIdList=t},expression:"funIdList"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.closeFun()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",disabled:e.btnLoading},on:{click:e.actionFun}},[e._v("批量运行")])],1)],1)],1)}),[],!1,null,"1ab89492",null).exports);function T(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var L={props:["filterText","treeData","creator"],components:{editMenu:f.a},computed:{username:function(){var e=this.$store.state.old.admin_info.userId;return e}},data:function(){return{isUpdate:!1,isLoading:!1,isEditMenuShow:!1,expandKeys:[],iconList:{1:"icon-A-icon",2:"icon-S-icon",3:"icon-S-icon",4:"icon-shishibiaozhi"},defaultProps:{children:"childList",label:"name"},treeDataList:[],treeDataRoot:[{childList:null,id:-1,level:0,menuType:0,procId:this.$route.query.id,name:"实时任务开发"}],showData:[],targetNode:"",creat:"",isExpandAll:!localStorage.realTimeTaskFoldStyle||"fold"!==localStorage.realTimeTaskFoldStyle}},methods:{filterNode:function(e,t,a){if(!e)return!0;var o=[];this.getReturnNode(a,o,e);var i=!1;return o.forEach((function(e){i=i||e})),i},getReturnNode:function(e,t,a){var o=e.data&&e.data.name&&-1!==e.data.name.indexOf(a);o&&t.push(o),!o&&1!=e.level&&e.parent&&this.getReturnNode(e.parent,t,a)},nodeContextmenu:function(e,t,a,o){this.lockPerName=t.lockPer,this.targetNode=t,this.$refs.editMenu.event=e,this.isEditMenuShow=!0},addOrReNameMenuOrTask:function(e){(this.lockPerName&&this.username===this.lockPerName||"renametask"!=e)&&o.a.$emit("realTimeMenuTreeDataAddOrReNameMenuOrTask",{targetNode:this.targetNode,type:e})},realTimeDelete:function(){var e=this;this.lockPerName&&this.username===this.lockPerName&&this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.isLoading=!0,e.$API.delete(e.$URL.realTimeDelete+"/"+e.targetNode.id,{},(function(t){e.isLoading=!1,0==t.code?(o.a.$emit("realTimeMenuTreeDataUpData"),2==e.targetNode.menuType&&o.a.$emit("realTimeDeleteTask",{data:e.targetNode})):e.$message.error(t.msg)}))})).catch((function(){}))},expand:function(e){this.expandKeys.push(e.id)},collapse:function(e){var t=this;!function e(a){if(t.expandKeys.remove(a.id),a.children){var o,i=T(a.children);try{for(i.s();!(o=i.n()).done;){e(o.value)}}catch(e){i.e(e)}finally{i.f()}}}(e)},toView:function(e){2==e.menuType&&o.a.$emit("realTimeTaskOpen",{data:e})},nodeClick:function(e){this.isEditMenuShow=!1,this.toView(e)}},mounted:function(){var e=this;o.a.$off("changeTabOnline"),o.a.$on("changeTabOnline",(function(t){e.$refs.taskList.setCurrentKey(t.id)}))},watch:{filterText:function(e){this.$refs.taskList.filter(e)},treeData:{handler:function(e){this.showData=JSON.parse(JSON.stringify(e))},deep:!0,immediate:!0}}},N=(a("2ca6"),a("8e65"),Object(c.a)(L,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_realtime_task_job_srteam"},[t("el-tree",{ref:"taskList",attrs:{"filter-node-method":e.filterNode,data:e.showData,props:e.defaultProps,"node-key":"id","default-expand-all":e.isExpandAll,"expand-on-click-node":!1,"highlight-current":""},on:{"node-click":e.nodeClick,"node-contextmenu":e.nodeContextmenu,"node-expand":e.expand,"node-collapse":e.collapse},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.node,i=a.data;return t("span",{staticStyle:{display:"inline-block",width:"100%"}},[t("div",[t("div",{staticStyle:{display:"inline-block"}},[1==i.menuType||0==i.menuType?t("i",{staticClass:"icon icon-wenjianjia"}):t("i",{staticClass:"icon",class:e.iconList[i.taskType]}),t("span",{staticStyle:{"padding-left":"4px"}},[e._v(e._s(o.label))]),2==i.menuType?t("span",{staticStyle:{"padding-left":"4px"}},[e._v(e._s(i.createPerName))]):e._e()]),2==i.menuType&&1==i.lockState?t("i",{staticClass:"icon icon-ic_locking",staticStyle:{"margin-left":"20px"}}):e._e(),2==i.menuType&&0==i.lockState?t("i",{staticClass:"icon icon-ic_locking_pre",staticStyle:{"margin-left":"20px"}}):e._e()])])}}])}),t("edit-menu",{ref:"editMenu",attrs:{editMenuShow:e.isEditMenuShow},on:{"update:editMenuShow":function(t){e.isEditMenuShow=t},"update:edit-menu-show":function(t){e.isEditMenuShow=t}}},[(0==e.targetNode.menuType||1==e.targetNode.menuType)&&e.targetNode.level<3?t("li",{on:{click:function(t){return e.addOrReNameMenuOrTask("addmenu")}}},[e._v("新建目录")]):e._e(),0==e.targetNode.menuType||1==e.targetNode.menuType?t("li",{on:{click:function(t){return e.addOrReNameMenuOrTask("addtask")}}},[e._v("新建实时任务")]):e._e(),e.targetNode.level>0?t("li",{class:{cannotEdit:!e.lockPerName||e.username!==e.lockPerName||0==e.targetNode.lockState},on:{click:function(t){return e.addOrReNameMenuOrTask(1==e.targetNode.menuType?"renamemenu":"renametask")}}},[e._v("重命名")]):e._e(),e.targetNode.level>0?t("li",{class:{cannotEdit:!e.lockPerName||e.username!==e.lockPerName||0==e.targetNode.lockState},on:{click:e.realTimeDelete}},[e._v("删除")]):e._e()])],1)}),[],!1,null,null,null).exports);function I(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return D(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var $,C,j,O,F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children",a=arguments.length>2?arguments[2]:void 0;function o(e,a){var i,r=I(e);try{for(r.s();!(i=r.n()).done;){var n=i.value;a(n),n[t]&&o(n[t],a)}}catch(e){r.e(e)}finally{r.f()}}return o(e,a),e},P={props:["isOpen","treeData"],data:function(){return{dialogVisible:!1,isLoading:!1,buttonLoading:!1,form:{name:"",menu:[0],taskType:1,description:""},menuData:[],defaultProps:{checkStrictly:!0,label:"name",value:"id",children:"childList"},treeDataListMenu:[],treeDataListTask:[],target:{targetNode:"",type:""},nodeType:"",cascaderKey:0,taskTypes:[],ruleForm:{name:[{required:!0,message:"请输入名称",trigger:"blur",pattern:'[^ "]+'},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],menu:[{required:!0,message:"请选择目录",trigger:"change"}],taskType:[{required:!0,message:"请选择资源",trigger:"change"}]}}},methods:{realTimeMenuAndTask:function(){var e=this;this.isLoading=!0;var t=!this.target.targetNode&&this.$refs.cascader.getCheckedNodes(!0,!1),a={menuType:"addmenu"==this.target.type||"renamemenu"==this.target.type?1:2,procId:this.$route.query.id,parentId:"renamemenu"==this.target.type||"renametask"==this.target.type?"":this.target.targetNode?this.target.targetNode.id:t[0].data.id,name:this.form.name,level:this.target.targetNode?this.target.targetNode.level+1:t[0].data.level+1,description:this.form.description,id:"renamemenu"==this.target.type||"renametask"==this.target.type?this.target.targetNode.id:"",taskType:this.form.taskType};this.buttonLoading=!0,this.$API.post(this.$URL.realTimeMenu,a,(function(t){e.isLoading=!1,e.buttonLoading=!1,0==t.code?(e.dialogVisible=!1,o.a.$emit("realTimeMenuTreeDataUpData"),"addtask"==e.target.type&&o.a.$emit("realTimeTaskOpen",{data:t.data}),"renametask"==e.target.type&&o.a.$emit("realTimeTaskReName",{data:t.data})):e.$message.error(t.msg)}))},realTimeTaskTypes:function(){var e=this;this.isLoading=!0,this.$API.get(this.$URL.realTimeTaskTypes,{},(function(t){e.isLoading=!1,0==t.code?e.taskTypes=t.data:e.$message.error(t.msg)}))},submit:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.realTimeMenuAndTask()}))},diaClose:function(){this.form=this.$data.form,this.form.description="",this.buttonLoading=!1,this.$refs.ruleForm.resetFields(),this.form.name="",this.$emit("update:isOpen",!1)}},mounted:function(){this.realTimeTaskTypes()},watch:{isOpen:{handler:function(e){this.dialogVisible=e},immediate:!0},treeData:{handler:function(e){function t(t){return F(JSON.parse(JSON.stringify(e)),"childList",(function(e){(1==e.menuType||0==e.menuType)&&e.childList&&e.childList.length>0&&(e.childList=e.childList.filter((function(e){return"menu"==t?2!=e.menuType&&e.level<3:2!=e.menuType})),e.childList&&0==e.childList.length&&(e.childList=void 0))}))}++this.cascaderKey,this.treeDataListMenu=t("menu"),this.treeDataListTask=t("task")},deep:!0}}},M=(a("77a3"),a("4175"),{props:["allUsers"],components:{taskList:N,addMenuAndFile:Object(c.a)(P,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"real_time_add_menu_file"},[t("el-dialog",{attrs:{title:"addmenu"==e.target.type?"新建目录":"addtask"==e.target.type?"新建实时任务":"重命名",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.diaClose}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"ruleForm",attrs:{model:e.form,"label-width":"100px","label-position":"left",rules:e.ruleForm},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"addmenu"==e.target.type||"renamemenu"==e.target.type?"目录名称:":"任务名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),"addtask"==e.target.type?t("el-form-item",{attrs:{label:"任务类型",prop:"taskType"}},[t("el-radio-group",{staticClass:"in_label",model:{value:e.form.taskType,callback:function(t){e.$set(e.form,"taskType",t)},expression:"form.taskType"}},e._l(e.taskTypes,(function(a){return t("el-radio",{key:a.code,attrs:{label:a.code}},[e._v(e._s(a.name))])})),1),t("el-tooltip",{staticStyle:{float:"right","margin-left":"0"},attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\r\n                    实时采集：实时采集外部数据源;"),t("br"),e._v("flink:基于Flink API的Java、Scala处理程序;"),t("br"),e._v("flinksql:编辑SQL代码实现流数据处理;"),t("br"),e._v("flink SQL DAG:通过拖拽式方式构建实时任务;\r\n                ")]),t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"margin-left":"30px",display:"inline-block"}})])],1):e._e(),e.target.targetNode||"addmenu"!=e.target.type?e._e():t("el-form-item",{attrs:{label:"存储目录:",prop:"menu"}},[t("el-cascader",{key:e.cascaderKey,ref:"cascader",staticStyle:{width:"100%"},attrs:{options:e.treeDataListMenu,filterable:"",clearable:"",props:e.defaultProps,placeholder:"请输入目录名称匹配数据"},model:{value:e.form.menu,callback:function(t){e.$set(e.form,"menu",t)},expression:"form.menu"}})],1),e.target.targetNode||"addtask"!=e.target.type?e._e():t("el-form-item",{attrs:{label:"存储目录:",prop:"menu"}},[t("el-cascader",{key:e.cascaderKey,ref:"cascader",staticStyle:{width:"100%"},attrs:{options:e.treeDataListTask,filterable:"",clearable:"",props:e.defaultProps,placeholder:"请输入目录名称匹配数据"},model:{value:e.form.menu,callback:function(t){e.$set(e.form,"menu",t)},expression:"form.menu"}})],1),"addtask"==e.target.type?t("el-form-item",{attrs:{label:"描述"}},[t("el-input",{attrs:{maxlength:"200",type:"textarea",placeholder:"请输入任务描述(不超过两百字符)"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{searchBool:!1,serchText:"",creator:"",jobStreamTree:[],allUserList:[],isOpenMenuOrFile:!1,treeData:[{childList:null,id:-1,level:0,menuType:0,procId:this.$route.query.id,name:"实时任务开发"}],jobStreamTree1:"",defaultProps:{multiple:!0,checkStrictly:!0,label:"name",value:"id",children:"childList",emitPath:!1},batchType:"lock",dialogFormVisible:!1,taskIdList:[],taskFoldStyle:localStorage.realTimeTaskFoldStyle||"unfold"}},methods:{handleCommand:function(e){"unfold"==e||"fold"==e?this.taskFoldStyle=e:this.batch(e)},batch:function(e){this.batchType=e,this.jobStreamTree1=JSON.parse(JSON.stringify(this.treeData)),this.setDisabled(this.jobStreamTree1),this.dialogFormVisible=!0},action:function(){var e=this;if(this.taskIdList.length){var t={menuIds:this.taskIdList,lockState:"lock"==this.batchType?1:0};this.$API.post(this.$URL.realtimeworkMenuJobsLock,t,(function(t){0==t.code?(e.dialogFormVisible=!1,e.close(),e.realTimeTaskList(),o.a.$emit("refreshTabs"),e.$message.success("lock"==e.batchType?"批量上锁成功":"批量解锁成功")):e.$message.error(t.msg)}))}else this.$message.warning("请至少选择一项进行操作！")},close:function(){this.taskIdList=[],this.dialogFormVisible=!1},addOrReNameMenu:function(e){this.isOpenMenuOrFile=!0,this.$refs.addMenu.target=e,"renametask"!=e.type&&"renamemenu"!=e.type||(this.$refs.addMenu.form.name=e.targetNode.name,this.$refs.addMenu.form.description=e.targetNode.description)},setDisabled:function(e){var t=this;e.forEach((function(e){0!=e.menuType&&1!=e.menuType||(e.disabled=!0),e.childList&&e.childList.length&&t.setDisabled(e.childList)}))},realTimeTaskList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1?arguments[1]:void 0;return new Promise((function(o,i){a&&(e.searchBool=t),e.treeData[0].childList=null,e.serchText="";var r={procId:e.$route.query.id,userId:e.creator||""};e.searchBool&&(r.lockUser=e.$store.state.old.admin_info.userId||""),e.$API.get(e.$URL.realTimeTaskList,r,(function(t){0==t.code?(e.treeData[0].childList=JSON.parse(JSON.stringify(t.data)),o(e.treeData)):e.$message.error(t.msg)}))}))}},mounted:function(){var e=this;this.$route.params.realTimeWorkId?this.realTimeTaskList().then((function(t){var a=Object(y.a)(t,e.$route.params.realTimeWorkId,"id","childList");a&&(e.$refs.taskList.toView(a),e.$refs.taskList.expand(a))})):this.realTimeTaskList(),o.a.$off("realTimeMenuTreeDataUpData"),o.a.$on("realTimeMenuTreeDataUpData",(function(){e.$refs.taskList.isUpdate=!0,e.realTimeTaskList()})),o.a.$off("realTimeMenuTreeDataAddOrReNameMenuOrTask"),o.a.$on("realTimeMenuTreeDataAddOrReNameMenuOrTask",(function(t){e.addOrReNameMenu(t)}))},watch:{allUsers:{handler:function(e){this.allUserList=JSON.parse(JSON.stringify(e)),this.creator=this.$route.params.createPer?this.$route.params.createPer:this.$store.state.old.admin_info.userId},deep:!0,immediate:!0},taskFoldStyle:function(e){localStorage.realTimeTaskFoldStyle=e}}}),R=(a("e6c6"),Object(c.a)(M,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"data_realtime_task_leftbar"},[t("div",{staticClass:"top"},[t("div",{staticClass:"title"},[t("span",[e._v("实时任务")]),t("el-dropdown",{on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[t("i",{staticClass:"el-icon-setting",staticStyle:{"font-size":"16px",background:"#eee","margin-left":"5px",cursor:"pointer",padding:"3px"}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"unfold"}},[e._v("默认展开")]),t("el-dropdown-item",{attrs:{command:"fold"}},[e._v("默认折叠")]),t("el-dropdown-item",{attrs:{command:"lock"}},[e._v("批量上锁")]),t("el-dropdown-item",{attrs:{command:"unlock"}},[e._v("批量解锁")])],1)],1)],1),t("div",{staticClass:"add_root",attrs:{title:"添加目录"},on:{click:function(t){return e.addOrReNameMenu({targetNode:null,type:"addmenu"})}}},[t("i",{staticClass:"icon-zengjiatianjiaxinzenggengduo icon"})])]),t("div",{staticClass:"serch_out"},[t("el-select",{staticStyle:{margin:"15px 0"},attrs:{size:"mini",placeholder:"请选择创建人",filterable:"",clearable:""},on:{change:e.realTimeTaskList},model:{value:e.creator,callback:function(t){e.creator=t},expression:"creator"}},e._l(e.allUserList,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.username,value:e.userId}})})),1),t("el-input",{attrs:{size:"mini",placeholder:"请输入文件名称或者目录名称"},model:{value:e.serchText,callback:function(t){e.serchText="string"==typeof t?t.trim():t},expression:"serchText"}}),t("div",{staticStyle:{"margin-top":"20px"}},[e.searchBool?t("el-tag",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.realTimeTaskList(!1,1)}}},[e._v("全部")]):t("el-tag",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.realTimeTaskList(!0,1)}}},[e._v("当前用户上锁")])],1)],1),t("task-list",{ref:"taskList",attrs:{filterText:e.serchText,creator:e.creator,treeData:e.treeData}}),t("add-menu-and-file",{ref:"addMenu",attrs:{treeData:e.treeData,isOpen:e.isOpenMenuOrFile},on:{"update:isOpen":function(t){e.isOpenMenuOrFile=t},"update:is-open":function(t){e.isOpenMenuOrFile=t}}}),t("el-dialog",{attrs:{title:"lock"==e.batchType?"批量上锁":"批量解锁","before-close":e.close,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"实时任务列表"}},[t("el-cascader",{ref:"jobStreamTree",staticStyle:{width:"100%"},attrs:{options:e.jobStreamTree1,placeholder:"请选择任务",props:e.defaultProps,clearable:""},model:{value:e.taskIdList,callback:function(t){e.taskIdList=t},expression:"taskIdList"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.close()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.action}},[e._v(e._s("lock"==e.batchType?"批量上锁":"批量解锁"))])],1)],1)],1)}),[],!1,null,"e349b472",null).exports),E=(a("c5f6"),a("7514"),a("6762"),a("2fdb"),a("53ca")),A=(a("a481"),a("20d6"),a("96cf"),a("1da1")),q=(a("3b2b"),a("6525")),z=(a("28a5"),a("9d54")),V=a("d5f8"),U={name:"importBlood",data:function(){return{uploadData:{id:"",exportType:"",fileList:[]},importText:"",resultLabel:"",uploadLoading:!1,dialogFormVisible:!1}},methods:{downloadFile:(O=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.r)();case 2:t=e.sent,a=new Blob([t.data],{type:"text/json;charset=utf-8"}),o=window.URL.createObjectURL(a),(i=document.createElement("a")).download="模板.xlsx",i.href=o,i.click();case 9:case"end":return e.stop()}}),e)}))),function(){return O.apply(this,arguments)}),uploadFile:(j=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.prev=1,e.next=4,this.$refs.uploadForm.validate();case 4:this.uploadLoading=!0,(a=new FormData).append("file",t.uploadData.fileList[0].raw),Object(z.z)(a).then((function(e){o.dialogFormVisible=!1;var t=e.data.data,a=t.fail,i=t.success,r=t.total,n=o.$createElement;o.$message({message:n("span",{style:"color: ".concat(V.a["font-info-color"])},[n("span",null,"血缘关系导入结果： "),n("a",{style:"display: inline-block;color: ".concat(V.a["font-info-color"])},[n("span",null,"血缘关系共计"),n("span",null,"".concat(r,"条，")),n("span",null,"其中导入成功"),n("span",{style:"color: ".concat(V.a["success-color"])},"".concat(i,"条，")),n("span",null,"导入失败"),n("span",{style:"color: ".concat(V.a["error-color"])},"".concat(a,"条。")),!!a&&n("a",{style:"color: ".concat(V.a["primary-color"],";cursor: pointer;display: inline-block"),on:{click:o.downLoadFailFile}},"点击下载失败记录!")])]),type:"success",duration:5e3})})).catch((function(e){})).finally((function(){o.uploadLoading=!1})),this.handleClose(),this.$emit("success"),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(){return j.apply(this,arguments)}),downLoadFailFile:(C=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.e)();case 2:t=e.sent,a=new Blob([t.data],{type:"text/json;charset=utf-8"}),o=window.URL.createObjectURL(a),i=document.createElement("a"),document.body.appendChild(i),i.download="leadingResult.xlsx",i.href=o,i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o);case 12:case"end":return e.stop()}}),e)}))),function(){return C.apply(this,arguments)}),handleClose:function(){this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.$refs.uploadForm&&this.$refs.uploadForm.resetFields(),this.dialogVisible=!1,this.importVisible=!1,this.id=null,this.importText="",this.resultLabel="",this.dialogFormVisible=!1},fileChange:($=Object(A.a)(regeneratorRuntime.mark((function e(t,a){var o,i,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.importText="",this.resultLabel="",o=t.name.substring(t.name.lastIndexOf(".")+1),!(t.size/1024/1024>5)){e.next=8;break}return this.$message({message:"文件大小不得超过5M",type:"warning"}),this.uploadData.fileList=[],e.abrupt("return");case 8:if("xls"===o||"xlsx"===o){e.next=12;break}return this.$message({message:"仅支持上传表格文件",type:"warning"}),this.uploadData.fileList=[],e.abrupt("return");case 12:return this.uploadLoading=!0,e.prev=13,(i=new FormData).append("file",t.raw),this.resultLabel="文件校验中。。。",e.next=19,Object(z.b)(i);case 19:r=e.sent,n=r.data.data,this.importText=n.error_log&&n.error_log.split("\n").join("<br />"),this.resultLabel=n.error_log?"文件校验失败":"文件校验成功",this.uploadData.fileList=n.error_log&&[]||a,this.$refs.uploadForm.validate(),this.uploadLoading=!1,e.next=35;break;case 28:e.prev=28,e.t0=e.catch(13),this.importText="",this.resultLabel="",this.uploadData.fileList=[],this.uploadLoading=!1;case 35:case"end":return e.stop()}}),e,this,[[13,28]])}))),function(e,t){return $.apply(this,arguments)}),exceed:function(){this.$message.error("最多上传一个文件")},removeFile:function(e,t){this.importText="",this.resultLabel="",this.uploadData.fileList=t},submit:function(){},toggleDialog:function(){this.dialogFormVisible=!this.dialogFormVisible}},components:{},computed:{}},B=(a("1b7a"),Object(c.a)(U,(function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"importBlood",attrs:{"destroy-on-close":"",width:"40%",title:"导入血缘关系",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"uploadForm",staticClass:"demo-ruleForm",attrs:{model:e.uploadData,"label-width":"180px","label-position":"right"}},[t("el-form-item",{attrs:{label:"当前导入方式为："}},[t("span",[e._v(e._s(0===e.uploadData.exportType?"增量":"全量"))]),t("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px","line-height":"32px"},attrs:{effect:"dark",content:"全量：文件中所涉及的表的血缘将完全按照文件内容进行更新同步",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind"})])],1),t("el-form-item",{staticStyle:{position:"relative"},attrs:{label:"请上传excel文件：",rules:[{required:!0,message:"请选择文件"}],prop:"fileList"}},[t("el-button",{staticStyle:{position:"absolute",right:"30%"},attrs:{type:"text"},on:{click:e.downloadFile}},[e._v("下载模板")]),t("el-upload",{staticClass:"upload-demo",attrs:{"auto-upload":!1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",action:"null","on-exceed":e.exceed,"on-change":e.fileChange,"on-remove":e.removeFile,limit:1,"file-list":e.uploadData.fileList}},[t("el-button",{attrs:{size:"small"}},[e._v("点击上传文件")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("目前仅支持导入MySQL、Hive类型的表血缘")])],1)],1),e.resultLabel?t("el-form-item",{class:{pendding:"文件校验中。。。"===e.resultLabel,success:"文件校验成功"===e.resultLabel,fail:"文件校验失败"===e.resultLabel},attrs:{label:"".concat(e.resultLabel),"data-v-item-label":""}},[t("div",{staticClass:"result-text",domProps:{innerHTML:e._s(e.importText)}})]):e._e()],1),t("div",{staticClass:"detail-upload"}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.uploadLoading},on:{click:e.uploadFile}},[e._v("开始导入")])],1)],1)}),[],!1,null,null,null).exports,{props:["form","sourceType","drawer","isDisabled","engineId"],data:function(){return{activeNames:["basicAtttibute","priority","sysRun","sql"],dialogVisible:!1,data:{output_fix_statment:"",isOpenOutHours:0,outHours:1,jobNodeInfo:{name:"",createPerName:""}}}},components:{codeEditor:q.a},methods:{fullScreen:function(){var e=this;this.dialogVisible=!0,this.$nextTick((function(){e.$refs.screeCodeEditor.code=e.$refs.codeEditor.code,setTimeout((function(){e.$refs.screeCodeEditor.$refs.codemirror.codemirror.refresh()}),10)}))},addParam:function(){this.isDisabled||this.data.nodeParam.push({key:"",value:""})},removeParam:function(e){this.data.nodeParam.remove(e.row)}},watch:{data:{handler:function(e){this.$emit("dataChange",e)},deep:!0},form:{handler:function(e){var t=this;this.$nextTick((function(){t.data=Object.assign(t.data,e),t.data.nodeParam=t.data.nodeParam?t.data.nodeParam:[],t.data.outHours=t.data.outHours||1}))},deep:!0,immediate:!0}}}),J=(a("9487"),Object(c.a)(B,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"process_ds_attribute"},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-form",{ref:"ruleForm",attrs:{model:e.data,"label-width":"100px","label-position":"left"}},[t("el-collapse-item",{attrs:{title:"基本属性",name:"basicAtttibute"}},[t("div",{staticClass:"section"},[t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务名称："+e._s(e.data.jobNodeInfo.name))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务类型：数据同步")]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("责任人:"+e._s(e.data.jobNodeInfo.createPerName))])])]),t("el-collapse-item",{attrs:{name:"priority"}},[t("template",{slot:"title"},[e._v("\n          调度配置\n          ")]),t("div",{staticClass:"section"},[t("el-checkbox",{attrs:{disabled:e.isDisabled,"true-label":1,"false-label":0},model:{value:e.data.isOpenOutHours,callback:function(t){e.$set(e.data,"isOpenOutHours",t)},expression:"data.isOpenOutHours"}},[e._v("是否设置超时")]),e.data.isOpenOutHours?t("el-form-item",{attrs:{label:"超时时间"}},[t("el-input-number",{attrs:{disabled:e.isDisabled,"controls-position":"right",min:1,max:1440},model:{value:e.data.outHours,callback:function(t){e.$set(e.data,"outHours",t)},expression:"data.outHours"}}),t("span",{staticStyle:{"margin-left":"12px"}},[e._v("分钟")])],1):e._e()],1)],2),t("el-collapse-item",{attrs:{name:"sysRun"}},[t("template",{slot:"title"},[e._v("\n          运行参数\n          "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"任务运行时需要设置的参数",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-table",{attrs:{data:e.data.nodeParam,size:"mini",width:"100"}},[t("el-table-column",{attrs:{label:"参数名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".key",rules:{required:!0,message:"请输入参数名称",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数名称"},model:{value:a.row.key,callback:function(t){e.$set(a.row,"key",t)},expression:"scope.row.key"}})],1)]}}])}),t("el-table-column",{attrs:{label:"参数值或者表达式",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".value",rules:{required:!0,message:"请输入参数值或者表达式",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数值或者表达式"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作",align:"right","header-align":"right",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{disabled:e.isDisabled,type:"text",size:"small"},on:{click:function(t){return e.removeParam(a)}}},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"add_new",on:{click:e.addParam}},[e._v("+ 添加参数")])],1)],2),0!=e.sourceType&&9!=e.sourceType||!e.drawer||2==e.engineId?e._e():t("el-collapse-item",{attrs:{name:"sql"}},[t("template",{slot:"title"},[e._v("\n          后置SQL\n          ")]),t("div",{staticClass:"cod_m_o2"},[t("span",{staticClass:"el-icon-full-screen",staticStyle:{position:"absolute",right:"-10px",top:"8px",cursor:"pointer"},attrs:{title:"全屏编写"},on:{click:e.fullScreen}}),t("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"后置sql语句"}},[t("div",{staticClass:"cede_editor"},[t("codeEditor",{ref:"codeEditor",attrs:{isLock:e.isDisabled,hasCheck:{isShow:!0,type:1},placeholder:"请编写sql语句"},model:{value:e.data.output_fix_statment,callback:function(t){e.$set(e.data,"output_fix_statment",t)},expression:"data.output_fix_statment"}})],1)])],1)],2)],1)],1),t("el-dialog",{staticClass:"process_ds_attribute_dialog",attrs:{"append-to-body":"",title:"前置sql语句",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("codeEditor",{ref:"screeCodeEditor",attrs:{isLock:e.isDisabled,hasCheck:{isShow:!0,type:1},placeholder:"请编写sql语句"},model:{value:e.data.output_fix_statment,callback:function(t){e.$set(e.data,"output_fix_statment",t)},expression:"data.output_fix_statment"}})],1)],1)}),[],!1,null,null,null).exports),H=a("86b9");function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G,Y,X,Q,Z={props:["dataProcessTaskToChangeJobNodeData"],components:{codeEditor:q.a,attribute:J},data:function(){var e=this,t=function(t,a,o){e.form.upper_bound<e.form.lower_bound?o(new Error("分片上界值不能小于分片下界值")):o()},a=function(e,t,a){t<0?a(new Error("不能为负数")):a()};return{configTable:[],filterName:"",filterTableData:[],dropOptions:[],sliceNum:10,sourceId:null,jobNodeLock:1,dialogTitle:"sql输入",placeholder:"请编写sql语句",activeTabName:"1",isJson:!1,isLoading:!1,dialogVisible:!1,drawer:!1,dataSetList:[],tableNameList:[],collectionTaskList:[],collectionTableInfoList:[],collectionTbInfo:{collTableInfoId:"",tableName:"",dbName:""},jobNodeData:{},jobForm:{jobNodeInfo:{name:"",createPerName:""}},ordinaryTxt:"严格按照用户填写的文件名称取数，只会有一个文件，此时作业流建议手动执行",regularTxt:"按照正则表达式匹配的文件名称进行取数，可能会有多个文件，此时作业流可手动或调度执行",dateTxt:"按照{yyyymmdd}的日期参数匹配的文件名称进行取数，只有有一个文件，此时作业流可手动或调度执行",ftpFileTypeList:["json","csv"],isEseach:!1,checkResult:!1,engineId:null,form:{input_table_name:"",trans_columns:[],engineId:1,isSetNull:0,parallel_key:"",upper_bound:void 0,lower_bound:void 0,output_fix_statment:"",ainputMoreTableParams:"",isSetJdbcParam:0,jobNodeConfJdbcParamList:[{paramKey:"",paramVal:""}],ftpFileName:"",ftpFileMatchType:1,ftpFileType:"json",dataSourceType:{},input_connect_id:"",ftpFileLocation:"",nonStandardFormat:0,output_storage_engine_type:1,input_db_name:void 0,output_db_name:"",output_table_name:"",sapDataTabel:[],output_write_model:"",resource_dm:"",resource_dc:"",resource_em:"",resource_ec:"",maxConcurrency:"",hight_file_num:"",input_input_content:"",isOpenLoodAccess:0,batchSize:"",beginGDA:"",endGDA:"",stopSign:"",stopSignVal:"",sapConnectFieldInfo:{ainputMoreTableParams:"",paramType:1,ainputParams:[]},collectionTableInfo:{},output_data_partitions:[],partitions:"",startPageCount:0,startPageCountParams:{pageNum:1,pageSize:2e3,endName:"NULL",enableIncresement:0},type:1,format:1,esIndex:"",esIndexType:"",esPageSize:"",esPageTime:"",esSqlCondition:"",resType:"",anaTableNameUrl:"",webserviceText:"",reqType:1,collectionTaskId:null},tableIdList:[],dataSourceTypeList:[],dataSourceList:[],dataSourceList2:[],DWList:[],dataTabelList:[],storageEngineList:[],sql:"",rules:Object(i.a)({ftpFileMatchType:[{required:!0,message:"请选择文件名匹配方式",trigger:"change"}],ftpFileType:[{required:!0,message:"请选择FTP文件格式",trigger:"change"}],upper_bound:[{validator:t,trigger:"change"}],lower_bound:[{validator:t,trigger:"change"}],dataSourceType:[{required:!0,message:"请选择数据源类型",trigger:"change"},{validator:function(e,t,a){t&&""==t.id?a(new Error("请选择数据源类型")):a()},trigger:"change"}],input_connect_id:[{required:!0,message:"请选择数据源",trigger:"change"}],ftpFileName:[{required:!0,message:"请填写文件名",trigger:"blur"}],ftpFileLocation:[{required:!0,message:"请填写文件位置",trigger:"blur"}],nonStandardFormat:[{required:!0,message:"请选择是否逐行解析",trigger:"change"}],output_storage_engine_type:[{required:!0,message:"请选择存储引擎",trigger:"change"}],output_db_name:[{required:!0,message:"请选择数据仓库",trigger:"change"}],output_table_name:[{required:!0,message:"请选择数据表",trigger:"change"}],sapDataTabel:[{required:!0,message:"请填写数据表",trigger:"change"}],output_write_model:[{required:!0,message:"请选择书写模式",trigger:"change"}],input_input_content:[{required:!0,message:"请输入sql语句",trigger:"blur"}],batchSize:[{required:!0,message:"请填写条数",trigger:"blur"}],beginGDA:[{required:!0,message:"请选择起始标识",trigger:"change"}],endGDA:[{required:!0,message:"请选择结束标识",trigger:"change"}],stopSign:[{required:!0,message:"填写停止标志",trigger:"blur"}],stopSignVal:[{required:!0,message:"填写停止标志",trigger:"blur"}],parallel_key:[{required:!0,message:"请填写并行分片字段",trigger:"blur"}],maxConcurrency:[{required:!0,message:"填写最大并发数",trigger:"blur"}],hight_file_num:[{required:!0,message:"填写最大文件数",trigger:"blur"}],fieldValue:[{required:!0,message:"数据分区不能为空",trigger:"blur"},{validator:function(e,t,a){new RegExp(/\s/).test(t)?a(new Error("不能含有空格")):a()},trigger:"blur"}],"startPageCountParams.pageNum":[{required:!0,message:"页码不能为空"}],esIndex:[{required:!0,message:"索引不能为空",trigger:"blur"},{validator:function(e,t,a){t.trim()?a():a(new Error("索引不能为空"))},trigger:"blur"}],esPageTime:[{required:!0,message:"游标时间不能为空",trigger:"blur"}],esPageSize:[{validator:a,trigger:"blur"}]},"esPageTime",[{validator:a,trigger:"blur"}]),startPageCountTip:"勾选分页取数后，请在输入参数中配置平台提供的变量{{pageNum}}、{{pageSize}}、{{endName}},否则分页取数不生效，将默认取全部",pageNumTip:"页码支持自增，在输入参数列表中选择分页参数，在参数值栏填写变量{{pageNum}}引用页码设置的页面数并且自增。",pageSizeTip:"条数为固定值，在输入参数列表中选择分页参数，在参数值栏填写变量{{pageSize}}。",endNameTip:"结束标识，在输入参数列表中选择分页参数，在参数值栏填写变量{{endName}}"}},computed:{isShowLabel:function(){var e=this;return[1,2,3,4].some((function(t){return t==e.form.dataSourceType.id}))},openLoodAccess:{get:function(){return 1==this.form.isOpenLoodAccess},set:function(e){this.form.isOpenLoodAccess=1==e?1:0}}},methods:{dataChangeBySource:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0!==t&&(this.$set(this.form,"input_table_name",""),this.tableIdList=[]),this.form.input_db_name&&this.form.input_connect_id){var a={dbName:this.form.input_db_name,sourceId:this.form.input_connect_id};this.$API.post(this.$URL.getTableAndWord,a,(function(t){0==t.code?(e.tableIdList=t.data,e.tableIdList.forEach((function(e){e.label=e.tableName}))):e.$message.error(t.msg)}))}},judgeWord:function(e){var t=e.original_field,a=e.target_field;this.form.trans_columns.filter((function(e){return e.original_field==t})).length>1&&(e.original_field="",this.$message.error("原字段名不能重复")),this.form.trans_columns.filter((function(e){return e.target_field==a})).length>1&&(e.target_field="",this.$message.error("目标字段名不能重复"))},indexMethod:function(e){return e+1},deleteParamsRow:function(e){this.form.trans_columns.splice(e.$index,1)},addNewParams:function(){this.jobNodeLock&&this.form.trans_columns.push({original_field:"",target_field:""})},handleRemoteSearch:(Q=Object(A.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.post("data-development/bdp/jobNodeInfo/selectCollectionTableInfoList",{sourceId:this.sourceId,tableName:t});case 2:a=e.sent,this.collectionTableInfoList=a.data||[];case 4:case"end":return e.stop()}}),e,this)}))),function(e){return Q.apply(this,arguments)}),handleDatabaseChange:function(){this.form.collectionTaskId=null,this.form.collectionTableInfo={},this.collectionTableInfoList=[],this.form.input_table_name="",2==this.form.engineId&&this.dataChangeBySource()},checkTableInfo:function(e,t,a){t.id?a():a("请选择元数据表")},checkInputTable:function(e,t,a){var o=this;this.$API.post(this.$URL.checkInputTable,{sql:e,jdbcConstants:t,inputTableName:a},(function(e){0===e.code&&(o.checkResult=e.data)}))},collectionTaskChange:function(e){var t=this.collectionTaskList.filter((function(t){return t.id===e}))[0].sourceId;this.sourceId=t,this.getSelectCollectionTableInfoList(t)},collectionTableInfoChange:function(e){var t=this;this.$API.post(this.$URL.checkInputTable,{sql:this.form.input_input_content,jdbcConstants:this.form.dataSourceType.id,inputTableName:e.tableName},(function(a){0===a.code&&a.data?(t.collectionTbInfo.collTableInfoId=e.id,t.collectionTbInfo.tableName=e.tableName,t.collectionTbInfo.dbName=e.dbName):(t.$message.error("选择采集表和sql采集表不一致，请重新选择"),t.form.collectionTableInfo={})}))},getSelectCollectionTaskList:function(e){var t=this;this.$API.post(this.$URL.getSelectCollectionTaskList,{sourceId:e},(function(e){t.collectionTaskList=e||[]}))},getSelectCollectionTableInfoList:(X=Object(A.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.post("data-development/bdp/jobNodeInfo/selectCollectionTableInfoList",{sourceId:t});case 2:a=e.sent,this.collectionTableInfoList=a.data||[];case 4:case"end":return e.stop()}}),e,this)}))),function(e){return X.apply(this,arguments)}),engineChange:function(e){this.form.dataSourceType="",this.form.input_connect_id="",2==e?this.getTypeList(4):this.getTypeList()},visibleHandle:function(e){e&&this.getDataServiceTableList()},getDataServiceTableList:function(){var e=this;if(!this.form.input_db_name||!this.form.input_connect_id)return this.$message.error("请选中数据库和数据源");this.$API.get(this.$URL.getDataServiceTables,{dbName:this.form.input_db_name,conId:this.form.input_connect_id},(function(t){0===t.code?e.tableNameList=t.data:e.$message.error(t.msg)}))},addNew1:function(){this.jobNodeLock&&this.form.jobNodeConfJdbcParamList.push({paramKey:"",paramVal:""})},deleteCur1:function(e){this.form.jobNodeConfJdbcParamList.splice(e,1)},handleTabClick:function(e){var t=this.form.sapConnectFieldInfo,a=t.paramsFieldInfos,o=t.headersFieldInfos,i=t.bodyFieldInfos;switch(e.name){case"1":this.form.sapConnectFieldInfo.ainputParams=a;break;case"2":this.form.sapConnectFieldInfo.ainputParams=o;break;default:this.form.sapConnectFieldInfo.ainputParams=i}},addNew:function(e){this.jobNodeLock&&(this.form.sapConnectFieldInfo.ainputParams||(this.form.sapConnectFieldInfo.ainputParams=[]),3==this.form.dataSourceType.type?(null!=this.form.sapConnectFieldInfo["".concat(1==this.activeTabName?"paramsFieldInfos":2==this.activeTabName?"headersFieldInfos":"bodyFieldInfos")]&&null!=this.form.sapConnectFieldInfo["".concat(1==this.activeTabName?"paramsFieldInfos":2==this.activeTabName?"headersFieldInfos":"bodyFieldInfos")]||(this.form.sapConnectFieldInfo["".concat(1==this.activeTabName?"paramsFieldInfos":2==this.activeTabName?"headersFieldInfos":"bodyFieldInfos")]=[]),this.form.sapConnectFieldInfo["".concat(1==this.activeTabName?"paramsFieldInfos":2==this.activeTabName?"headersFieldInfos":"bodyFieldInfos")].push({fieldName:"",fieldValue:"",fieldAlias:""})):this.form.sapConnectFieldInfo.ainputParams.push({fieldName:"",fieldValue:"",fieldAlias:""}))},deleteCur:function(e){if(3==this.form.dataSourceType.type)switch(this.activeTabName){case"1":this.form.sapConnectFieldInfo.paramsFieldInfos.splice(e,1);break;case"2":this.form.sapConnectFieldInfo.headersFieldInfos.splice(e,1);break;default:this.form.sapConnectFieldInfo.bodyFieldInfos.splice(e,1)}else this.form.sapConnectFieldInfo.ainputParams.splice(e,1)},fullScreenJson:function(){var e=this;this.dialogVisible=!0,this.placeholder='请按照JSON格式填写表名及其数据，例如： { "TABLE_NAME1":[{"column1":"value","column2":"value"},{"column1":"value","column2":"value"}], "TABLE_NAME2":[{"column3":"value","column4":"value"},{"column3":"value","column4":"value"}] }',this.dialogTitle="JSON输入",this.isJson=!0,this.$nextTick((function(){e.$refs.screeCodeEditor.code=e.$refs.codeEditor.code,setTimeout((function(){e.$refs.screeCodeEditor.$refs.codemirror.codemirror.refresh()}),10)}))},fullScreen:function(){var e=this;this.jobNodeLock&&(this.dialogVisible=!0,this.placeholder="请编写sql语句",this.dialogTitle="sql输入",this.isJson=!1,this.$nextTick((function(){e.$refs.screeCodeEditor.code=e.$refs.codeEditor.code,setTimeout((function(){e.$refs.screeCodeEditor.$refs.codemirror.codemirror.refresh()}),10)})))},openDrawer:function(){this.drawer=!0},lock:function(){var e=this,t={id:this.jobNodeData.id,jobNodeLock:this.jobNodeLock?0:1};this.$API.post(this.$URL.jobNodeLock,t,(function(t){0==t.code?e.jobNodeLock=e.jobNodeLock?0:1:e.$message.error(t.msg)}))},filterData:function(e){this.filterName=e,this.filterTableData=this.dataTabelList.filter((function(t){return t.tableName.indexOf(e)>-1})),this.dropOptions=this.filterTableData.slice(0,this.sliceNum)},checkSapPartitionpost:function(e){var t=this;if(!e){var a={};if((4==this.form.dataSourceType.type||5==this.form.dataSourceType.type)&&this.form.sapDataTabel.length>0){for(var o=[],i=0;i<this.form.sapDataTabel.length;i++)o.push(this.form.output_db_name+"."+this.form.sapDataTabel[i]);a={sapTableNames:o}}else if(4!=this.form.dataSourceType.type&&5!=this.form.dataSourceType.type&&this.form.output_table_name){a={sapTableNames:[this.form.output_db_name+"."+this.form.output_table_name]}}else{if((4==this.form.dataSourceType.type||5==this.form.dataSourceType.type)&&0==this.form.sapDataTabel.length)return this.form.output_data_partitions=[],!1;if(4!=this.form.dataSourceType.type&&5!=this.form.dataSourceType.type&&!this.form.output_table_name)return this.form.output_data_partitions=[],!1}this.isLoading=!0,this.$API.post(this.$URL.getJobNodeInfoCheckSapPartition,a,(function(e){if(t.isLoading=!1,0==e.code){t.form.output_data_partitions=[];for(var a=0;a<e.data.length;a++)t.form.output_data_partitions.push({fieldName:e.data[a],fieldValue:""})}else t.$message.error(e.msg)}))}this.sliceNum=10,this.filterName="",this.dropOptions=this.dataTabelList.slice(0,this.sliceNum),this.selectDom=document.querySelectorAll(".el-scrollbar__wrap"),Array.prototype.forEach.call(this.selectDom,(function(e){e.addEventListener("scroll",(function(){e.scrollHeight-(e.scrollTop+e.clientHeight)<1&&(t.sliceNum+=20,t.filterName?t.dropOptions=t.filterTableData.slice(0,t.sliceNum):t.dropOptions=t.dataTabelList.slice(0,t.sliceNum))}))}))},dataChange:function(e){this.form.nodeParam=e.nodeParam,this.form.isOpenOutHours=e.isOpenOutHours,this.form.outHours=e.outHours,this.form.output_fix_statment=e.output_fix_statment},getTypeList:function(e){var t=this;this.$API.get(this.$URL.getConfConnectListTypes,{requstId:e||2},(function(e){if(0==e.code){t.dataSourceTypeList=e.data;var a=sessionStorage.getItem("isRickData");t.$route.query.databaseType&&a&&(t.form.dataSourceType=e.data.find((function(e){return e.id==t.$route.query.databaseType})),t.getDataSourceList(t.$route.query.databaseType));var o=t.dataSourceTypeList.find((function(e){return e.id==t.form.dataSourceType.id}));o&&(t.form.dataSourceType=o),0!=t.form.dataSourceType.type&&9!=t.form.dataSourceType.type||setTimeout((function(){t.$set(t.form,"input_input_content",t.sql)}),10)}else t.$message.error(e.msg)}))},changeParamType:function(e){1==e&&this.changeDataSource("reset")},curTypeList:function(e){[5,7,8,9,18].includes(this.form.dataSourceType.id)&&(this.form.maxConcurrency=1),this.form.input_connect_id="",this.dataSetList=[],this.form.input_db_name=void 0,this.form.collectionTaskId=null,this.form.collectionTableInfo={},this.collectionTableInfoList=[],this.getDataSourceList(this.form.dataSourceType.id,this.jobNodeData.id),this.changeDataSource()},getDataSourceList:function(e,t){var a=this;if(this.form.dataSourceType.id){this.isgetField=0,this.dataSourceList=[];var o={proc_id:this.$route.query.id,type_id:e};this.$API.post(this.$URL.getConfConnectList,o,(function(e){0==e.code?e.data&&e.data.length>0&&(a.dataSourceList=[].concat(Object(u.a)(a.dataSourceList2),Object(u.a)(e.data)),a.dataSourceList=a.dataSourceList.filter((function(e,t){return a.dataSourceList.findIndex((function(t){return t.id==e.id}))==t}))):a.$message.error(e.msg)}))}},getlistDbs:function(){var e=this,t={dataType:1,procId:this.$route.query.id,sourceType:""};this.isLoading=!0,this.$API.post(this.$URL.getProcInfoListDbs,t,(function(t){e.isLoading=!1,0==t.code?e.DWList=t.data:e.$message.error(t.msg)}))},confConnectListSorageEngine:function(){var e=this;this.$API.get(this.$URL.confConnectListSorageEngine,{requstId:1},(function(t){0==t.code?e.storageEngineList=t.data:e.$message.error(t.msg)}))},changeTB:function(){this.form.output_table_name="",this.form.sapDataTabel=[],this.getDataTableList()},handleDataSourceChange:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&Object(A.a)(regeneratorRuntime.mark((function o(){var i,r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(H.e)(e);case 3:r=o.sent,n=r.data.data,t.dataSetList=n.map((function(e){return{label:e,value:e}})),1===(null===(i=t.dataSetList)||void 0===i?void 0:i.length)&&(t.form.input_db_name=t.dataSetList[0].value),t.dataSetList.length||(t.form.input_db_name=void 0),t.dataChangeBySource(a),o.next=13;break;case 11:o.prev=11,o.t0=o.catch(0);case 13:case"end":return o.stop()}}),o,null,[[0,11]])})))()},changeDataSource:function(e){this.activeTabName="1",3!=this.form.dataSourceType.type&&6!=this.form.dataSourceType.type&&4!=this.form.dataSourceType.type&&5!=this.form.dataSourceType.type||!this.form.input_connect_id||this.getSapInfo(e),this.dataSetList=[],this.form.input_db_name=void 0,this.form.input_table_name="",this.form.collectionTaskId=null,this.form.collectionTableInfo={},this.collectionTableInfoList=[],this.handleDataSourceChange(this.form.input_connect_id),this.getSelectCollectionTaskList(this.form.input_connect_id)},getDataTableList:function(){var e=this,t={proc_id:this.$route.query.id,output_storage_engine_type:this.form.output_storage_engine_type,db_name:this.form.output_db_name};this.$API.post(this.$URL.listTableByStorageEngine,t,(function(t){if(e.dataTabelList=[],0==t.code){for(var a=0;a<t.data.length;a++)e.dataTabelList.push({tableName:t.data[a].tableName,uuid:Math.random()});e.dropOptions=e.dataTabelList(0,e.sliceNum)}else e.$message.error(t.msg)}))},getSapInfo:function(e){var t=this;this.isLoading=!0;this.$API.get(this.$URL.getConfConnectSapInfo+this.form.input_connect_id+"/"+this.jobNodeData.id,{},(function(a){if(t.isLoading=!1,0==a.code){var o=a.data;"reset"==e?(delete o.paramType,Object.assign(t.form.sapConnectFieldInfo,o),t.form.sapConnectFieldInfo.ainputMoreTableParams=""):(t.form.sapConnectFieldInfo=o,3==t.form.dataSourceType.type&&(t.form.sapConnectFieldInfo.ainputParams=o.paramsFieldInfos),t.form.sapConnectFieldInfo.paramType=a.data.paramType?a.data.paramType:1,t.form.sapConnectFieldInfo.ainputMoreTableParams=a.data.ainputMoreTableParams?a.data.ainputMoreTableParams:"");var i=a.data,r=i.esIndex,n=i.esIndexType,s=i.esPageSize,l=i.esPageTime,c=i.esSqlCondition,d=i.olderRequestType;t.form=K(K({},t.form),{},{esIndex:r,esIndexType:n,esPageSize:s,esPageTime:l,esSqlCondition:c,type:d},3==d&&{reqType:a.data.reqType,webserviceText:a.data.webserviceText,resType:a.data.resType,anaTableNameUrl:a.data.anaTableNameUrl}),t.jsonShow(t.form.esSqlCondition&&t.form.esSqlCondition.replace(/\s*/g,"")),3==t.form.dataSourceType.type&&t.handleTabClick({name:t.activeTabName})}else t.$message.error(a.msg)}))},jsonShow:function(e){try{if(e&&e.replace(/\s*/g,"")&&"object"===Object(E.a)(JSON.parse(e&&e.replace(/\s*/g,"")))){var t=JSON.parse(e);this.form.esSqlCondition=JSON.stringify(t,null,4)}}catch(e){return}},getFormPromise:function(e){return new Promise((function(t){e.validate((function(e){t(e)}))}))},save:(Y=Object(A.a)(regeneratorRuntime.mark((function e(t){var a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.drawer=!0,a=this.$refs.paramConfig.$refs.ruleForm,e.next=4,this.$refs.ruleForm.validate();case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:Promise.all([a].map(this.getFormPromise)).then((function(e){if(e.every((function(e){return!!e}))){var a=i.form;i.isShowLabel&&1!=a.maxConcurrency||(delete a.parallel_key,delete a.upper_bound,delete a.lower_bound),3!=i.form.dataSourceType.type&&delete a.isSetNull;var r={},n=i.form.startPageCount?i.form.startPageCountParams:{};1==a.isOpenLoodAccess&&(r={batchSize:a.batchSize,beginGDA:a.beginGDA,endGDA:a.endGDA,stopSign:a.stopSign,stopSignVal:a.stopSignVal});var s=[];if((4==i.form.dataSourceType.type||5==i.form.dataSourceType.type)&&i.form.sapDataTabel.length>0)for(var l=0;l<i.form.sapDataTabel.length;l++)s.push(i.form.output_db_name+"."+i.form.sapDataTabel[l]);i.partitions="";for(var c=0;c<i.form.output_data_partitions.length;c++){if(!i.form.output_data_partitions[c].fieldValue)return void i.$message.error("数据分区值不能为空");1==i.form.output_data_partitions.length?i.partitions=i.form.output_data_partitions[0].fieldName+"="+i.form.output_data_partitions[0].fieldValue:c<i.form.output_data_partitions.length-1?i.partitions+=i.form.output_data_partitions[c].fieldName+"="+i.form.output_data_partitions[c].fieldValue+",":(c=i.form.output_data_partitions.length-1)&&(i.partitions+=i.form.output_data_partitions[c].fieldName+"="+i.form.output_data_partitions[c].fieldValue)}var d=K(K(K(K(K({fieldInfoList:2!=a.engineId?i.configTable.filter((function(e){return e.checked})):void 0,isSetJdbcParam:a.isSetJdbcParam,jobNodeConfJdbcParamList:1==a.isSetJdbcParam?a.jobNodeConfJdbcParamList:[],input_connect_type:a.dataSourceType.id,input_connect_id:a.input_connect_id,input_table_name:a.input_table_name,input_input_content:a.input_input_content,output_storage_engine_type:a.output_storage_engine_type,output_db_name:a.output_db_name,input_db_name:a.input_db_name,output_table_name:a.output_table_name,sap_output_table_name:s,output_write_model:a.output_write_model,hight_file_num:a.hight_file_num,hightMaxConcurrent:a.maxConcurrency,resource_dm:a.resource_dm,resource_dc:a.resource_dc,resource_em:a.resource_em,resource_ec:a.resource_ec,ftpFileLocation:a.ftpFileLocation,ftpFileType:a.ftpFileType,ftpFileMatchType:a.ftpFileMatchType,ftpFileName:a.ftpFileName,nonStandardFormat:a.nonStandardFormat,sapConnectFieldInfo:a.sapConnectFieldInfo,isOpenLoodAccess:a.isOpenLoodAccess,output_data_partition:i.partitions},r),n),{},{startPageCount:a.startPageCount,nodeParam:i.form.nodeParam,isOpenOutHours:i.form.isOpenOutHours,outHours:i.form.outHours,output_fix_statment:i.form.output_fix_statment,olderRequestType:i.form.type,trans_columns:a.trans_columns,parallel_key:a.parallel_key,isSetNull:a.isSetNull,upper_bound:a.upper_bound,lower_bound:a.lower_bound},6==i.form.dataSourceType.type&&{esIndex:i.form.esIndex,esIndexType:i.form.esIndexType,esPageSize:i.form.esPageSize,esPageTime:i.form.esPageTime,esSqlCondition:i.form.esSqlCondition&&i.form.esSqlCondition.replace(/\s*/g,"")}),3==i.form.type&&{reqType:i.form.reqType,webserviceText:i.form.webserviceText,resType:i.form.resType,anaTableNameUrl:i.form.anaTableNameUrl}),{},{collectionTaskId:i.form.collectionTaskId,collTableInfoId:i.collectionTbInfo.collTableInfoId,dbName:i.collectionTbInfo.dbName,tableName:i.collectionTbInfo.tableName});i.jsonShow(i.form.esSqlCondition&&i.form.esSqlCondition.replace(/\s*/g,""));var u={jobNodeLock:t,id:i.jobNodeData.id,name:"--"==i.jobForm.jobNodeInfo.name?i.jobNodeData.name:i.jobForm.jobNodeInfo.name,procId:i.$route.query.id,typeId:1,engineId:a.engineId,jobNodeConfig:K({},d)};i.jobNodeData.COPYING?o.a.$emit("copySaveJobNodeConfig",{params:u,job:i.jobNodeData}):(i.isLoading=!0,i.$API.post(i.$URL.saveJobNodeConfig,u,(function(e){i.isLoading=!1,0==e.code?(i.$message.success("保存成功"),i.getNodeInfo(),i.drawer=!1):i.$message.error(e.msg)})))}else i.$message.warning("请完善参数配置必填项")}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return Y.apply(this,arguments)}),getNodeInfo:function(){var e=this;this.isLoading=!0,this.$API.get(this.$URL.getJobNodeInfoInfoByKeyAndJobId+"/"+this.jobNodeData.id,{},(function(t){if(e.isLoading=!1,0==t.code){e.jobNodeLock=JSON.parse(t.data.jobNodeInfo.jobNodeLock),e.jobForm=t.data,e.jobNodeData.COPYING&&(e.jobForm.jobNodeInfo.name="--",e.jobForm.jobNodeInfo.createPerName="--");var a=e.form,o=t.data;if(a.jobNodeConfJdbcParamList=o.jobNodeConfJdbcParamList||[],a.isSetJdbcParam=o.isSetJdbcParam||"",e.sql=o.input_input_content||"",a.input_input_content=o.input_input_content||"",a.output_db_name=o.output_db_name||"",a.input_db_name=o.input_db_name||void 0,a.output_table_name=o.output_table_name||"",a.output_storage_engine_type=o.output_storage_engine_type||1,a.sapDataTabel=[],o.sap_output_table_name&&o.sap_output_table_name.length>0&&(a.sapDataTabel=o.sap_output_table_name.map((function(e){if(e.tableName)return e.tableName}))),a.fieldInfoList=o.fieldInfoList||[],a.input_connect_id=o.input_connect_id||"",a.input_table_name=o.input_table_name||"",a.output_fix_statment=o.output_fix_statment||"",a.output_write_model=o.output_write_model||"",a.hight_file_num=o.hight_file_num||"",a.maxConcurrency=o.hightMaxConcurrent||"",a.trans_columns=o.trans_columns||[],a.parallel_key=o.parallel_key||"",a.isSetNull=0==o.isSetNull?0:1,a.upper_bound=o.upper_bound||void 0,a.engineId=o.jobNodeInfo.engineId||1,e.engineId=o.jobNodeInfo.engineId,a.lower_bound=o.lower_bound||void 0,a.resource_dm=o.resource_dm||"",a.resource_dc=o.resource_dc||"",a.resource_em=o.resource_em||"",a.resource_ec=o.resource_ec||"",a.ftpFileLocation=o.ftpFileLocation||"",a.ftpFileType=o.ftpFileType||"json",a.ftpFileMatchType=o.ftpFileMatchType||1,a.ftpFileName=o.ftpFileName||"",a.nonStandardFormat=o.nonStandardFormat||0,a.isOpenLoodAccess=o.isOpenLoodAccess||0,a.dataSourceType.id=o.input_connect_type||"",a.output_data_partitions=o.output_data_partitions||[],a.batchSize=o.batchSize,a.beginGDA=o.beginGDA,a.endGDA=o.endGDA,a.stopSign=o.stopSign,a.stopSignVal=o.stopSignVal,a.collectionTaskId=o.collectionTaskId,e.collectionTbInfo.id=o.collTableInfoId,e.collectionTbInfo.collTableInfoId=o.collTableInfoId,e.collectionTbInfo.dbName=o.dbName,e.collectionTbInfo.tableName=o.tableName,a.collectionTableInfo.id=o.collTableInfoId,a.collectionTableInfo.dbName=o.dbName,a.collectionTableInfo.tableName=o.tableName,a.sapConnectFieldInfo=o.sapConnectFieldInfo||{},a.startPageCount=o.startPageCount?Number(o.startPageCount):0,a.startPageCount){var i=o.pageNum,r=o.pageSize,n=o.enableIncresement,s=o.endName;a.startPageCountParams={pageNum:i,pageSize:r,enableIncresement:Number(n),endName:s}}var l=e.dataSourceTypeList.find((function(t){return t.id==e.form.dataSourceType.id}));l&&(e.form.dataSourceType=l),0!=e.form.dataSourceType.type&&9!=e.form.dataSourceType.type||setTimeout((function(){e.$set(e.form,"input_input_content",e.sql)}),10),e.getDataSourceList(e.form.dataSourceType.id,e.jobNodeData.id),e.getDataTableList(),e.getSelectCollectionTableInfoList(e.form.input_connect_id),a.input_connect_id&&(e.getSapInfo(),e.handleDataSourceChange(a.input_connect_id,!0),e.getSelectCollectionTaskList(e.form.input_connect_id)),2==a.engineId?(e.getTypeList(4),e.dataChangeBySource(!0)):e.getTypeList()}else e.$message.error(t.msg)}))},getConnectDetail:function(e){var t=this;this.$API.get(this.$URL.getConfConnectInfo+"/"+e,{},(function(e){if(0==e.code){var a=e.data,o=a.id,i=a.name;t.dataSourceList=t.dataSourceList2=[{id:o,name:i}],t.handleDataSourceChange(o)}else t.$message.error({message:e.msg})}))},getTableSynchronSql:function(){var e=this,t=JSON.parse(sessionStorage.getItem("isRickInfo")),a={input_table_name:(null==t?void 0:t.tableName)||"",input_db_name:(null==t?void 0:t.dbName)||"",input_connect_id:(null==t?void 0:t.sourceId)||""};this.$API.post(this.$URL.getTableSynchronSql,K({},a),(function(t){0==t.code?(e.sql=t.data,e.$set(e.form,"input_input_content",e.sql)):(e.$message.error(t.msg),e.sql="")}))}},mounted:(G=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,i,r,n,s,l,c,d,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$route.query.jobFlow&&this.getTypeList(),setTimeout((function(){}),3e3),t=this.$route.query,a=t.databaseType,t.isRick,i=t.id,r=sessionStorage.getItem("isRickData"),!a||!r){e.next=28;break}return n=JSON.parse(sessionStorage.getItem("isRickInfo")),this.getTableSynchronSql(),s=null==n?void 0:n.tableName,l=null==n?void 0:n.dbName,c=null==n?void 0:n.sourceId,this.form.dataSourceType.id=a,this.jobNodeData.id=i,e.next=14,this.getDataSourceList(this.form.dataSourceType.id,this.jobNodeData.id);case 14:return this.form.input_connect_id=c,e.next=17,this.handleDataSourceChange(this.form.input_connect_id,!0);case 17:return this.tableNameList=[s],this.form.input_db_name=l,e.next=21,this.getSelectCollectionTaskList(this.form.input_connect_id);case 21:return this.form.input_table_name=s,this.form.collectionTaskId=null==n?void 0:n.collectionTaskId,d=null==n?void 0:n.id,this.sourceId=null==n?void 0:n.sourceId,e.next=27,this.getSelectCollectionTableInfoList(null==n?void 0:n.sourceId);case 27:this.form.collectionTableInfo=this.collectionTableInfoList.find((function(e){return e.id==d}));case 28:this.$nextTick((function(){u.confConnectListSorageEngine(),u.getlistDbs()})),o.a.$off("workInfoUpdata"),o.a.$on("workInfoUpdata",(function(e){e.copyCom&&(u.jobNodeData.COPYING=!1),u.getNodeInfo()})),this.getTypeList();case 32:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)}),beforeDestroy:function(){o.a.$off("removeItem")},watch:{"form.output_table_name":{deep:!0,handler:function(){var e=this,t={type:1,dbName:this.form.output_db_name,tableName:this.form.output_table_name};this.configTable=[],this.form.output_table_name&&this.$API.post(this.$URL.getSecretFields,t,(function(t){0==t.code&&(e.configTable=t.data.map((function(e){return K(K({},e),{},{checked:!1,fieldAlias:""})})),e.form.fieldInfoList.forEach((function(t){var a=t.id,o=t.fieldAlias;e.configTable.forEach((function(e){e.id==a&&(e.checked=!0,e.fieldAlias=o)}))})))}))}},dataProcessTaskToChangeJobNodeData:{handler:function(e){if(e){var t=sessionStorage.getItem("isRickData");this.$parent.name==e.id+""&&(this.jobNodeData=e,!t&&this.getNodeInfo())}},deep:!0,immediate:!0}}},ee=(a("e57b"),a("bcd8"),Object(c.a)(Z,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_process_task_ds"},[t("div",{staticClass:"left"},[t("div",{staticClass:"button_out"},[t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",disabled:!e.jobNodeLock,icon:"el-icon-info",title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.save(0)},confirm:function(t){return e.save(0)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px",position:"sticky",top:"10px"},attrs:{slot:"reference",type:"primary",size:"mini",disabled:!e.jobNodeLock},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存并解锁")])],1),t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",disabled:!e.jobNodeLock,icon:"el-icon-info",title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.save(1)},confirm:function(t){return e.save(1)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px",position:"sticky",top:"10px","margin-left":"10px"},attrs:{slot:"reference",type:"primary",size:"mini",disabled:!e.jobNodeLock},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存")])],1),t("el-button",{staticStyle:{"font-size":"12px",position:"sticky",top:"10px","margin-left":"10px"},attrs:{size:"mini"},on:{click:e.lock}},[e._v(e._s(e.jobNodeLock?"解锁":"上锁"))])],1),t("div",{staticClass:"form_content"},[t("el-form",{ref:"ruleForm",staticClass:"isform",attrs:{model:e.form,"label-width":"115px",rules:e.rules,"label-position":"left",size:"mini",disabled:!e.jobNodeLock}},[t("div",{staticClass:"title"},[e._v("选择采集方式")]),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"同步方式",required:""}},[t("el-select",{attrs:{disabled:!!e.engineId,size:"mini"},on:{change:e.engineChange},model:{value:e.form.engineId,callback:function(t){e.$set(e.form,"engineId",t)},expression:"form.engineId"}},[t("el-option",{attrs:{label:"spark",value:1}}),t("el-option",{attrs:{label:"flinkx",value:2}})],1)],1),t("div",{staticClass:"title"},[e._v("选择数据源")]),t("div",{staticClass:"sebar"},[t("el-form-item",{staticStyle:{width:"500px","margin-bottom":"0"},attrs:{label:"数据源",required:""}},[t("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[t("el-form-item",{attrs:{prop:"dataSourceType"}},[t("el-select",{attrs:{"value-key":"id",filterable:"",placeholder:"选择数据源类型"},on:{change:e.curTypeList},model:{value:e.form.dataSourceType,callback:function(t){e.$set(e.form,"dataSourceType",t)},expression:"form.dataSourceType"}},e._l(e.dataSourceTypeList,(function(e){return t("el-option",{key:"dataScourceTy"+e.id,attrs:{label:e.name,value:e}})})),1)],1)],1),t("el-col",{attrs:{span:11}},[t("div",{staticStyle:{display:"flex"}},[t("el-form-item",{attrs:{prop:"input_connect_id"}},[t("el-select",{attrs:{filterable:"",placeholder:"选择数据源"},on:{change:e.changeDataSource},model:{value:e.form.input_connect_id,callback:function(t){e.$set(e.form,"input_connect_id",t)},expression:"form.input_connect_id"}},e._l(e.dataSourceList,(function(e){return t("el-option",{key:"input_connect_id"+e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:2==e.form.engineId?"支持的数据源类型：MySQL、Oracle、SQL Server、ElasticSearch":"支持的数据源类型：MySQL、Oracle、SQL Server、PostgreSQL、SAP HANA、FTP、接口、SAP、WebService、ElasticSearch、SFTP、ClickHouse、Impala、MyCat",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1)])],1),15===e.form.dataSourceType.type||0===e.form.dataSourceType.type||9===e.form.dataSourceType.type?t("el-form-item",{staticStyle:{width:"500px"},attrs:{prop:"input_db_name",label:"数据库"}},[t("el-select",{attrs:{filterable:"",placeholder:"选择数据库"},on:{change:e.handleDatabaseChange},model:{value:e.form.input_db_name,callback:function(t){e.$set(e.form,"input_db_name",t)},expression:"form.input_db_name"}},e._l(e.dataSetList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),2==e.form.engineId&&6!=e.form.dataSourceType.type?t("el-form-item",{key:"tableName",staticStyle:{width:"500px"},attrs:{label:"表名",prop:"input_table_name",rules:[{required:!0,message:"请选择表名",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择表名",filterable:""},model:{value:e.form.input_table_name,callback:function(t){e.$set(e.form,"input_table_name",t)},expression:"form.input_table_name"}},e._l(e.tableIdList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.label,label:e.label}})})),1)],1):e._e(),15===e.form.dataSourceType.type||0===e.form.dataSourceType.type?t("div",{staticStyle:{"text-align":"left","margin-bottom":"8px"}},[t("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.form.isSetJdbcParam,callback:function(t){e.$set(e.form,"isSetJdbcParam",t)},expression:"form.isSetJdbcParam"}},[e._v("设置JDBC连接参数")])],1):e._e(),3==e.form.dataSourceType.type?t("div",{staticClass:"is_set_null"},[t("el-form-item",{attrs:{label:""}},[t("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.form.isSetNull,callback:function(t){e.$set(e.form,"isSetNull",t)},expression:"form.isSetNull"}},[e._v("是否允许接口中找不到的字段为空")]),t("el-tooltip",{staticClass:"itemtooltip",attrs:{effect:"dark",content:"勾选是否允许接口中找不到的字段为空，即允许接口跟hive字段不一致。接口返回字段不存在时，默认赋值null",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind"})])],1)],1):e._e(),15!==e.form.dataSourceType.type&&0!==e.form.dataSourceType.type||1!=e.form.isSetJdbcParam?e._e():t("div",[t("el-table",{staticClass:"params_table_jdbc",staticStyle:{width:"100%"},attrs:{data:e.form.jobNodeConfJdbcParamList}},[t("el-table-column",{attrs:{label:"参数名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"jobNodeConfJdbcParamList."+a.$index+".paramKey",rules:{required:!0,message:"参数名不能为空",trigger:"blur"}}},[t("el-input",{staticStyle:{width:"100%"},model:{value:a.row.paramKey,callback:function(t){e.$set(a.row,"paramKey",t)},expression:"scope.row.paramKey"}})],1)]}}],null,!1,419437505)}),t("el-table-column",{attrs:{label:"值"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"jobNodeConfJdbcParamList."+a.$index+".paramVal",rules:{required:!0,message:"值不能为空",trigger:"blur"}}},[t("el-input",{staticStyle:{width:"100%"},model:{value:a.row.paramVal,callback:function(t){e.$set(a.row,"paramVal",t)},expression:"scope.row.paramVal"}})],1)]}}],null,!1,2709984130)}),t("el-table-column",{attrs:{width:"60px",align:"right","header-align":"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.deleteCur1(a.$index)}}},[e._v("删除")])]}}],null,!1,24160805)})],1),t("div",{staticClass:"addNew",on:{click:function(t){return e.addNew1()}}},[e._v("+ 添加参数")])],1),15===e.form.dataSourceType.type||0==e.form.dataSourceType.type||9==e.form.dataSourceType.type?t("div",{staticClass:"task_edit cod_m_o"},[t("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"sql语句",prop:"input_input_content"}},[t("div",{staticClass:"cede_editor"},[t("span",{staticClass:"el-icon-full-screen",staticStyle:{position:"absolute",right:"0",top:"0px"},attrs:{title:"全屏编写"},on:{click:e.fullScreen}}),t("codeEditor",{ref:"codeEditor",attrs:{isLock:!e.jobNodeLock,hasFormat:!1,hasCheck:{isShow:!0,type:1},placeholder:"请编写sql语句"},model:{value:e.form.input_input_content,callback:function(t){e.$set(e.form,"input_input_content",t)},expression:"form.input_input_content"}})],1)]),[1,2,3,4].includes(e.form.dataSourceType.id)?t("el-row",{attrs:{type:"flex"}},[t("el-form-item",{staticStyle:{width:"500px","margin-top":"15px"},attrs:{label:""}},[t("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n                关联元数据表\n                "),t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    1、配置关联元数据表后才能生成业务端输入表到数仓输出表的血缘关系"),t("br"),e._v("\n                    2、选择的元数据表必须与sql语句中from后的表名一致\n                  ")]),t("i",{staticClass:"el-icon-question"})])],1),t("el-select",{staticStyle:{"margin-right":"10px"},attrs:{filterable:"",placeholder:"请选择采集任务"},on:{change:e.collectionTaskChange},model:{value:e.form.collectionTaskId,callback:function(t){e.$set(e.form,"collectionTaskId",t)},expression:"form.collectionTaskId"}},e._l(e.collectionTaskList,(function(e,a){return t("el-option",{key:a+"collectionTaskId",attrs:{label:e.taskName,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{width:"500px","margin-top":"15px"},attrs:{label:"","label-width":"10px"}},[t("el-select",{attrs:{filterable:"",remote:"","remote-method":e.handleRemoteSearch,"value-key":"id",placeholder:"请选择元数据表"},on:{change:e.collectionTableInfoChange},model:{value:e.form.collectionTableInfo,callback:function(t){e.$set(e.form,"collectionTableInfo",t)},expression:"form.collectionTableInfo"}},e._l(e.collectionTableInfoList,(function(e,a){return t("el-option",{key:a+"input_table_name",attrs:{label:e.tableName,value:e}})})),1)],1)],1):e._e()],1):e._e(),1==e.form.dataSourceType.type||11==e.form.dataSourceType.type?t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:5==e.form.dataSourceType.id?"FTP文件格式":"SFTP文件格式",prop:"ftpFileType"}},[t("el-select",{attrs:{filterable:"",placeholder:"选择FTP文件格式"},model:{value:e.form.ftpFileType,callback:function(t){e.$set(e.form,"ftpFileType",t)},expression:"form.ftpFileType"}},e._l(e.ftpFileTypeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1):e._e(),1==e.form.dataSourceType.type||11==e.form.dataSourceType.type?t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"文件位置",prop:"ftpFileLocation"}},[t("el-input",{attrs:{placeholder:"输入文件位置"},model:{value:e.form.ftpFileLocation,callback:function(t){e.$set(e.form,"ftpFileLocation",t)},expression:"form.ftpFileLocation"}})],1):e._e(),1==e.form.dataSourceType.type||11==e.form.dataSourceType.type?t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"文件名匹配方式",prop:"ftpFileMatchType"}},[t("el-radio-group",{model:{value:e.form.ftpFileMatchType,callback:function(t){e.$set(e.form,"ftpFileMatchType",t)},expression:"form.ftpFileMatchType"}},[t("el-radio",{attrs:{label:1}},[e._v("普通匹配")]),t("el-radio",{attrs:{label:2}},[e._v("正则匹配")]),t("el-radio",{attrs:{label:3}},[e._v("日期动态参数配置")])],1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                普通匹配：严格按照用户填写的文件名称取数，只会有一个文件，此时作业流建议手动执行"),t("br"),e._v("\n                正则匹配：按照正则表达式匹配（同时也支持${yyyymmdd}*.csv的写法）的文件名称进行取数，可能会有多个文件，此时作业流可手动或调度执行"),t("br"),e._v("\n                日期动态参数配置：按照{yyyymmdd}的日期参数匹配的文件名称进行取数，只有一个文件，此时作业流可手动或调度执行\n              ")]),t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"vertical-align":"middle",float:"right"}})])],1):e._e(),1==e.form.dataSourceType.type||11==e.form.dataSourceType.type?t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"文件名",prop:1==e.form.ftpFileMatchType?"":"ftpFileName"}},[t("el-input",{attrs:{placeholder:"输入文件名"},model:{value:e.form.ftpFileName,callback:function(t){e.$set(e.form,"ftpFileName",t)},expression:"form.ftpFileName"}})],1):e._e(),1==e.form.dataSourceType.type?t("div",[t("div",{staticClass:"title"},[e._v("字段映射")]),t("div",{staticClass:"table"},[t("el-table",{attrs:{data:e.form.trans_columns}},[t("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),t("el-table-column",{attrs:{label:"原字段名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"trans_columns."+a.$index+".original_field",rules:{required:!0,message:"原字段名不能为空",trigger:"blur"}}},[t("el-input",{attrs:{placeholder:"请输入原字段名"},on:{change:function(t){return e.judgeWord(a.row)}},model:{value:a.row.original_field,callback:function(t){e.$set(a.row,"original_field",t)},expression:"scope.row.original_field"}})],1)]}}],null,!1,3061146869)}),t("el-table-column",{attrs:{label:"目标字段名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"trans_columns."+a.$index+".target_field",rules:{required:!0,message:"目标字段名不能为空",trigger:"blur"}}},[t("el-input",{attrs:{placeholder:"请输入目标字段名"},on:{change:function(t){return e.judgeWord(a.row)}},model:{value:a.row.target_field,callback:function(t){e.$set(a.row,"target_field",t)},expression:"scope.row.target_field"}})],1)]}}],null,!1,2859906357)}),t("el-table-column",{attrs:{label:"操作",align:"right",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteParamsRow(a)}}},[e._v("删除")])]}}],null,!1,3577253950)})],1),t("ul",{staticClass:"addNew clearfix",staticStyle:{position:"relative"}},[t("li",{staticClass:"file",staticStyle:{position:"absolute",left:"50%",transform:"translateX(-50%)"},on:{click:e.addNewParams}},[t("i",{staticClass:"el-icon-plus"}),e._v("添加\n                    ")])])],1)]):e._e(),3!=e.form.dataSourceType.type&&4!=e.form.dataSourceType.type&&5!=e.form.dataSourceType.type||""==e.form.input_connect_id?e._e():t("div",[4==e.form.dataSourceType.type?t("el-form-item",{staticClass:"short",attrs:{label:"传参模式"}},[t("el-radio-group",{on:{change:e.changeParamType},model:{value:e.form.sapConnectFieldInfo.paramType,callback:function(t){e.$set(e.form.sapConnectFieldInfo,"paramType",t)},expression:"form.sapConnectFieldInfo.paramType"}},[t("el-radio",{attrs:{label:1}},[e._v("单表单行模式")]),t("el-radio",{attrs:{label:2}},[e._v("多表多行模式")])],1)],1):e._e(),t("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"输入参数"}},[3==e.form.dataSourceType.type||5==e.form.dataSourceType.type||1==e.form.sapConnectFieldInfo.paramType&&4==e.form.dataSourceType.type?t("div",[3==e.form.dataSourceType.type?t("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[t("el-tab-pane",{attrs:{name:"1"}},[t("span",{staticClass:"label-tabs",attrs:{slot:"label"},slot:"label"},[e._v("params"),e.form.sapConnectFieldInfo.paramsFieldInfos&&e.form.sapConnectFieldInfo.paramsFieldInfos.length>0&&e.form.sapConnectFieldInfo.paramsFieldInfos.some((function(e){return e.fieldName&&e.fieldValue&&e.fieldAlias}))?t("i"):e._e()])]),t("el-tab-pane",{attrs:{name:"2"}},[t("span",{staticClass:"label-tabs",attrs:{slot:"label"},slot:"label"},[e._v("headers"),e.form.sapConnectFieldInfo.headersFieldInfos&&e.form.sapConnectFieldInfo.headersFieldInfos.length>0&&e.form.sapConnectFieldInfo.headersFieldInfos.some((function(e){return e.fieldName&&e.fieldValue&&e.fieldAlias}))?t("i"):e._e()])]),1!=e.form.sapConnectFieldInfo.olderRequestType?t("el-tab-pane",{attrs:{name:"3"}},[t("span",{staticClass:"label-tabs",attrs:{slot:"label"},slot:"label"},[e._v("body"),(3===e.form.sapConnectFieldInfo.olderRequestType?e.form.sapConnectFieldInfo.bodyJson&&e.form.sapConnectFieldInfo.bodyJson.length>0:e.form.sapConnectFieldInfo.bodyFieldInfos&&e.form.sapConnectFieldInfo.bodyFieldInfos.length>0&&e.form.sapConnectFieldInfo.bodyFieldInfos.some((function(e){return e.fieldName&&e.fieldValue&&e.fieldAlias})))?t("i"):e._e()])]):e._e()],1):e._e(),3==e.activeTabName&&3==e.form.sapConnectFieldInfo.olderRequestType?t("el-input",{staticStyle:{"marign-bottom":"10px"},attrs:{type:"textarea",rows:5},model:{value:e.form.sapConnectFieldInfo.bodyJson,callback:function(t){e.$set(e.form.sapConnectFieldInfo,"bodyJson",t)},expression:"form.sapConnectFieldInfo.bodyJson"}}):t("div",[3!=e.form.dataSourceType.type?t("el-table",{staticClass:"params_table",staticStyle:{width:"100%"},attrs:{data:e.form.sapConnectFieldInfo.ainputParams}},[t("el-table-column",{attrs:{label:"参数名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"sapConnectFieldInfo.ainputParams."+a.$index+".fieldName",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[t("el-input",{model:{value:a.row.fieldName,callback:function(t){e.$set(a.row,"fieldName",t)},expression:"scope.row.fieldName"}})],1)]}}],null,!1,3230137821)}),t("el-table-column",{attrs:{label:"值"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"sapConnectFieldInfo.ainputParams."+a.$index+".fieldValue",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[t("el-input",{model:{value:a.row.fieldValue,callback:function(t){e.$set(a.row,"fieldValue",t)},expression:"scope.row.fieldValue"}})],1)]}}],null,!1,3084817245)}),t("el-table-column",{attrs:{label:"参数描述"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"sapConnectFieldInfo.ainputParams."+a.$index+".fieldAlias",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[t("el-input",{model:{value:a.row.fieldAlias,callback:function(t){e.$set(a.row,"fieldAlias",t)},expression:"scope.row.fieldAlias"}})],1)]}}],null,!1,3254498045)}),t("el-table-column",{attrs:{align:"right","header-align":"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.deleteCur(a.$index)}}},[e._v("删除")])]}}],null,!1,3933014452)})],1):t("el-table",{staticClass:"params_table",staticStyle:{width:"100%"},attrs:{data:1==e.activeTabName?e.form.sapConnectFieldInfo.paramsFieldInfos:2==e.activeTabName?e.form.sapConnectFieldInfo.headersFieldInfos:e.form.sapConnectFieldInfo.bodyFieldInfos}},[t("el-table-column",{attrs:{label:"参数名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"sapConnectFieldInfo.".concat(1==e.activeTabName?"paramsFieldInfos":2==e.activeTabName?"headersFieldInfos":"bodyFieldInfos",".")+a.$index+".fieldName",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[t("el-input",{model:{value:a.row.fieldName,callback:function(t){e.$set(a.row,"fieldName",t)},expression:"scope.row.fieldName"}})],1)]}}],null,!1,1182493e3)}),t("el-table-column",{attrs:{label:"值"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"sapConnectFieldInfo.".concat(1==e.activeTabName?"paramsFieldInfos":2==e.activeTabName?"headersFieldInfos":"bodyFieldInfos",".")+a.$index+".fieldValue",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[t("el-input",{model:{value:a.row.fieldValue,callback:function(t){e.$set(a.row,"fieldValue",t)},expression:"scope.row.fieldValue"}})],1)]}}],null,!1,1274707656)}),t("el-table-column",{attrs:{label:"参数描述"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"sapConnectFieldInfo.".concat(1==e.activeTabName?"paramsFieldInfos":2==e.activeTabName?"headersFieldInfos":"bodyFieldInfos",".")+a.$index+".fieldAlias",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[t("el-input",{model:{value:a.row.fieldAlias,callback:function(t){e.$set(a.row,"fieldAlias",t)},expression:"scope.row.fieldAlias"}})],1)]}}],null,!1,4259453480)}),t("el-table-column",{attrs:{align:"right","header-align":"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.deleteCur(a.$index)}}},[e._v("删除")])]}}],null,!1,3933014452)})],1)],1),3!=e.activeTabName||3!=e.form.sapConnectFieldInfo.olderRequestType?t("div",{staticClass:"addNew",on:{click:function(t){return e.addNew()}}},[e._v("\n                  + 添加参数\n                ")]):e._e()],1):e._e(),4==e.form.dataSourceType.type&&2==e.form.sapConnectFieldInfo.paramType?t("div",{staticClass:"paramType",staticStyle:{width:"100%"}},[t("div",{staticClass:"cede_editor"},[t("span",{staticClass:"el-icon-full-screen",staticStyle:{position:"absolute",right:"0",top:"0px"},attrs:{title:"全屏编写"},on:{click:e.fullScreenJson}}),t("codeEditor",{ref:"codeEditor",attrs:{hasFormat:!1,isLock:!e.jobNodeLock,hasCheck:{isShow:!1,type:1},placeholder:'\n                  请按照JSON格式填写表名及其数据，例如：\n                  {\n                    "TABLE_NAME1":[{"column1":"value","column2":"value"},{"column1":"value","column2":"value"}],\n                    "TABLE_NAME2":[{"column3":"value","column4":"value"},{"column3":"value","column4":"value"}]\n                  }'},model:{value:e.form.sapConnectFieldInfo.ainputMoreTableParams,callback:function(t){e.$set(e.form.sapConnectFieldInfo,"ainputMoreTableParams",t)},expression:"form.sapConnectFieldInfo.ainputMoreTableParams"}})],1)]):e._e()]),3!=e.form.dataSourceType.type?t("div",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.form.type,expression:"form.type == 3"}],attrs:{label:"请求格式"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.reqType,callback:function(t){e.$set(e.form,"reqType",t)},expression:"form.reqType"}},[t("el-option",{attrs:{label:"application/xml",value:1}}),t("el-option",{attrs:{label:"application/json",value:2}}),t("el-option",{attrs:{label:"text/xml",value:3}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.form.type,expression:"form.type == 3"}],staticStyle:{"margin-bottom":"0"},attrs:{label:""}},[t("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.form.webserviceText,callback:function(t){e.$set(e.form,"webserviceText",t)},expression:"form.webserviceText"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.form.type,expression:"form.type == 3"}],attrs:{label:"返回格式"}},[t("el-radio-group",{attrs:{size:"mini"},model:{value:e.form.resType,callback:function(t){e.$set(e.form,"resType",t)},expression:"form.resType"}},[t("el-radio",{attrs:{label:1}},[e._v("xml")]),t("el-radio",{attrs:{label:2}},[e._v("json")])],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.form.type,expression:"form.type == 3"}],attrs:{label:"xml解析表名"}},[t("el-input",{model:{value:e.form.anaTableNameUrl,callback:function(t){e.$set(e.form,"anaTableNameUrl",t)},expression:"form.anaTableNameUrl"}})],1)],1):e._e(),3==e.form.dataSourceType.type?t("div",[t("div",{staticStyle:{"text-align":"left","margin-bottom":"8px"}},[t("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.form.startPageCount,callback:function(t){e.$set(e.form,"startPageCount",t)},expression:"form.startPageCount"}},[e._v("启用分页取数")]),t("el-tooltip",{staticClass:"itemtooltip",attrs:{effect:"dark",content:e.startPageCountTip,placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind"})])],1),1==e.form.startPageCount?t("div",[t("el-form-item",{attrs:{label:"页码",prop:"startPageCountParams.pageNum"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:200},model:{value:e.form.startPageCountParams.pageNum,callback:function(t){e.$set(e.form.startPageCountParams,"pageNum",t)},expression:"form.startPageCountParams.pageNum"}}),t("el-tooltip",{staticClass:"itemtooltip",attrs:{effect:"dark",content:e.pageNumTip,placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind"})]),t("el-checkbox",{staticStyle:{"margin-left":"16px"},attrs:{"true-label":1,"false-label":0},model:{value:e.form.startPageCountParams.enableIncresement,callback:function(t){e.$set(e.form.startPageCountParams,"enableIncresement",t)},expression:"form.startPageCountParams.enableIncresement"}},[e._v("是否自增")])],1),t("el-form-item",{attrs:{label:"条数"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1,max:1e6},model:{value:e.form.startPageCountParams.pageSize,callback:function(t){e.$set(e.form.startPageCountParams,"pageSize",t)},expression:"form.startPageCountParams.pageSize"}}),t("el-tooltip",{staticClass:"itemtooltip",attrs:{effect:"dark",content:e.pageSizeTip,placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind"})])],1),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"结束标识"}},[t("el-input",{attrs:{maxlength:"20"},model:{value:e.form.startPageCountParams.endName,callback:function(t){e.$set(e.form.startPageCountParams,"endName",t)},expression:"form.startPageCountParams.endName"}}),t("el-tooltip",{staticClass:"itemtooltip",attrs:{effect:"dark",content:e.endNameTip,placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{position:"absolute",right:"-20px"}})])],1)],1):e._e()]):e._e(),4==e.form.dataSourceType.type?t("div",[t("div",{staticStyle:{"text-align":"left","margin-bottom":"8px"}},[t("el-checkbox",{model:{value:e.openLoodAccess,callback:function(t){e.openLoodAccess=t},expression:"openLoodAccess"}},[e._v("启用循环取数")])],1),1==e.form.isOpenLoodAccess?t("div",[t("el-form-item",{attrs:{label:"条数",prop:"batchSize"}},[t("el-input",{attrs:{onkeypress:"return( /[\\d]/.test(String.fromCharCode(event.keyCode) ) )",placeholder:"输入条数"},model:{value:e.form.batchSize,callback:function(t){e.$set(e.form,"batchSize",t)},expression:"form.batchSize"}})],1),t("el-form-item",{attrs:{label:"停止标识",required:""}},[t("el-row",{attrs:{gutter:21}},[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{"label-width":"0",prop:"stopSign"}},[t("el-input",{attrs:{size:"mini"},model:{value:e.form.stopSign,callback:function(t){e.$set(e.form,"stopSign",t)},expression:"form.stopSign"}})],1)],1),t("el-col",{staticStyle:{"text-algin":"center"},attrs:{span:1}},[e._v("=")]),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{"label-width":"0",prop:"stopSignVal"}},[t("el-input",{attrs:{size:"mini"},model:{value:e.form.stopSignVal,callback:function(t){e.$set(e.form,"stopSignVal",t)},expression:"form.stopSignVal"}})],1)],1)],1)],1)],1):e._e()]):e._e()],1),6==e.form.dataSourceType.type&&e.form.input_connect_id?t("div",[t("div",[t("el-form-item",{staticStyle:{width:"520px"},attrs:{label:"索引",prop:"esIndex"}},[t("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入"},model:{value:e.form.esIndex,callback:function(t){e.$set(e.form,"esIndex",t)},expression:"form.esIndex"}}),t("el-tooltip",{attrs:{effect:"dark",content:"Elasticsearch中的index名",placement:"top-start"}},[t("span",{staticClass:"icon",staticStyle:{"margin-left":"10px"}},[e._v("")])])],1),t("el-form-item",{staticStyle:{width:"520px"},attrs:{label:"索引类型",prop:"esIndexType"}},[t("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入"},model:{value:e.form.esIndexType,callback:function(t){e.$set(e.form,"esIndexType",t)},expression:"form.esIndexType"}}),t("el-tooltip",{attrs:{effect:"dark",content:"Elasticsearch中index的type名，7.3版本后的可不填",placement:"top-start"}},[t("span",{staticClass:"icon",staticStyle:{"margin-left":"10px"}},[e._v("")])])],1),t("el-form-item",{staticStyle:{width:"520px"},attrs:{label:"分页大小",prop:"esPageSize"}},[t("el-input-number",{staticStyle:{width:"350px"},attrs:{type:"number",min:null,precision:0,max:1999999},model:{value:e.form.esPageSize,callback:function(t){e.$set(e.form,"esPageSize",t)},expression:"form.esPageSize"}}),t("el-tooltip",{attrs:{effect:"dark",content:"每次读取数据的条数，0-1999999",placement:"top-start"}},[t("span",{staticClass:"icon",staticStyle:{"margin-left":"10px"}},[e._v("")])])],1),t("el-form-item",{staticStyle:{width:"520px"},attrs:{label:"游标时间",prop:"esPageTime"}},[t("el-input-number",{staticStyle:{width:"350px"},attrs:{min:null,precision:0,max:1999999},model:{value:e.form.esPageTime,callback:function(t){e.$set(e.form,"esPageTime",t)},expression:"form.esPageTime"}}),t("el-tooltip",{attrs:{effect:"dark",content:"分页参数，设置游标存放时间，单位秒",placement:"top-start"}},[t("span",{staticClass:"icon",staticStyle:{"margin-left":"10px"}},[e._v("")])])],1),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"检索查询条件",prop:"esSqlCondition"}},[t("el-input",{attrs:{type:"textarea",rows:5,placeholder:'{"match":{"id":"1"}}'},model:{value:e.form.esSqlCondition,callback:function(t){e.$set(e.form,"esSqlCondition",t)},expression:"form.esSqlCondition"}})],1)],1)]):e._e()],1),t("div",{staticClass:"title"},[e._v("选择输出数据源")]),t("div",{staticClass:"sebar"},[t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"数据引擎",prop:"output_storage_engine_type"}},[t("el-select",{attrs:{placeholder:"选择数据引擎"},on:{change:e.changeTB},model:{value:e.form.output_storage_engine_type,callback:function(t){e.$set(e.form,"output_storage_engine_type",t)},expression:"form.output_storage_engine_type"}},e._l(e.storageEngineList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"数据仓库",prop:"output_db_name"}},[t("el-select",{attrs:{placeholder:"选择数据仓库"},on:{change:e.changeTB},model:{value:e.form.output_db_name,callback:function(t){e.$set(e.form,"output_db_name",t)},expression:"form.output_db_name"}},e._l(e.DWList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),4!=e.form.dataSourceType.type&&5!=e.form.dataSourceType.type?t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"数据表",prop:"output_table_name"}},[t("el-select",{attrs:{placeholder:"选择数据库关联的数据表",filterable:""},on:{"visible-change":function(t){return e.checkSapPartitionpost(t)}},model:{value:e.form.output_table_name,callback:function(t){e.$set(e.form,"output_table_name",t)},expression:"form.output_table_name"}},e._l(e.dataTabelList,(function(e,a){return t("el-option",{key:"tableName"+a,attrs:{value:e.tableName,label:e.tableName}})})),1)],1):e._e(),4==e.form.dataSourceType.type||5==e.form.dataSourceType.type?t("el-form-item",{staticStyle:{width:"500px"},attrs:{size:"small",label:"数据表",prop:"sapDataTabel"}},[t("el-select",{key:"sap",attrs:{multiple:"","value-key":"tableName",filterable:"","filter-method":e.filterData,placeholder:"选择数据库关联的数据表"},on:{"visible-change":function(t){return e.checkSapPartitionpost(t)}},model:{value:e.form.sapDataTabel,callback:function(t){e.$set(e.form,"sapDataTabel",t)},expression:"form.sapDataTabel"}},e._l(e.dropOptions,(function(e){return t("el-option",{key:e.uuid,attrs:{value:e.tableName,label:e.tableName}})})),1)],1):e._e(),t("el-form-item",{staticStyle:{width:"500px",position:"relative"},attrs:{label:"书写模式",prop:"output_write_model"}},[t("el-select",{style:{width:1==e.form.dataSourceType.type||11==e.form.dataSourceType.type?"370px":""},attrs:{placeholder:"请选择书写模式"},model:{value:e.form.output_write_model,callback:function(t){e.$set(e.form,"output_write_model",t)},expression:"form.output_write_model"}},[1!=e.form.dataSourceType.type&&11!=e.form.dataSourceType.type?t("el-option",{attrs:{label:"覆盖",value:"overwrite"}}):e._e(),t("el-option",{attrs:{label:"追加",value:"append"}})],1),1==e.form.dataSourceType.type||11==e.form.dataSourceType.type?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                "+e._s(11==e.form.dataSourceType.type?"SFTP":"FTP")+"数据源取数不支持覆盖写，若需覆盖请重新选择在"+e._s(11==e.form.dataSourceType.type?"SFTP":"FTP")+"数据源中写入新的文件\n              ")]),t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"vertical-align":"middle",float:"right",position:"absolute",right:"0",top:"0"}})]):e._e()],1),e.form.output_data_partitions&&e.form.output_data_partitions.length>0?t("el-form-item",{staticStyle:{width:"500px","margin-bottom":"0"},attrs:{label:"数据分区"}},e._l(e.form.output_data_partitions,(function(a,o){return t("el-form-item",{key:"partitions"+o,staticStyle:{"margin-bottom":"0"}},[t("el-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:5,title:a.fieldName}},[t("span",[e._v(e._s(a.fieldName))])]),t("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("=")]),t("el-col",{attrs:{span:17}},[t("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"output_data_partitions."+o+".fieldValue",rules:e.rules.fieldValue}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:a.fieldValue,callback:function(t){e.$set(a,"fieldValue",t)},expression:"site.fieldValue"}})],1)],1)],1)})),1):e._e()],1),2!=e.form.engineId?t("div",{staticClass:"title"},[e._v("加密配置")]):e._e(),2!=e.form.engineId?t("div",[t("el-table",{attrs:{data:e.configTable}},[t("el-table-column",{attrs:{label:"是否加密"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-checkbox",{model:{value:a.row.checked,callback:function(t){e.$set(a.row,"checked",t)},expression:"scope.row.checked"}})],1)]}}],null,!1,1253007290)}),t("el-table-column",{attrs:{label:"字段名",prop:"fieldName"}}),t("el-table-column",{attrs:{label:"字段别名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-input",{attrs:{placeholder:"请输入字段别名"},model:{value:a.row.fieldAlias,callback:function(t){e.$set(a.row,"fieldAlias",t)},expression:"scope.row.fieldAlias"}})],1)]}}],null,!1,3367912896)})],1)],1):e._e(),t("div",{staticClass:"title"},[e._v("任务配置")]),t("div",{staticClass:"sebar",staticStyle:{width:"500px"}},[t("el-form-item",{attrs:{prop:"maxConcurrency",label:"最大并发数"}},[t("el-input",{attrs:{onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",placeholder:"任务期望最大并发数",disabled:[5,7,8,9,18].includes(e.form.dataSourceType.id)},model:{value:e.form.maxConcurrency,callback:function(t){e.$set(e.form,"maxConcurrency",e._n(t))},expression:"form.maxConcurrency"}})],1),e.isShowLabel&&e.form.maxConcurrency>1?t("el-form-item",{attrs:{label:"并行分片字段",prop:"parallel_key"}},[t("div",{staticClass:"parallel",staticStyle:{display:"flex"}},[t("el-input",{attrs:{size:"mini"},model:{value:e.form.parallel_key,callback:function(t){e.$set(e.form,"parallel_key",t)},expression:"form.parallel_key"}}),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"数字。如果是oracle number类型,number需指定位数,比如number(12),number(12,2)",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1)]):e._e(),e.isShowLabel&&e.form.maxConcurrency>1?t("el-form-item",{attrs:{label:"分片上界值",prop:"upper_bound"}},[t("div",{staticClass:"parallel",staticStyle:{display:"flex"}},[t("el-input-number",{attrs:{"step-strictly":"","controls-position":"right"},model:{value:e.form.upper_bound,callback:function(t){e.$set(e.form,"upper_bound",t)},expression:"form.upper_bound"}}),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分片字段的最大值",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1)]):e._e(),e.isShowLabel&&e.form.maxConcurrency>1?t("el-form-item",{attrs:{label:"分片下界值",prop:"lower_bound"}},[t("div",{staticClass:"parallel",staticStyle:{display:"flex"}},[t("el-input-number",{attrs:{"step-strictly":"","controls-position":"right"},model:{value:e.form.lower_bound,callback:function(t){e.$set(e.form,"lower_bound",t)},expression:"form.lower_bound"}}),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分片字段的最小值",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1)]):e._e(),t("el-form-item",{attrs:{prop:"hight_file_num",label:"最大文件数"}},[t("el-input",{attrs:{onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",placeholder:"任务期望最大文件数"},model:{value:e.form.hight_file_num,callback:function(t){e.$set(e.form,"hight_file_num",e._n(t))},expression:"form.hight_file_num"}})],1),t("el-form-item",{attrs:{label:"driver内存"}},[t("el-input",{attrs:{onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",placeholder:"默认为1(单位:G)"},model:{value:e.form.resource_dm,callback:function(t){e.$set(e.form,"resource_dm",e._n(t))},expression:"form.resource_dm"}})],1),t("el-form-item",{attrs:{label:"driver核数"}},[t("el-input",{attrs:{onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",placeholder:"默认为1(单位:个)"},model:{value:e.form.resource_dc,callback:function(t){e.$set(e.form,"resource_dc",e._n(t))},expression:"form.resource_dc"}})],1),t("el-form-item",{attrs:{label:"executor内存"}},[t("el-input",{attrs:{onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",placeholder:"默认为4(单位:G)"},model:{value:e.form.resource_em,callback:function(t){e.$set(e.form,"resource_em",e._n(t))},expression:"form.resource_em"}})],1),t("el-form-item",{attrs:{label:"executor核数"}},[t("el-input",{attrs:{onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",placeholder:"默认为2(单位:个)"},model:{value:e.form.resource_ec,callback:function(t){e.$set(e.form,"resource_ec",e._n(t))},expression:"form.resource_ec"}})],1)],1)],1)],1)]),t("div",{staticClass:"right"},[t("div",{staticClass:"attribute",on:{click:e.openDrawer}},[e._v("属性配置")])]),t("div",{staticClass:"ds_dialog"},[t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("codeEditor",{ref:"screeCodeEditor",attrs:{isLock:!e.jobNodeLock,hasCheck:{isShow:!e.isJson,type:1},placeholder:e.placeholder},model:{value:e.form.input_input_content,callback:function(t){e.$set(e.form,"input_input_content",t)},expression:"form.input_input_content"}})],1)],1),t("el-drawer",{attrs:{title:"属性配置",visible:e.drawer,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[t("attribute",{ref:"paramConfig",attrs:{engineId:e.form.engineId,isDisabled:!e.jobNodeLock,form:e.jobForm,sourceType:e.form.dataSourceType.type,drawer:e.drawer},on:{dataChange:e.dataChange}})],1)],1)}),[],!1,null,"14f2dafa",null).exports),te={data:function(){return{}},methods:{clickSave:function(){this.$emit("clickSave")}}},ae=(a("a119"),Object(c.a)(te,(function(){var e=this._self._c;return e("div",{staticClass:"data_process_task_headbar"},[e("div",{staticClass:"save"},[e("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px"},attrs:{type:"primary",size:"mini"},on:{click:this.clickSave}},[this._v("保存")])],1),this._t("default")],2)}),[],!1,null,null,null).exports);function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var re={props:["jobNodeData","form","isDisabled"],components:{codeEditor:q.a},data:function(){return{configTable:[],dialogVisible1:!1,dialogVisible2:!1,node:"",relyOnEdit:{},activeNames:["basicAtttibute","processParamas","config","priority","outputConfig","SYMBIOSIS","sysRun"],dataSetList:[],attrList:[{label:"timeout",value:"timeout"},{label:"exec_mem_limit",value:"exec_mem_limit"},{label:"max_filter_ratio",value:"max_filter_ratio"},{label:"strict_mode",value:"strict_mode"},{label:"timezone",value:"timezone"}],storageEngineList:[],DWList:[],dataTabelList:[],data:{processPramasData:[{paramas:"${dss}",value:"ioioio"}],output_storage_engine_type:1,srInputDbName:"",srInputTableName:"",sapDataTabel:[],partitionValueList:[],isNegative:0,srPartitions:"",srColumnList:"",srHivePartitions:"",srSet:"",srWhere:"",srBrokerProperties:[],isOpenOutHours:0,outHours:1,priorityConfig:"中",output_connect_type:"",output_connect_id:"",output_table_name:"",output_write_model:"",input_db_name:void 0,output_pre_statment:"",output_fix_statment:"",resource_em:"",resource_dm:"",resource_dc:"",resource_ec:"",jobNodeInfo:{name:"",createPerName:""}},priorityList:[{label:"高",value:"高"},{label:"中",value:"中"},{label:"低",value:"低"}],dataSourceTypeList:"",dataSourceList:[],ruleForm:{srInputDbName:[{required:!0,message:"请选择数据库",trigger:"change"}],srInputTableName:[{required:!0,message:"请选择数据表",trigger:"change"}],output_connect_type:[{required:!0,message:"请选择数据源类型",trigger:"change"}],output_connect_id:[{required:!0,message:"请选择数据源",trigger:"change"}],output_table_name:[{required:!0,message:"请输入数据表",trigger:"blur"}],input_db_name:[{required:!0,message:"请选择数据库",trigger:"change"}],output_write_model:[{required:!0,message:"请选择书写模式",trigger:"change"}]},conditionNammeList:[],countOps:[],statusOps:[]}},methods:{confConnectListSorageEngine:function(){var e=this;this.$API.get(this.$URL.confConnectListSorageEngine,{requstId:1},(function(t){0==t.code?e.storageEngineList=t.data:e.$message.error(t.msg)}))},changeTB:function(){this.data.srInputTableName="",this.data.partitionValueList=[],this.getDataTableList()},changeTableName:function(){var e=this;this.partitionValueList=[];var t=this.dataTabelList.find((function(t){return t.tableName==e.data.srInputTableName})).id;this.getPartitionFields(t)},getPartitionFields:function(e){var t=this;this.$API.get(this.$URL.getPartitionFields+"/"+e,{},(function(e){0==e.code?e.data&&(t.data.partitionValueList=e.data.map((function(e){return{key:e.fieldName,value:""}}))):t.$message.error(e.msg)}))},getDataTableList:function(){var e=this,t={proc_id:this.$route.query.id,output_storage_engine_type:1,db_name:this.data.srInputDbName};this.$API.post(this.$URL.listTableByStorageEngine,t,(function(t){if(e.dataTabelList=[],0==t.code)for(var a=0;a<t.data.length;a++)e.dataTabelList.push({tableName:t.data[a].tableName,id:t.data[a].id});else e.$message.error(t.msg)}))},getlistDbs:function(){var e=this,t={dataType:1,procId:this.$route.query.id,sourceType:1};this.$API.post(this.$URL.getProcInfoListDbs,t,(function(t){e.isLoading=!1,0==t.code?e.DWList=t.data:e.$message.error(t.msg)}))},getConfigData:function(){var e=this,t={type:2,sql:this.form.input_input_content};this.configTable=[],this.form.input_input_content&&this.$API.post(this.$URL.getSecretFields,t,(function(t){0==t.code&&t.data&&(e.configTable=t.data.map((function(e){return ie(ie({},e),{},{checked:!1,fieldAlias:""})})),e.form.fieldInfoList&&e.form.fieldInfoList.forEach((function(t){var a=t.id,o=t.fieldAlias;e.configTable.forEach((function(e){e.id==a&&(e.checked=!0,e.fieldAlias=o)}))})))}))},engineChange:function(e){this.dataSourceTypeList=[],this.dataSourceList=[],this.dataSetList=[],3==e?(this.getlistDbs(),this.getTypeList(5)):this.getTypeList()},handleDataSourceChange:function(e){var t=this;e&&Object(A.a)(regeneratorRuntime.mark((function a(){var o,i,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(H.e)(e);case 3:i=a.sent,r=i.data.data,t.dataSetList=r.map((function(e){return{label:e,value:e}})),1===(null===(o=t.dataSetList)||void 0===o?void 0:o.length)&&(t.data.input_db_name=t.dataSetList[0].value),t.dataSetList.length||(t.data.input_db_name=void 0),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},fullScreen:function(e){var t=this;1==e?(this.dialogVisible1=!0,this.$nextTick((function(){t.$refs.screeCodeEditor1.code=t.$refs.codeEditor1.code,setTimeout((function(){t.$refs.screeCodeEditor1.$refs.codemirror.codemirror.refresh()}),10)}))):(this.dialogVisible2=!0,this.$nextTick((function(){t.$refs.screeCodeEditor2.code=t.$refs.codeEditor2.code,setTimeout((function(){t.$refs.screeCodeEditor2.$refs.codemirror.codemirror.refresh()}),10)})))},getTypeList:function(e){var t=this;this.$API.get(this.$URL.getConfConnectListTypes,{requstId:e||3},(function(e){0==e.code?(t.dataSourceTypeList=e.data,t.getDataSourceList(t.data.output_connect_type,t.node.id)):t.$message.error(e.msg)}))},getDataSourceList:function(e,t){var a=this;this.dataSourceList=[];var o={type_id:e,proc_id:this.$route.query.id};this.$API.post(this.$URL.getConfConnectList,o,(function(e){0==e.code?e.data&&e.data.length>0&&(a.dataSourceList=e.data):a.$message.error(e.msg),a.$nextTick((function(){a.dataListLoading=!1}))}))},curTypeList:function(){this.data.output_connect_id="",this.data.output_write_model="",this.data.input_db_name=void 0,this.$refs.ruleForm.clearValidate(),this.$refs.ruleForm.validateField(),12==this.data.output_connect_type?(this.ruleForm.input_db_name[0].message="请输入索引",this.ruleForm.input_db_name[0].trigger="blur",this.ruleForm.output_table_name[0].message="请输入索引类型"):(this.ruleForm.input_db_name[0].message="请选择数据库",this.ruleForm.input_db_name[0].trigger="change",this.ruleForm.output_table_name[0].message="请输入数据表"),this.getDataSourceList(this.data.output_connect_type,this.node.id)},routeType:function(){var e=this;this.$API.get(this.$URL.routeType,{},(function(t){if(0==t.code){e.conditionNammeList=t.data;var a=e.conditionNammeList.find((function(e){return"count"==e.nameEn})),o=e.conditionNammeList.find((function(e){return"status"==e.nameEn}));e.countOps=a.ops,e.statusOps=o.ops}else e.$message.error(t.code)}))},changeType:function(e,t){this.$set(t.row,"operationNamme","="),this.$set(t.row,"conditionValue","0")},sRaddParam:function(){this.isDisabled||(this.data.srBrokerProperties||(this.data.srBrokerProperties=[]),this.data.srBrokerProperties.push({key:"",value:""}))},sRremoveParam:function(e){this.isDisabled||this.data.srBrokerProperties.remove(e.row)},addParam:function(){this.isDisabled||this.data.nodeParam.push({key:"",value:""})},removeParam:function(e){this.isDisabled||this.data.nodeParam.remove(e.row)},remove:function(e){this.isDisabled||this.data.jobNodeLayConfigDtos.remove(e.row)}},mounted:function(){3==this.form.engineId?(this.confConnectListSorageEngine(),this.getlistDbs(),this.getTypeList(5)):this.getTypeList(),this.routeType()},watch:{jobNodeData:{handler:function(e){this.node=e},deep:!0},data:{handler:function(e){this.$emit("dataChange",e)},deep:!0},"form.input_input_content":{immediate:!0,deep:!0,handler:function(e){e&&this.getConfigData()}},form:{handler:function(e){var t=this;this.$nextTick((function(){t.data=Object.assign(t.data,e),t.data.nodeParam=t.data.nodeParam?t.data.nodeParam:[],t.data.output_connect_id&&t.handleDataSourceChange(t.data.output_connect_id),t.data.srInputDbName&&t.getDataTableList()}))},deep:!0,immediate:!0}}},ne=(a("166a"),Object(c.a)(re,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"process_ds_attribute"},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-form",{ref:"ruleForm",attrs:{model:e.data,"label-width":"120px","label-position":"left",rules:e.ruleForm}},[t("el-collapse-item",{attrs:{title:"基本属性",name:"basicAtttibute"}},[t("div",{staticClass:"section"},[t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务名称："+e._s(e.data.jobNodeInfo.name))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务类型：输出")]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("责任人:"+e._s(e.data.jobNodeInfo.createPerName))])])]),3!=e.form.engineId?t("el-collapse-item",{attrs:{name:"config"}},[t("template",{slot:"title"},[e._v("\n                解密配置\n                ")]),t("div",{staticClass:"section"},[t("el-table",{attrs:{data:e.configTable}},[t("el-table-column",{attrs:{label:"是否解密"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-checkbox",{attrs:{disabled:[35,36].some((function(e){return e==a.row.encyStyleId}))},model:{value:a.row.checked,callback:function(t){e.$set(a.row,"checked",t)},expression:"scope.row.checked"}})],1)]}}],null,!1,1305072762)}),t("el-table-column",{attrs:{label:"字段名",prop:"fieldName"}}),t("el-table-column",{attrs:{label:"字段别名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-input",{attrs:{placeholder:"请输入字段别名"},model:{value:a.row.fieldAlias,callback:function(t){e.$set(a.row,"fieldAlias",t)},expression:"scope.row.fieldAlias"}})],1)]}}],null,!1,3367912896)})],1)],1)],2):e._e(),t("el-collapse-item",{attrs:{name:"priority"}},[t("template",{slot:"title"},[e._v("\n                调度配置\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用于多个平级任务运行时的优先级",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"调度优先级"}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:e.data.priorityConfig,callback:function(t){e.$set(e.data,"priorityConfig",t)},expression:"data.priorityConfig"}},e._l(e.priorityList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-checkbox",{attrs:{disabled:e.isDisabled,"true-label":1,"false-label":0},model:{value:e.data.isOpenOutHours,callback:function(t){e.$set(e.data,"isOpenOutHours",t)},expression:"data.isOpenOutHours"}},[e._v("是否设置超时")]),e.data.isOpenOutHours?t("el-form-item",{attrs:{label:"超时时间"}},[t("el-input-number",{attrs:{disabled:e.isDisabled,min:1,max:1440},model:{value:e.data.outHours,callback:function(t){e.$set(e.data,"outHours",t)},expression:"data.outHours"}}),t("span",{staticStyle:{"margin-left":"12px"}},[e._v("分钟")])],1):e._e()],1)],2),t("el-collapse-item",{attrs:{name:"sysRun"}},[t("template",{slot:"title"},[e._v("\n                运行参数\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"任务运行时需要设置的参数",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-table",{attrs:{data:e.data.nodeParam,size:"mini",width:"100"}},[t("el-table-column",{attrs:{label:"参数名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".key",rules:{required:!0,message:"请输入参数名称",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数名称"},model:{value:a.row.key,callback:function(t){e.$set(a.row,"key",t)},expression:"scope.row.key"}})],1)]}}])}),t("el-table-column",{attrs:{label:"参数值或者表达式",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".value",rules:{required:!0,message:"请输入参数值或者表达式",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数值或者表达式"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作","header-align":"right",align:"right",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{disabled:e.isDisabled,type:"text",size:"mini"},on:{click:function(t){return e.removeParam(a)}}},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"add_new",attrs:{type:"text"},on:{click:e.addParam}},[e._v("+ 添加参数")])],1)],2),3==e.form.engineId?t("el-collapse-item",{attrs:{name:"sysRun",title:"输入设置"}},[t("div",{staticClass:"section"},[t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"数据源",prop:"output_storage_engine_type"}},[t("span",[e._v("Hive")])]),t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"数据库",prop:"srInputDbName"}},[t("el-select",{attrs:{placeholder:"选择数据库"},on:{change:e.changeTB},model:{value:e.data.srInputDbName,callback:function(t){e.$set(e.data,"srInputDbName",t)},expression:"data.srInputDbName"}},e._l(e.DWList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"数据表",prop:"srInputTableName"}},[t("el-select",{attrs:{placeholder:"选择数据表",filterable:""},on:{change:e.changeTableName},model:{value:e.data.srInputTableName,callback:function(t){e.$set(e.data,"srInputTableName",t)},expression:"data.srInputTableName"}},e._l(e.dataTabelList,(function(e,a){return t("el-option",{key:"tableName"+a,attrs:{value:e.tableName,label:e.tableName}})})),1)],1)],1),e.data.partitionValueList&&e.data.partitionValueList.length>0?t("div",{staticClass:"section",staticStyle:{padding:"0"}},[t("el-table",{attrs:{data:e.data.partitionValueList,size:"mini",width:"100"}},[t("el-table-column",{attrs:{label:"分区字段","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"partitionValueList."+a.$index+".key",rules:{required:!0,message:"请输入分区字段",trigger:"blur"}}},[t("span",[e._v(e._s(a.row.key))])])]}}],null,!1,2979817881)}),t("el-table-column",{attrs:{label:"分区值",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"partitionValueList."+a.$index+".value"}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入分区值"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}})],1)]}}],null,!1,350516053)})],1)],1):e._e()]):e._e(),t("el-collapse-item",{attrs:{name:"outputConfig",title:"输出设置"}},[t("div",{staticClass:"section"},[t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"数据源类型",prop:"output_connect_type"}},[t("el-select",{attrs:{disabled:e.isDisabled,filterable:""},on:{change:e.curTypeList},model:{value:e.data.output_connect_type,callback:function(t){e.$set(e.data,"output_connect_type",t)},expression:"data.output_connect_type"}},e._l(e.dataSourceTypeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})})),1)],1),t("div",{staticStyle:{display:"flex"}},[t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"数据源",prop:"output_connect_id"}},[t("el-select",{attrs:{disabled:e.isDisabled,filterable:""},on:{change:e.handleDataSourceChange},model:{value:e.data.output_connect_id,callback:function(t){e.$set(e.data,"output_connect_id",t)},expression:"data.output_connect_id"}},e._l(e.dataSourceList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:3==e.form.engineId?"支持的数据源类型：starRocks":"支持的数据源类型：MySQL、Oracle、SQL Server、PostgreSQL、SAP HANA、Kudu、ElasticSearch、ClickHouse、MyCat",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),14!=e.data.output_connect_type?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:12!=e.data.output_connect_type?"数据库":"索引",prop:"input_db_name"}},[12==e.data.output_connect_type?t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"请写入索引"},model:{value:e.data.input_db_name,callback:function(t){e.$set(e.data,"input_db_name",t)},expression:"data.input_db_name"}}):t("el-select",{attrs:{disabled:e.isDisabled,filterable:""},model:{value:e.data.input_db_name,callback:function(t){e.$set(e.data,"input_db_name",t)},expression:"data.input_db_name"}},e._l(e.dataSetList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:12==e.data.output_connect_type?"索引类型":"数据表",prop:"output_table_name"}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:12==e.data.output_connect_type?"请写入索引类型":"请写入数据表"},model:{value:e.data.output_table_name,callback:function(t){e.$set(e.data,"output_table_name",t)},expression:"data.output_table_name"}})],1),3==e.form.engineId?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"NEGATIVE",prop:"isNegative"}},[t("el-checkbox",{attrs:{disabled:e.isDisabled,"true-label":1,"false-label":0},model:{value:e.data.isNegative,callback:function(t){e.$set(e.data,"isNegative",t)},expression:"data.isNegative"}})],1):e._e(),3==e.form.engineId?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"PARTITION",prop:"srPartitions"}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"可填多个，逗号隔开"},model:{value:e.data.srPartitions,callback:function(t){e.$set(e.data,"srPartitions",t)},expression:"data.srPartitions"}})],1):e._e(),3==e.form.engineId?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"column_list",prop:"srColumnList"}},[t("el-input",{attrs:{type:"textarea",rows:3,disabled:e.isDisabled,placeholder:"请输入内容"},model:{value:e.data.srColumnList,callback:function(t){e.$set(e.data,"srColumnList",t)},expression:"data.srColumnList"}})],1):e._e(),3==e.form.engineId?t("el-form-item",{staticClass:"pre",staticStyle:{width:"70%"},attrs:{label:"COLUMNS FROM\nPATH AS",prop:"srHivePartitions"}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"可填多个，逗号隔开"},model:{value:e.data.srHivePartitions,callback:function(t){e.$set(e.data,"srHivePartitions",t)},expression:"data.srHivePartitions"}})],1):e._e(),3==e.form.engineId?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"SET",prop:"srSet"}},[t("el-input",{attrs:{type:"textarea",rows:5,disabled:e.isDisabled,placeholder:"sr_v0 =\nhll_hash(hive_k0),\nsr_v1 = hive_k1,\nsr_v2=hive_k2"},model:{value:e.data.srSet,callback:function(t){e.$set(e.data,"srSet",t)},expression:"data.srSet"}})],1):e._e(),3==e.form.engineId?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"WHERE",prop:"srWhere"}},[t("el-input",{attrs:{type:"textarea",rows:3,disabled:e.isDisabled,placeholder:"请输入内容"},model:{value:e.data.srWhere,callback:function(t){e.$set(e.data,"srWhere",t)},expression:"data.srWhere"}})],1):e._e(),3==e.form.engineId?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"broker_properties",prop:"srBrokerProperties"}}):e._e(),3==e.form.engineId?t("div",{staticClass:"section",staticStyle:{padding:"0"}},[t("el-table",{attrs:{data:e.data.srBrokerProperties,size:"mini",width:"100"}},[t("el-table-column",{attrs:{label:"参数名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"srBrokerProperties."+a.$index+".key",rules:{required:!0,message:"请输入参数名称",trigger:"blur"}}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:a.row.key,callback:function(t){e.$set(a.row,"key",t)},expression:"scope.row.key"}},e._l(e.attrList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1)]}}],null,!1,53488724)}),t("el-table-column",{attrs:{label:"参数值",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"srBrokerProperties."+a.$index+".value",rules:{required:!0,message:"请输入参数值",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数值"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}})],1)]}}],null,!1,1709234638)}),t("el-table-column",{attrs:{label:"操作","header-align":"right",align:"right",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{disabled:e.isDisabled,type:"text",size:"mini"},on:{click:function(t){return e.sRremoveParam(a)}}},[e._v("删除")])],1)]}}],null,!1,3625957684)})],1),t("div",{staticClass:"add_new",attrs:{type:"text"},on:{click:e.sRaddParam}},[e._v("+ 添加")])],1):e._e(),3!=e.form.engineId?t("el-form-item",{staticStyle:{width:"70%"},attrs:{prop:"output_write_model",label:"书写模式"}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:e.data.output_write_model,callback:function(t){e.$set(e.data,"output_write_model",t)},expression:"data.output_write_model"}},[24!=e.data.output_connect_type?t("el-option",{attrs:{label:"覆盖",value:"overwrite"}}):e._e(),t("el-option",{attrs:{label:"追加",value:"append"}})],1)],1):e._e(),3!=e.form.engineId?t("el-form-item",{attrs:{label:"driver内存"}},[t("el-input",{attrs:{disabled:e.isDisabled,onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",placeholder:"默认为1(单位:G)"},model:{value:e.data.resource_dm,callback:function(t){e.$set(e.data,"resource_dm",e._n(t))},expression:"data.resource_dm"}})],1):e._e(),3!=e.form.engineId?t("el-form-item",{attrs:{label:"driver核数"}},[t("el-input",{attrs:{disabled:e.isDisabled,onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",placeholder:"默认为1(单位:个)"},model:{value:e.data.resource_dc,callback:function(t){e.$set(e.data,"resource_dc",e._n(t))},expression:"data.resource_dc"}})],1):e._e(),3!=e.form.engineId?t("el-form-item",{attrs:{label:"executor内存"}},[t("el-input",{attrs:{disabled:e.isDisabled,onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",placeholder:"默认为4(单位:G)"},model:{value:e.data.resource_em,callback:function(t){e.$set(e.data,"resource_em",e._n(t))},expression:"data.resource_em"}})],1):e._e(),3!=e.form.engineId?t("el-form-item",{attrs:{label:"executor核数"}},[t("el-input",{attrs:{disabled:e.isDisabled,onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",placeholder:"默认为2(单位:个)"},model:{value:e.data.resource_ec,callback:function(t){e.$set(e.data,"resource_ec",e._n(t))},expression:"data.resource_ec"}})],1):e._e(),t("div",{staticClass:"cod_m_o"},[t("span",{staticClass:"el-icon-full-screen",staticStyle:{position:"absolute",right:"-6px",top:"8px"},attrs:{title:"全屏编写"},on:{click:function(t){return e.fullScreen(1)}}}),t("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"前置sql语句"}},[t("div",{staticClass:"cede_editor"},[t("codeEditor",{ref:"codeEditor1",attrs:{isLock:e.isDisabled,hasCheck:{isShow:!0,type:1},placeholder:"请编写sql语句"},model:{value:e.data.output_pre_statment,callback:function(t){e.$set(e.data,"output_pre_statment",t)},expression:"data.output_pre_statment"}})],1)])],1),t("div",{staticClass:"cod_m_o"},[t("span",{staticClass:"el-icon-full-screen",staticStyle:{position:"absolute",right:"-6px",top:"8px"},attrs:{title:"全屏编写"},on:{click:function(t){return e.fullScreen(2)}}}),t("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"后置sql语句"}},[t("div",{staticClass:"cede_editor"},[t("codeEditor",{ref:"codeEditor2",attrs:{isLock:e.isDisabled,hasCheck:{isShow:!0,type:1},placeholder:"请编写sql语句"},model:{value:e.data.output_fix_statment,callback:function(t){e.$set(e.data,"output_fix_statment",t)},expression:"data.output_fix_statment"}})],1)])],1)],1)]),t("el-collapse-item",{attrs:{name:"SYMBIOSIS"}},[t("template",{slot:"title"},[e._v("\n                依赖配置\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"依赖配置时任务在运行时需要依赖的资源、函数、上游父节点的配置",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-table",{attrs:{size:"mini",data:e.data.jobNodeLayConfigDtos}},[t("el-table-column",{attrs:{label:"上游节点","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{position:"relative",top:"-6px"}},[e._v(e._s(a.row.upNodeName))])]}}])}),t("el-table-column",{attrs:{label:"判断类型",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".configType",rules:{required:!0,message:"请选择判断类型",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},on:{change:function(t){return e.changeType(t,a)}},model:{value:a.row.configType,callback:function(t){e.$set(a.row,"configType",t)},expression:"scope.row.configType"}},e._l(e.conditionNammeList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)]}}])}),t("el-table-column",{attrs:{label:"判断对象",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.configType?t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".outputTableId",rules:{required:!0,message:"请选择判断对象",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:a.row.outputTableId,callback:function(t){e.$set(a.row,"outputTableId",t)},expression:"scope.row.outputTableId"}},e._l(a.row.tabeleNameList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".operationNamme",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:a.row.operationNamme,callback:function(t){e.$set(a.row,"operationNamme",t)},expression:"scope.row.operationNamme"}},e._l(e.statusOps,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]}}])}),t("el-table-column",{attrs:{label:"取值范围",width:"180","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.configType?t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".operationNamme",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-input",{staticClass:"number",attrs:{disabled:e.isDisabled,type:"number",min:"0",placeholder:"请输入自然数",onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}"},model:{value:a.row.conditionValue,callback:function(t){e.$set(a.row,"conditionValue",t)},expression:"scope.row.conditionValue"}},[t("el-select",{staticStyle:{width:"55px"},attrs:{slot:"prepend",disabled:e.isDisabled,placeholder:"请选择"},slot:"prepend",model:{value:a.row.operationNamme,callback:function(t){e.$set(a.row,"operationNamme",t)},expression:"scope.row.operationNamme"}},e._l(e.countOps,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1):t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".conditionValue",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:a.row.conditionValue,callback:function(t){e.$set(a.row,"conditionValue",t)},expression:"scope.row.conditionValue"}},[t("el-option",{attrs:{label:"成功",value:"0"}}),t("el-option",{attrs:{label:"失败",value:"1"}})],1)],1)]}}])})],1)],1)],2)],1)],1),t("el-dialog",{staticClass:"process_ds_attribute_dialog",attrs:{"append-to-body":"",title:"前置sql语句",visible:e.dialogVisible1},on:{"update:visible":function(t){e.dialogVisible1=t}}},[t("codeEditor",{ref:"screeCodeEditor1",attrs:{isLock:e.isDisabled,hasCheck:{isShow:!0,type:1},placeholder:"请编写sql语句"},model:{value:e.data.output_pre_statment,callback:function(t){e.$set(e.data,"output_pre_statment",t)},expression:"data.output_pre_statment"}})],1),t("el-dialog",{staticClass:"process_ds_attribute_dialog",attrs:{"append-to-body":"",title:"后置sql语句",visible:e.dialogVisible2},on:{"update:visible":function(t){e.dialogVisible2=t}}},[t("codeEditor",{ref:"screeCodeEditor2",attrs:{isLock:e.isDisabled,hasCheck:{isShow:!0,type:1},placeholder:"请编写sql语句"},model:{value:e.data.output_fix_statment,callback:function(t){e.$set(e.data,"output_fix_statment",t)},expression:"data.output_fix_statment"}})],1)],1)}),[],!1,null,null,null).exports);function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ce(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return de(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var ue={props:["dataProcessTaskToChangeJobNodeData"],components:{headerBar:ae,codeEditor:q.a,attribute:ne},data:function(){return{jobNodeLock:1,isLoading:!1,drawer:!1,jobNodeData:"",dialogVisible:!1,form:{engineId:1,query_engine:1,input_input_content:"",jobNodeInfo:{name:"",createPerName:""}},storageEngineList:[],engineDisabled:!1}},methods:{engineChange:function(e){var t=this;this.form.query_engine=1,this.form.output_connect_type="",this.form.input_db_name="",this.form.output_connect_id="",this.form.output_table_name="",this.$nextTick((function(){t.$refs.attribute&&t.$refs.attribute.engineChange(e)}))},fullScreen:function(){var e=this;this.dialogVisible=!0,this.$nextTick((function(){e.$refs.screeCodeEditor.code=e.$refs.codeEditor.code,setTimeout((function(){e.$refs.screeCodeEditor.$refs.codemirror.codemirror.refresh()}),10)}))},format:function(){this.$refs.codeEditor.format()},openDrawer:function(){var e=this;this.drawer=!0,this.$nextTick((function(){e.$refs.attribute.getConfigData()}))},getNodeInfo:function(){var e=this;this.$API.get(this.$URL.getJobNodeInfoInfoByKeyAndJobId+"/"+this.jobNodeData.id,{},(function(t){if(0==t.code){if(t.data.jobNodeLayConfigDtos&&t.data.jobNodeLayConfigDtos.length>0){var a,o=ce(t.data.jobNodeLayConfigDtos);try{for(o.s();!(a=o.n()).done;){var i=a.value;e.nodelistOutTable(i)}}catch(e){o.e(e)}finally{o.f()}}e.form=Object.assign(e.form,t.data),e.jobNodeData.COPYING&&(e.form.jobNodeInfo.name="--",e.form.jobNodeInfo.createPerName="--"),e.form.query_engine=e.form.query_engine?e.form.query_engine:1,e.engineDisabled=!!t.data.query_engine,e.form.engineId=t.data.jobNodeInfo.engineId||1,e.jobNodeLock=JSON.parse(t.data.jobNodeInfo.jobNodeLock)}else e.$message.error(t.msg)}))},nodelistOutTable:function(e){var t=this;this.isLoading=!0,this.$API.get(this.$URL.nodelistOutTable+"/"+e.upNodeId,{},(function(a){t.isLoading=!1,0==a.code?t.$set(e,"tabeleNameList",a.data):t.$message.error(a.msg)}))},dataChange:function(e){Object.assign(this.form,e)},lock:function(){var e=this,t={id:this.jobNodeData.id,jobNodeLock:this.jobNodeLock?0:1};this.$API.post(this.$URL.jobNodeLock,t,(function(t){0==t.code?e.jobNodeLock=e.jobNodeLock?0:1:e.$message.error(t.msg)}))},onConfirm:function(e){var t=this;this.$refs.attribute.$refs.ruleForm.validate((function(a){if(a){var i=t.$refs.attribute.configTable;t.form.input_input_content=t.form.input_input_content?t.form.input_input_content:" ",t.form.output_write_model=t.form.output_write_model?t.form.output_write_model:1;var r={jobNodeLock:e,id:t.jobNodeData.id,name:"--"==t.form.jobNodeInfo.name?t.jobNodeData.name:t.form.jobNodeInfo.name,procId:t.$route.query.id,typeId:4,engineId:t.form.engineId,jobNodeConfig:le(le({},t.form),{},{fieldInfoList:3!=t.form.engineId?i.filter((function(e){return e.checked})):void 0}),jobNodeLayConfigDtoList:t.form.jobNodeLayConfigDtos};t.jobNodeData.COPYING?o.a.$emit("copySaveJobNodeConfig",{params:r,job:t.jobNodeData}):(t.isLoading=!0,t.$API.post(t.$URL.saveJobNodeConfig,r,(function(e){t.isLoading=!1,0==e.code?(t.$message.success("保存成功"),t.getNodeInfo(),t.engineDisabled=!0,t.drawer=!1):t.$message.error(e.msg)})))}else t.$message.warning("属性配置尚有必选项没有填写")}))},check:function(){var e=this,t={dbType:1,sql:this.form.input_input_content};this.$API.post(this.$URL.searchCheckSql,t,(function(t){0==t.code?e.$message.success("语法检查合法"):e.$message.error(t.msg)}))},confConnectListSorageEngine:function(){var e=this;this.isLoading=!0,this.$API.get(this.$URL.confConnectListSorageEngine,{requstId:2},(function(t){e.isLoading=!1,0==t.code?e.storageEngineList=t.data:e.$message.error(t.msg)}))}},mounted:function(){var e=this;o.a.$off("workInfoUpdata"),o.a.$on("workInfoUpdata",(function(t){t.copyCom&&(e.jobNodeData.COPYING=!1),e.getNodeInfo(),e.confConnectListSorageEngine()}))},watch:{dataProcessTaskToChangeJobNodeData:{handler:function(e){e&&this.$parent.name==e.id+""&&(this.jobNodeData=e,this.getNodeInfo(),this.confConnectListSorageEngine())},deep:!0,immediate:!0}}},fe=(a("94ff"),a("a18b"),Object(c.a)(ue,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_process_task_output dataDev"},[t("div",{staticClass:"left"},[t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",disabled:!e.jobNodeLock,title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(0)},confirm:function(t){return e.onConfirm(0)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px",position:"sticky",top:"10px"},attrs:{slot:"reference",disabled:!e.jobNodeLock,type:"primary",size:"mini"},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存并解锁")])],1),t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",disabled:!e.jobNodeLock,title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(1)},confirm:function(t){return e.onConfirm(1)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px",position:"sticky",top:"10px","margin-left":"10px"},attrs:{slot:"reference",disabled:!e.jobNodeLock,type:"primary",size:"mini"},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存")])],1),t("el-button",{staticStyle:{"font-size":"12px",position:"sticky",top:"10px","margin-left":"10px"},attrs:{size:"mini"},on:{click:e.lock}},[e._v(e._s(e.jobNodeLock?"解锁":"上锁"))]),t("div",{staticClass:"storage_engine_type",staticStyle:{position:"absolute",top:"0",right:"30px"}},[t("el-form",{attrs:{"label-width":"90px","label-position":"left",size:"mini"}},[t("el-form-item",{staticStyle:{width:"200px",display:"inline-block"},attrs:{label:"设置查询引擎:"}},[t("el-select",{attrs:{disabled:3==e.form.engineId||e.engineDisabled},model:{value:e.form.query_engine,callback:function(t){e.$set(e.form,"query_engine",t)},expression:"form.query_engine"}},e._l(e.storageEngineList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),t("el-form-item",{staticStyle:{width:"200px",display:"inline-block","margin-left":"15px"},attrs:{"label-width":"65px",label:"输出引擎:"}},[t("el-select",{attrs:{size:"mini",disabled:e.engineDisabled},on:{change:e.engineChange},model:{value:e.form.engineId,callback:function(t){e.$set(e.form,"engineId",t)},expression:"form.engineId"}},[t("el-option",{attrs:{label:"spark",value:1}}),t("el-option",{attrs:{label:"SR broker load",value:3}})],1)],1)],1)],1),t("div",{staticClass:"ctr"},[t("el-button",{staticClass:"format-btn",attrs:{type:"text"},on:{click:e.check}},[e._v("语法检查")]),t("el-button",{staticClass:"format-btn",attrs:{type:"text"},on:{click:e.format}},[e._v("格式化")]),t("span",{staticClass:"el-icon-full-screen",staticStyle:{"margin-left":"10px"},attrs:{title:"全屏编写"},on:{click:e.fullScreen}})],1),t("div",{staticClass:"form_content"},[t("div",{staticClass:"code_out"},[t("codeEditor",{ref:"codeEditor",attrs:{isLock:3==e.form.engineId?"nocursor":!e.jobNodeLock,hasFormat:!0,placeholder:"请编写sql语句"},model:{value:e.form.input_input_content,callback:function(t){e.$set(e.form,"input_input_content",t)},expression:"form.input_input_content"}})],1)])],1),t("div",{staticClass:"right"},[t("div",{staticClass:"attribute",on:{click:e.openDrawer}},[e._v("属性配置")])]),t("el-drawer",{attrs:{title:"属性配置",visible:e.drawer,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[t("attribute",{ref:"attribute",attrs:{isDisabled:!e.jobNodeLock,jobNodeData:e.jobNodeData,form:e.form},on:{dataChange:e.dataChange}})],1),t("div",{staticClass:"ds_dialog"},[t("el-dialog",{attrs:{title:"sql输入",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("codeEditor",{ref:"screeCodeEditor",attrs:{isLock:!e.jobNodeLock,hasCheck:{isShow:!0,type:1},placeholder:"请编写sql语句"},model:{value:e.form.input_input_content,callback:function(t){e.$set(e.form,"input_input_content",t)},expression:"form.input_input_content"}})],1)],1)],1)}),[],!1,null,"81b3efae",null).exports),pe={props:["jobNodeData","form","isDisabled"],data:function(){return{isLoading:!1,node:"",dialogVisible:!1,relyOnEdit:{},activeNames:["basicAtttibute","priority","outputConfig","SYMBIOSIS","sysRun"],data:{priorityConfig:"中",isOpenOutHours:0,outHours:1,jobNodeInfo:{name:"",createPerName:""},jobNodeLayConfigDtos:[]},priorityList:[{label:"高",value:"高"},{label:"中",value:"中"},{label:"低",value:"低"}],jobOut:[],listDbsAndTablesList:[],props:{multiple:!0,value:"id"},conditionNammeList:[],countOps:[],statusOps:[]}},methods:{routeType:function(){var e=this;this.$API.get(this.$URL.routeType,{},(function(t){if(0==t.code){e.conditionNammeList=t.data;var a=e.conditionNammeList.find((function(e){return"count"==e.nameEn})),o=e.conditionNammeList.find((function(e){return"status"==e.nameEn}));e.countOps=a.ops,e.statusOps=o.ops}else e.$message.error(t.code)}))},handleChange:function(e){e&&(this.data.jobOutPutTableIds=e.map((function(e){return e[e.length-1]})),this.data.jobOut=this.jobOut)},listDbsAndTables:function(){var e=this;this.$API.get(this.$URL.listDbsAndTables+"?procId="+this.$route.query.id,{},(function(t){0==t.code?(e.listDbsAndTablesList=t.data,e.jobOut=e.form.jobOut||[],e.data.jobOutPutTableIds=e.jobOut.map((function(e){return e[e.length-1]}))):e.$message.error(t.msg)}))},changeType:function(e,t){this.$set(t.row,"operationNamme","="),this.$set(t.row,"conditionValue","0")},addParam:function(){this.isDisabled||this.data.nodeParam.push({key:"",value:""})},removeParam:function(e){this.isDisabled||this.data.nodeParam.remove(e.row)},remove:function(e){this.isDisabled||this.data.jobNodeLayConfigDtos.remove(e.row)},fixCascader:function(){for(var e=document.querySelectorAll(".el-cascader .el-input--suffix .el-input__inner"),t=0;t<e.length;t++)e[t].setAttribute("placeholder","")}},mounted:function(){this.listDbsAndTables(),this.fixCascader(),this.routeType()},watch:{jobNodeData:{handler:function(e){this.node=e},deep:!0},data:{handler:function(e){this.$emit("dataChange",e)},deep:!0},form:{handler:function(e){var t=this;this.$nextTick((function(){t.data=Object.assign(t.data,e),t.data.nodeParam=t.data.nodeParam?t.data.nodeParam:[]}))},deep:!0,immediate:!0}}},me=(a("ca9f"),Object(c.a)(pe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"process_ds_attribute"},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"ruleForm",attrs:{model:e.data,"label-width":"120px","label-position":"left"}},[t("el-collapse-item",{attrs:{title:"基本属性",name:"basicAtttibute"}},[t("div",{staticClass:"section"},[t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务名称："+e._s(e.data.jobNodeInfo.name))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务类型：sql计算")]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("责任人："+e._s(e.data.jobNodeInfo.createPerName))])])]),t("el-collapse-item",{attrs:{name:"priority"}},[t("template",{slot:"title"},[e._v("\n                调度配置\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用于多个平级任务运行时的优先级",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"调度优先级"}},[t("el-select",{attrs:{disabled:e.isDisabled,filterable:""},model:{value:e.data.priorityConfig,callback:function(t){e.$set(e.data,"priorityConfig",t)},expression:"data.priorityConfig"}},e._l(e.priorityList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-checkbox",{attrs:{disabled:e.isDisabled,"true-label":1,"false-label":0},model:{value:e.data.isOpenOutHours,callback:function(t){e.$set(e.data,"isOpenOutHours",t)},expression:"data.isOpenOutHours"}},[e._v("是否设置超时")]),e.data.isOpenOutHours?t("el-form-item",{attrs:{label:"超时时间"}},[t("el-input-number",{attrs:{disabled:e.isDisabled,min:1,max:1440},model:{value:e.data.outHours,callback:function(t){e.$set(e.data,"outHours",t)},expression:"data.outHours"}}),t("span",{staticStyle:{"margin-left":"12px"}},[e._v("分钟")])],1):e._e()],1)],2),t("el-collapse-item",{attrs:{name:"sysRun"}},[t("template",{slot:"title"},[e._v("\n                运行参数\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"任务运行时需要设置的参数",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-table",{attrs:{data:e.data.nodeParam,size:"mini",width:"100"}},[t("el-table-column",{attrs:{label:"参数名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".key",rules:{required:!0,message:"请输入参数名称",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数名称"},model:{value:a.row.key,callback:function(t){e.$set(a.row,"key",t)},expression:"scope.row.key"}})],1)]}}])}),t("el-table-column",{attrs:{label:"参数值或者表达式",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".value",rules:{required:!0,message:"请输入参数值或者表达式",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数值或者表达式"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作",align:"right","header-align":"right",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{disabled:e.isDisabled,type:"text",size:"small"},on:{click:function(t){return e.removeParam(a)}}},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"add_new",attrs:{type:"text"},on:{click:e.addParam}},[e._v("+ 添加参数")])],1)],2),t("el-collapse-item",{attrs:{name:"outputConfig",title:"输出设置"}},[t("div",{staticClass:"section"},[t("el-form-item",{attrs:{label:"任务输出"}},[t("el-cascader",{attrs:{placeholder:"请选择",filterable:"",clearable:"",disabled:e.isDisabled,props:e.props,options:e.listDbsAndTablesList},on:{change:e.handleChange},model:{value:e.jobOut,callback:function(t){e.jobOut=t},expression:"jobOut"}})],1)],1)]),t("el-collapse-item",{attrs:{name:"SYMBIOSIS"}},[t("template",{slot:"title"},[e._v("\n                依赖配置\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"依赖配置时任务在运行时需要依赖的资源、函数、上游父节点的配置",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-table",{attrs:{size:"mini",data:e.data.jobNodeLayConfigDtos}},[t("el-table-column",{attrs:{label:"上游节点","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{position:"relative",top:"-6px"}},[e._v(e._s(a.row.upNodeName))])]}}])}),t("el-table-column",{attrs:{label:"判断类型",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".configType",rules:{required:!0,message:"请选择判断类型",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},on:{change:function(t){return e.changeType(t,a)}},model:{value:a.row.configType,callback:function(t){e.$set(a.row,"configType",t)},expression:"scope.row.configType"}},e._l(e.conditionNammeList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)]}}])}),t("el-table-column",{attrs:{label:"判断对象",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.configType?t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".outputTableId",rules:{required:!0,message:"请选择判断对象",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:a.row.outputTableId,callback:function(t){e.$set(a.row,"outputTableId",t)},expression:"scope.row.outputTableId"}},e._l(a.row.tabeleNameList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".operationNamme",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:a.row.operationNamme,callback:function(t){e.$set(a.row,"operationNamme",t)},expression:"scope.row.operationNamme"}},e._l(e.statusOps,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]}}])}),t("el-table-column",{attrs:{label:"取值范围",width:"180","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.configType?t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".operationNamme",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-input",{staticClass:"number",attrs:{disabled:e.isDisabled,type:"number",min:"0",placeholder:"请输入自然数",onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}"},model:{value:a.row.conditionValue,callback:function(t){e.$set(a.row,"conditionValue",t)},expression:"scope.row.conditionValue"}},[t("el-select",{staticStyle:{width:"55px"},attrs:{slot:"prepend",disabled:e.isDisabled,placeholder:"请选择"},slot:"prepend",model:{value:a.row.operationNamme,callback:function(t){e.$set(a.row,"operationNamme",t)},expression:"scope.row.operationNamme"}},e._l(e.countOps,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1):t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".conditionValue",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:a.row.conditionValue,callback:function(t){e.$set(a.row,"conditionValue",t)},expression:"scope.row.conditionValue"}},[t("el-option",{attrs:{label:"成功",value:"0"}}),t("el-option",{attrs:{label:"失败",value:"1"}})],1)],1)]}}])})],1)],1)],2)],1)],1)],1)}),[],!1,null,null,null).exports);function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ge(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ve(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var ye={props:["dataProcessTaskToChangeJobNodeData"],components:{codeEditor:q.a,attribute:me},data:function(){return{jobNodeLock:1,hasFormat:!0,jobNodeData:"",isLoading:!1,drawer:!1,dialogVisible:!1,form:{query_engine:1,sql_statment:"",jobNodeInfo:{name:"",createPerName:""}},storageEngineList:[],engineDisabled:!1}},methods:{fullScreen:function(){var e=this;this.dialogVisible=!0,this.$nextTick((function(){e.$refs.screeCodeEditor.code=e.$refs.codeEditor.code,setTimeout((function(){e.$refs.screeCodeEditor.$refs.codemirror.codemirror.refresh()}),10)}))},format:function(){this.$refs.codeEditor.format()},check:function(){var e=this,t={dbType:3,sql:this.form.sql_statment};this.$API.post(this.$URL.searchCheckSql,t,(function(t){0==t.code?e.$message.success("语法检查合法"):e.$message.error(t.msg)}))},openDrawer:function(){this.drawer=!0},dataChange:function(e){Object.assign(this.form,e)},nodelistOutTable:function(e){var t=this;this.isLoading=!0,this.$API.get(this.$URL.nodelistOutTable+"/"+e.upNodeId,{},(function(a){t.isLoading=!1,0==a.code?t.$set(e,"tabeleNameList",a.data):t.$message.error(a.msg)}))},lock:function(){var e=this,t={id:this.jobNodeData.id,jobNodeLock:this.jobNodeLock?0:1};this.$API.post(this.$URL.jobNodeLock,t,(function(t){0==t.code?e.jobNodeLock=e.jobNodeLock?0:1:e.$message.error(t.msg)}))},getNodeInfo:function(){var e=this;this.$API.get(this.$URL.getJobNodeInfoInfoByKeyAndJobId+"/"+this.jobNodeData.id,{},(function(t){if(0==t.code){if(e.jobNodeLock=JSON.parse(t.data.jobNodeInfo.jobNodeLock),t.data.jobNodeLayConfigDtos&&t.data.jobNodeLayConfigDtos.length>0){var a,o=ge(t.data.jobNodeLayConfigDtos);try{for(o.s();!(a=o.n()).done;){var i=a.value;e.nodelistOutTable(i)}}catch(e){o.e(e)}finally{o.f()}}e.form=Object.assign(e.form,t.data),e.jobNodeData.COPYING&&(e.form.jobNodeInfo.name="--",e.form.jobNodeInfo.createPerName="--"),e.form.query_engine=e.form.query_engine?e.form.query_engine:1,e.engineDisabled=!!t.data.query_engine}else e.$message.error(t.msg)}))},onConfirm:function(e){var t=this,a={jobNodeLock:e,id:this.jobNodeData.id,name:"--"==this.form.jobNodeInfo.name?this.jobNodeData.name:this.form.jobNodeInfo.name,procId:this.$route.query.id,typeId:2,jobNodeConfig:be({},this.form),jobNodeLayConfigDtoList:this.form.jobNodeLayConfigDtos};this.$refs.attribute.$refs.ruleForm.validate((function(e){e?t.jobNodeData.COPYING?o.a.$emit("copySaveJobNodeConfig",{params:a,job:t.jobNodeData}):(t.isLoading=!0,t.$API.post(t.$URL.saveJobNodeConfig,a,(function(e){t.isLoading=!1,0==e.code?(t.$message.success("保存成功"),t.getNodeInfo(),t.engineDisabled=!0,t.drawer=!1):t.$message.error(e.msg)}))):t.$message.warning("属性配置尚有必选项没有填写")}))},confConnectListSorageEngine:function(){var e=this;this.isLoading=!0,this.$API.get(this.$URL.confConnectListSorageEngine,{requstId:3},(function(t){e.isLoading=!1,0==t.code?e.storageEngineList=t.data:e.$message.error(t.msg)}))}},mounted:function(){var e=this;o.a.$off("workInfoUpdata"),o.a.$on("workInfoUpdata",(function(t){t.copyCom&&(e.jobNodeData.COPYING=!1),e.getNodeInfo(),e.confConnectListSorageEngine()}))},watch:{dataProcessTaskToChangeJobNodeData:{handler:function(e){e&&this.$parent.name==e.id+""&&(this.jobNodeData=e,this.getNodeInfo(),this.confConnectListSorageEngine())},deep:!0,immediate:!0}}},_e=(a("0eef"),a("0420"),Object(c.a)(ye,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_process_task_output job"},[t("div",{staticClass:"left"},[t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",disabled:!e.jobNodeLock,icon:"el-icon-info",title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(0)},confirm:function(t){return e.onConfirm(0)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px",position:"sticky",top:"10px"},attrs:{slot:"reference",disabled:!e.jobNodeLock,type:"primary",size:"mini"},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存并解锁")])],1),t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",disabled:!e.jobNodeLock,icon:"el-icon-info",title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(1)},confirm:function(t){return e.onConfirm(1)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px",position:"sticky",top:"10px","margin-left":"10px"},attrs:{slot:"reference",disabled:!e.jobNodeLock,type:"primary",size:"mini"},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存")])],1),t("el-button",{staticStyle:{"font-size":"12px",position:"sticky",top:"10px","margin-left":"10px"},attrs:{size:"mini"},on:{click:e.lock}},[e._v(e._s(e.jobNodeLock?"解锁":"上锁"))]),t("div",{staticClass:"storage_engine_type",staticStyle:{position:"absolute",top:"0",right:"30px"}},[t("el-form",{attrs:{"label-width":"100px","label-position":"left",size:"mini"}},[t("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"设置查询引擎:"}},[t("el-select",{attrs:{disabled:e.engineDisabled},model:{value:e.form.query_engine,callback:function(t){e.$set(e.form,"query_engine",t)},expression:"form.query_engine"}},e._l(e.storageEngineList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)],1)],1),t("div",{staticClass:"ctr"},[t("el-button",{staticClass:"format-btn",attrs:{type:"text"},on:{click:e.check}},[e._v("语法检查")]),t("el-button",{staticClass:"format-btn",attrs:{type:"text"},on:{click:e.format}},[e._v("格式化")]),t("span",{staticClass:"el-icon-full-screen",staticStyle:{"margin-left":"10px"},attrs:{title:"全屏编写"},on:{click:e.fullScreen}})],1),t("div",{staticClass:"form_content"},[t("div",{staticClass:"code_out"},[t("codeEditor",{ref:"codeEditor",attrs:{isLock:!e.jobNodeLock,hasFormat:e.hasFormat,placeholder:"请编写sql语句"},model:{value:e.form.sql_statment,callback:function(t){e.$set(e.form,"sql_statment",t)},expression:"form.sql_statment"}})],1)])],1),t("div",{staticClass:"right"},[t("div",{staticClass:"attribute",on:{click:e.openDrawer}},[e._v("属性配置")])]),t("div",{staticClass:"ds_dialog"},[t("el-dialog",{attrs:{title:"sql输入",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("codeEditor",{ref:"screeCodeEditor",attrs:{isLock:!e.jobNodeLock,hasCheck:{isShow:!0,type:3},placeholder:"请编写sql语句"},model:{value:e.form.sql_statment,callback:function(t){e.$set(e.form,"sql_statment",t)},expression:"form.sql_statment"}})],1)],1),t("el-drawer",{attrs:{title:"属性配置",visible:e.drawer,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[t("attribute",{ref:"attribute",attrs:{isDisabled:!e.jobNodeLock,jobNodeData:e.jobNodeData,form:e.form},on:{dataChange:e.dataChange}})],1)],1)}),[],!1,null,"23fea436",null).exports),ke=a("5797"),xe=a("0ecf");function we(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Te(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}var Le={components:{dragZone:xe.dragZone,dragHandle:xe.dragHandle,dragContent:xe.dragContent},computed:{wsUrl:function(){return this.$store.state.permission.wsUrl}},data:function(){return{workFlowData:{nodes:[],edges:[]},topShowData:{},flowParams:null,isDrawer:!1,isLoading:!1,isReturnButtonShow:!1,dialogVisible:!1,nodeLog:"",logHtml:"",isJson:!0,nodeName:"",stateName:"",nodeStatu:["失败","成功","执行中","当前版本未执行"],jobLogType:0,timer:null,infoDom:"",scrollTop:0,clientHeight:0,scrollHeight:0,isBottom:!1,jobType:"",clickNodeId:"",fullLog:""}},methods:{open:function(e,t){var a=e.id,o=e.name;this.isDrawer=!0,this.jobType=t,this.workFlowData.jobLogType=t,this.nodeName=o,this.flowhandle(a,t)},scheduLogHandle:function(e){window.open(window.location.origin+"/#/".concat(2==e?"taskLog/ManualLog":"taskLog/autoLog","?projectId=").concat(this.$route.query.id,"&jobName=").concat(1==this.topShowData.jobLogType?this.topShowData.depName:this.topShowData.jobName,"&jobType=").concat(this.jobType))},flowhandle:function(e,t){var a=this;this.$API.get(this.$URL.getWorkflowRecent+"/"+e+"/"+t,{},(function(e){0==e.code&&e.data&&(a.flowParams=e.data,2==t?a.getJobRunHistoryInfo():a.listById(e.data.runId,t))}))},getJobRunHistoryInfo:function(e){var t=this;this.isLoading=!0,this.$API.get(this.$URL.getJobRunHistoryGetNodeRunInfo,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.flowParams),(function(e){if(0==e.code){if(0==t.jobLogType)t.workFlowData=e.data.jobNodeRunHistories[0]||{},t.topShowData=e.data.jobNodeRunHistories[0]||{},t.topShowData.jobName=e.data.name,t.jobType=0;else if(t.workFlowData=e.data.jobHistoryList[0]||{},t.topShowData=e.data.jobHistoryList[0]||{},JSON.parse(t.workFlowData.nodeParams)){var a=JSON.parse(t.workFlowData.nodeParams);t.workFlowData.nodeStates;t.workFlowData.nodeParams=a,t.isReturnButtonShow=!0}t.jobLogType=0,t.fullLog=t.workFlowData.fullLog;try{"object"==Object(E.a)(JSON.parse(t.workFlowData.log))&&(t.isJson=!0,t.logHtml=JSON.parse(t.workFlowData.log))}catch(e){t.isJson=!1,t.logHtml=t.workFlowData.log}}else t.$message.error(e.msg);t.isLoading=!1}))},listById:function(e,t){var a=this;this.isLoading=!0,this.$API.get(this.$URL.listById+"/"+e+"/"+t,{},(function(e){if(0==e.code){if(a.isReturnButtonShow=!1,e.data&&e.data.length>0){var t=JSON.parse(e.data[0].nodeParams);e.data[0].nodeStates;a.jobLogType=e.data[0].jobLogType,a.topShowData=a.workFlowData=e.data[0],a.workFlowData.nodeParams=t}}else a.$message(reslut.msg);a.isLoading=!1}))},socket:function(e){"WebSocket"in window?(0==this.$route.query.jobLogType?this.ws=new WebSocket(this.wsUrl+"dataDevelopment/workflow/status/"+e+"/"+this.$route.query.oozieJobId+"?token="+this.$store.state.old.admin_info.token):this.ws=new WebSocket(this.wsUrl+"dataDevelopment/workflowLay/status/"+e+"/"+this.$route.query.oozieJobId+"?token="+this.$store.state.old.admin_info.token),this.ws.onopen=function(){},this.ws.onerror=function(){},this.ws.onclose=function(){},this.ws.onmessage=this.wsMessage):this.$message.error("您的浏览器不支持 WebSocket，请更换浏览器，否则此页面无法正常运行")},changeNodeStates:function(e,t){for(var a in t){if(null!=e&&e.edges){var o,i=we(e.edges);try{for(i.s();!(o=i.n()).done;){var r=o.value;a==r.srcNodeId&&(r.type=0==t[a].status?"error":1==t[a].status?"success":2==t[a].status?"active":5==t[a].status?"stop":"default")}}catch(e){i.e(e)}finally{i.f()}}if(null!=e&&e.nodes){var n,s=we(e.nodes);try{for(s.s();!(n=s.n()).done;){var l=n.value;a==l.id&&(l.state=0==t[a].status?"error":1==t[a].status?"success":2==t[a].status?"active":5==t[a].status?"stop":"default",l.isOutHours=t[a].isOutHours)}}catch(e){s.e(e)}finally{s.f()}}}},wsMessage:function(e){var t=this;if("连接成功！"!=e.data){var a;if(this.isReturnButtonShow)a=JSON.parse(e.data).nodeList.find((function(e){return e.id==t.clickNodeId})).nodeList;else a=JSON.parse(e.data).nodeList;var o,i={},r=we(a);try{for(r.s();!(o=r.n()).done;){var n=o.value;i[n.id]={status:null==n?void 0:n.status,isOutHours:n.isOutHours}}}catch(e){r.e(e)}finally{r.f()}this.changeNodeStates(this.workFlowData.nodeParams,i)}},returnJobFlow:function(){1==this.$route.query.jobLogType&&1!==this.workFlowData.jobLogType?this.listById():this.$router.go(-1)},viewLog:function(){this.workFlowData.jobLogType=0}},mounted:function(){},beforeDestroy:function(){this.ws.close()},watch:{$route:function(e){}}},Ne=(a("513f"),Object(c.a)(Le,(function(){var e=this,t=e._self._c;return t("div",[t("el-drawer",{attrs:{title:"运行日志",visible:e.isDrawer,modal:!1,size:"40%"},on:{"update:visible":function(t){e.isDrawer=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"task_log_log_info"},[t("div",{staticClass:"go-back"},[t("span",{staticClass:"back-btn",on:{click:function(t){return e.scheduLogHandle(1)}}},[e._v("历史调度日志")]),t("span",{staticClass:"back-btn",on:{click:function(t){return e.scheduLogHandle(2)}}},[e._v("历史手动日志")])]),t("div",{staticClass:"top-detail"},[t("p",{staticClass:"name"},[1===e.topShowData.jobLogType?t("span",{staticClass:"sub-title"},[e._v("【"+e._s(0===e.workFlowData.jobLogType?"作业流":1===e.workFlowData.jobLogType?"作业流依赖":"任务节点")+"】"+e._s(e.topShowData.depName||e.nodeName)+"的日志")]):t("span",{staticClass:"sub-title"},[e._v("【"+e._s(0===e.workFlowData.jobLogType?"作业流":1===e.workFlowData.jobLogType?"作业流依赖":"任务节点")+"】"+e._s(e.topShowData.name||e.topShowData.jobName||e.nodeName)+"的日志")]),0===e.topShowData.jobLogType&&e.topShowData.reRunType>0?t("span",{staticClass:"status"},[e._v(e._s(e.topShowData.reRunType>0?"重跑":""))]):e._e()]),t("p",{staticClass:"status-detail"},[2!=e.workFlowData.jobLogType?t("span",[e._v("运行状态："+e._s(e.topShowData.stateName||"--")+" "),e.topShowData.isOutHours?t("span",{staticClass:"error-status"},[e._v("超时")]):e._e()]):e._e(),2==e.workFlowData.jobLogType?t("span",[e._v("运行状态："+e._s(0==e.workFlowData.state?"失败":1==e.workFlowData.state?"成功":2==e.workFlowData.state?"执行中":5==e.workFlowData.state?"停止":"未执行"))]):e._e(),t("span",[e._v("运行时间："+e._s(e.topShowData.beginTime||e.topShowData.time))]),t("span",[e._v("运行耗时(S)："+e._s(e.topShowData.costSecond))])])]),e.isLoading?e._e():t("drag-zone",{staticClass:"zt-drag-container log-content"},[t("drag-content",{staticClass:"right zt-scrollbar",staticStyle:{padding:"20px"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.flowParams,expression:"flowParams"}]},[0==e.workFlowData.jobLogType?t("div",{staticClass:"show-log",domProps:{innerHTML:e._s(e.topShowData.log||"暂无运行记录")}}):1==e.workFlowData.jobLogType?t("div",{staticClass:"show-log",domProps:{innerHTML:e._s(e.workFlowData.log||"暂无运行记录")}}):t("div",[e.fullLog?t("div",{staticClass:"show-log",domProps:{innerHTML:e._s(e.fullLog)}}):e._e(),e.isJson&&!e.fullLog?t("div",{staticClass:"show-log"},e._l(e.logHtml,(function(a,o,i){return t("div",{key:i},["consoleUrl"!==o?t("div",[e._v("\r\n                  "+e._s(o)+":"),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a))])]):e._e()])})),0):t("div",{staticClass:"show-log",domProps:{innerHTML:e._s(e.logHtml)}})])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.flowParams,expression:"!flowParams"}]},[e._v("暂无运行记录")])])],1)],1)])],1)}),[],!1,null,"75d37642",null).exports),Ie=(a("a1c3"),{props:["node","attrFrom","isDisabled"],components:{},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},dateValue:[],dialogVisible:!1,nodeData:"",nodeForm:{jobInfo:{createPerName:"",name:""}},activeNames:["basicAtttibute","processParamas","priority"],ruleForm:{timeFormat:"",cronType:"1",cronUrl:"",scheduleOrInterval:"",schedule_type:"",regulation:"hour",week:"",day:"",hour:"",minute:"",isDurTime:0,isRetry:0,reTryMax:1,reTryInterval:1,startTime:"",endTime:"",isOpenTime:0,sysStartTime:"",sysEndTime:"",sysDurTime:"",nodeParam:[],sysdateValue:[]},runStyle:[],scheduleStyle:[],cronTypeList:[{value:"1",name:"手动配置"},{value:"2",name:"crontab配置"}],weeks:[{label:"周一",value:"1"},{label:"周二",value:"2"},{label:"周三",value:"3"},{label:"周四",value:"4"},{label:"周五",value:"5"},{label:"周六",value:"6"},{label:"周日",value:"7"}]}},methods:{dateChange:function(e){this.ruleForm.startTime=e[0],this.ruleForm.endTime=e[1]},sysDateChange:function(e){this.ruleForm.sysStartTime=(null==e?void 0:e.length)>0?e[0]:"",this.ruleForm.sysEndTime=(null==e?void 0:e.length)>0?e[1]:""},reguChange:function(){this.ruleForm.regulation="hour",this.ruleForm.hour="",this.ruleForm.minute=""},getRunStyle:function(){var e=this;this.$API.get(this.$URL.getJobNodeInfoListSchedules,{},(function(t){if(0==t.code){e.runStyle=[],e.scheduleStyle=[];for(var a=0;a<t.data.runStyle.length;a++)e.runStyle.push({value:t.data.runStyle[a].id,name:t.data.runStyle[a].name});for(var o=0;o<t.data.scheduleStyle.length;o++)e.scheduleStyle.push({value:t.data.scheduleStyle[o].id,name:t.data.scheduleStyle[o].name});e.listWorkFlowConfig()}else e.$message.error(t.msg)}))},listWorkFlowConfig:function(){var e=this,t=this.nodeData.realId?this.nodeData.realId:this.nodeData.id;this.$API.get(this.$URL.listWorkFlowConfig+"/"+t,{},(function(t){if(0==t.code){if(0!=t.data.length){var a,o=function(e){return t.data.find((function(t){return t.key==e}))},i=t.data.find((function(e){return"cronType"==e.key}));e.ruleForm.cronType=i.value;var r=t.data.find((function(e){return"cronUrl"==e.key}));e.ruleForm.cronUrl=null==r?void 0:r.value;var n=t.data.find((function(e){return"schedule_type"==e.key}));e.ruleForm.schedule_type=n.value-0;var s=o("scheduleOrInterval");(null==s||null===(a=s.value)||void 0===a?void 0:a.length)>0&&(e.ruleForm.scheduleOrInterval=s.value-0);var l=t.data.find((function(e){return"expression"==e.key})),c=JSON.parse(l.value);if(c){e.ruleForm.regulation=c.type;var d=e.ruleForm;for(var u in c)for(var f in d)u==f&&(d[f]=c[u])}var p=o("nodeParam"),m=o("endTime"),h=o("isDurTime"),b=o("isRetry"),g=o("reTryInterval"),v=o("startTime"),y=o("reTryMax"),_=(o("sysEndTimegetArrKey"),o("isOpenTime")),k=o("sysStartTime"),x=o("sysEndTime"),w=o("sysDurTime"),T=o("timeFormat").value;e.ruleForm.timeFormat=T,e.ruleForm.nodeParam=JSON.parse(p.value)||[],e.ruleForm.endTime=m&&m.value?m.value:"",e.ruleForm.isDurTime=h&&h.value?Number(h.value):0,e.ruleForm.isRetry=b&&b.value?Number(b.value):0,e.ruleForm.reTryInterval=g&&g.value?Number(g.value):1,e.ruleForm.startTime=v&&v.value?v.value:"",e.ruleForm.reTryMax=y&&y.value?Number(y.value):1,e.ruleForm.isOpenTime=null!=_&&_.value?Number(_.value):0,e.ruleForm.sysStartTime=null!=k&&k.value?k.value:"",e.ruleForm.sysEndTime=null!=x&&x.value?x.value:"",e.ruleForm.sysDurTime=null!=w&&w.value?Number(w.value):"",v&&v.value&&m&&m.value?e.dateValue=[v.value,m.value]:e.dateValue=[],null!=k&&k.value&&null!=x&&x.value?e.ruleForm.sysdateValue=[k.value,x.value]:e.ruleForm.sysdateValue=[]}}else e.$message.error(t.msg)}))},addParam:function(){this.isDisabled||this.ruleForm.nodeParam.push({key:"",value:""})},removeParam:function(e){this.ruleForm.nodeParam.remove(e.row)}},mounted:function(){this.getRunStyle()},watch:{ruleForm:{handler:function(e){var t;1==this.ruleForm.schedule_type?1==this.ruleForm.scheduleOrInterval?"hour"==this.ruleForm.regulation?t={minute:this.ruleForm.minute,type:this.ruleForm.regulation}:"day"==this.ruleForm.regulation?t={hour:this.ruleForm.hour,minute:this.ruleForm.minute,type:this.ruleForm.regulation}:"week"==this.ruleForm.regulation?t={week:this.ruleForm.week,hour:this.ruleForm.hour,minute:this.ruleForm.minute,type:this.ruleForm.regulation}:"month"==this.ruleForm.regulation&&(t={day:this.ruleForm.day,hour:this.ruleForm.hour,minute:this.ruleForm.minute,type:this.ruleForm.regulation}):"hour"==this.ruleForm.regulation?t={minute:this.ruleForm.minute,type:this.ruleForm.regulation}:"day"==this.ruleForm.regulation&&(t={hour:this.ruleForm.hour,type:this.ruleForm.regulation}):t=null;var a=this.ruleForm,o=a.isDurTime,i=a.isRetry,r=a.reTryMax,n=a.reTryInterval,s=a.startTime,l=a.endTime,c=a.isOpenTime,d=a.sysStartTime,u=a.sysEndTime,f=a.sysDurTime,p=a.timeFormat,m=a.nodeParam,h={scheduleOrInterval:this.ruleForm.scheduleOrInterval,schedule_type:this.ruleForm.schedule_type,cronType:this.ruleForm.cronType,cronUrl:this.ruleForm.cronUrl,expression:JSON.stringify(t),isDurTime:o,isRetry:i,reTryMax:r,reTryInterval:n,startTime:s,endTime:l,isOpenTime:c,sysStartTime:d,sysEndTime:u,sysDurTime:f,timeFormat:p,nodeParam:m};this.$emit("attributeDataChange",h)},deep:!0,immediate:!0},attrFrom:{handler:function(e){this.nodeForm=e},deep:!0,immediate:!0},node:{handler:function(e){this.nodeData=JSON.parse(JSON.stringify(e))},deep:!0,immediate:!0}}}),De=(a("dff5"),Object(c.a)(Ie,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"process_ds_attribute"},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"150px","label-position":"left"}},[t("el-collapse-item",{attrs:{title:"基本属性",name:"basicAtttibute"}},[t("div",{staticClass:"section"},[t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务名称："+e._s(e.nodeForm.jobInfo.name))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("类型：作业流")]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("责任人："+e._s(e.nodeData.lockPerName||e.nodeForm.jobInfo.createPerName))])])]),t("el-collapse-item",{attrs:{name:"priority"}},[t("template",{slot:"title"},[e._v("\n          调度配置\n          "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用于多个平级任务运行时的优先级",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"调度方式"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择运行方式"},model:{value:e.ruleForm.schedule_type,callback:function(t){e.$set(e.ruleForm,"schedule_type",e._n(t))},expression:"ruleForm.schedule_type"}},e._l(e.runStyle,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),"1"==e.ruleForm.schedule_type?t("el-form-item",{attrs:{label:"指定调度时间范围"}},[t("el-checkbox",{attrs:{disabled:e.isDisabled,"true-label":1,"false-label":0},model:{value:e.ruleForm.isDurTime,callback:function(t){e.$set(e.ruleForm,"isDurTime",t)},expression:"ruleForm.isDurTime"}})],1):e._e(),1==e.ruleForm.isDurTime&&1==e.ruleForm.schedule_type?t("el-date-picker",{staticStyle:{"margin-bottom":"18px"},attrs:{disabled:e.isDisabled,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.dateChange},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):e._e(),"1"==e.ruleForm.schedule_type?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"配置方式"}},[t("el-radio-group",{attrs:{disabled:e.isDisabled},on:{change:e.reguChange},model:{value:e.ruleForm.cronType,callback:function(t){e.$set(e.ruleForm,"cronType",t)},expression:"ruleForm.cronType"}},e._l(e.cronTypeList,(function(a,o){return t("el-radio",{key:o+1,attrs:{label:a.value}},[e._v(e._s(a.name)+"\n              ")])})),1)],1):e._e(),"2"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"crontab表达式"}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入crontab表达式"},model:{value:e.ruleForm.cronUrl,callback:function(t){e.$set(e.ruleForm,"cronUrl",t)},expression:"ruleForm.cronUrl"}})],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"循环方式"}},[t("el-radio-group",{attrs:{disabled:e.isDisabled},on:{change:e.reguChange},model:{value:e.ruleForm.scheduleOrInterval,callback:function(t){e.$set(e.ruleForm,"scheduleOrInterval",t)},expression:"ruleForm.scheduleOrInterval"}},e._l(e.scheduleStyle,(function(a,o){return t("el-radio",{key:o+1,attrs:{label:a.value}},[e._v(e._s(a.name)+"\n              ")])})),1)],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"2"==e.ruleForm.scheduleOrInterval?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"调度周期"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择调度周期"},model:{value:e.ruleForm.regulation,callback:function(t){e.$set(e.ruleForm,"regulation",t)},expression:"ruleForm.regulation"}},[t("el-option",{attrs:{label:"时",value:"hour"}}),t("el-option",{attrs:{label:"日",value:"day"}})],1)],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"1"==e.ruleForm.scheduleOrInterval?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"调度周期"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择运行规则"},model:{value:e.ruleForm.regulation,callback:function(t){e.$set(e.ruleForm,"regulation",t)},expression:"ruleForm.regulation"}},[t("el-option",{attrs:{label:"每小时",value:"hour"}}),t("el-option",{attrs:{label:"每日",value:"day"}}),t("el-option",{attrs:{label:"每周",value:"week"}}),t("el-option",{attrs:{label:"每月",value:"month"}})],1)],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"week"==e.ruleForm.regulation&&"1"==e.ruleForm.scheduleOrInterval?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"周",prop:"region"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择周"},model:{value:e.ruleForm.week,callback:function(t){e.$set(e.ruleForm,"week",t)},expression:"ruleForm.week"}},e._l(e.weeks,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"month"==e.ruleForm.regulation&&"1"==e.ruleForm.scheduleOrInterval?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"天",prop:"region"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择天"},model:{value:e.ruleForm.day,callback:function(t){e.$set(e.ruleForm,"day",t)},expression:"ruleForm.day"}},e._l(31,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),"1"!=e.ruleForm.cronType||"1"!=e.ruleForm.schedule_type||"day"!=e.ruleForm.regulation&&"week"!=e.ruleForm.regulation&&"month"!=e.ruleForm.regulation||"1"!=e.ruleForm.scheduleOrInterval?e._e():t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"时",prop:"region"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择时"},model:{value:e.ruleForm.hour,callback:function(t){e.$set(e.ruleForm,"hour",t)},expression:"ruleForm.hour"}},e._l(24,(function(e){return t("el-option",{key:e-1,attrs:{label:e-1,value:e-1}})})),1)],1),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"1"==e.ruleForm.scheduleOrInterval?t("el-form-item",{staticClass:"minute",staticStyle:{width:"70%"},attrs:{label:"分",prop:"region"}},[t("el-input-number",{attrs:{disabled:e.isDisabled,"controls-position":"right",min:0,max:59},model:{value:e.ruleForm.minute,callback:function(t){e.$set(e.ruleForm,"minute",t)},expression:"ruleForm.minute"}})],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"2"==e.ruleForm.scheduleOrInterval&&"hour"==e.ruleForm.regulation?t("el-form-item",{staticClass:"minute",staticStyle:{width:"100%"},attrs:{label:"每隔:",prop:"region"}},[t("el-input-number",{staticStyle:{width:"90px"},attrs:{disabled:e.isDisabled,"controls-position":"right",min:30,max:59},model:{value:e.ruleForm.minute,callback:function(t){e.$set(e.ruleForm,"minute",t)},expression:"ruleForm.minute"}}),e._v(" （分）\n            ")],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"2"==e.ruleForm.scheduleOrInterval&&"day"==e.ruleForm.regulation?t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"每隔:",prop:"region"}},[t("el-select",{staticStyle:{width:"90px",display:"inline-block"},attrs:{disabled:e.isDisabled,placeholder:"请选择小时"},model:{value:e.ruleForm.hour,callback:function(t){e.$set(e.ruleForm,"hour",t)},expression:"ruleForm.hour"}},e._l(24,(function(e){return t("el-option",{key:e-1,attrs:{label:e-1,value:e-1}})})),1),e._v("\n            （时）\n          ")],1):e._e(),t("el-form-item",{attrs:{label:"失败自动重跑"}},[t("el-checkbox",{attrs:{disabled:e.isDisabled,"true-label":1,"false-label":0},model:{value:e.ruleForm.isRetry,callback:function(t){e.$set(e.ruleForm,"isRetry",t)},expression:"ruleForm.isRetry"}})],1),1==e.ruleForm.isRetry?t("div",[t("el-form-item",{attrs:{label:"从失败节点重跑"}},[t("el-checkbox",{attrs:{disabled:e.isDisabled,"true-label":1,"false-label":0},model:{value:e.ruleForm.isRetry,callback:function(t){e.$set(e.ruleForm,"isRetry",t)},expression:"ruleForm.isRetry"}})],1),t("el-form-item",{attrs:{label:"失败自动重跑次数："}},[t("el-input-number",{attrs:{disabled:e.isDisabled,"controls-position":"right",min:1,max:10},model:{value:e.ruleForm.reTryMax,callback:function(t){e.$set(e.ruleForm,"reTryMax",t)},expression:"ruleForm.reTryMax"}})],1),t("el-form-item",{attrs:{label:"失败自动重跑间隔："}},[t("el-input-number",{attrs:{disabled:e.isDisabled,"controls-position":"right",min:1,max:5},model:{value:e.ruleForm.reTryInterval,callback:function(t){e.$set(e.ruleForm,"reTryInterval",t)},expression:"ruleForm.reTryInterval"}}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v("分钟")])],1)],1):e._e()],1)],2),t("el-collapse-item",{attrs:{name:"processParamas"}},[t("template",{slot:"title"},[e._v("\n          运行参数\n          "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"任务运行时需要设置的参数",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-form-item",[t("span",{attrs:{slot:"label"},slot:"label"},[t("span",[e._v("设置动态时间参数\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"可通过${bdp.data.start.time}、${bdp.data.end.time}获取当次调度的开始、结束时间参数值",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1)]),t("el-checkbox",{attrs:{disabled:e.isDisabled,"true-label":1,"false-label":0},model:{value:e.ruleForm.isOpenTime,callback:function(t){e.$set(e.ruleForm,"isOpenTime",t)},expression:"ruleForm.isOpenTime"}})],1),e.ruleForm.isOpenTime?t("div",[t("el-form-item",{staticClass:"sysdate_config",attrs:{"label-width":"250px",label:"设置开始时间、结束时间",prop:"sysdateValue",rules:{required:!0,message:"请设置开始时间、结束时间",trigger:"change"}}},[t("el-date-picker",{staticStyle:{"margin-bottom":"18px",width:"99%"},attrs:{disabled:e.isDisabled,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.sysDateChange},model:{value:e.ruleForm.sysdateValue,callback:function(t){e.$set(e.ruleForm,"sysdateValue",t)},expression:"ruleForm.sysdateValue"}})],1),t("el-form-item",{attrs:{prop:"sysDurTime","label-width":"120px",rules:{required:!0,message:"请输入间隔",trigger:"blur"}}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("span",[e._v("间隔\n                  "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"间隔时间即每次调度后数据开始，结束时间的的递增量",placement:"top-start"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1)]),t("el-input-number",{attrs:{disabled:e.isDisabled,"controls-position":"right",min:.5,max:24,precision:2,step:.5},model:{value:e.ruleForm.sysDurTime,callback:function(t){e.$set(e.ruleForm,"sysDurTime",t)},expression:"ruleForm.sysDurTime"}}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v("小时")])],1),t("el-form-item",{attrs:{label:"指定时间格式","label-width":"120px",prop:"timeFormat"}},[t("el-input",{attrs:{disabled:e.isDisabled,maxlength:"30",placeholder:"例如：yyyy-MM-dd hh:mm:ss"},model:{value:e.ruleForm.timeFormat,callback:function(t){e.$set(e.ruleForm,"timeFormat",t)},expression:"ruleForm.timeFormat"}})],1)],1):e._e(),t("div",[e._v("设置自定义参数：")]),t("el-table",{attrs:{data:e.ruleForm.nodeParam,size:"mini",width:"100"}},[t("el-table-column",{attrs:{label:"参数名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".key",rules:{required:!0,message:"请输入参数名称",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数名称"},model:{value:a.row.key,callback:function(t){e.$set(a.row,"key",t)},expression:"scope.row.key"}})],1)]}}])}),t("el-table-column",{attrs:{label:"参数值或者表达式",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".value",rules:{required:!0,message:"请输入参数值或者表达式",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数值或者表达式"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作",align:"right","header-align":"right",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{disabled:e.isDisabled,type:"text",size:"small"},on:{click:function(t){return e.removeParam(a)}}},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"add_new",on:{click:e.addParam}},[e._v("+ 添加参数")])],1)],2)],1)],1)],1)}),[],!1,null,null,null).exports);function $e(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return Ce(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ce(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Fe={props:["dataProcessTaskToChangeJobNodeData","editableTabsValue"],components:{board:ke.a,logDraw:Ne,attribute:De},computed:{wsUrl:function(){return this.$store.state.permission.wsUrl},userId:function(){return this.$store.state.old.admin_info.userId}},data:function(){return{jobNodeLock:1,test:!1,isEditMenuShow:!1,isEditMeneShowType:-1,isLoading:!1,jobNodeData:"",attrFrom:{jobInfo:{createPerName:"",name:""}},drawer:!1,stopInfacte:!1,runInfacte:!1,attrData:{},boardData:{},activeNode:"",workFlowData:{nodes:[],edges:[]},parenteditableTabsValue:"",isRun:"",isNullRunChange:!1,userIds:[]}},methods:{lock:function(){var e=this,t={id:[this.jobNodeData.jobId||this.jobNodeData.id],lock:this.jobNodeLock?0:1};this.$API.post(this.$URL.workMenuJobInfoLock,t,(function(t){0==t.code?(e.jobNodeLock=e.jobNodeLock?0:1,e.openWorkFlow()):e.$message.error(t.msg)}))},runLog:function(e){var t=2==e?this.activeNode.id:this.attrFrom.jobInfo.id;this.$refs.logDraw.open({id:t,name:this.jobNodeData.name},e)},getIds:function(){var e=this;this.$API.get("/public.json",{},(function(t){e.userIds=t.userIds}))},submitServer:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e=0==t?this.activeNode.id:this.jobNodeData.realId?this.jobNodeData.realId:this.jobNodeData.id,this.$router.push("/dataTaskServer/?workType=".concat(t,"&taskId=").concat(e,"&isStop=").concat(a,"&isUp=").concat(o))},openDrawer:function(){var e=this;this.drawer=!0,this.$nextTick((function(){e.openWorkFlow()}))},getServiceInfacteStates:function(){for(var e=this,t=function(t){e.$API.post(e.$URL.getServiceInfacteStates,{workParameter:e.jobNodeData.id,workType:1,taskType:t},(function(a){0==t?0==a.code&&a.data?e.runInfacte=!0:e.runInfacte=!1:0==a.code&&a.data?e.stopInfacte=!0:e.stopInfacte=!1}))},a=0;a<2;a++)t(a)},changeAttData:function(e){this.attrData=e},boardDataChange:function(e){this.boardData=e},contextmenu:function(e,t,a){var o=this.$refs.edit_menu;document.body.clientHeight-e.clientY-40>o.offsetHeight?o.style.top=e.clientY+5+"px":o.style.top=e.clientY-o.offsetHeight+"px",document.body.clientWidth-e.clientX-20>o.offsetWidth?o.style.left=e.clientX-20+"px":o.style.left=e.clientX-o.offsetWidth+"px",this.jobNodeLock&&(this.isEditMenuShow=!0),this.activeNode=t,this.isEditMeneShowType=a},removeNode:function(){2!=this.isRun?this.$refs.board.removeNode(this.activeNode,this.isEditMeneShowType):this.$message.warning("作业流运行中，不可以删除")},openNode:function(){o.a.$emit("dataProcessTaskToChangeJob",this.activeNode)},workMenuRunNodeJob:function(){var e=this;this.isLoading=!0;var t={id:this.activeNode.id};this.$API.post(this.$URL.workMenuRunNodeJob,t,(function(t){e.isLoading=!1,0==t.code?(e.$message.success("重跑当前节点成功"),e.isRun=2):e.$message.error(t.msg)}))},workMenuRunUpJob:function(){var e=this;this.isLoading=!0;var t={id:this.activeNode.id};this.$API.post(this.$URL.workMenuRunUpJob,t,(function(t){e.isLoading=!1,0==t.code?(e.$message.success("重跑上游成功"),e.isRun=2):e.$message.error(t.msg)}))},workMenuRunDownJob:function(){var e=this;this.isLoading=!0;var t={id:this.activeNode.id};this.$API.post(this.$URL.workMenuRunDownJob,t,(function(t){e.isLoading=!1,0==t.code?(e.$message.success("重跑下游成功"),e.isRun=2):e.$message.error(t.msg)}))},openWorkFlow:function(){var e=this,t={id:this.jobNodeData.realId?this.jobNodeData.realId:this.jobNodeData.id};this.$API.get(this.$URL.openWorkFlow,t,(function(t){0==t.code?(e.attrFrom=t.data,e.jobNodeLock=t.data.jobInfo.jobInfoLock,e.jobNodeData.lockPerName=t.data.jobInfo.lockPerName,t.data.nodes&&t.data.nodes.length>0&&(e.workFlowData.nodes=t.data.nodes,e.workFlowData.edges=t.data.edges,e.workFlowData.nodes=e.workFlowData.nodes.map((function(t){return t.pos_x=t.posX,t.pos_y=t.posY,t.out_ports=[0],t.in_ports=[0],t.type=t.iconClassName=1==t.typeId?"ds":2==t.typeId?"sql":4==t.typeId?"table":8==t.typeId?"checkTask":"jobFlow",e.$set(t,"state",1==t.isNullRun?"runnull":"default"),t})),t.data.edges.filter((function(e){return 0!=e.srcNodeId})),e.workFlowData.edges=e.workFlowData.edges.map((function(e){return e.dst_node_id=e.dstNodeId,e.src_node_id=e.srcNodeId,e.type="default",e})))):e.$message.error(t.msg)}))},tips:function(e){this.$alert("您修改了节点的空跑状态，请先保存后再".concat(e),"提示",{confirmButtonText:"确定"})},runWorkJob:function(){var e=this;if(this.isNullRunChange)this.tips("运行");else{this.isLoading=!0;var t=this.jobNodeData.realId?this.jobNodeData.realId:this.jobNodeData.id;this.$API.post(this.$URL.runWorkJob+"/"+t,{},(function(t){e.isLoading=!1,0==t.code?(e.$message.success("运行成功"),e.isRun=2):e.$message.error(t.msg)}))}},stopWorkJob:function(){var e=this;if(this.isNullRunChange)this.tips("停止");else{var t=this.jobNodeData.realId?this.jobNodeData.realId:this.jobNodeData.id;this.$API.post(this.$URL.stopWorkJob+"/"+t,{},(function(t){0==t.code?e.$message.success("已停止工作"):e.$message.error(t.msg)}))}},onConfirm:function(e){var t=this;this.$refs.attr.$refs.ruleForm.validate((function(a){if(a){t.isLoading=!0;var o=Object.assign({},t.attrData,t.boardData),i=o.edges.map((function(e){return{dstNodeId:e.dst_node_id,srcNodeId:e.src_node_id}})),r=o.nodes.map((function(e){return{id:e.id,name:e.name,typeId:"ds"==e.type?1:"sql"==e.type?2:4,posX:e.pos_x,posY:e.pos_y,isNullRun:e.isNullRun}})),n=t.jobNodeData.realId?t.jobNodeData.realId:t.jobNodeData.id,s={procId:t.$route.query.id,workFlowMenuId:n,edges:i,nodes:r,lock:e,jobNodeConfig:Oe({},t.attrData)};t.$API.post(t.test?"data-development-test/bdp/workMenu/updateWorkJob":t.$URL.updateWorkJob,s,(function(e){t.isNullRunChange=!1,t.isLoading=!1,0==e.code?(t.openWorkFlow(),t.$message.success("保存成功"),t.drawer=!1):t.$message.error(e.msg)}))}else t.$message.error("请设置完必填项再保存")}))},nullRun:function(){this.activeNode.isNullRun=1==this.activeNode.isNullRun?0:1,this.activeNode.state=1==this.activeNode.isNullRun?"runnull":"default",this.isNullRunChange=!0},socket:function(e){"WebSocket"in window?(this.ws=new WebSocket(this.wsUrl+"dataDevelopment/workflow/status/"+e+"/null?token="+this.$store.state.old.admin_info.token),this.ws.onopen=function(){},this.ws.onerror=function(){},this.ws.onclose=function(){},this.ws.onmessage=this.wsMessage):this.$message.error("您的浏览器不支持 WebSocket，请更换浏览器，否则此页面无法正常运行")},wsMessage:function(e){if("连接成功！"!=e.data){var t=JSON.parse(e.data).nodeList;if(t&&t.length>0){var a,o=$e(t);try{for(o.s();!(a=o.n()).done;){var i=a.value,r=i.status,n=i.isOutHours;this.isRun=JSON.parse(e.data).status;var s,l=$e(this.workFlowData.nodes);try{for(l.s();!(s=l.n()).done;){var c=s.value;c.id==i.id&&(this.$set(c,"state",0==r?"error":1==r?"success":2==r?"active":5==r?"stop":"default"),this.$set(c,"isOutHours",n))}}catch(e){l.e(e)}finally{l.f()}var d,u=$e(this.workFlowData.edges);try{for(u.s();!(d=u.n()).done;){var f=d.value;i.id==f.srcNodeId&&this.$set(f,"type",0==r?"error":1==r?"success":2==r?"active":5==r?"stop":"default")}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}}}}},mounted:function(){var e=this;this.getIds(),document.body.addEventListener("click",(function(){e.isEditMenuShow=!1})),setTimeout((function(){e.openWorkFlow(),e.socket(e.jobNodeData.id)}),10),o.a.$off("modelDragIn"+this.$parent.name),o.a.$on("modelDragIn"+this.$parent.name,(function(t,a){e.$refs.board.modelDragData=a,e.$refs.board.nodeIn(t)}))},destroyed:function(){this.ws.close()},watch:{dataProcessTaskToChangeJobNodeData:{handler:function(e){if(e){var t=e.realId?e.realId:e.id;this.$parent.name==t+""&&(this.jobNodeData=e,this.getServiceInfacteStates())}},deep:!0,immediate:!0},editableTabsValue:{handler:function(e){this.parenteditableTabsValue=e},immediate:!0}}},Pe=(a("aec9"),a("f03c"),Object(c.a)(Fe,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_process_task_output stream"},[t("div",{staticClass:"left"},[t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(1)},confirm:function(t){return e.onConfirm(1)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px"},attrs:{slot:"reference",type:"primary",plain:"",size:"mini",disabled:!e.jobNodeLock},on:{click:function(t){e.drawer=!0}},slot:"reference"},[t("span",{staticClass:"icon icon-ic_save",staticStyle:{"vertical-align":"middle","font-size":"12px"}}),e._v("保存")])],1),e.userIds.includes(e.userId)?t("el-popconfirm",{staticStyle:{"margin-left":"5px"},attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(1)},confirm:function(t){return e.onConfirm(1)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px","margin-left":"5px"},attrs:{slot:"reference",type:"primary",plain:"",size:"mini",disabled:!e.jobNodeLock},on:{click:function(t){e.drawer=!0,e.test=!0}},slot:"reference"},[t("span",{staticClass:"icon icon-ic_save",staticStyle:{"vertical-align":"middle","font-size":"12px"}}),e._v("保存(新)")])],1):e._e(),t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(0)},confirm:function(t){return e.onConfirm(0)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px","margin-left":"5px"},attrs:{slot:"reference",type:"primary",plain:"",size:"mini",disabled:!e.jobNodeLock},on:{click:function(t){e.drawer=!0}},slot:"reference"},[t("span",{staticClass:"icon icon-ic_unlock_2",staticStyle:{"vertical-align":"middle","font-size":"12px"}}),e._v("保存并解锁")])],1),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.lock}},[t("span",{staticClass:"icon",class:{"icon-ic_locking_pre":e.jobNodeLock,"icon-ic_locking":!e.jobNodeLock},staticStyle:{"vertical-align":"middle","font-size":"12px"}}),e._v(e._s(e.jobNodeLock?"解锁":"上锁"))]),t("el-button",{staticClass:"el-icon-video-play",staticStyle:{"margin-left":"5px"},attrs:{type:"primary",plain:"",size:"mini",disabled:2==e.isRun||!e.jobNodeLock},on:{click:e.runWorkJob}},[e._v("运行")]),t("el-button",{staticClass:"el-icon-video-pause",staticStyle:{"margin-left":"5px"},attrs:{type:"primary",plain:"",size:"mini",disabled:!e.jobNodeLock},on:{click:e.stopWorkJob}},[e._v("停止")]),2==e.isRun?t("span",{staticClass:"is_run",staticStyle:{float:"right"}},[e._v("运行状态：运行中")]):e._e(),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",plain:"",size:"mini",disabled:e.runInfacte||!e.jobNodeLock},on:{click:function(t){return e.submitServer(1,0)}}},[t("span",{staticClass:"icon icon-duomeitibofangqikaishi",staticStyle:{"vertical-align":"middle","font-size":"12px"}}),e._v("运行发布成服务")]),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",plain:"",size:"mini",disabled:e.stopInfacte||!e.jobNodeLock},on:{click:function(t){return e.submitServer(1,1)}}},[t("span",{staticClass:"icon icon-duomeitibofangqikaishi",staticStyle:{"vertical-align":"middle","font-size":"12px"}}),e._v("停止发布成服务")]),t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.runLog(0)}}},[e._v("运行日志")]),t("div",{staticClass:"tips"},[t("span",[e._v("作业流画布当前编辑人："+e._s(e.jobNodeData.lockPerName||"无"))]),t("span",[e._v("注意：作业流的任务有不同人的上锁状态")])]),t("board",{ref:"board",attrs:{showType:!0,workFlowData:e.workFlowData,state:{lockPerName:e.jobNodeData.lockPerName,jobNodeLock:e.jobNodeLock}},on:{contextmenu:e.contextmenu,boardDataChange:e.boardDataChange}})],1),t("div",{staticClass:"right"},[t("div",{staticClass:"attribute",on:{click:e.openDrawer}},[e._v("属性配置")])]),t("el-drawer",{attrs:{title:"属性配置",visible:e.drawer,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[t("attribute",{ref:"attr",attrs:{attrFrom:e.attrFrom,isDisabled:!e.jobNodeLock,node:e.jobNodeData},on:{attributeDataChange:e.changeAttData}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditMenuShow,expression:"isEditMenuShow"}]},[t("ul",{ref:"edit_menu",attrs:{id:"edit_menu"}},[1==e.isEditMeneShowType?t("li",{on:{click:e.removeNode}},[e._v("移除该节点")]):e._e(),1==e.isEditMeneShowType?t("li",{on:{click:e.openNode}},[e._v("打开该节点")]):e._e(),1==e.isEditMeneShowType?t("li",{on:{click:e.workMenuRunNodeJob}},[e._v("\n        重跑当前节点\n      ")]):e._e(),1==e.isEditMeneShowType&&1==e.activeNode.isUp?t("li",{on:{click:e.workMenuRunUpJob}},[e._v("\n        重跑上游\n      ")]):e._e(),1==e.isEditMeneShowType&&1==e.activeNode.isDown?t("li",{on:{click:e.workMenuRunDownJob}},[e._v("\n        重跑下游\n      ")]):e._e(),1==e.isEditMeneShowType?t("li",{on:{click:function(t){return e.submitServer(0,0,0)}}},[e._v("\n        重跑当前节点发布成服务\n      ")]):e._e(),1==e.isEditMeneShowType&&1==e.activeNode.isUp?t("li",{on:{click:function(t){return e.submitServer(0,0,1)}}},[e._v("\n        重跑上游发布成服务\n      ")]):e._e(),1==e.isEditMeneShowType&&1==e.activeNode.isDown?t("li",{on:{click:function(t){return e.submitServer(0,0,2)}}},[e._v("\n        重跑下游发布成服务\n      ")]):e._e(),1==e.isEditMeneShowType?t("li",{on:{click:e.nullRun}},[e._v("\n        "+e._s(1==e.activeNode.isNullRun?"取消空跑":"空跑")+"\n      ")]):e._e(),2==e.isEditMeneShowType?t("li",{on:{click:e.removeNode}},[e._v("移除该连线")]):e._e(),1==e.isEditMeneShowType?t("li",{on:{click:function(t){return e.runLog(2)}}},[e._v("运行日志")]):e._e()])]),t("log-draw",{ref:"logDraw"})],1)}),[],!1,null,"13c6dad5",null).exports),Me={props:["node","attrFrom","isDisabled"],components:{},data:function(){return{dialogVisible:!1,nodeData:"",nodeForm:{workFlowDepInfo:{createPerName:"",name:""}},activeNames:["basicAtttibute","processParamas","priority"],ruleForm:{cronType:"1",cronUrl:"",scheduleOrInterval:"",schedule_type:"",regulation:"hour",week:"",day:"",hour:"",minute:"",nodeParam:[],isRetry:0,reTryMax:1,reTryInterval:1},runStyle:[],scheduleStyle:[],cronTypeList:[{value:"1",name:"手动配置"},{value:"2",name:"crontab配置"}],weeks:[{label:"周一",value:"1"},{label:"周二",value:"2"},{label:"周三",value:"3"},{label:"周四",value:"4"},{label:"周五",value:"5"},{label:"周六",value:"6"},{label:"周日",value:"7"}]}},methods:{reguChange:function(e){this.ruleForm.scheduleOrInterval=e-0,this.ruleForm.regulation="hour",this.ruleForm.hour="",this.ruleForm.minute=""},getRunStyle:function(){var e=this;this.$API.get(this.$URL.getJobNodeInfoListSchedules,{},(function(t){if(0==t.code){e.runStyle=[],e.scheduleStyle=[];for(var a=0;a<t.data.runStyle.length;a++)e.runStyle.push({value:t.data.runStyle[a].id,name:t.data.runStyle[a].name});for(var o=0;o<t.data.scheduleStyle.length;o++)e.scheduleStyle.push({value:t.data.scheduleStyle[o].id,name:t.data.scheduleStyle[o].name});e.listWorkFlowConfig()}else e.$message.error(t.msg)}))},listWorkFlowConfig:function(){var e=this;this.$API.get(this.$URL.listWorkFlowConfig+"/"+this.nodeData.id,{},(function(t){if(0==t.code){if(0!=t.data.length){var a,o=function(e){return t.data.find((function(t){return t.key==e}))},i=o("schedule_type"),r=o("scheduleOrInterval"),n=o("expression"),s=o("nodeParam"),l=t.data.find((function(e){return"cronType"==e.key}));e.ruleForm.cronType=l.value;var c=t.data.find((function(e){return"cronUrl"==e.key})),d=o("isRetry"),u=o("reTryInterval"),f=o("reTryMax");e.ruleForm.isRetry=d&&d.value?Number(d.value):0,e.ruleForm.reTryInterval=u&&u.value?Number(u.value):1,e.ruleForm.reTryMax=f&&f.value?Number(f.value):1,e.ruleForm.cronUrl=c.value,e.ruleForm.schedule_type=i.value-0,(null==r||null===(a=r.value)||void 0===a?void 0:a.length)>0&&(e.ruleForm.scheduleOrInterval=r.value-0);var p=JSON.parse(n.value);if(p){e.ruleForm.regulation=p.type;var m=e.ruleForm;for(var h in p)for(var b in m)h==b&&(m[b]=p[h])}e.ruleForm.nodeParam=JSON.parse(s.value)||[]}}else e.$message.error(t.msg)}))},addParam:function(){this.isDisabled||this.ruleForm.nodeParam.push({key:"",value:""})},removeParam:function(e){this.ruleForm.nodeParam.remove(e.row)}},mounted:function(){this.getRunStyle()},watch:{ruleForm:{handler:function(e){var t;1==this.ruleForm.schedule_type?1==this.ruleForm.scheduleOrInterval?"hour"==this.ruleForm.regulation?t={minute:this.ruleForm.minute,type:this.ruleForm.regulation}:"day"==this.ruleForm.regulation?t={hour:this.ruleForm.hour,minute:this.ruleForm.minute,type:this.ruleForm.regulation}:"week"==this.ruleForm.regulation?t={week:this.ruleForm.week,hour:this.ruleForm.hour,minute:this.ruleForm.minute,type:this.ruleForm.regulation}:"month"==this.ruleForm.regulation&&(t={day:this.ruleForm.day,hour:this.ruleForm.hour,minute:this.ruleForm.minute,type:this.ruleForm.regulation}):"hour"==this.ruleForm.regulation?t={minute:this.ruleForm.minute,type:this.ruleForm.regulation}:"day"==this.ruleForm.regulation&&(t={hour:this.ruleForm.hour,type:this.ruleForm.regulation}):t=null;var a=this.ruleForm,o=a.scheduleOrInterval,i=a.schedule_type,r=a.nodeParam,n=a.isRetry,s=a.reTryMax,l=a.reTryInterval,c={scheduleOrInterval:o,schedule_type:i,cronType:this.ruleForm.cronType,cronUrl:this.ruleForm.cronUrl,nodeParam:r,isRetry:n,reTryMax:s,reTryInterval:l,expression:JSON.stringify(t)};this.$emit("attributeDataChange",c)},deep:!0,immediate:!0},node:{handler:function(e){this.nodeData=JSON.parse(JSON.stringify(e))},deep:!0,immediate:!0},attrFrom:{handler:function(e){this.nodeForm=e},deep:!0,immediate:!0}}},Re=(a("c423"),Object(c.a)(Me,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"process_ds_attribute"},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"120px","label-position":"left"}},[t("el-collapse-item",{attrs:{title:"基本属性",name:"basicAtttibute"}},[t("div",{staticClass:"section"},[t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务名称："+e._s(e.nodeForm.workFlowDepInfo.name))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("类型：作业流依赖")]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("责任人："+e._s(e.nodeData.lockPerName||e.nodeForm.workFlowDepInfo.createPerName))])])]),t("el-collapse-item",{attrs:{name:"priority"}},[t("template",{slot:"title"},[e._v("\n                    调度配置\n                    "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用于多个平级任务运行时的优先级",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"调度方式"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择运行方式"},model:{value:e.ruleForm.schedule_type,callback:function(t){e.$set(e.ruleForm,"schedule_type",e._n(t))},expression:"ruleForm.schedule_type"}},e._l(e.runStyle,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),"1"==e.ruleForm.schedule_type?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"配置方式"}},[t("el-radio-group",{attrs:{disabled:e.isDisabled},on:{change:e.reguChange},model:{value:e.ruleForm.cronType,callback:function(t){e.$set(e.ruleForm,"cronType",t)},expression:"ruleForm.cronType"}},e._l(e.cronTypeList,(function(a,o){return t("el-radio",{key:o+1,attrs:{label:a.value}},[e._v(e._s(a.name)+"\n                        ")])})),1)],1):e._e(),"2"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"crontab表达式"}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入crontab表达式"},model:{value:e.ruleForm.cronUrl,callback:function(t){e.$set(e.ruleForm,"cronUrl",t)},expression:"ruleForm.cronUrl"}})],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"循环方式"}},[t("el-radio-group",{attrs:{disabled:e.isDisabled},on:{change:e.reguChange},model:{value:e.ruleForm.scheduleOrInterval,callback:function(t){e.$set(e.ruleForm,"scheduleOrInterval",t)},expression:"ruleForm.scheduleOrInterval"}},e._l(e.scheduleStyle,(function(a,o){return t("el-radio",{key:o+1,attrs:{label:a.value}},[e._v(e._s(a.name)+"\n                        ")])})),1)],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"2"==e.ruleForm.scheduleOrInterval?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"调度周期"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择调度周期"},model:{value:e.ruleForm.regulation,callback:function(t){e.$set(e.ruleForm,"regulation",t)},expression:"ruleForm.regulation"}},[t("el-option",{attrs:{label:"时",value:"hour"}}),t("el-option",{attrs:{label:"日",value:"day"}})],1)],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"1"==e.ruleForm.scheduleOrInterval?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"调度周期"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择运行规则"},model:{value:e.ruleForm.regulation,callback:function(t){e.$set(e.ruleForm,"regulation",t)},expression:"ruleForm.regulation"}},[t("el-option",{attrs:{label:"每小时",value:"hour"}}),t("el-option",{attrs:{label:"每日",value:"day"}}),t("el-option",{attrs:{label:"每周",value:"week"}}),t("el-option",{attrs:{label:"每月",value:"month"}})],1)],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"week"==e.ruleForm.regulation&&"1"==e.ruleForm.scheduleOrInterval?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"周",prop:"region"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择周"},model:{value:e.ruleForm.week,callback:function(t){e.$set(e.ruleForm,"week",t)},expression:"ruleForm.week"}},e._l(e.weeks,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"month"==e.ruleForm.regulation&&"1"==e.ruleForm.scheduleOrInterval?t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"天",prop:"region"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择天"},model:{value:e.ruleForm.day,callback:function(t){e.$set(e.ruleForm,"day",t)},expression:"ruleForm.day"}},e._l(31,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),"1"!=e.ruleForm.cronType||"1"!=e.ruleForm.schedule_type||"day"!=e.ruleForm.regulation&&"week"!=e.ruleForm.regulation&&"month"!=e.ruleForm.regulation||"1"!=e.ruleForm.scheduleOrInterval?e._e():t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"时",prop:"region"}},[t("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择时"},model:{value:e.ruleForm.hour,callback:function(t){e.$set(e.ruleForm,"hour",t)},expression:"ruleForm.hour"}},e._l(24,(function(e){return t("el-option",{key:e-1,attrs:{label:e-1,value:e-1}})})),1)],1),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"1"==e.ruleForm.scheduleOrInterval?t("el-form-item",{staticClass:"minute",staticStyle:{width:"70%"},attrs:{label:"分",prop:"region"}},[t("el-input-number",{attrs:{disabled:e.isDisabled,"controls-position":"right",min:0,max:59},model:{value:e.ruleForm.minute,callback:function(t){e.$set(e.ruleForm,"minute",t)},expression:"ruleForm.minute"}})],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"2"==e.ruleForm.scheduleOrInterval&&"hour"==e.ruleForm.regulation?t("el-form-item",{staticClass:"minute",staticStyle:{width:"100%"},attrs:{label:"每隔:",prop:"region"}},[t("el-input-number",{staticStyle:{width:"90px"},attrs:{disabled:e.isDisabled,"controls-position":"right",min:0,max:59},model:{value:e.ruleForm.minute,callback:function(t){e.$set(e.ruleForm,"minute",t)},expression:"ruleForm.minute"}}),e._v(" （分）\n                        ")],1):e._e(),"1"==e.ruleForm.cronType&&"1"==e.ruleForm.schedule_type&&"2"==e.ruleForm.scheduleOrInterval&&"day"==e.ruleForm.regulation?t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"每隔:",prop:"region"}},[t("el-select",{staticStyle:{width:"90px",display:"inline-block"},attrs:{disabled:e.isDisabled,placeholder:"请选择小时"},model:{value:e.ruleForm.hour,callback:function(t){e.$set(e.ruleForm,"hour",t)},expression:"ruleForm.hour"}},e._l(24,(function(e){return t("el-option",{key:e-1,attrs:{label:e-1,value:e-1}})})),1),e._v("\n                        （时）\n                    ")],1):e._e()],1)],2),t("el-collapse-item",{attrs:{name:"processParamas"}},[t("template",{slot:"title"},[e._v("\n                运行参数\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"任务运行时需要设置的参数",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-table",{attrs:{data:e.ruleForm.nodeParam,size:"mini",width:"100"}},[t("el-table-column",{attrs:{label:"参数名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".key",rules:{required:!0,message:"请输入参数名称",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数名称"},model:{value:a.row.key,callback:function(t){e.$set(a.row,"key",t)},expression:"scope.row.key"}})],1)]}}])}),t("el-table-column",{attrs:{label:"参数值或者表达式",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".value",rules:{required:!0,message:"请输入参数值或者表达式",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数值或者表达式"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作",align:"right","header-align":"right",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{type:"text",disabled:e.isDisabled,size:"small"},on:{click:function(t){return e.removeParam(a)}}},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"add_new",on:{click:e.addParam}},[e._v("+ 添加参数")])],1)],2)],1)],1)],1)}),[],!1,null,null,null).exports);function Ee(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ae(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ve={props:["dataProcessTaskToChangeJobNodeData","editableTabsValue"],components:{board:ke.a,logDraw:Ne,attribute:Re},computed:{wsUrl:function(){return this.$store.state.permission.wsUrl},userId:function(){return this.$store.state.old.admin_info.userId}},data:function(){return{name:"jobFlowBoard",jobNodeLock:1,isEditMenuShow:!1,isEditMeneShowType:-1,attrFrom:{workFlowDepInfo:{createPerName:"",name:""}},isLoading:!1,jobNodeData:"",drawer:!1,isInfacte:!1,stopInfacte:!1,attrData:{},boardData:{},activeNode:"",workFlowData:{nodes:[],edges:[]},parenteditableTabsValue:"",jobLayStatus:!1,isRun:"",userIds:[]}},methods:{reRunDownstream:function(){var e=this,t=this.jobNodeData.id,a={id:this.activeNode.id,workFlowId:t};this.isLoading=!0,this.$API.post(this.$URL.reRunDownstream,a,(function(t){e.isLoading=!1,0==t.code?e.$message.success("重跑下游成功"):e.$message.error(t.msg)}))},reRunUpstream:function(){var e=this,t=this.jobNodeData.id,a={id:this.activeNode.id,workFlowId:t};this.isLoading=!0,this.$API.post(this.$URL.reRunUpstream,a,(function(t){e.isLoading=!1,0==t.code?e.$message.success("重跑上游成功"):e.$message.error(t.msg)}))},runTargetNode:function(){var e=this,t=this.jobNodeData.id,a={id:this.activeNode.id,workFlowId:t};this.isLoading=!0,this.$API.post(this.$URL.runTargetNode,a,(function(t){e.isLoading=!1,0==t.code?e.$message.success("运行成功"):e.$message.error(t.msg)}))},lock:function(){var e=this,t={id:[this.jobNodeData.jobId],lock:this.jobNodeLock?0:1};this.$API.post(this.$URL.workFlowDepLock,t,(function(a){0==a.code?(e.jobNodeLock=e.jobNodeLock?0:1,o.a.$emit("offlineMenuTreeDataUpData",{id:e.jobNodeData.id,jobInfoLock:t.lock}),e.openWorkFlowMenu()):e.$message.error(a.msg)}))},runLog:function(e){this.$refs.logDraw.open(this.jobNodeData,e)},getIds:function(){var e=this;this.$API.get("/public.json",{},(function(t){e.userIds=t.userIds}))},openDrawer:function(){var e=this;this.drawer=!0,this.$nextTick((function(){e.openWorkFlowMenu()}))},changeAttData:function(e){this.attrData=e},boardDataChange:function(e){this.boardData=e},contextmenu:function(e,t,a){var o=this.$refs.edit_menu;document.body.clientHeight-e.clientY-40>o.offsetHeight?o.style.top=e.clientY+5+"px":o.style.top=e.clientY-o.offsetHeight+"px",document.body.clientWidth-e.clientX-20>o.offsetWidth?o.style.left=e.clientX-20+"px":o.style.left=e.clientX-o.offsetWidth+"px",this.isEditMenuShow=!0,this.activeNode=t,this.isEditMeneShowType=a},removeNode:function(){2!=this.isRun?this.$refs.board.removeNode(this.activeNode,this.isEditMeneShowType):this.$message.warning("作业流依赖运行中，不可以删除")},openNode:function(){o.a.$emit("dataProcessTaskToChangeJob",this.activeNode)},openWorkFlowMenu:function(){var e=this,t={id:this.jobNodeData.id};this.$API.get(this.$URL.openWorkFlowMenu,t,(function(t){0==t.code?(e.attrFrom=t.data,e.jobLayStatus=0!=t.data.workFlowDepInfo.jobLayStatus,e.isRun=t.data.workFlowDepInfo.lastRunState,e.jobNodeData.jobId=t.data.workFlowDepInfo.id,e.jobNodeLock=t.data.workFlowDepInfo.jobInfoLock,e.jobNodeData.lockPerName=t.data.workFlowDepInfo.lockPerName,t.data.nodes&&t.data.nodes.length>0&&(e.workFlowData.nodes=t.data.nodes,e.workFlowData.edges=t.data.edges,e.workFlowData.nodes=e.workFlowData.nodes.map((function(e){return e.pos_x=e.posX,e.pos_y=e.posY,e.out_ports=[0],e.in_ports=[0],e.type=e.iconClassName=1==e.typeId?"ds":2==e.typeId?"table":4==e.typeId?"sql":8==e.typeId?"checkTask":"jobFlow",e})),t.data.edges.filter((function(e){return 0!=e.srcNodeId})),e.workFlowData.edges=e.workFlowData.edges.map((function(e){return e.dst_node_id=e.dstNodeId,e.src_node_id=e.srcNodeId,e.type="default",e})))):e.$message.error(t.msg)}))},getServiceInfacteStates:function(){for(var e=this,t=function(t){e.$API.post(e.$URL.getServiceInfacteStates,{workParameter:e.jobNodeData.id,workType:2,taskType:t},(function(a){0==t?0==a.code&&a.data?e.isInfacte=!0:e.isInfacte=!1:0==a.code&&a.data?e.stopInfacte=!0:e.stopInfacte=!1}))},a=0;a<2;a++)t(a)},runWorkJob:function(){var e=this;this.isLoading=!0,this.$API.post(this.$URL.runWorkFlowJob+"/"+this.jobNodeData.id,{},(function(t){e.isLoading=!1,0==t.code?(e.$message.success("运行成功"),e.isRun=2):e.$message.error(t.msg)}))},switchJobInfo:function(e,t){var a=this;this.isLoading=!0,this.$API.post("".concat(e?t?"data-development-test/bdp/workMenu/openWorkFlowJob/"+this.jobNodeData.id:this.$URL.openWorkFlowJob+"/"+this.jobNodeData.id:t?"data-development-test/bdp/workMenu/closeWorkFlowJob/"+this.jobNodeData.id:this.$URL.closeWorkFlowJob+"/"+this.jobNodeData.id),{},(function(t){a.isLoading=!1,0==t.code?a.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){}}):(a.$message.error(t.msg),a.jobLayStatus=!e)}))},onConfirm:function(e){var t=this;this.$refs.attr.$refs.ruleForm.validate((function(a){if(a){t.isLoading=!0;var i=Object.assign({},t.attrData,t.boardData),r=i.edges.map((function(e){return{dstNodeId:e.dst_node_id,srcNodeId:e.src_node_id}})),n=i.nodes.map((function(e){return{id:e.id,name:e.name,typeId:"ds"==e.type?1:"sql"==e.type?2:4,posX:e.pos_x,posY:e.pos_y}})),s={procId:t.$route.query.id,workFlowMenuId:t.jobNodeData.id,edges:r,nodes:n,lock:e,jobNodeConfig:ze({},t.attrData)};t.$API.post(t.$URL.updateWorkFlow,s,(function(a){t.isLoading=!1,0==a.code?(t.$message.success("保存成功"),o.a.$emit("offlineMenuTreeDataUpData",{id:t.jobNodeData.id,jobInfoLock:e}),t.drawer=!1,t.openWorkFlowMenu()):t.$message.error(a.msg)}))}else t.$message.error("请设置完必填项再保存")}))},submitServer:function(){this.$router.push("/dataTaskServer/?workType=2&taskId=".concat(this.jobNodeData.id,"&isStop=0&isUp=0"))},stopServer:function(){this.$router.push("/dataTaskServer/?workType=2&taskId=".concat(this.jobNodeData.id,"&isStop=1&isUp=0"))},socket:function(e){"WebSocket"in window?(this.ws=new WebSocket(this.wsUrl+"dataDevelopment/workflowLay/status/"+e+"/null?token="+this.$store.state.old.admin_info.token),this.ws.onopen=function(){},this.ws.onerror=function(){},this.ws.onclose=function(){},this.ws.onmessage=this.wsMessage):this.$message.error("您的浏览器不支持 WebSocket，请更换浏览器，否则此页面无法正常运行")},wsMessage:function(e){if("连接成功！"!=e.data){var t=JSON.parse(e.data).nodeList;if(t&&t.length>0){var a,o=Ee(t);try{for(o.s();!(a=o.n()).done;){var i=a.value,r=i.status,n=i.isOutHours;this.isRun=JSON.parse(e.data).status;var s,l=Ee(this.workFlowData.nodes);try{for(l.s();!(s=l.n()).done;){var c=s.value;c.id==i.id&&(this.$set(c,"state",0==r?"error":1==r?"success":2==r?"active":5==r?"stop":"default"),this.$set(c,"isOutHours",n))}}catch(e){l.e(e)}finally{l.f()}var d,u=Ee(this.workFlowData.edges);try{for(u.s();!(d=u.n()).done;){var f=d.value;i.id==f.srcNodeId&&this.$set(f,"type",0==r?"error":1==r?"success":2==r?"active":5==r?"stop":"default")}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}}}}},mounted:function(){var e=this;this.getIds(),document.body.addEventListener("click",(function(){e.isEditMenuShow=!1})),setTimeout((function(){e.openWorkFlowMenu(),e.socket(e.jobNodeData.id)}),10),o.a.$off("modelDragIn"+this.$parent.name),o.a.$on("modelDragIn"+this.$parent.name,(function(t,a){e.$refs.board.modelDragData=a,e.$refs.board.nodeIn(t)}))},destroyed:function(){this.ws.close()},watch:{dataProcessTaskToChangeJobNodeData:{handler:function(e){e&&this.$parent.name==e.id+""&&(this.jobNodeData=e,this.getServiceInfacteStates())},deep:!0,immediate:!0},editableTabsValue:{handler:function(e){this.parenteditableTabsValue=e},immediate:!0}}},Ue=(a("0bdc"),a("af92"),Object(c.a)(Ve,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_process_task_output flow"},[t("div",{staticClass:"left"},[t("div",{staticStyle:{display:"flex"}},[t("el-button",{staticClass:"el-icon-video-play",staticStyle:{"margin-left":"5px"},attrs:{type:"primary",plain:"",size:"mini",disabled:!e.jobLayStatus||!e.jobNodeLock},on:{click:e.runWorkJob}},[e._v("运行")]),t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(1)},confirm:function(t){return e.onConfirm(1)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px","margin-left":"5px"},attrs:{slot:"reference",type:"primary",plain:"",size:"mini",disabled:!e.jobNodeLock},on:{click:function(t){e.drawer=!0}},slot:"reference"},[t("span",{staticClass:"icon icon-ic_save",staticStyle:{"vertical-align":"middle","font-size":"12px","margin-left":"5px"}}),e._v("保存")])],1),t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(0)},confirm:function(t){return e.onConfirm(0)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px","margin-left":"5px"},attrs:{slot:"reference",type:"primary",plain:"",size:"mini",disabled:!e.jobNodeLock},on:{click:function(t){e.drawer=!0}},slot:"reference"},[t("span",{staticClass:"icon icon-ic_unlock_2",staticStyle:{"vertical-align":"middle","font-size":"12px"}}),e._v("保存并解锁")])],1),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.lock}},[t("span",{staticClass:"icon",class:{"icon-ic_locking_pre":e.jobNodeLock,"icon-ic_locking":!e.jobNodeLock},staticStyle:{"vertical-align":"middle","font-size":"12px"}}),e._v(e._s(e.jobNodeLock?"解锁":"上锁"))]),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",plain:"",size:"mini",disabled:e.isInfacte||!e.jobNodeLock},on:{click:e.submitServer}},[t("span",{staticClass:"icon icon-duomeitibofangqikaishi",staticStyle:{"vertical-align":"middle","font-size":"12px"}}),e._v("运行发布成服务")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",plain:"",size:"mini",disabled:e.stopInfacte||!e.jobNodeLock},on:{click:e.stopServer}},[t("span",{staticClass:"icon icon-duomeitibofangqikaishi",staticStyle:{"vertical-align":"middle","font-size":"12px"}}),e._v("停止发布成服务")]),e.userIds.includes(e.userId)?t("div",{staticClass:"enable",staticStyle:{"margin-left":"8px","margin-top":"3px"}},[t("el-switch",{staticClass:"design_task_switch design_task_switch2",staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"red","active-text":"已启用(新)","inactive-text":"已禁用(新)",disabled:!e.jobNodeLock},on:{change:function(t){return e.switchJobInfo(t,!0)}},model:{value:e.jobLayStatus,callback:function(t){e.jobLayStatus=t},expression:"jobLayStatus"}})],1):e._e(),t("div",{staticClass:"enable",staticStyle:{"margin-left":"8px","margin-top":"3px",display:"flex","align-items":"center"}},[t("el-switch",{staticClass:"design_task_switch",staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"red","active-text":"启用编辑","inactive-text":"禁用编辑",disabled:!e.jobNodeLock},on:{change:function(t){return e.switchJobInfo(t)}},model:{value:e.jobLayStatus,callback:function(t){e.jobLayStatus=t},expression:"jobLayStatus"}}),t("el-tooltip",{staticStyle:{"margin-left":"15px"},attrs:{content:"当作业流依赖状态为启用时，则作业流依赖下的作业流为不可编辑状态。",effect:"dark",placement:"top-start"}},[t("i",{staticClass:"el-icon-question"})]),t("el-button",{staticStyle:{flex:"1","text-align":"right","margin-left":"5px"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.runLog(1)}}},[e._v("运行日志")])],1),2==e.isRun?t("span",{staticClass:"is_run",staticStyle:{float:"right"}},[e._v("运行状态：运行中")]):e._e()],1),t("div",{staticClass:"tips"},[t("span",[e._v("作业流依赖画布当前编辑人："+e._s(e.jobNodeData.lockPerName||"无"))]),t("span",[e._v("注意：作业流依赖中的作业流有不同人的上锁状态")])]),t("board",{ref:"board",attrs:{showType:!0,workFlowData:e.workFlowData,state:{lockPerName:e.jobNodeData.lockPerName,jobNodeLock:e.jobNodeLock}},on:{contextmenu:e.contextmenu,boardDataChange:e.boardDataChange}})],1),t("div",{staticClass:"right"},[t("div",{staticClass:"attribute",on:{click:e.openDrawer}},[e._v("属性配置")])]),t("el-drawer",{attrs:{title:"属性配置",visible:e.drawer,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[t("attribute",{ref:"attr",attrs:{isDisabled:!e.jobNodeLock,attrFrom:e.attrFrom,node:e.jobNodeData},on:{attributeDataChange:e.changeAttData}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditMenuShow,expression:"isEditMenuShow"}]},[t("ul",{ref:"edit_menu",attrs:{id:"edit_menu"}},[1==e.isEditMeneShowType&&e.jobNodeLock?t("li",{on:{click:e.removeNode}},[e._v("\n        移除该节点\n      ")]):e._e(),1==e.isEditMeneShowType&&e.jobNodeLock?t("li",{on:{click:e.openNode}},[e._v("\n        打开该节点\n      ")]):e._e(),2==e.isEditMeneShowType&&e.jobNodeLock?t("li",{on:{click:e.removeNode}},[e._v("\n        移除该连线\n      ")]):e._e(),1==e.isEditMeneShowType&&e.jobNodeLock?t("li",{on:{click:e.reRunUpstream}},[e._v("\n        重跑上游\n      ")]):e._e(),1==e.isEditMeneShowType&&e.jobNodeLock?t("li",{on:{click:e.reRunDownstream}},[e._v("\n        重跑下游\n      ")]):e._e(),1==e.isEditMeneShowType&&e.jobNodeLock?t("li",{on:{click:e.runTargetNode}},[e._v("\n        重跑当前节点\n      ")]):e._e()])]),t("log-draw",{ref:"logDraw"})],1)}),[],!1,null,"5659c24a",null).exports),Be={props:["jobNodeData","form","isDisabled"],data:function(){return{isLoading:!1,node:"",dialogVisible:!1,relyOnEdit:{},activeNames:["basicAtttibute","priority","outputConfig","SYMBIOSIS","sysRun"],data:{priorityConfig:"中",isOpenOutHours:0,outHours:1,jobNodeInfo:{name:"",createPerName:""},jobNodeLayConfigDtos:[],nodeParam:[]},priorityList:[{label:"高",value:"高"},{label:"中",value:"中"},{label:"低",value:"低"}],jobOut:[],listDbsAndTablesList:[],props:{multiple:!0,value:"id"},conditionNammeList:[],countOps:[],statusOps:[]}},methods:{routeType:function(){var e=this;this.$API.get(this.$URL.routeType,{},(function(t){if(0==t.code){e.conditionNammeList=t.data;var a=e.conditionNammeList.find((function(e){return"count"==e.nameEn})),o=e.conditionNammeList.find((function(e){return"status"==e.nameEn}));e.countOps=a.ops,e.statusOps=o.ops}else e.$message.error(t.code)}))},listDbsAndTables:function(){var e=this;this.$API.get(this.$URL.listDbsAndTables+"?procId="+this.$route.query.id,{},(function(t){0==t.code?(e.listDbsAndTablesList=t.data,e.jobOut=e.form.jobOut||[],e.data.jobOutPutTableIds=e.jobOut.map((function(e){return e[e.length-1]}))):e.$message.error(t.msg)}))},changeType:function(e,t){this.$set(t.row,"operationNamme","="),this.$set(t.row,"conditionValue","0")},addParam:function(){this.isDisabled||this.data.nodeParam.push({key:"",value:""})},removeParam:function(e){this.isDisabled||this.data.nodeParam.remove(e.row)},remove:function(e){this.isDisabled||this.data.jobNodeLayConfigDtos.remove(e.row)},fixCascader:function(){for(var e=document.querySelectorAll(".el-cascader .el-input--suffix .el-input__inner"),t=0;t<e.length;t++)e[t].setAttribute("placeholder","")}},mounted:function(){this.listDbsAndTables(),this.fixCascader(),this.routeType()},watch:{jobNodeData:{handler:function(e){this.node=e},deep:!0},data:{handler:function(e){this.$emit("dataChange",e)},deep:!0},form:{handler:function(e){var t=this;this.$nextTick((function(){t.data=Object.assign(e),t.data.nodeParam=t.data.nodeParam?t.data.nodeParam:[]}))},deep:!0,immediate:!0}}},Je=(a("4c74"),Object(c.a)(Be,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"process_shell_attribute"},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"ruleForm",attrs:{model:e.data,"label-width":"120px","label-position":"left"}},[t("el-collapse-item",{attrs:{title:"基本属性",name:"basicAtttibute"}},[t("div",{staticClass:"section"},[t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务名称："+e._s(e.data.jobNodeInfo.name))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务类型：shell任务")]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("责任人："+e._s(e.data.jobNodeInfo.createPerName))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("描述："+e._s(e.data.jobNodeInfo.desc))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("服务器地址："+e._s(e.data.jobNodeInfo.hostUrl))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("端口:"+e._s(e.data.jobNodeInfo.port))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("用户:"+e._s(e.data.jobNodeInfo.username))])])]),t("el-collapse-item",{attrs:{name:"priority"}},[t("template",{slot:"title"},[e._v("\n                调度配置\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用于多个平级任务运行时的优先级",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"调度优先级"}},[t("el-select",{attrs:{disabled:e.isDisabled,filterable:""},model:{value:e.data.priorityConfig,callback:function(t){e.$set(e.data,"priorityConfig",t)},expression:"data.priorityConfig"}},e._l(e.priorityList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-checkbox",{attrs:{disabled:e.isDisabled,"true-label":1,"false-label":0},model:{value:e.data.isOpenOutHours,callback:function(t){e.$set(e.data,"isOpenOutHours",t)},expression:"data.isOpenOutHours"}},[e._v("是否设置超时")]),e.data.isOpenOutHours?t("el-form-item",{attrs:{label:"超时时间"}},[t("el-input-number",{attrs:{disabled:e.isDisabled,min:1,max:1440},model:{value:e.data.outHours,callback:function(t){e.$set(e.data,"outHours",t)},expression:"data.outHours"}}),t("span",{staticStyle:{"margin-left":"12px"}},[e._v("分钟")])],1):e._e()],1)],2),t("el-collapse-item",{attrs:{name:"sysRun"}},[t("template",{slot:"title"},[e._v("\n                运行参数\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"任务运行时需要设置的参数",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-table",{attrs:{data:e.data.nodeParam,size:"mini",width:"100"}},[t("el-table-column",{attrs:{label:"参数名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".key",rules:{required:!0,message:"请输入参数名称",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数名称"},model:{value:a.row.key,callback:function(t){e.$set(a.row,"key",t)},expression:"scope.row.key"}})],1)]}}])}),t("el-table-column",{attrs:{label:"参数值或者表达式",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"nodeParam."+a.$index+".value",rules:{required:!0,message:"请输入参数值或者表达式",trigger:"blur"}}},[t("el-input",{attrs:{disabled:e.isDisabled,placeholder:"输入参数值或者表达式"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作",align:"right","header-align":"right",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{disabled:e.isDisabled,type:"text",size:"small"},on:{click:function(t){return e.removeParam(a)}}},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"add_new",on:{click:e.addParam}},[e._v("+ 添加参数")])],1)],2),t("el-collapse-item",{attrs:{name:"SYMBIOSIS"}},[t("template",{slot:"title"},[e._v("\n                依赖配置\n                "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"依赖配置时任务在运行时需要依赖的资源、函数、上游父节点的配置",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-table",{attrs:{size:"mini",data:e.data.jobNodeLayConfigDtos}},[t("el-table-column",{attrs:{label:"上游节点","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{position:"relative",top:"-6px"}},[e._v(e._s(a.row.upNodeName))])]}}])}),t("el-table-column",{attrs:{label:"判断类型",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".configType",rules:{required:!0,message:"请选择判断类型",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},on:{change:function(t){return e.changeType(t,a)}},model:{value:a.row.configType,callback:function(t){e.$set(a.row,"configType",t)},expression:"scope.row.configType"}},e._l(e.conditionNammeList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)]}}])}),t("el-table-column",{attrs:{label:"判断对象",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.configType?t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".outputTableId",rules:{required:!0,message:"请选择判断对象",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:a.row.outputTableId,callback:function(t){e.$set(a.row,"outputTableId",t)},expression:"scope.row.outputTableId"}},e._l(a.row.tabeleNameList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".operationNamme",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:a.row.operationNamme,callback:function(t){e.$set(a.row,"operationNamme",t)},expression:"scope.row.operationNamme"}},e._l(e.statusOps,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]}}])}),t("el-table-column",{attrs:{label:"取值范围",width:"180","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.configType?t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".operationNamme",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-input",{staticClass:"number",attrs:{disabled:e.isDisabled,type:"number",min:"0",placeholder:"请输入自然数",onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}"},model:{value:a.row.conditionValue,callback:function(t){e.$set(a.row,"conditionValue",t)},expression:"scope.row.conditionValue"}},[t("el-select",{staticStyle:{width:"55px"},attrs:{slot:"prepend",disabled:e.isDisabled,placeholder:"请选择"},slot:"prepend",model:{value:a.row.operationNamme,callback:function(t){e.$set(a.row,"operationNamme",t)},expression:"scope.row.operationNamme"}},e._l(e.countOps,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1):t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".conditionValue",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:a.row.conditionValue,callback:function(t){e.$set(a.row,"conditionValue",t)},expression:"scope.row.conditionValue"}},[t("el-option",{attrs:{label:"成功",value:"0"}}),t("el-option",{attrs:{label:"失败",value:"1"}})],1)],1)]}}])})],1)],1)],2)],1)],1)],1)}),[],!1,null,null,null).exports);function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ke(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return Ge(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ge(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var Ye={props:["dataProcessTaskToChangeJobNodeData"],components:{codeEditor:q.a,attribute:Je},data:function(){return{jobNodeLock:1,hasFormat:!0,jobNodeData:"",isLoading:!1,drawer:!1,dialogVisible:!1,form:{sql_statment:"",jobNodeInfo:{name:"",createPerName:""}}}},methods:{fullScreen:function(){var e=this;this.dialogVisible=!0,this.$nextTick((function(){e.$refs.screeCodeEditor.code=e.$refs.codeEditor.code,setTimeout((function(){e.$refs.screeCodeEditor.$refs.codemirror.codemirror.refresh()}),10)}))},format:function(){this.$refs.codeEditor.format()},openDrawer:function(){this.drawer=!0},dataChange:function(e){Object.assign(this.form,e)},nodelistOutTable:function(e){var t=this;this.isLoading=!0,this.$API.get(this.$URL.nodelistOutTable+"/"+e.upNodeId,{},(function(a){t.isLoading=!1,0==a.code?t.$set(e,"tabeleNameList",a.data):t.$message.error(a.msg)}))},lock:function(){var e=this,t={id:this.jobNodeData.id,jobNodeLock:this.jobNodeLock?0:1};this.$API.post(this.$URL.jobNodeLock,t,(function(t){0==t.code?e.jobNodeLock=e.jobNodeLock?0:1:e.$message.error(t.msg)}))},getNodeInfo:function(){var e=this;this.$API.get(this.$URL.getJobNodeInfoInfoByKeyAndJobId+"/"+this.jobNodeData.id,{},(function(t){if(0==t.code){if(t.data.jobNodeLayConfigDtos&&t.data.jobNodeLayConfigDtos.length>0){var a,o=Ke(t.data.jobNodeLayConfigDtos);try{for(o.s();!(a=o.n()).done;){var i=a.value;e.nodelistOutTable(i)}}catch(e){o.e(e)}finally{o.f()}}e.form=t.data,e.jobNodeLock=JSON.parse(t.data.jobNodeInfo.jobNodeLock),e.jobNodeData.COPYING&&(e.form.jobNodeInfo.name="--",e.form.jobNodeInfo.createPerName="--")}else e.$message.error(t.msg)}))},onConfirm:function(e){var t=this,a={jobNodeLock:e,id:this.jobNodeData.id,name:"--"==this.form.jobNodeInfo.name?this.jobNodeData.name:this.form.jobNodeInfo.name,procId:this.$route.query.id,typeId:6,jobNodeConfig:We(We({},this.form),{},{jobNodeLock:0}),jobNodeLayConfigDtoList:this.form.jobNodeLayConfigDtos};this.$refs.attribute.$refs.ruleForm.validate((function(e){e?t.jobNodeData.COPYING?o.a.$emit("copySaveJobNodeConfig",{params:a,job:t.jobNodeData}):(t.isLoading=!0,t.$API.post(t.$URL.saveJobNodeConfig,a,(function(e){t.isLoading=!1,0==e.code?(t.$message.success("保存成功"),t.getNodeInfo(),t.drawer=!1):t.$message.error(e.msg)}))):t.$message.warning("属性配置尚有必选项没有填写")}))}},mounted:function(){var e=this;o.a.$off("workInfoUpdata"),o.a.$on("workInfoUpdata",(function(t){t.copyCom&&(e.jobNodeData.COPYING=!1),e.getNodeInfo()}))},watch:{dataProcessTaskToChangeJobNodeData:{handler:function(e){e&&this.$parent.name==e.id+""&&(this.jobNodeData=e,this.getNodeInfo())},deep:!0,immediate:!0}}},Xe=(a("4d6a"),a("76ba"),Object(c.a)(Ye,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_process_task_shell"},[t("div",{staticClass:"left"},[t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",disabled:!e.jobNodeLock,title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(0)},confirm:function(t){return e.onConfirm(0)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px",position:"sticky",top:"10px"},attrs:{slot:"reference",disabled:!e.jobNodeLock,type:"primary",size:"mini"},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存并解锁")])],1),t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",disabled:!e.jobNodeLock,title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.onConfirm(1)},confirm:function(t){return e.onConfirm(1)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px",position:"sticky",top:"10px","margin-left":"10px"},attrs:{slot:"reference",disabled:!e.jobNodeLock,type:"primary",size:"mini"},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存")])],1),t("el-button",{staticStyle:{"font-size":"12px",position:"sticky",top:"10px","margin-left":"10px"},attrs:{size:"mini"},on:{click:e.lock}},[e._v(e._s(e.jobNodeLock?"解锁":"上锁"))]),t("div",{staticClass:"ctr"},[t("el-button",{staticClass:"format-btn",staticStyle:{padding:"0"},attrs:{disabled:!e.jobNodeLock,type:"text"},on:{click:e.fullScreen}},[t("span",{staticClass:"el-icon-full-screen",attrs:{title:"全屏编写"}})])],1),t("div",{staticClass:"form_content"},[t("div",{staticClass:"code_out"},[t("codeEditor",{ref:"codeEditor",attrs:{isLock:!e.jobNodeLock,hasFormat:e.hasFormat,placeholder:"请编写shell语句"},model:{value:e.form.sql_statment,callback:function(t){e.$set(e.form,"sql_statment",t)},expression:"form.sql_statment"}})],1)])],1),t("div",{staticClass:"right"},[t("div",{staticClass:"attribute",on:{click:e.openDrawer}},[e._v("属性配置")])]),t("div",{staticClass:"ds_dialog"},[t("el-dialog",{attrs:{title:"shell输入",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("codeEditor",{ref:"screeCodeEditor",attrs:{isLock:!e.jobNodeLock,hasFormat:e.hasFormat,placeholder:"请编写shell语句"},model:{value:e.form.sql_statment,callback:function(t){e.$set(e.form,"sql_statment",t)},expression:"form.sql_statment"}})],1)],1),t("el-drawer",{attrs:{title:"属性配置",visible:e.drawer,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[t("attribute",{ref:"attribute",attrs:{isDisabled:!e.jobNodeLock,jobNodeData:e.jobNodeData,form:e.form},on:{dataChange:e.dataChange}})],1)],1)}),[],!1,null,"255f726a",null).exports),Qe={props:["form"],data:function(){return{activeNames:["basicAtttibute","priority","sysRun","SYMBIOSIS"],data:{priorityConfig:"中",isOpenOutHours:0,outHours:1,jobNodeInfo:{name:"",createPerName:""}},priorityList:[{label:"高",value:"高"},{label:"中",value:"中"},{label:"低",value:"低"}]}},methods:{addParam:function(){this.data.nodeParam.push({key:"",value:""})},removeParam:function(e){this.data.nodeParam.remove(e.row)}},watch:{form:{handler:function(e){var t=this;this.$nextTick((function(){t.data=Object.assign(t.data,e),t.data.nodeParam=t.data.nodeParam?t.data.nodeParam:[],t.data.outHours=t.data.outHours||1}))},deep:!0,immediate:!0}}};a("7eb3");function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function et(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var tt,at,ot,it,rt,nt,st={props:["dataProcessTaskToChangeJobNodeData"],components:{attribute:Object(c.a)(Qe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"process_algo_attribute"},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-form",{ref:"ruleForm",attrs:{model:e.data,"label-width":"120px","label-position":"left"}},[t("el-collapse-item",{attrs:{title:"基本属性",name:"basicAtttibute"}},[t("div",{staticClass:"section"},[t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务名称："+e._s(e.data.jobNodeInfo.name))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务类型：算法任务")]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("责任人:"+e._s(e.data.jobNodeInfo.createPerName))])])]),t("el-collapse-item",{attrs:{name:"priority"}},[t("template",{slot:"title"},[e._v("\n          调度配置\n          "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"用于多个平级任务运行时的优先级",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-form-item",{staticStyle:{width:"70%"},attrs:{label:"调度优先级"}},[t("el-select",{model:{value:e.data.priorityConfig,callback:function(t){e.$set(e.data,"priorityConfig",t)},expression:"data.priorityConfig"}},e._l(e.priorityList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.data.isOpenOutHours,callback:function(t){e.$set(e.data,"isOpenOutHours",t)},expression:"data.isOpenOutHours"}},[e._v("是否设置超时")]),e.data.isOpenOutHours?t("el-form-item",{attrs:{label:"超时时间"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1,max:1440},model:{value:e.data.outHours,callback:function(t){e.$set(e.data,"outHours",t)},expression:"data.outHours"}}),t("span",{staticStyle:{"margin-left":"12px"}},[e._v("分钟")])],1):e._e()],1)],2),t("el-collapse-item",{attrs:{name:"SYMBIOSIS"}},[t("template",{slot:"title"},[e._v("\n                  依赖配置\n                  "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"依赖配置时任务在运行时需要依赖的资源、函数、上游父节点的配置",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"section"},[t("el-table",{attrs:{size:"mini",data:e.data.jobNodeLayConfigDtos}},[t("el-table-column",{attrs:{label:"上游节点","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{position:"relative",top:"-6px"}},[e._v(e._s(a.row.upNodeName))])]}}])}),t("el-table-column",{attrs:{label:"判断类型",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".configType",rules:{required:!0,message:"请选择判断类型",trigger:"change"}}},[t("el-select",{on:{change:function(t){return e.changeType(t,a)}},model:{value:a.row.configType,callback:function(t){e.$set(a.row,"configType",t)},expression:"scope.row.configType"}},e._l(e.conditionNammeList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)]}}])}),t("el-table-column",{attrs:{label:"判断对象",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.configType?t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".outputTableId",rules:{required:!0,message:"请选择判断对象",trigger:"change"}}},[t("el-select",{model:{value:a.row.outputTableId,callback:function(t){e.$set(a.row,"outputTableId",t)},expression:"scope.row.outputTableId"}},e._l(a.row.tabeleNameList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".operationNamme",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-select",{model:{value:a.row.operationNamme,callback:function(t){e.$set(a.row,"operationNamme",t)},expression:"scope.row.operationNamme"}},e._l(e.statusOps,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]}}])}),t("el-table-column",{attrs:{label:"取值范围",width:"180","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.configType?t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".operationNamme",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-input",{staticClass:"number",attrs:{type:"number",min:"0",placeholder:"请输入自然数",onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^0-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}"},model:{value:a.row.conditionValue,callback:function(t){e.$set(a.row,"conditionValue",t)},expression:"scope.row.conditionValue"}},[t("el-select",{staticStyle:{width:"55px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:a.row.operationNamme,callback:function(t){e.$set(a.row,"operationNamme",t)},expression:"scope.row.operationNamme"}},e._l(e.countOps,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1):t("el-form-item",{attrs:{"label-width":"0",prop:"jobNodeLayConfigDtos."+a.$index+".conditionValue",rules:{required:!0,message:"请选择判断条件",trigger:"change"}}},[t("el-select",{model:{value:a.row.conditionValue,callback:function(t){e.$set(a.row,"conditionValue",t)},expression:"scope.row.conditionValue"}},[t("el-option",{attrs:{label:"成功",value:"0"}}),t("el-option",{attrs:{label:"失败",value:"1"}})],1)],1)]}}])})],1)],1)],2)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{isLoading:!1,dialogVisible:!1,drawer:!1,form:{modelTypeId:null,algorithmTypeId:null,algorithmTypeName:null,modelId:null,inputPreDbName:null,inputPreTableId:null,outputPreDbName:null,outputPreTableId:null,outputPreTableName:null,inputPreTableName:null,preResultInfos:[]},modelTypeList:[],algorithmTypeList:[],modelList:[],DWList:[],DBList:[],outDWList:[],outDBList:[],rules:{modelTypeId:[{required:!0,message:"请选择模型类型",trigger:"change"}],algorithmTypeId:[{required:!0,message:"请选择算法类型",trigger:"change"}],modelId:[{required:!0,message:"请选择模型",trigger:"change"}],inputPreDbName:[{required:!0,message:"请选择数据库",trigger:"change"}],inputPreTableId:[{required:!0,message:"请选择数据表",trigger:"change"}],outputPreDbName:[{required:!0,message:"请选择数据库",trigger:"change"}],outputPreTableId:[{required:!0,message:"请选择数据表",trigger:"change"}]}}},computed:{},methods:{openDrawer:function(){this.drawer=!0},dataAssetsModelListModelTypes:(nt=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,e.next=4,this.http.get(this.$URL.dataAssetsModelListModelTypes);case 4:t=e.sent,a=t.data.data,this.isLoading=!1,this.modelTypeList=a||[],e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.isLoading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return nt.apply(this,arguments)}),dataAssetsAlgorithmModelRulesListAlgorithmType:(rt=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,t={modelTypeId:this.form.modelTypeId},e.prev=2,e.next=5,this.http.get(this.$URL.dataAssetsAlgorithmModelRulesListAlgorithmType,{params:t});case 5:a=e.sent,o=a.data.data,this.isLoading=!1,this.algorithmTypeList=o||[],e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.isLoading=!1;case 14:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(){return rt.apply(this,arguments)}),selectModelsByAlgorithmTypeAndModelType:(it=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,t=this.algorithmTypeList.find((function(e){return e.algorithmTypeId==r.form.algorithmTypeId})),this.form.algorithmTypeName=t?t.algorithmTypeName:"",a={modelTypeId:this.form.modelTypeId,algorithmTypeName:this.form.algorithmTypeName},e.next=7,this.http.get(this.$URL.selectModelsByAlgorithmTypeAndModelType,{params:a});case 7:o=e.sent,i=o.data.data,this.modelList=i||[],this.isLoading=!1,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),this.isLoading=!1;case 16:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return it.apply(this,arguments)}),getlistDbs:function(){var e=this;this.isLoading=!0,this.$API.get(this.$URL.getTableInfoListDbs,{},(function(t){e.isLoading=!1,0==t.code?(e.DWList=t.data||[],e.outDWList=t.data||[]):e.$message.error(t.msg)}))},getTableInfoList:(ot=Object(A.a)(regeneratorRuntime.mark((function e(t){var a,o,i,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,a="input"==t?this.form.inputPreDbName:this.form.outputPreDbName,o="input"==t?1:2,i={db_name:a,proc_id:this.$route.query.id,modelId:this.form.modelId,typeId:7,flagId:o},e.next=7,this.http.post(this.$URL.getTableInfoList,i);case 7:r=e.sent,n=r.data.data,"input"==t?this.DBList=n||[]:this.outDBList=n||[],this.isLoading=!1,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),this.isLoading=!1;case 16:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(e){return ot.apply(this,arguments)}),selectReultFieldMapperList:(at=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i,r,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,t=this.form,a=t.modelTypeId,o=t.modelId,i=t.outputPreTableId,r={modelTypeId:a,modelId:o,outputPreTableId:i},e.next=6,this.http.get(this.$URL.selectReultFieldMapperList,{params:r});case 6:n=e.sent,s=n.data.data,this.form.preResultInfos=s||[],this.isLoading=!1,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),this.isLoading=!1;case 15:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(){return at.apply(this,arguments)}),getNodeInfo:(tt=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.http.get(this.$URL.getJobNodeInfoInfoByKeyAndJobId+"/"+this.jobNodeData.id);case 3:t=e.sent,a=t.data.data,this.isLoading=!1,this.form=Object.assign(this.form,a),this.jobNodeData.COPYING&&(this.form.jobNodeInfo.name="--",this.form.jobNodeInfo.createPerName="--"),this.dataAssetsModelListModelTypes(),this.dataAssetsAlgorithmModelRulesListAlgorithmType().then((function(){o.selectModelsByAlgorithmTypeAndModelType()})),this.getlistDbs(),this.getTableInfoList("input"),this.getTableInfoList("output");case 13:case"end":return e.stop()}}),e,this)}))),function(){return tt.apply(this,arguments)}),getFormPromise:function(e){return new Promise((function(t){e.validate((function(e){t(e)}))}))},save:function(){var e=this,t=this.$refs.paramConfig.$refs.ruleForm;this.$refs.ruleForm.validate((function(a){if(!a)return!1;Promise.all([t].map(e.getFormPromise)).then((function(t){if(t.every((function(e){return!!e}))){var a=e.outDBList.find((function(t){return t.id==e.form.outputPreTableId})),i=e.DBList.find((function(t){return t.id==e.form.inputPreTableId}));e.form.outputPreTableName=null!=a&&a.tableName?a.tableName:"",e.form.inputPreTableName=null!=i&&i.tableName?i.tableName:"";var r={id:e.jobNodeData.id,name:"--"==e.form.jobNodeInfo.name?e.jobNodeData.name:e.form.jobNodeInfo.name,procId:e.$route.query.id,typeId:7,jobNodeConfig:et({},e.form)};e.jobNodeData.COPYING?o.a.$emit("copySaveJobNodeConfig",{params:r,job:e.jobNodeData}):(e.isLoading=!0,e.$API.post(e.$URL.saveJobNodeConfig,r,(function(t){e.isLoading=!1,0==t.code?(e.$message.success("保存成功"),e.drawer=!1):e.$message.error(t.msg)})))}else e.$message.warning("请完善参数配置必填项")}))}))},modeTypeChange:function(){this.algorithmTypeList=[],this.modelList=[],this.form.algorithmTypeId="",this.form.modelId="",this.dataAssetsAlgorithmModelRulesListAlgorithmType()},changModel:function(e){this.form.preResultInfos=[],this.form.outputPreTableId&&this.form.modelTypeId&&e&&this.selectReultFieldMapperList()},changOutTB:function(e){this.form.preResultInfos=[],this.form.modelId&&this.form.modelTypeId&&e&&this.selectReultFieldMapperList()},algorithmTypeChange:function(){this.modelList=[],this.form.modelId="",this.selectModelsByAlgorithmTypeAndModelType()},changDb:function(e){"input"==e?(this.DBList=[],this.form.inputPreTableId=""):(this.outDBList=[],this.form.outputPreTableId=""),this.getTableInfoList(e)},changeoutputPreChecked:function(e,t){var a=t.filedValue.find((function(t){return t.id==e}));t.outputPreCheckedName=a?a.fieldName:""}},mounted:function(){var e=this;o.a.$off("workInfoUpdata"),o.a.$on("workInfoUpdata",(function(t){t.copyCom&&(e.jobNodeData.COPYING=!1),e.getNodeInfo()}))},watch:{dataProcessTaskToChangeJobNodeData:{handler:function(e){e&&this.$parent.name==e.id+""&&(this.jobNodeData=e,this.getNodeInfo())},deep:!0,immediate:!0}}},lt=(a("1320"),a("b7e8"),Object(c.a)(st,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_process_task_algorithm"},[t("div",{staticClass:"left"},[t("div",{staticClass:"button_out"},[t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:e.save}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px",position:"sticky",top:"10px"},attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存")])],1)],1),t("div",{staticClass:"form_content"},[t("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-width":"100px",rules:e.rules,"label-position":"left",size:"mini"}},[t("div",{staticClass:"title"},[e._v("选择模型")]),t("div",{staticClass:"sebar"},[t("el-form-item",{staticStyle:{width:"500px"},attrs:{prop:"modelTypeId",label:"模型类型"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择模型类型"},on:{change:e.modeTypeChange},model:{value:e.form.modelTypeId,callback:function(t){e.$set(e.form,"modelTypeId",t)},expression:"form.modelTypeId"}},e._l(e.modelTypeList,(function(e){return t("el-option",{key:e.modelTypeId,attrs:{value:e.modelTypeId,label:e.modelTypeName}})})),1)],1),t("el-form-item",{staticStyle:{width:"500px"},attrs:{prop:"algorithmTypeId",label:"算法类型"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择算法类型"},on:{change:e.algorithmTypeChange},model:{value:e.form.algorithmTypeId,callback:function(t){e.$set(e.form,"algorithmTypeId",t)},expression:"form.algorithmTypeId"}},e._l(e.algorithmTypeList,(function(e){return t("el-option",{key:e.algorithmTypeId,attrs:{value:e.algorithmTypeId,label:e.algorithmTypeName}})})),1)],1),t("el-form-item",{staticStyle:{width:"500px"},attrs:{prop:"modelId",label:"模型"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择模型"},on:{change:e.changModel},model:{value:e.form.modelId,callback:function(t){e.$set(e.form,"modelId",t)},expression:"form.modelId"}},e._l(e.modelList,(function(e){return t("el-option",{key:"ds"+e.id,attrs:{value:e.id,label:e.modelName}})})),1)],1)],1),t("div",{staticClass:"title"},[e._v("选择预测数据")]),t("div",{staticClass:"sebar"},[t("el-form-item",{staticStyle:{width:"500px"},attrs:{prop:"inputPreDbName",label:"数据库"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择数据库"},on:{change:function(t){return e.changDb("input")}},model:{value:e.form.inputPreDbName,callback:function(t){e.$set(e.form,"inputPreDbName",t)},expression:"form.inputPreDbName"}},e._l(e.DWList,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1),t("el-form-item",{staticStyle:{width:"500px"},attrs:{prop:"inputPreTableId",label:"表"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择表"},model:{value:e.form.inputPreTableId,callback:function(t){e.$set(e.form,"inputPreTableId",t)},expression:"form.inputPreTableId"}},e._l(e.DBList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.tableName}})})),1)],1)],1),t("div",{staticClass:"title"},[e._v("选择预测结果输出表")]),t("div",{staticClass:"sebar"},[t("el-form-item",{staticStyle:{width:"500px"},attrs:{prop:"outputPreDbName",label:"数据库"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择数据库"},on:{change:function(t){return e.changDb("out")}},model:{value:e.form.outputPreDbName,callback:function(t){e.$set(e.form,"outputPreDbName",t)},expression:"form.outputPreDbName"}},e._l(e.outDWList,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1),t("el-form-item",{staticStyle:{width:"500px"},attrs:{prop:"outputPreTableId",label:"表"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择表"},on:{change:e.changOutTB},model:{value:e.form.outputPreTableId,callback:function(t){e.$set(e.form,"outputPreTableId",t)},expression:"form.outputPreTableId"}},e._l(e.outDBList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.tableName}})})),1)],1)],1),t("div",[e._v("预测结果字段映射")]),t("div",{staticClass:"sebar"},[t("el-form-item",[t("el-table",{staticStyle:{width:"500px","margin-top":"15px"},attrs:{data:e.form.preResultInfos,"row-style":{border:"none"},"cell-style":{border:"none"}}},[t("el-table-column",{attrs:{prop:"filedName",label:"字段",width:"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"输出表字段",width:"300"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"preResultInfos."+a.$index+".outputPreCheckedId",rules:{required:!0,message:"请选择输出表字段",trigger:"change"}}},[t("el-select",{on:{change:function(t){return e.changeoutputPreChecked(t,a.row)}},model:{value:a.row.outputPreCheckedId,callback:function(t){e.$set(a.row,"outputPreCheckedId",t)},expression:"scope.row.outputPreCheckedId"}},e._l(a.row.filedValue,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.fieldName}})})),1)],1)]}}])})],1)],1)],1)])],1)]),t("div",{staticClass:"right"},[t("div",{staticClass:"attribute",on:{click:e.openDrawer}},[e._v("属性配置")])]),t("el-drawer",{attrs:{title:"属性配置",visible:e.drawer,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[t("attribute",{ref:"paramConfig",attrs:{form:e.form}})],1)],1)}),[],!1,null,"28cd7a3e",null).exports),ct={props:["form","isDisabled"],data:function(){return{activeNames:["basicAtttibute","priority"],data:{isOpenTime:0,outTime:1,outTimeDo:0,jobNodeInfo:{name:"",createPerName:""}}}},methods:{},watch:{form:{handler:function(e){var t=this;this.$nextTick((function(){t.data=Object.assign(t.data,e),t.data.outTime=t.data.outTime||1,t.data.outTimeDo=t.data.outTimeDo||0}))},deep:!0,immediate:!0},data:{handler:function(e){this.$emit("dataChange",e)},deep:!0}}};a("08c5");function dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function ut(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ft={props:["dataProcessTaskToChangeJobNodeData"],components:{attribute:Object(c.a)(ct,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"process_algo_attribute"},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-form",{ref:"ruleForm",attrs:{model:e.data,"label-width":"120px","label-position":"left"}},[t("el-collapse-item",{attrs:{title:"基本属性",name:"basicAtttibute"}},[t("div",{staticClass:"section"},[t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务名称："+e._s(e.data.jobNodeInfo.name))]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("任务类型：检测任务")]),t("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("责任人:"+e._s(e.data.jobNodeInfo.createPerName))])])]),t("el-collapse-item",{attrs:{name:"priority"}},[t("template",{slot:"title"},[e._v("\n          调度配置"),t("i",{staticClass:"header-icon icon icon-ic_remind",attrs:{title:"用于多个平级任务运行时的优先级"}})]),t("div",{staticClass:"section"},[t("el-checkbox",{attrs:{disabled:e.isDisabled,"true-label":1,"false-label":0},model:{value:e.data.isOpenTime,callback:function(t){e.$set(e.data,"isOpenTime",t)},expression:"data.isOpenTime"}},[e._v("是否设置超时")]),e.data.isOpenTime?t("el-form-item",{attrs:{label:"超时时间"}},[t("el-input-number",{attrs:{disabled:e.isDisabled,"controls-position":"right",min:1,max:1440},model:{value:e.data.outTime,callback:function(t){e.$set(e.data,"outTime",t)},expression:"data.outTime"}}),t("span",{staticStyle:{"margin-left":"12px"}},[e._v("分钟")])],1):e._e(),e.data.isOpenTime?t("el-form-item",{attrs:{label:"超时动作"}},[t("el-radio-group",{attrs:{disabled:e.isDisabled},model:{value:e.data.outTimeDo,callback:function(t){e.$set(e.data,"outTimeDo",t)},expression:"data.outTimeDo"}},[t("el-radio",{attrs:{label:0}},[e._v("继续等待")]),t("el-radio",{attrs:{label:1}},[e._v("超时则跳过检测运行下游节点")]),t("el-radio",{attrs:{label:2}},[e._v("超时则停止运行整体")])],1)],1):e._e()],1)],2)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{jobNodeLock:1,isLoading:!1,dialogVisible:!1,drawer:!1,form:{upProcId:null,upJobId:null,upTypeId:null,upNodeId:null,matchType:0,expressRule:"",checkParam:null,checkEndParam:null},procs:[],workflows:[],taskTypes:[],taskNodes:[],timeRuleList:[]}},computed:{},methods:{openDrawer:function(){this.drawer=!0},dataChange:function(e){Object.assign(this.form,e)},changeMatchType:function(){this.form.checkParam=null,this.form.checkEndParam=null},getTimeRule:function(){var e=this;this.$API.get(this.$URL.getTimeRule,{},(function(t){0==t.code?(e.timeRuleList=t.data||[],e.form.expressRule=e.timeRuleList[0]):e.$message.error(t.msg)}))},getProcs:function(){var e=this;this.$API.get(this.$URL.listsProcs,{},(function(t){0==t.code?e.procs=t.data||[]:e.$message.error(t.msg)}))},getListWfs:function(e){var t=this;e&&(this.form.upJobId=null,this.form.upTypeId=null,this.form.upNodeId=null,this.workflows=[],this.taskTypes=[],this.taskNodes=[]),this.$API.get(this.$URL.listWfs+this.form.upProcId,{},(function(e){0==e.code?t.workflows=e.data||[]:t.$message.error(e.msg)}))},getListTaskTypes:function(e){var t=this;e&&(this.form.upTypeId=null,this.form.upNodeId=null,this.taskTypes=[],this.taskNodes=[]),this.$API.get(this.$URL.listTaskTypes+this.form.upJobId,{},(function(e){0==e.code?t.taskTypes=e.data||[]:t.$message.error(e.msg)}))},getListTaskNodes:function(e){var t=this;e&&(this.form.upNodeId=null,this.taskNodes=[]),this.$API.get(this.$URL.listTaskNodes+this.form.upJobId+"&upTypeId="+this.form.upTypeId,{},(function(e){0==e.code?t.taskNodes=e.data||[]:t.$message.error(e.msg)}))},getNodeInfo:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.http.get(this.$URL.getJobNodeInfoInfoByKeyAndJobId+"/"+this.jobNodeData.id);case 3:t=e.sent,a=t.data.data,this.isLoading=!1,this.form=Object.assign(this.form,a),this.jobNodeData.COPYING&&(this.form.jobNodeInfo.name="--",this.form.jobNodeInfo.createPerName="--"),this.form.matchType=this.form.matchType||0,this.getProcs(),this.workflows=this.form.workflows,this.taskTypes=this.form.taskTypes,this.taskNodes=this.form.taskNodes,this.jobNodeLock=JSON.parse(a.jobNodeInfo.jobNodeLock);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getFormPromise:function(e){return new Promise((function(t){e.validate((function(e){t(e)}))}))},lock:function(){var e=this,t={id:this.jobNodeData.id,jobNodeLock:this.jobNodeLock?0:1};this.$API.post(this.$URL.jobNodeLock,t,(function(t){0==t.code?e.jobNodeLock=e.jobNodeLock?0:1:e.$message.error(t.msg)}))},save:function(e){var t=this,a=this.$refs.paramConfig.$refs.ruleForm;this.$refs.ruleForm.validate((function(i){if(!i)return!1;Promise.all([a].map(t.getFormPromise)).then((function(a){if(a.every((function(e){return!!e}))){t.form.jobNodeInfo.jobNodeLock=e;var i={id:t.jobNodeData.id,name:t.jobNodeData.name,procId:t.$route.query.id,typeId:8,jobNodeCheck:ut({},t.form),jobNodeLock:e};t.jobNodeData.COPYING?o.a.$emit("copySaveJobNodeConfig",{params:i,job:t.jobNodeData}):t.form.upProcId&&t.form.upJobId&&t.form.upTypeId&&t.form.upNodeId?(t.isLoading=!0,t.$API.post(t.$URL.saveJobNodeConfig,i,(function(e){t.isLoading=!1,0==e.code?(t.$message.success("保存成功"),t.getNodeInfo(),t.drawer=!1):t.$message.error(e.msg)}))):t.$message.warning("请完善上游检测节点")}else t.$message.warning("请完善参数配置必填项")}))}))}},mounted:function(){var e=this;o.a.$off("workInfoUpdata"),o.a.$on("workInfoUpdata",(function(t){t.copyCom&&(e.jobNodeData.COPYING=!1),e.getNodeInfo()}))},watch:{dataProcessTaskToChangeJobNodeData:{handler:function(e){e&&this.$parent.name==e.id+""&&(this.jobNodeData=e,this.getNodeInfo(),this.getTimeRule())},deep:!0,immediate:!0}}},pt=(a("307f"),a("7550"),Object(c.a)(ft,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"data_process_task_checkTask"},[t("div",{staticClass:"left"},[t("div",{staticClass:"button_out"},[t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",disabled:!e.jobNodeLock,title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.save(0)},confirm:function(t){return e.save(0)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px"},attrs:{slot:"reference",disabled:!e.jobNodeLock,type:"primary",size:"mini"},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存并解锁")])],1),t("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",disabled:!e.jobNodeLock,title:"将会跟右侧弹出的属性配置一起保存，是否确定？"},on:{onConfirm:function(t){return e.save(1)},confirm:function(t){return e.save(1)}}},[t("el-button",{staticClass:"icon icon-save",staticStyle:{"font-size":"12px","margin-left":"10px"},attrs:{slot:"reference",disabled:!e.jobNodeLock,type:"primary",size:"mini"},on:{click:function(t){e.drawer=!0}},slot:"reference"},[e._v("保存")])],1),t("el-button",{staticStyle:{"font-size":"12px","margin-left":"10px"},attrs:{size:"mini"},on:{click:e.lock}},[e._v(e._s(e.jobNodeLock?"解锁":"上锁"))])],1),t("div",{staticClass:"form_content"},[t("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-width":"100px","label-position":"left",size:"mini",disabled:!e.jobNodeLock}},[t("div",{staticClass:"title"},[e._v("选择上游检测节点")]),t("div",{staticClass:"sebar"},[t("el-form-item",{staticClass:"upstreamNode",staticStyle:{width:"650px"},attrs:{label:"上游节点"}},[t("el-select",{staticStyle:{width:"140px"},attrs:{filterable:"",placeholder:"请选择项目"},on:{change:function(t){return e.getListWfs("edit")}},model:{value:e.form.upProcId,callback:function(t){e.$set(e.form,"upProcId",t)},expression:"form.upProcId"}},e._l(e.procs,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1),t("el-select",{staticStyle:{width:"140px"},attrs:{filterable:"",placeholder:"请选择作业流"},on:{change:function(t){return e.getListTaskTypes("edit")}},model:{value:e.form.upJobId,callback:function(t){e.$set(e.form,"upJobId",t)},expression:"form.upJobId"}},e._l(e.workflows,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1),t("el-select",{staticStyle:{width:"140px"},attrs:{filterable:"",placeholder:"请选择任务类型"},on:{change:function(t){return e.getListTaskNodes("edit")}},model:{value:e.form.upTypeId,callback:function(t){e.$set(e.form,"upTypeId",t)},expression:"form.upTypeId"}},e._l(e.taskTypes,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1),t("el-select",{staticStyle:{width:"140px"},attrs:{filterable:"",placeholder:"请选择任务"},model:{value:e.form.upNodeId,callback:function(t){e.$set(e.form,"upNodeId",t)},expression:"form.upNodeId"}},e._l(e.taskNodes,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),t("el-form-item",{staticStyle:{width:"650px"},attrs:{prop:"matchType",label:"匹配日期"}},[t("el-radio-group",{on:{change:e.changeMatchType},model:{value:e.form.matchType,callback:function(t){e.$set(e.form,"matchType",t)},expression:"form.matchType"}},[t("el-radio",{attrs:{label:0}},[e._v("单个日期")]),t("el-radio",{attrs:{label:1}},[e._v("日期区间")])],1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n            匹配的日期都是以作业流开始的时间，而不是结束时间进行匹配。"),t("br"),e._v("\n            支持的日期格式为：天：${yyyy-mm-dd}  月：${yyyy-mm}  周：${yyyy-ww}"),t("br"),e._v("\n            小时:${yyyy-mm-dd hh}  分钟：${yyyy-mm-dd hh:mi}"),t("br"),e._v("\n            匹配规则说明："),t("br"),e._v("\n            匹配日期中选择& ，则满足每个日期对应实例最新的检测状态全部成功才算成功；"),t("br"),e._v("\n            匹配日期中选择| ，则满足其中一个日期对应实例最新的检测状态全部成功才算成功；"),t("br"),e._v("\n            匹配日期中选择区间 ，则满足日期区间内对应实例最新的检测状态成功才算成功。"),t("br")]),t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("el-form-item",{staticStyle:{width:"650px"},attrs:{prop:"expressRule",label:"日期规范"}},[t("el-select",{staticStyle:{width:"250px"},attrs:{filterable:"",placeholder:"请选择日期规范"},model:{value:e.form.expressRule,callback:function(t){e.$set(e.form,"expressRule",t)},expression:"form.expressRule"}},e._l(e.timeRuleList,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1),t("el-form-item",{staticStyle:{width:"650px"},attrs:{prop:"checkParam",label:"日期格式"}},[0===e.form.matchType?t("el-input",{staticStyle:{width:"545px"},attrs:{type:"textarea",rows:4,placeholder:"默认当天，固定日期或${yyyy-mm-dd}  ，关系符：&、| 。 如${yyyy-mm-dd -n}  & ${yyyy-mm-dd} ； 最多仅支持三个日期的关系判断\n         "},model:{value:e.form.checkParam,callback:function(t){e.$set(e.form,"checkParam",t)},expression:"form.checkParam"}}):t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("el-input",{staticStyle:{width:"250px","margin-right":"5px"},attrs:{type:"textarea",rows:2,placeholder:"默认当天；请输入开始时间；支持${yyyy-mm-dd}写法"},model:{value:e.form.checkParam,callback:function(t){e.$set(e.form,"checkParam",t)},expression:"form.checkParam"}}),t("span",[e._v("——")]),t("el-input",{staticStyle:{width:"250px","margin-left":"5px"},attrs:{type:"textarea",rows:2,placeholder:"默认当天；请输入结束时间"},model:{value:e.form.checkEndParam,callback:function(t){e.$set(e.form,"checkEndParam",t)},expression:"form.checkEndParam"}})],1)],1)],1)])],1)]),t("div",{staticClass:"right"},[t("div",{staticClass:"attribute",on:{click:e.openDrawer}},[e._v("属性配置")])]),t("el-drawer",{attrs:{title:"属性配置",visible:e.drawer,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawer=t}}},[t("attribute",{ref:"paramConfig",attrs:{isDisabled:!e.jobNodeLock,form:e.form},on:{dataChange:e.dataChange}})],1)],1)}),[],!1,null,"5d78ff62",null).exports),mt={data:function(){return{editableTabsValue:"2",editableTabs:[],componentIs:{},node:""}},components:{DS:ee,dataOutput:fe,sql:_e,board:Pe,jobFlowBoard:Ue,shell:Xe,algorithm:lt,checkTask:pt},methods:{removeTab:function(e){var t=this,a=this.editableTabs,o=this.editableTabsValue,i=a.find((function(t){return t.name==e})),r=function(){o==e&&a.forEach((function(t,i){if(t.name==e){var r=a[i+1]||a[i-1];r&&(o=r.name)}})),t.editableTabsValue=o,t.editableTabs=a.filter((function(t){return t.name!==e}))};i.COPYING?this.$confirm("该复制任务未保存, 是否关闭?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$API.post("".concat(t.$URL.deleteVirJobNode,"/").concat(i.id),{},(function(e){0==e.code?r():t.$message.error(e.msg)}))})).catch((function(){})):r()},tabClick:function(e){o.a.$emit("changeTabOffline",{id:Number(e.name)})},addTab:function(e){var t=this,a=e.realId?e.realId+"":e.id+"";if("new"!=e.tabType||0!=e.workflowType){var o=!!e.COPYING;this.editableTabs.push({title:e.name,name:a,id:e.id,typeId:e.typeId,workType:e.workType,COPYING:o}),1==e.typeId||"ds"==e.type?this.componentIs["node"+a]=ee:4==e.typeId||"table"==e.type?this.componentIs["node"+a]=fe:2==e.typeId||"sql"==e.type?this.componentIs["node"+a]=_e:6==e.typeId||"shell"==e.type?this.componentIs["node"+a]=Xe:7==e.typeId||"algorithm"==e.type?this.componentIs["node"+a]=lt:8==e.typeId||"checkTask"==e.type?this.componentIs["node"+a]=pt:3==e.workType||"jobFlow"==e.type?this.componentIs["node"+a]=Pe:4==e.workType&&(this.componentIs["node"+a]=Ue),this.$nextTick((function(){t.node=JSON.parse(JSON.stringify(e))})),this.editableTabsValue=a}},createOffLineTask:function(){o.a.$emit("createOffLineTask")},clearTabs:function(){this.editableTabs=[]}},mounted:function(){var e=this;o.a.$off("refreshTabs1"),o.a.$on("refreshTabs1",(function(){e.clearTabs()})),o.a.$off("getOpenWorkFlow"),o.a.$on("getOpenWorkFlow",(function(){e.$refs.component&&e.$refs.component.length&&e.editableTabs.length&&("jobFlowBoard"==e.$refs.component[e.$refs.component.length-1].name?e.$refs.component[e.$refs.component.length-1].openWorkFlowMenu():e.$refs.component[e.$refs.component.length-1].openWorkFlow())})),o.a.$off("dataProcessTaskToChangeJob"),o.a.$on("dataProcessTaskToChangeJob",(function(t,a,o){var i=t.realId?t.realId+"":t.id+"",r=e.editableTabs.find((function(e){return e.name==i}));if(r)if(a&&"remove"==a)e.removeTab(i),e.editableTabs.remove(r);else if(a&&"rename"==a)r.title=o;else{if(!a||"copySave"!=a)return void(e.editableTabsValue=r.name);r.COPYING=!1,r.title=o}(!a||"remove"!=a&&"rename"!=a&&"copySave"!=a)&&e.addTab(t)}))},watch:{editableTabsValue:{handler:function(e){var t=this.editableTabs.find((function(t){return t.name==e}));t&&3==t.workType?o.a.$emit("jobStreamIsOnBoard",!0,3):t&&4==t.workType?o.a.$emit("jobStreamIsOnBoard",!0,4):o.a.$emit("jobStreamIsOnBoard",!1),t&&this.$store.commit("old/changjobBoardKey",t.id)},immediate:!0}}},ht=(a("c76e"),a("eb28"),Object(c.a)(mt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"data_process_task_main_index"},[t("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":e.removeTab,"tab-click":e.tabClick},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},[e._l(e.editableTabs,(function(a){return t("el-tab-pane",{key:a.name,attrs:{label:a.title,name:a.name}},[t(e.componentIs["node"+a.name],{ref:"component",refInFor:!0,tag:"component",attrs:{dataProcessTaskToChangeJobNodeData:e.node}})],1)})),0==e.editableTabs.length?t("div",{staticClass:"create_task",on:{click:e.createOffLineTask}},[t("svg-icon",{staticStyle:{"font-size":"56px",margin:"30px auto 28px auto"},attrs:{"icon-class":"addOffLine","class-name":"disabled"}}),t("h2",{staticStyle:{"font-size":"16px"}},[e._v("离线任务")])],1):e._e()],2)],1)}),[],!1,null,"380771fc",null).exports),bt={props:["nodeItme"],data:function(){return{node:{},taskTypes:[]}},computed:{taskType:function(){var e=this,t=this.taskTypes.find((function(t){return t.code==e.node.taskType}));return t&&t.name||""}},methods:{realTimeTaskTypes:function(){var e=this;this.isLoading=!0,this.$API.get(this.$URL.realTimeTaskTypes,{},(function(t){e.isLoading=!1,0==t.code?e.taskTypes=t.data:e.$message.error(t.msg)}))}},mounted:function(){this.realTimeTaskTypes()},watch:{nodeItme:{handler:function(e){this.node=JSON.parse(JSON.stringify(e))},deep:!0,immediate:!0}}},gt=(a("ae22"),Object(c.a)(bt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"realtime_task_attribute"},[t("div",{staticClass:"section"},[t("div",[e._v("任务名称："+e._s(e.node.name))]),t("div",[e._v("任务类型："+e._s(e.taskType))]),t("div",[e._v("创建人:"+e._s(e.node.createPerName))]),t("div",[e._v("创建时间："+e._s(e.node.createTime||"--"))]),t("div",[e._v("最近修改时间："+e._s(e.node.lastUpdateTime||"--"))]),t("div",[e._v("描述："+e._s(e.node.description))])])])}),[],!1,null,null,null).exports),vt=(a("f400"),{props:["node","taskType"],data:function(){var e=function(e,t,a){if(!t||t<1||t>9999||(t+"").indexOf(".")>0)return a(new Error("输入范围为1-9999的正整数"));a()};return{options:[],versionList:["1.12","1.15"],restartStrategyTypeList:[{id:1,name:"FixedDelayRestartStrategy"},{id:2,name:"FailureRateRestartStrategy"},{id:3,name:"NoRestartStrategy"},{id:4,name:"FallbackRestartStrategy"}],activeNames:["configuration"],ruleForm:{parallelism:1,jobManagerMemory:1024,taskManagerMemory:2048,taskManagerCount:1,slot:1,savepointPath:"",checkpointPath:"",flinkVersion:"1.12",checkPointInterval:3e4,checkPointTime:3e4,checkPointTimeout:6e4,restartStrategyEnable:!1,retryCount:3,restartStrategyType:"",retryInterval:"60",failureInterval:"60"},rules:{restartStrategyType:[{required:!0,message:"请选择重启策略",trigger:"change"}],retryCount:[{validator:e,required:!0,trigger:"blur"}],parallelism:[{validator:function(e,t,a){if(!t||t<1||t>99||(t+"").indexOf(".")>0)return a(new Error("输入范围为1-99的数值"));a()},required:!0,trigger:"blur"}],jobManagerMemory:[{validator:function(e,t,a){if(!t||t<1024||t>99999||(t+"").indexOf(".")>0)return a(new Error("输入范围为1024-99999的正整数"));a()},required:!0,trigger:"blur"}],taskManagerMemory:[{validator:function(e,t,a){if(!t||t<2048||t>99999||(t+"").indexOf(".")>0)return a(new Error("输入范围为2048-99999的正整数"));a()},required:!0,trigger:"blur"}],taskManagerCount:[{validator:e,required:!0,trigger:"blur"}],slot:[{validator:function(e,t,a){if(!t||t<1||t>9999||(t+"").indexOf(".")>0)return a(new Error("输入范围为1-9999的正整数"));a()},required:!0,trigger:"blur"}],flinkVersion:[{required:!0,message:"请选择版本号",trigger:"change"}]}}},watch:{ruleForm:{handler:function(e){this.$emit("haveEdit")},deep:!0}},mounted:function(){this.getCheckpointPath()},methods:{checkChange:function(e){var t=new Map([["retryInterval",60],["failureInterval",60]]);if(""!==this.ruleForm[e]){if(!new RegExp("^[0-9]*$").test(this.ruleForm[e]))return this.$set(this.ruleForm,"".concat(e),t.get(e)),this.$message.error("只能输入数字");this.ruleForm[e]<1&&(this.$set(this.ruleForm,"".concat(e),1),this.$message.info("最小值为:1s"))}else this.$set(this.ruleForm,"".concat(e),t.get(e))},checkPointChange:function(e){var t=new Map([["checkPointInterval",3e4],["checkPointTime",3e4],["checkPointTimeout",6e4]]);if(""!==this.ruleForm[e]){if(!new RegExp("^[0-9]*$").test(this.ruleForm[e]))return this.$set(this.ruleForm,"".concat(e),t.get(e)),this.$message.error("只能输入数字");this.ruleForm[e]<t.get(e)&&(this.$set(this.ruleForm,"".concat(e),t.get(e)),this.$message.info("最小值为:".concat(t.get(e),"ms")))}else this.$set(this.ruleForm,"".concat(e),t.get(e))},getCheckpointPath:function(){var e=this;this.$API.get(this.$URL.getCheckpointPath+this.node.id,{},(function(t){0==t.code?e.options=t.data:e.$message(t.msg)}))}}}),yt=(a("06f0"),a("d8ba"),Object(c.a)(vt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"realtime_task_params_config"},[t("div",{staticClass:"section"},[t("el-form",{ref:"fuleForm",attrs:{model:e.ruleForm,"label-width":"160px","label-position":"left",size:"small",disabled:0==e.node.lockState,rules:e.rules}},[t("el-form-item",{staticClass:"item",attrs:{label:"并行度：",prop:"parallelism"}},[t("el-input-number",{attrs:{"controls-position":"right",placeholder:"请输入并行度",min:1,max:90},model:{value:e.ruleForm.parallelism,callback:function(t){e.$set(e.ruleForm,"parallelism",e._n(t))},expression:"ruleForm.parallelism"}})],1),t("el-form-item",{staticClass:"item",attrs:{label:"jobmanager内存：",prop:"jobManagerMemory"}},[t("el-input-number",{attrs:{"controls-position":"right",placeholder:"请输入jobmanager内存",min:1024,max:99999,step:1024},model:{value:e.ruleForm.jobManagerMemory,callback:function(t){e.$set(e.ruleForm,"jobManagerMemory",e._n(t))},expression:"ruleForm.jobManagerMemory"}}),t("span",{staticClass:"unit"},[e._v("MB")])],1),t("el-form-item",{staticClass:"item",attrs:{label:"taskmanager内存：",prop:"taskManagerMemory"}},[t("el-input-number",{attrs:{"controls-position":"right",placeholder:"请输入taskmanager内存",min:2048,max:99999,step:1024},model:{value:e.ruleForm.taskManagerMemory,callback:function(t){e.$set(e.ruleForm,"taskManagerMemory",e._n(t))},expression:"ruleForm.taskManagerMemory"}}),t("span",{staticClass:"unit"},[e._v("MB")])],1),t("el-form-item",{staticClass:"item",attrs:{label:"slot：",prop:"slot"}},[t("el-input-number",{attrs:{"controls-position":"right",placeholder:"请输入slot个数",min:1,max:99999},model:{value:e.ruleForm.slot,callback:function(t){e.$set(e.ruleForm,"slot",e._n(t))},expression:"ruleForm.slot"}}),t("span",{staticClass:"unit"},[e._v("个")])],1),t("el-form-item",{staticClass:"item",attrs:{label:"savepoint Path："}},[t("el-input",{attrs:{clearable:"",maxlength:"99",placeholder:"请输入HDFS地址"},model:{value:e.ruleForm.savepointPath,callback:function(t){e.$set(e.ruleForm,"savepointPath",t)},expression:"ruleForm.savepointPath"}})],1),t("el-form-item",{staticClass:"item",attrs:{label:"checkpoint Path："}},[t("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择或输入checkpoint地址"},model:{value:e.ruleForm.checkpointPath,callback:function(t){e.$set(e.ruleForm,"checkpointPath",t)},expression:"ruleForm.checkpointPath"}},e._l(e.options,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{staticClass:"item",attrs:{prop:"flinkVersion",label:"版本："}},[t("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择版本号"},model:{value:e.ruleForm.flinkVersion,callback:function(t){e.$set(e.ruleForm,"flinkVersion",t)},expression:"ruleForm.flinkVersion"}},e._l(e.versionList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),1!=e.taskType?t("el-form-item",{staticClass:"item",attrs:{label:"checkpoint 间隔时间:",required:""}},[t("el-input",{attrs:{maxlength:"10"},on:{change:function(t){return e.checkPointChange("checkPointInterval")}},model:{value:e.ruleForm.checkPointInterval,callback:function(t){e.$set(e.ruleForm,"checkPointInterval",e._n(t))},expression:"ruleForm.checkPointInterval"}}),t("span",{staticClass:"unit"},[e._v("ms")])],1):e._e(),1!=e.taskType?t("el-form-item",{staticClass:"item",attrs:{label:"checkpoint 生成时间:",required:""}},[t("el-input",{attrs:{maxlength:"10"},on:{change:function(t){return e.checkPointChange("checkPointTime")}},model:{value:e.ruleForm.checkPointTime,callback:function(t){e.$set(e.ruleForm,"checkPointTime",e._n(t))},expression:"ruleForm.checkPointTime"}}),t("span",{staticClass:"unit"},[e._v("ms")])],1):e._e(),1!=e.taskType?t("el-form-item",{staticClass:"item",attrs:{label:"checkpoint 超时时间:",required:""}},[t("el-input",{attrs:{maxlength:"10"},on:{change:function(t){return e.checkPointChange("checkPointTimeout")}},model:{value:e.ruleForm.checkPointTimeout,callback:function(t){e.$set(e.ruleForm,"checkPointTimeout",e._n(t))},expression:"ruleForm.checkPointTimeout"}}),t("span",{staticClass:"unit"},[e._v("ms")])],1):e._e(),1!=e.taskType?t("el-form-item",{staticClass:"item",attrs:{label:"是否开启重启策略:"}},[t("el-switch",{model:{value:e.ruleForm.restartStrategyEnable,callback:function(t){e.$set(e.ruleForm,"restartStrategyEnable",t)},expression:"ruleForm.restartStrategyEnable"}})],1):e._e(),e.ruleForm.restartStrategyEnable&&1!=e.taskType?t("el-form-item",{staticClass:"item",attrs:{label:"重启策略:",prop:"restartStrategyType"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择重启策略"},model:{value:e.ruleForm.restartStrategyType,callback:function(t){e.$set(e.ruleForm,"restartStrategyType",t)},expression:"ruleForm.restartStrategyType"}},e._l(e.restartStrategyTypeList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),1==e.ruleForm.restartStrategyType&&1!=e.taskType?t("el-form-item",{staticClass:"item",attrs:{label:"fixed_delay_attempts：",prop:"retryCount"}},[t("el-input-number",{attrs:{"controls-position":"right",placeholder:"请输入尝试重启的次数",min:1,max:99999},model:{value:e.ruleForm.retryCount,callback:function(t){e.$set(e.ruleForm,"retryCount",e._n(t))},expression:"ruleForm.retryCount"}}),t("span",{staticClass:"unit"},[e._v("次")])],1):e._e(),1==e.ruleForm.restartStrategyType&&1!=e.taskType?t("el-form-item",{staticClass:"item",attrs:{label:"fixed_delay_delay:",required:""}},[t("el-input",{attrs:{maxlength:"10",placeholder:"请输入延时时间"},on:{change:function(t){return e.checkChange("retryInterval")}},model:{value:e.ruleForm.retryInterval,callback:function(t){e.$set(e.ruleForm,"retryInterval",e._n(t))},expression:"ruleForm.retryInterval"}}),t("span",{staticClass:"unit"},[e._v("s")])],1):e._e(),2==e.ruleForm.restartStrategyType&&1!=e.taskType?t("el-form-item",{staticClass:"item hh",attrs:{label:"failure_rate_max_failures\n_per_interval",prop:"retryCount"}},[t("el-input-number",{attrs:{"controls-position":"right",placeholder:"请输入每个时间间隔的最大故障次数",min:1,max:99999},model:{value:e.ruleForm.retryCount,callback:function(t){e.$set(e.ruleForm,"retryCount",e._n(t))},expression:"ruleForm.retryCount"}}),t("span",{staticClass:"unit"},[e._v("次")])],1):e._e(),2==e.ruleForm.restartStrategyType&&1!=e.taskType?t("el-form-item",{staticClass:"item hh",attrs:{label:"failure_rate_failure\n_rate_interval:",required:""}},[t("el-input",{attrs:{maxlength:"10",placeholder:"请输入测量故障率的时间间隔"},on:{change:function(t){return e.checkChange("failureInterval")}},model:{value:e.ruleForm.failureInterval,callback:function(t){e.$set(e.ruleForm,"failureInterval",e._n(t))},expression:"ruleForm.failureInterval"}}),t("span",{staticClass:"unit"},[e._v("s")])],1):e._e(),2==e.ruleForm.restartStrategyType&&1!=e.taskType?t("el-form-item",{staticClass:"item",attrs:{label:"failure_rate_delay:",required:""}},[t("el-input",{attrs:{maxlength:"10",placeholder:"请输入延时时间"},on:{change:function(t){return e.checkChange("retryInterval")}},model:{value:e.ruleForm.retryInterval,callback:function(t){e.$set(e.ruleForm,"retryInterval",e._n(t))},expression:"ruleForm.retryInterval"}}),t("span",{staticClass:"unit"},[e._v("s")])],1):e._e()],1)],1)])}),[],!1,null,null,null).exports),_t={props:["nodeItme"],data:function(){return{activeNames:["operatingHistory"],dateVal:"",isLoading:!1,noMore:!1,node:{},dataList:[],page:1}},methods:{realTimeTaskLog:function(){var e=this;this.isLoading=!0;var t={page:this.page,limit:10,taskId:this.node.id,startTime:this.dateVal?this.dateVal[0]:"",endTime:this.dateVal?this.dateVal[1]:""};this.$API.get(this.$URL.realTimeTaskLog,t,(function(t){e.isLoading=!1,0==t.code?(e.dataList=e.dataList.concat(t.page.list),0==t.page.list.length&&(e.noMore=!0)):e.$message.error(t.msg)}))},load:function(){this.noMore=!1,this.realTimeTaskLog(),this.page++},changDate:function(e){this.noMore=!1,this.page=1,this.dataList=[],this.load()}},created:function(){},watch:{nodeItme:{handler:function(e){this.node=JSON.parse(JSON.stringify(e))},deep:!0,immediate:!0}}},kt=(a("521d"),a("94d9"),Object(c.a)(_t,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"realtime_task_history"},[t("div",{staticClass:"section"},[t("el-date-picker",{attrs:{"unlink-panels":"",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.changDate},model:{value:e.dateVal,callback:function(t){e.dateVal=t},expression:"dateVal"}}),t("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.load,expression:"load"}],staticClass:"infinite-list",attrs:{"infinite-scroll-delay":"800"}},e._l(e.dataList,(function(a){return t("li",{key:a.id,staticClass:"infinite-list-item"},[t("span",{staticClass:"time"},[e._v(e._s(a.createTime))]),e._v(e._s(a.description))])})),0),e.isLoading?t("p",{staticStyle:{"text-align":"center"}},[e._v("加载中...")]):e._e(),e.noMore?t("p",{staticStyle:{"text-align":"center","margin-top":"10px"}},[e._v("没有更多了")]):e._e()],1)])}),[],!1,null,null,null).exports),xt={props:["node","taskType"],data:function(){return{nodeData:{lockState:null}}},methods:{saveTask:function(){0!=this.nodeData.lockState&&this.$emit("saveTask")},deleteTask:function(){0!=this.nodeData.lockState&&this.$emit("deleteTask")},lock:function(){this.$emit("lock")},refresh:function(){0!=this.nodeData.lockState&&this.$emit("refresh")},runTask:function(){0!=this.nodeData.lockState&&this.$emit("runTask")},cancelTask:function(){0!=this.nodeData.lockState&&this.$emit("cancelTask")},stopTask:function(){0!=this.nodeData.lockState&&this.$emit("stopTask")},saveAndLock:function(){0!=this.nodeData.lockState&&this.$emit("saveAndLock")},nativeDebug:function(){0!=this.nodeData.lockState&&this.$emit("nativeDebug")},dataCheck:function(){0!=this.nodeData.lockState&&this.$emit("dataCheck")}},mounted:function(){},watch:{node:{handler:function(e){this.nodeData=e},deep:!0,immediate:!0},taskType:{handler:function(e){},deep:!0}}},wt=(a("1b46"),Object(c.a)(xt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"realtime_main_header"},[t("ul",{staticClass:"icon_button_grounp"},[t("li",{staticClass:"icon_button",class:{disable:0==e.nodeData.lockState},on:{click:e.saveAndLock}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存并解锁",placement:"top"}},[t("span",{staticClass:"icon icon-ic_unlock_2 brand"})])],1),t("li",{staticClass:"icon_button",class:{disable:0==e.nodeData.lockState},on:{click:e.saveTask}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存",placement:"top"}},[t("span",{staticClass:"icon icon-ic_save brand"})])],1),t("li",{staticClass:"icon_button",class:{disable:0==e.nodeData.lockState},on:{click:e.deleteTask}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[t("span",{staticClass:"icon icon-ic_delete danger"})])],1),t("li",{staticClass:"icon_button",class:{disable:0==e.nodeData.lockState},on:{click:e.refresh}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"刷新",placement:"top"}},[t("span",{staticClass:"icon icon-ic_refresh brand"})])],1),t("li",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"icon_button",class:{disable:0==e.nodeData.lockState},on:{click:e.runTask}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"运行",placement:"top"}},[t("span",{staticClass:"icon icon-ic_run brand"})])],1),t("li",{staticClass:"icon_button",class:{disable:0==e.nodeData.lockState},on:{click:e.cancelTask}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"暂停",placement:"top"}},[t("span",{staticClass:"icon icon-ic_pause brand"})])],1),t("li",{staticClass:"icon_button",class:{disable:0==e.nodeData.lockState},on:{click:e.stopTask}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停止",placement:"top"}},[t("span",{staticClass:"icon icon-ic_tingzhi brand"})])],1),t("li",{staticClass:"icon_button",on:{click:e.lock}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:1==e.nodeData.lockState?"解锁":"锁定",placement:"top"}},[t("span",{staticClass:"warning icon",class:1==e.nodeData.lockState?"icon-ic_locking_pre":"icon-ic_locking"})])],1),2==e.taskType||3==e.taskType?t("li",{staticClass:"icon_button",class:{disable:0==e.nodeData.lockState},on:{click:e.dataCheck}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"数据检查",placement:"top"}},[t("span",{staticClass:"icon icon-shujujiancha brand"})])],1):e._e(),2==e.taskType||3==e.taskType?t("li",{staticClass:"icon_button",class:{disable:0==e.nodeData.lockState},on:{click:e.nativeDebug}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"本地调试",placement:"top"}},[t("span",{staticClass:"icon icon-benditiaoshi brand"})])],1):e._e(),e._t("in")],2),e._t("out")],2)}),[],!1,null,"7e69211c",null).exports);function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function St(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Lt,Nt,It,Dt,$t,Ct,jt,Ot,Ft=a("15fd"),Pt=a("b76a"),Mt=a.n(Pt),Rt=(a("2dd9"),a("711e")),Et=a("6c5d"),At={minWidth:"105px",minHeight:"30px",background:"rgba(23, 64, 220, 0.1)",borderRadius:"2px",border:"1px solid #1740DC",textAlign:"center"},qt={minWidth:"105px",minHeight:"30px",background:"rgba(255, 199, 124, 0.1)",borderRadius:" 2px",border:"1px solid #FFBF69",textAlign:"center"},zt={minWidth:"105px",minHeight:"30px",background:"rgba(100, 220, 213, 0.1)",borderRadius:"2px",border:"1px solid #60DBD3",textAlign:"center"},Vt=[{id:"1-1",name:"kafka",style:At,type:"1",allowTo:0},{id:"2-1",name:"Select",style:qt,type:"2",allowTo:1},{id:"2-2",name:"Filter",style:qt,type:"3",allowTo:1},{id:"2-3",name:"去重",style:qt,type:"4",allowTo:1},{id:"2-5",name:"Groupby",style:qt,type:"5",allowTo:1},{id:"3-1",type:"6",name:"Kafka",style:zt,allowTo:2},{id:"3-2",type:"7",name:"Mysql",style:zt,allowTo:2},{id:"3-3",type:"8",name:"hive",style:zt,allowTo:2},{id:"3-4",type:"9",name:"kudu",style:zt,allowTo:2}],Ut=[{id:"1",type:"Source",name:"Source 数据源",children:[{id:"1-1",name:"Kafka",style:At,type:"1",allowTo:0}]},{id:"2",type:"apply",name:"数据处理",children:[{id:"2-1",name:"Select",style:qt,type:"2",allowTo:1},{id:"2-2",name:"Filter",style:qt,type:"3",allowTo:1},{id:"2-3",name:"去重",style:qt,type:"4",allowTo:1},{id:"2-5",name:"Groupby",style:qt,type:"5",allowTo:1}]},{id:Math.random(),type:"output",name:"Sink输出表",children:[{id:"3-1",type:"6",name:"Kafka",style:zt,allowTo:2},{id:"3-2",type:"8",name:"hive",style:zt,allowTo:2},{id:"3-3",type:"9",name:"kudu",style:zt,allowTo:2}]}],Bt={left:-1,top:-1},Jt={data:function(){return{activeNames:"1",draggableOptions:{preventOnFilter:!1,sort:!1,disabled:!1,ghostClass:"tt",forceFallback:!0},defaultOpeneds:["1","2"],menuList:Ut,nodeMenu:{}}},components:{draggable:Mt.a},created:function(){this.isFirefox()&&(document.body.ondrop=function(e){Bt.left=e.layerX,Bt.top=e.clientY-50,e.preventDefault(),e.stopPropagation()})},methods:{getMenuByType:function(e){for(var t=0;t<this.menuList.length;t++)for(var a=this.menuList[t].children,o=0;o<a.length;o++)if(a[o].type===e)return a[o]},move:function(e,t,a,o){var i=e.item.attributes.type.nodeValue;this.nodeMenu=this.getMenuByType(i)},end:function(e,t){this.$emit("addNode",e,this.nodeMenu,Bt)},isFirefox:function(){return navigator.userAgent.indexOf("Firefox")>-1}}},Ht=Object(c.a)(Jt,(function(){var e=this,t=e._self._c;return t("div",{ref:"tool",staticClass:"flow-menu"},e._l(e.menuList,(function(a){return t("div",{key:a.id},[t("span",{staticClass:"ef-node-pmenu",on:{click:function(e){a.open=!a.open}}},[e._v(e._s(a.name))]),t("ul",{staticClass:"ef-node-menu-ul"},[t("draggable",e._b({on:{end:e.end,start:e.move},model:{value:a.children,callback:function(t){e.$set(a,"children",t)},expression:"menu.children"}},"draggable",e.draggableOptions,!1),e._l(a.children,(function(a){return t("li",{key:a.id,staticClass:"ef-node-menu-li",style:a.style,attrs:{type:a.type}},[t("span",[e._v(e._s(a.name))])])})),0)],1)])})),0)}),[],!1,null,null,null).exports,Wt=a("2ef0"),Kt=a.n(Wt),Gt={data:function(){return{visible:!0,type:"node",node:{},line:{},data:{},stateList:[{state:"success",label:"成功"},{state:"warning",label:"警告"},{state:"error",label:"错误"},{state:"running",label:"运行中"}]}},methods:{nodeInit:function(e,t){var a=this;this.type="node",this.data=e,e.nodeList.filter((function(e){e.id===t&&(a.node=Object(Wt.cloneDeep)(e))}))},lineInit:function(e){this.type="line",this.line=e},saveLine:function(){this.$emit("setLineLabel",this.line.from,this.line.to,this.line.label)},save:function(){var e=this;this.data.nodeList.filter((function(t){t.id===e.node.id&&(t.name=e.node.name,t.left=e.node.left,t.top=e.node.top,t.ico=e.node.ico,t.state=e.node.state,e.$emit("repaintEverything"))}))}}},Yt=(a("bf69"),Object(c.a)(Gt,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"ef-node-form"},[t("div",{staticClass:"ef-node-form-header"},[e._v("\n            编辑\n        ")]),t("div",{staticClass:"ef-node-form-body"},[t("el-form",{directives:[{name:"show",rawName:"v-show",value:"node"===e.type,expression:"type === 'node'"}],ref:"dataForm",attrs:{model:e.node,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"类型"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.node.type,callback:function(t){e.$set(e.node,"type",t)},expression:"node.type"}})],1),t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{model:{value:e.node.name,callback:function(t){e.$set(e.node,"name",t)},expression:"node.name"}})],1),t("el-form-item",{attrs:{label:"left坐标"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.node.left,callback:function(t){e.$set(e.node,"left",t)},expression:"node.left"}})],1),t("el-form-item",{attrs:{label:"top坐标"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.node.top,callback:function(t){e.$set(e.node,"top",t)},expression:"node.top"}})],1),t("el-form-item",{attrs:{label:"ico图标"}},[t("el-input",{model:{value:e.node.ico,callback:function(t){e.$set(e.node,"ico",t)},expression:"node.ico"}})],1),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.node.state,callback:function(t){e.$set(e.node,"state",t)},expression:"node.state"}},e._l(e.stateList,(function(e){return t("el-option",{key:e.state,attrs:{label:e.label,value:e.state}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{icon:"el-icon-close"}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.save}},[e._v("保存")])],1)],1),t("el-form",{directives:[{name:"show",rawName:"v-show",value:"line"===e.type,expression:"type === 'line'"}],ref:"dataForm",attrs:{model:e.line,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"条件"}},[t("el-input",{model:{value:e.line.label,callback:function(t){e.$set(e.line,"label",t)},expression:"line.label"}})],1),t("el-form-item",[t("el-button",{attrs:{icon:"el-icon-close"}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.saveLine}},[e._v("保存")])],1)],1)],1)])])}),[],!1,null,null,null).exports),Xt=(a("4342"),{fieldName:"",fieldAlias:"",fieldType:"",fieldDesc:"",fieldOrder:""}),Qt={name:"",value:"",fieldOrder:""},Zt={1:"Source 数据源【kafka】",6:"Sink 输出表【kafka】"},ea={props:["kafkaList","fieldTypes"],inject:["flink"],name:"SourceDialog",data:function(e){return{dialogVisible:!1,title:"",isTimestamp:!1,paramNameList:[],formData:{nodeName:"",tableType:null,dataType:null,dataBase:null,tableId:null,paramsList:[],connectorFields:[],watermark:"",watermark1:"",watermark2:"",updateMode:"append",watermarkNew1:"",watermarkNew2:"",watermarkNew3:"",watermarkNew4:"",schema:!0},tableTypeList:[{label:"内部表",value:1},{label:"外部表",value:2}],dataTypeList:[],dataBaseList:[],tableIdList:[],fieldList:[],dataInfo:{},uploadOptions:{limitNum:2,fileList:[],file:""}}},watch:{"formData.tableType":{handler:function(e){this.formData.dataBase="",this.formData.tableId=""}}},methods:{handleTableTypeChange:function(){this.formData.tableType&&this.formData.dataBase&&this.getRealTableList()},handleDataBaseChange:function(){this.formData.tableType&&this.formData.dataBase&&this.getRealTableList(),this.formData.tableId=""},handleDataTypeChange:function(){this.formData.tableType&&this.formData.dataBase&&this.getRealTableList()},getRealTableList:(Ct=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.query.id,e.next=3,Object(H.k)({page:1,limit:999,dbName:this.formData.dataBase,tableType:this.formData.tableType,categoryId:this.formData.dataType?this.formData.dataType[this.formData.dataType.length-1]:null,projectId:t});case 3:a=e.sent,o=a.data.data.list,this.tableIdList=[],o.forEach((function(e){i.tableIdList.push({label:e.tableName,value:e.id})}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return Ct.apply(this,arguments)}),handleTableIdChange:function(e){this.getRealTimeDetail(e)},getRealTimeDetail:($t=Object(A.a)(regeneratorRuntime.mark((function e(t){var a,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.j)({id:t});case 2:a=e.sent,o=a.data.data.fieldList,this.fieldList=[],o.forEach((function(e){i.fieldList.push({fieldName:e.fieldName,fieldType:e.fieldType,fieldDesc:e.fieldAlias})}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return $t.apply(this,arguments)}),indexMethod:function(e){return e+1},deleteParamsRow:function(e){this.formData.paramsList.splice(e.$index,1)},addNewParams:function(){this.formData.paramsList.push({paramsName:"",paramsValue:""})},handleClose:(Dt=Object(A.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$refs.ruleForm.resetFields(),e.next=3,this.$nextTick();case 3:return this.dialogVisible=!1,e.next=6,this.$nextTick();case 6:this.dataInfo={},this.formData.fieldList=[],this.formData.connectorFields=[];case 9:case"end":return e.stop()}}),e,this)}))),function(){return Dt.apply(this,arguments)}),beforeUploadFile:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a=e.size/1024/1024;"csv"!==t&&this.$message({message:"只能上传csv的文件",type:"警告"}),a>10&&this.$message({message:"文件大小不得超过10M",type:"警告"})},downLoadFile:(It=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.b)();case 2:t=e.sent,a=new Blob([t.data],{type:"text/json;charset=utf-8"}),o=window.URL.createObjectURL(a),(i=document.createElement("a")).download="字段模板.csv",i.href=o,i.click();case 10:case"end":return e.stop()}}),e)}))),function(){return It.apply(this,arguments)}),fileChange:function(e,t){t.length>1&&t.splice(0,1),this.uploadOptions.fileList=t,this.uploadOptions.file=e.raw,this.uploadFile()},handleRemove:function(e,t){this.uploadOptions.fileList=t},exceedFile:function(e,t){this.$notify.warning({title:"警告",message:"只能选择 ".concat(this.limitNum," 个文件，当前共选择了 ").concat(e.length+t.length," 个")})},getbdpDataCategoryList:function(){var e=this;this.$API.post(this.$URL.categoryConcernSearchNew,{type:"my",permissionType:17},(function(t){0==t.code?(e.dataTypeList=t.data.list.children,e.dataTypeList.map((function(e){"1"!=e.id&&"2"!=e.id||(e.disabled=!0)})),e.dataTypeList=e.dataTypeList.filter((function(e){return!(("1"==e.id||"2"==e.id)&&0==e.children.length)}))):e.$message.error(t.msg)}))},opened:(Nt=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i,r,n,s,l,c,d,u,f,p,m,h,b,g,v,y,_,k,x,w=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.formData={nodeName:"",tableType:null,dataType:null,dataBase:null,tableId:null,paramsList:[],connectorFields:[],watermark:"",watermark1:"",watermark2:"",updateMode:"append",watermarkNew1:"",watermarkNew2:"",watermarkNew3:"",watermarkNew4:"",schema:!0},this.formData.type="kafka",!this.dataInfo.uuid){e.next=23;break}return e.next=5,Object(H.h)({id:this.dataInfo.uuid});case 5:return t=e.sent.data.data,a=t.nodeName,o=t.config,i=o.dataType,r=o.tableType,n=o.dataBase,s=o.tableId,l=o.paramsList,c=o.proctime,d=o.watermark,u=d.waterExpression,f=d.waterFiledName,p=d.conversionExpression,m=d.conversionFiledName,h=o.connectorFields,b=t.fieldList,this.isTimestamp=!(!p&&!m),g=6==this.dataInfo.type?3:8==this.dataInfo.type?1:9==this.dataInfo.type?2:"",e.next=12,Object(H.i)({dataType:6==this.dataInfo.type||1==this.dataInfo.type?2:1,procId:this.$route.query.id,sourceType:g});case 12:return v=e.sent,y=v.data.data,this.dataBaseList=[],y.forEach((function(e){w.dataBaseList.push({label:e,value:e})})),this.formData={nodeName:a,tableType:r,dataType:i,dataBase:n,proctime:c,watermarkNew4:u,watermarkNew3:f,watermarkNew2:p,watermarkNew1:m,connectorFields:h,paramsList:l,tableId:null},this.fieldList=b,e.next=20,this.getRealTableList();case 20:this.formData.tableId=s,e.next=32;break;case 23:return _=6==this.dataInfo.type?3:8==this.dataInfo.type?1:9==this.dataInfo.type?2:"",e.next=26,Object(H.i)({dataType:6==this.dataInfo.type||1==this.dataInfo.type?2:1,procId:this.$route.query.id,sourceType:_});case 26:k=e.sent,x=k.data.data,this.dataBaseList=[],x.forEach((function(e){w.dataBaseList.push({label:e,value:e})})),this.fieldList=[],this.formData.paramsList=[];case 32:case"end":return e.stop()}}),e,this)}))),function(){return Nt.apply(this,arguments)}),paramsNameChange:function(e,t){this.formData.paramsList[t].paramValueList="",this.formData.paramsList[t].paramsValue="",this.formData.paramsList.filter((function(t){return t.paramsName==e})).length>1&&(this.formData.paramsList[t].paramsName="",this.$message.error("不能选择重复参数"))},getParamsSelectList:function(){var e=this;this.$API.post(this.$URL.getParamsSelectList+"?connectType=6&sinkType=".concat(6==this.dataInfo.type?2:1),{},(function(t){0==t.code&&(e.paramNameList=t.data.map((function(e){return e.key})))}))},beforeOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.formData.paramsList=[],this.dialogVisible=!0,this.dataInfo=e,this.getbdpDataCategoryList(),t&&(this.dataInfo.isSql=t),this.getParamsSelectList(),this.title=Zt[this.dataInfo.type||this.dataInfo.nodeType]},move:function(e,t){var a=this.formData.fieldList.findIndex((function(t){var a=t.fieldOrder;return e.fieldOrder===a}));"next"===t?this.swapItem(a,a+1):this.swapItem(a,a-1)},remove:function(e,t){var a=this.formData[t].findIndex((function(t){return t.fieldOrder===e.fieldOrder}));this.formData[t].splice(a,1)},swapItem:function(e,t){var a=this.formData.fieldList;a[t]=a.splice(e,1,a[t])[0]},addNew:function(e){var t;(t="fieldList"===e?JSON.parse(JSON.stringify(Xt)):JSON.parse(JSON.stringify(Qt))).fieldOrder=Math.random(),this.formData[e].push(t)},allowMove:function(e,t){var a=this.formData.fieldList.findIndex((function(t){return t.fieldOrder===e.fieldOrder}));return"next"===t&&a===this.formData.fieldList.length-1||"prev"===t&&0===a},submit:(Lt=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.ruleForm.validate();case 3:return t={taskId:this.flink.$props.nodeData.id,nodeName:this.formData.nodeName,tableName:this.tableIdList.find((function(e){return e.value===a.formData.tableId})).label,nodeType:this.dataInfo.nodeType||this.dataInfo.type,config:{tableType:this.formData.tableType,dataType:this.formData.dataType,dataBase:this.formData.dataBase,tableId:this.formData.tableId,paramsList:this.formData.paramsList,top:this.dataInfo.top||"",left:this.dataInfo.left||"",temporarilyLineList:this.dataInfo.lineList||[],temporarilyNodeList:this.dataInfo.unSaveNodeList&&this.dataInfo.unSaveNodeList.filter((function(e){return e.id!==a.dataInfo.id})),proctime:this.formData.proctime,watermark:{conversionFiledName:this.formData.watermarkNew1,conversionExpression:this.formData.watermarkNew2,waterFiledName:this.formData.watermarkNew3,waterExpression:this.formData.watermarkNew4},connectorFields:this.formData.connectorFields.map((function(e){return{name:e.name,value:e.value}})),uuid:this.dataInfo.id||""},fieldList:this.fieldList},this.isTimestamp||(delete t.config.watermark.conversionFiledName,delete t.config.watermark.conversionExpression),this.dataInfo.isSql&&(t.config["update-mode"]=this.formData.updateMode,t.config["format.derive-schema"]=this.formData.schema,delete t.config["connector.startup-mode"]),this.dataInfo.uuid&&(t.id=this.dataInfo.uuid),e.next=9,Object(H.n)(t);case 9:e.sent,this.$message.success("保存成功"),this.flink.isRefresh=!0,this.flink.realTimeTaskGetInfo(!0),this.handleClose(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(){return Lt.apply(this,arguments)}),changeSource:function(e){var t=this.kafkaList.find((function(t){return t.id===e})),a=t.kafkaUrl,o=t.host;this.formData.connect=o,this.formData.servers=a}}},ta=(a("f792"),a("790a"),Object(c.a)(ea,(function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"60%","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose,opened:e.opened}},[1==e.dataInfo.type||1==e.dataInfo.nodeType?t("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("提示：Flink Sql Create语句")]):t("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("提示：Flink Sql Sink_Create语句")]),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.formData,"label-width":"150px","label-position":"left"}},[t("div",{staticClass:"form-title"},[e._v("基本信息")]),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"节点名称：",prop:"nodeName",rules:[{required:!0,message:"请输入节点名称",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入节点名称，1-20个字符",maxlength:"20"},model:{value:e.formData.nodeName,callback:function(t){e.$set(e.formData,"nodeName",t)},expression:"formData.nodeName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"表类型：",prop:"tableType",rules:[{required:!0,message:"请选择表类型",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择表类型"},on:{change:e.handleTableTypeChange},model:{value:e.formData.tableType,callback:function(t){e.$set(e.formData,"tableType",t)},expression:"formData.tableType"}},e._l(e.tableTypeList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"资产类目：",prop:"dataType",rules:[{required:!1,message:"请选择资产类目",trigger:"change"}]}},[t("el-cascader",{attrs:{options:e.dataTypeList,placeholder:"请选择资产类目",props:{checkStrictly:!0,value:"id",label:"label"},clearable:"",filterable:""},on:{change:e.handleDataTypeChange},model:{value:e.formData.dataType,callback:function(t){e.$set(e.formData,"dataType",t)},expression:"formData.dataType"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"数据库：",prop:"dataBase",rules:[{required:!0,message:"请选择数据库",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择数据库"},on:{change:e.handleDataBaseChange},model:{value:e.formData.dataBase,callback:function(t){e.$set(e.formData,"dataBase",t)},expression:"formData.dataBase"}},e._l(e.dataBaseList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1),t("el-row",{attrs:{tye:"flex"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"表名：",prop:"tableId",rules:[{required:!0,message:"请选择表名",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择表名"},on:{change:e.handleTableIdChange},model:{value:e.formData.tableId,callback:function(t){e.$set(e.formData,"tableId",t)},expression:"formData.tableId"}},e._l(e.tableIdList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1),t("div",{staticClass:"form-title"},[e._v("字段信息")]),t("el-table",{staticStyle:{"margin-bottom":"20px"},attrs:{data:e.fieldList,"max-height":"240px"}},[t("el-table-column",{attrs:{label:"字段名称",prop:"fieldName"}}),t("el-table-column",{attrs:{label:"字段类型",prop:"fieldType"}}),t("el-table-column",{attrs:{label:"业务含义",prop:"fieldDesc"}})],1),e.dataInfo.isSql?e._e():t("el-form-item",{attrs:{label:"watermark："}},[t("el-checkbox",{model:{value:e.isTimestamp,callback:function(t){e.isTimestamp=t},expression:"isTimestamp"}},[e._v("将字段转化成TimeStamp")])],1),!e.isTimestamp||"1"!=e.dataInfo.type&&"1"!=e.dataInfo.nodeType?e._e():t("el-form-item",{attrs:{label:"watermark字段：",prop:"watermark"}},[t("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"标识watermark的名字，英文开头，数字下划线组合，eg:ts"},model:{value:e.formData.watermarkNew1,callback:function(t){e.$set(e.formData,"watermarkNew1",t)},expression:"formData.watermarkNew1"}}),e._v("\n          as\n          "),t("el-input",{staticStyle:{width:"calc(100% - 125px)"},attrs:{placeholder:"eg:[TO_TIMESTAMP(FROM_UNIXTIME(dt,'yyyy-MM-dd HH:mm:ss'))]"},model:{value:e.formData.watermarkNew2,callback:function(t){e.$set(e.formData,"watermarkNew2",t)},expression:"formData.watermarkNew2"}})],1),"1"==e.dataInfo.type||"1"==e.dataInfo.nodeType?t("el-form-item",{attrs:{label:"Watermark for：",prop:"watermarkInfo"}},[t("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"字段名称,eg:ts"},model:{value:e.formData.watermarkNew3,callback:function(t){e.$set(e.formData,"watermarkNew3",t)},expression:"formData.watermarkNew3"}}),e._v("\n          as\n          "),t("el-input",{staticStyle:{width:"calc(100% - 125px)"},attrs:{placeholder:"偏移量表达式，eg: ts  - interval '5'second"},model:{value:e.formData.watermarkNew4,callback:function(t){e.$set(e.formData,"watermarkNew4",t)},expression:"formData.watermarkNew4"}})],1):e._e(),"1"==e.dataInfo.type||"1"==e.dataInfo.nodeType?t("el-form-item",{attrs:{label:"proctime："}},[t("el-input",{attrs:{size:"mini",type:"text",placeholder:"proctime"},model:{value:e.formData.proctime,callback:function(t){e.$set(e.formData,"proctime",t)},expression:"formData.proctime"}})],1):e._e(),t("div",{staticClass:"form-title"},[e._v("参数配置")]),t("el-table",{attrs:{data:e.formData.paramsList}},[t("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),t("el-table-column",{attrs:{label:"参数名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"paramsList."+a.$index+".paramsName",rules:{required:!0,message:"参数名不能为空",trigger:"blur"}}},[t("el-select",{attrs:{placeholder:"请选择参数名",filterable:"","allow-create":"","default-first-option":""},on:{change:function(t){return e.paramsNameChange(t,a.$index)}},model:{value:a.row.paramsName,callback:function(t){e.$set(a.row,"paramsName",t)},expression:"scope.row.paramsName"}},e._l(e.paramNameList,(function(e,a){return t("el-option",{key:a,attrs:{value:e,label:e}})})),1)],1)]}}])}),t("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"paramsList."+a.$index+".paramsValue",rules:{required:!0,message:"参数值不能为空",trigger:"blur"}}},[t("el-input",{attrs:{placeholder:"请输入参数值"},model:{value:a.row.paramsValue,callback:function(t){e.$set(a.row,"paramsValue",t)},expression:"scope.row.paramsValue"}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作",align:"right",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteParamsRow(a)}}},[e._v("删除")])]}}])})],1),t("ul",{staticClass:"addNew clearfix"},[t("li",{staticClass:"file",staticStyle:{position:"absolute",left:"50%",transform:"translateX(-50%)"},on:{click:e.addNewParams}},[t("i",{staticClass:"el-icon-plus"}),e._v("添加\n            ")])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.handleClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")])],1)],1)],1)}),[],!1,null,"131654c5",null).exports),aa={inject:["flink"],props:["fieldTypes"],data:function(e){return{formData:{nodeName:"",fieldList:[],insert:!1,targetTableName:""},fieldList:[],rules:{nodeName:[{required:!0,message:"请输入节点名称",trigger:"blur"}],targetTableName:[{required:!0,validator:function(t,a,o){if(e.formData.insert&&!a)return o(new Error("请填写目标表"));o()},trigger:"blur"}]},title:"",dialogVisible:!1,dataInfo:{}}},methods:{beforeOpen:function(e){this.dataInfo=e,this.dialogVisible=!0},toggleSelection:function(e){var t=this;e.length&&e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)}))},opened:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i,r,n,s,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dataInfo.uuid){e.next=11;break}return e.next=3,Object(H.h)({id:this.dataInfo.uuid});case 3:t=e.sent,a=t.data.data,o=a.nodeName,i=a.fieldList,r=a.insert,void 0!==r&&r,n=a.targetTableName,s=void 0===n?"":n,this.formData={nodeName:o,fieldList:i,insert:!!s,targetTableName:s},this.fieldList=this.dataInfo.prevNode.fieldList,this.isShow=!0,this.$nextTick((function(){var e=l.fieldList.filter((function(e){var t=e.fieldName;return l.formData.fieldList.some((function(e){return e.fieldName===t}))}));l.toggleSelection(e)})),e.next=12;break;case 11:this.fieldList=this.dataInfo.prevNode.fieldList;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),allowMove:function(e,t){var a=this.formData.fieldList.findIndex((function(t){return t.id===e.id}));return"next"===t&&a===this.formData.fieldList.length-1||"prev"===t&&0===a},move:function(e,t){var a=this.formData.fieldList.findIndex((function(t){var a=t.id;return e.id===a}));"next"===t?this.swapItem(a,a+1):this.swapItem(a,a-1)},swapItem:function(e,t){var a=this.formData.fieldList;a[t]=a.splice(e,1,a[t])[0]},handleSelectionChange:function(e){this.isShow?this.isShow=!1:this.formData.fieldList=e},handleClose:function(){this.$refs.ruleForm.resetFields(),this.dialogVisible=!1,this.formData.fieldList=[],this.fieldList=[]},remove:function(e,t){var a=this.formData[t].findIndex((function(t){return t.id===e.id}));this.formData[t].splice(a,1),this.$refs.multipleTable.toggleRowSelection(e)},submit:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.ruleForm.validate();case 3:return t={id:this.dataInfo.uuid||null,taskId:this.flink.$props.nodeData.id,nodeName:this.formData.nodeName,nodeType:this.dataInfo.type,fieldList:this.formData.fieldList,config:{top:this.dataInfo.top,left:this.dataInfo.left,temporarilyLineList:this.dataInfo.lineList,uuid:this.dataInfo.id,temporarilyNodeList:this.dataInfo.unSaveNodeList.filter((function(e){return e.id!==a.dataInfo.id}))},tableName:this.dataInfo.prevNode.tableName},this.formData.insert&&(t.targetTableName=this.formData.targetTableName),e.next=7,Object(H.n)(t);case 7:e.sent,this.$message.success("保存成功"),this.flink.realTimeTaskGetInfo(),this.handleClose(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),rowKey:function(e){return e.id}}},oa=(a("0ca0"),Object(c.a)(aa,(function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"数据处理【Select】",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose,opened:e.opened}},[t("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("提示：Flink Sql select语句")]),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{label:"节点名称：",prop:"nodeName"}},[t("el-input",{attrs:{placeholder:"请输入节点名称，1-20个字符",maxlength:"20"},model:{value:e.formData.nodeName,callback:function(t){e.$set(e.formData,"nodeName",t)},expression:"formData.nodeName"}})],1),t("el-form-item",{attrs:{label:"",prop:"fieldList"}},[t("div",{staticClass:"title-required"},[e._v("选择输出字段，相当于要select的字段")]),t("el-table",{ref:"multipleTable",attrs:{data:e.fieldList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"字段名称",prop:"fieldName"}}),t("el-table-column",{attrs:{label:"字段类型",prop:"fieldType"}}),t("el-table-column",{attrs:{label:"业务含义",prop:"fieldDesc"}})],1),t("div",{staticClass:"title-required"},[e._v("已选字段")]),t("el-table",{attrs:{data:e.formData.fieldList}},[t("el-table-column",{attrs:{label:"字段名称"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{attrs:{disabled:""},model:{value:o.fieldName,callback:function(t){e.$set(o,"fieldName",t)},expression:"row.fieldName"}})]}}])}),t("el-table-column",{attrs:{label:"字段别名"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{model:{value:o.fieldAlias,callback:function(t){e.$set(o,"fieldAlias",t)},expression:"row.fieldAlias"}})]}}])}),t("el-table-column",{attrs:{label:"字段类型"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-select",{attrs:{disabled:""},model:{value:o.fieldType,callback:function(t){e.$set(o,"fieldType",t)},expression:"row.fieldType"}},e._l(e.fieldTypes,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1)]}}])}),t("el-table-column",{attrs:{label:"字段表达式"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{model:{value:o.fieldExpression,callback:function(t){e.$set(o,"fieldExpression",t)},expression:"row.fieldExpression"}})]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("div",{staticClass:"editor-div"},[t("button",{attrs:{disabled:e.allowMove(o,"prev")},on:{click:function(t){return e.move(o,"prev")}}},[e._v("\n                上移\n              ")]),t("button",{attrs:{disabled:e.allowMove(o,"next")},on:{click:function(t){return e.move(o,"next")}}},[e._v("\n                下移\n              ")]),t("button",{on:{click:function(t){return e.remove(o,"fieldList")}}},[e._v("\n                删除\n              ")])])]}}])})],1)],1),t("el-form-item",{attrs:{label:"",prop:"insert"}},[t("el-checkbox",{model:{value:e.formData.insert,callback:function(t){e.$set(e.formData,"insert",t)},expression:"formData.insert"}},[e._v("insert  支持insert into，将select查询集合insert 到目标表（必须是已存在的表）")])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.insert,expression:"formData.insert"}],attrs:{label:"目标表：",prop:"targetTableName"}},[t("el-input",{attrs:{placeholder:"请输入需insert的目标表"},model:{value:e.formData.targetTableName,callback:function(t){e.$set(e.formData,"targetTableName",t)},expression:"formData.targetTableName"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.handleClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")])],1)],1)],1)}),[],!1,null,"222349b3",null).exports),ia={inject:["flink"],props:["fieldTypes"],data:function(e){return{dataInfo:{},formData:{nodeName:"",expression:"",fieldList:[],insert:!1,targetTableName:""},rules:{nodeName:[{required:!0,message:"请输入节点名称",trigger:"blur"}],expression:[{required:!0,message:"请输入表达式",trigger:"blur"}],targetTableName:[{required:!0,validator:function(t,a,o){if(e.formData.insert&&!a)return o(new Error("请填写目标表"));o()},trigger:"blur"}]},fieldList:[],dialogVisible:!1}},methods:{beforeOpen:function(e){this.dialogVisible=!0,this.dataInfo=e},opened:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i,r,n,s,l,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fieldList=this.dataInfo.prevNode.fieldList,!this.dataInfo.uuid){e.next=8;break}return e.next=4,Object(H.h)({id:this.dataInfo.uuid});case 4:t=e.sent,a=t.data.data,o=a.nodeName,i=a.expression,r=a.fieldList,n=a.insert,void 0!==n&&n,s=a.targetTableName,l=void 0===s?"":s,this.formData={nodeName:o,expression:i,fieldList:r,targetTableName:l,insert:!!l},this.$nextTick((function(){var e=c.fieldList.filter((function(e){var t=e.fieldName;return c.formData.fieldList.some((function(e){return e.fieldName===t}))}));c.isShow=!0,c.toggleSelection(e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),toggleSelection:function(e){var t=this;e.length&&e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)}))},handleClose:function(){this.$refs.ruleForm.resetFields(),this.dialogVisible=!1,this.formData.fieldList=[],this.fieldList=[]},handleSelectionChange:function(e){this.isShow?this.isShow=!1:this.formData.fieldList=e},allowMove:function(e,t){var a=this.formData.fieldList.findIndex((function(t){return t.id===e.id}));return"next"===t&&a===this.formData.fieldList.length-1||"prev"===t&&0===a},move:function(e,t){var a=this.formData.fieldList.findIndex((function(t){var a=t.id;return e.id===a}));"next"===t?this.swapItem(a,a+1):this.swapItem(a,a-1)},remove:function(e,t){var a=this.formData[t].findIndex((function(t){return t.id===e.id}));this.formData[t].splice(a,1),this.$refs.multipleTable.toggleRowSelection(e)},swapItem:function(e,t){var a=this.formData.fieldList;a[t]=a.splice(e,1,a[t])[0]},submit:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.ruleForm.validate();case 3:return t={id:this.dataInfo.uuid||null,taskId:this.flink.$props.nodeData.id,nodeName:this.formData.nodeName,nodeType:this.dataInfo.type,fieldList:this.formData.fieldList,expression:this.formData.expression,config:{top:this.dataInfo.top,left:this.dataInfo.left,temporarilyLineList:this.dataInfo.lineList,temporarilyNodeList:this.dataInfo.unSaveNodeList.filter((function(e){return e.id!==a.dataInfo.id})),uuid:this.dataInfo.id},tableName:this.dataInfo.prevNode.tableName},this.formData.insert&&(t.targetTableName=this.formData.targetTableName),e.next=7,Object(H.n)(t);case 7:e.sent,this.$message.success("保存成功"),this.flink.realTimeTaskGetInfo(),this.handleClose(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()}},ra=(a("e063"),Object(c.a)(ia,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"数据处理【filter】",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose,opened:e.opened}},[t("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("提示：filter过滤器，Flink Sql where子句 。")]),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{label:"节点名称：",prop:"nodeName"}},[t("el-input",{attrs:{placeholder:"请输入节点名称，1-20个字符",maxlength:"20"},model:{value:e.formData.nodeName,callback:function(t){e.$set(e.formData,"nodeName",t)},expression:"formData.nodeName"}})],1),t("el-form-item",{attrs:{label:"表达式",prop:"expression"}},[t("el-input",{attrs:{placeholder:"请输入表达式"},model:{value:e.formData.expression,callback:function(t){e.$set(e.formData,"expression",t)},expression:"formData.expression"}})],1),t("el-form-item",{attrs:{label:"",prop:"fieldList"}},[t("div",{staticClass:"title-required"},[e._v("\n        选择输出字段，相当于要Select的字段\n      ")]),t("el-table",{ref:"multipleTable",attrs:{data:e.fieldList,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"字段名称",prop:"fieldName"}}),t("el-table-column",{attrs:{label:"字段类型",prop:"fieldType"}}),t("el-table-column",{attrs:{label:"业务含义",prop:"fieldDesc"}})],1),t("div",{staticClass:"title-required"},[e._v("\n        已选字段\n      ")]),t("el-table",{attrs:{data:e.formData.fieldList}},[t("el-table-column",{attrs:{label:"字段名称"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{attrs:{disabled:""},model:{value:o.fieldName,callback:function(t){e.$set(o,"fieldName",t)},expression:"row.fieldName"}})]}}])}),t("el-table-column",{attrs:{label:"字段别名"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{model:{value:o.fieldAlias,callback:function(t){e.$set(o,"fieldAlias",t)},expression:"row.fieldAlias"}})]}}])}),t("el-table-column",{attrs:{label:"字段类型"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-select",{attrs:{disabled:""},model:{value:o.fieldType,callback:function(t){e.$set(o,"fieldType",t)},expression:"row.fieldType"}},e._l(e.fieldTypes,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1)]}}])}),t("el-table-column",{attrs:{label:"字段表达式"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{model:{value:o.fieldExpression,callback:function(t){e.$set(o,"fieldExpression",t)},expression:"row.fieldExpression"}})]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("div",{staticClass:"editor-div"},[t("button",{attrs:{disabled:e.allowMove(o,"prev")},on:{click:function(t){return e.move(o,"prev")}}},[e._v("\n                上移\n              ")]),t("button",{attrs:{disabled:e.allowMove(o,"next")},on:{click:function(t){return e.move(o,"next")}}},[e._v("\n                下移\n              ")]),t("button",{on:{click:function(t){return e.remove(o,"fieldList")}}},[e._v("\n                删除\n              ")])])]}}])})],1)],1),t("el-form-item",{attrs:{label:"",prop:"insert"}},[t("el-checkbox",{model:{value:e.formData.insert,callback:function(t){e.$set(e.formData,"insert",t)},expression:"formData.insert"}},[e._v("insert 支持insert into，将select查询集合insert\n        到目标表（必须是已存在的表）")])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.insert,expression:"formData.insert"}],attrs:{label:"目标表：",prop:"targetTableName"}},[t("el-input",{attrs:{placeholder:"请输入需insert的目标表"},model:{value:e.formData.targetTableName,callback:function(t){e.$set(e.formData,"targetTableName",t)},expression:"formData.targetTableName"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.handleClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")])],1)],1)}),[],!1,null,"292d70f9",null).exports),na=(a("55dd"),{inject:["flink"],props:["fieldTypes"],data:function(e){return{dialogVisible:!1,formData:{nodeName:"",PARTITIONBY:"",ORDERBY:"",fieldList:[],insert:!1,targetTableName:""},rules:{nodeName:[{required:!0,message:"请输入节点名称",trigger:"blur"}],PARTITIONBY:[{required:!0,message:"请输入PARTITION   BY",trigger:"blur"}],ORDERBY:[{required:!0,message:"请输入ORDER    BY",trigger:"blur"}],targetTableName:[{required:!0,validator:function(t,a,o){if(e.formData.insert&&!a)return o(new Error("请填写目标表"));o()},trigger:"blur"}]},fieldList:[],sort:"desc",dataInfo:{}}},methods:{handleClose:function(){this.$refs.ruleForm.resetFields(),this.dialogVisible=!1,this.formData.fieldList=[],this.fieldList=[]},beforeOpen:function(e){this.dialogVisible=!0,this.dataInfo=e},opened:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i,r,n,s,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fieldList=this.dataInfo.prevNode.fieldList,!this.dataInfo.uuid){e.next=9;break}return e.next=4,Object(H.h)({id:this.dataInfo.uuid});case 4:t=e.sent,a=t.data.data,o=a.nodeName,i=a.partitionBy,r=a.orderBy,n=a.fieldList,s=a.targetTableName,this.formData={nodeName:o,PARTITIONBY:i,ORDERBY:r,fieldList:n,targetTableName:s,insert:!!s},this.isShow=!0,this.$nextTick((function(){var e=l.fieldList.filter((function(e){var t=e.fieldName;return l.formData.fieldList.some((function(e){return e.fieldName===t}))}));l.toggleSelection(e)}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),allowMove:function(e,t){var a=this.formData.fieldList.findIndex((function(t){return t.id===e.id}));return"next"===t&&a===this.formData.fieldList.length-1||"prev"===t&&0===a},move:function(e,t){var a=this.formData.fieldList.findIndex((function(t){var a=t.id;return e.id===a}));"next"===t?this.swapItem(a,a+1):this.swapItem(a,a-1)},remove:function(e,t){var a=this.formData[t].findIndex((function(t){return t.id===e.id}));this.formData[t].splice(a,1),this.$refs.multipleTable.toggleRowSelection(e)},swapItem:function(e,t){var a=this.formData.fieldList;a[t]=a.splice(e,1,a[t])[0]},submit:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.ruleForm.validate();case 3:return t={id:this.dataInfo.uuid||null,taskId:this.flink.$props.nodeData.id,nodeName:this.formData.nodeName,nodeType:this.dataInfo.type,fieldList:this.formData.fieldList,orderBy:this.formData.ORDERBY,partitionBy:this.formData.PARTITIONBY,config:{top:this.dataInfo.top,left:this.dataInfo.left,temporarilyLineList:this.dataInfo.lineList,temporarilyNodeList:this.dataInfo.unSaveNodeList.filter((function(e){return e.id!==a.dataInfo.id})),uuid:this.dataInfo.id},tableName:this.dataInfo.prevNode.tableName},this.formData.insert&&(t.targetTableName=this.formData.targetTableName),e.next=7,Object(H.n)(t);case 7:e.sent,this.$message.success("保存成功"),this.flink.realTimeTaskGetInfo(),this.handleClose(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),handleSelectionChange:function(e){this.isShow?this.isShow=!1:this.formData.fieldList=e},toggleSelection:function(e){var t=this;e.length&&e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)}))}}}),sa=(a("3ff3"),Object(c.a)(na,(function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"数据处理【去重】",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose,opened:e.opened}},[t("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("\n      提示：去重是指对查询出来的结果，在列的集合内重复的行进行删除，只保留第一行或最后一行数据。\n    ")]),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{label:"节点名称：",prop:"nodeName"}},[t("el-input",{attrs:{placeholder:"请输入节点名称，1-20个字符",maxlength:"20"},model:{value:e.formData.nodeName,callback:function(t){e.$set(e.formData,"nodeName",t)},expression:"formData.nodeName"}})],1),t("el-form-item",{attrs:{label:"partition   by",prop:"PARTITIONBY"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择partition   by"},model:{value:e.formData.PARTITIONBY,callback:function(t){e.$set(e.formData,"PARTITIONBY",t)},expression:"formData.PARTITIONBY"}},e._l(e.fieldList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.fieldName,label:e.fieldName}})})),1)],1),t("el-form-item",{attrs:{label:"order   by",prop:"ORDERBY"}},[t("el-select",{staticStyle:{width:"60%",display:"inline-block"},attrs:{placeholder:"请选择order   by"},model:{value:e.formData.ORDERBY,callback:function(t){e.$set(e.formData,"ORDERBY",t)},expression:"formData.ORDERBY"}},e._l(e.fieldList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.fieldName,label:e.fieldName}})})),1),t("el-select",{staticStyle:{width:"35%",display:"inline-block"},attrs:{placeholder:"请选择排序"},model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}},[t("el-option",{attrs:{value:"asc",label:"asc"}}),t("el-option",{attrs:{value:"desc",label:"desc"}})],1)],1),t("el-form-item",{attrs:{label:"",prop:"fieldList"}},[t("div",{staticClass:"title-required"},[e._v("选择输出字段，要输出的字段，相当于要Select的字段")]),t("el-table",{ref:"multipleTable",attrs:{data:e.fieldList,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"字段名称",prop:"fieldName"}}),t("el-table-column",{attrs:{label:"字段类型",prop:"fieldType"}}),t("el-table-column",{attrs:{label:"业务含义",prop:"fieldDesc"}})],1),t("div",{staticClass:"title-required"},[e._v("\n          已选字段\n        ")]),t("el-table",{attrs:{data:e.formData.fieldList}},[t("el-table-column",{attrs:{label:"字段名称"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{attrs:{disabled:""},model:{value:o.fieldName,callback:function(t){e.$set(o,"fieldName",t)},expression:"row.fieldName"}})]}}])}),t("el-table-column",{attrs:{label:"字段别名"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{model:{value:o.fieldAlias,callback:function(t){e.$set(o,"fieldAlias",t)},expression:"row.fieldAlias"}})]}}])}),t("el-table-column",{attrs:{label:"字段类型"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-select",{attrs:{disabled:""},model:{value:o.fieldType,callback:function(t){e.$set(o,"fieldType",t)},expression:"row.fieldType"}},e._l(e.fieldTypes,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1)]}}])}),t("el-table-column",{attrs:{label:"字段表达式"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{model:{value:o.fieldExpression,callback:function(t){e.$set(o,"fieldExpression",t)},expression:"row.fieldExpression"}})]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("div",{staticClass:"editor-div"},[t("button",{attrs:{disabled:e.allowMove(o,"prev")},on:{click:function(t){return e.move(o,"prev")}}},[e._v("\n                上移\n              ")]),t("button",{attrs:{disabled:e.allowMove(o,"next")},on:{click:function(t){return e.move(o,"next")}}},[e._v("\n                下移\n              ")]),t("button",{on:{click:function(t){return e.remove(o,"fieldList")}}},[e._v("\n                删除\n              ")])])]}}])})],1)],1),t("el-form-item",{attrs:{label:"",prop:"insert"}},[t("el-checkbox",{model:{value:e.formData.insert,callback:function(t){e.$set(e.formData,"insert",t)},expression:"formData.insert"}},[e._v("insert 支持insert into，将select查询集合insert\n        到目标表（必须是已存在的表）")])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.insert,expression:"formData.insert"}],attrs:{label:"目标表：",prop:"targetTableName"}},[t("el-input",{attrs:{placeholder:"请输入需insert的目标表"},model:{value:e.formData.targetTableName,callback:function(t){e.$set(e.formData,"targetTableName",t)},expression:"formData.targetTableName"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.handleClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)],1)],1)}),[],!1,null,"d34659e6",null).exports),la={inject:["flink"],props:["fieldTypes"],data:function(){return{dialogVisible:!1,formData:{nodeName:"",fieldName:"",windowsFlag:!0,windowsFieldName:"",interval:"",insert:!1,targetTableName:"",fieldList:[]},rules:{nodeName:[{required:!0,message:"请输入节点名称",trigger:"blur"}],fieldName:[{required:!0,message:"请输入字段名称",trigger:"blur"}],windowsFieldName:[{required:!0,message:"请输入分组窗口",trigger:"blur"}]},windowFieldType:"scroll",translation:"second",fieldList:[],dataInfo:{}}},methods:{handleClose:function(){this.$refs.ruleForm.resetFields(),this.dialogVisible=!1,this.formData.fieldList=[]},opened:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i,r,n,s,l,c,d,u,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fieldList=this.dataInfo.prevNode.fieldList,!this.dataInfo.uuid){e.next=9;break}return e.next=4,Object(H.h)({id:this.dataInfo.uuid});case 4:t=e.sent,a=t.data.data,o=a.nodeName,i=a.groupBy,r=a.fieldList,n=a.insert,void 0!==n&&n,s=a.targetTableName,l=void 0===s?"":s,c=a.windowsFieldName,d=a.windowsFlag,u=a.interval,this.isShow=!0,this.formData={nodeName:o,fieldName:i,fieldList:r,targetTableName:l,insert:!!l,windowsFlag:1==d,windowsFieldName:c,interval:u},this.$nextTick((function(){var e=f.fieldList.filter((function(e){var t=e.fieldName;return f.formData.fieldList.some((function(e){return e.fieldName===t}))}));f.toggleSelection(e)}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),beforeOpen:function(e){this.dataInfo=e,this.dialogVisible=!0},handleSelectionChange:function(e){this.isShow?this.isShow=!1:this.formData.fieldList=e},toggleSelection:function(e){var t=this;e.length&&e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)}))},submit:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.ruleForm.validate();case 3:return t={id:this.dataInfo.uuid||null,taskId:this.flink.$props.nodeData.id,nodeName:this.formData.nodeName,nodeType:this.dataInfo.type,fieldList:this.formData.fieldList,groupBy:this.formData.fieldName,orderBy:this.formData.ORDERBY,windowsFlag:this.formData.windowsFlag?1:0,partitionBy:this.formData.PARTITIONBY,config:{top:this.dataInfo.top,left:this.dataInfo.left,temporarilyLineList:this.dataInfo.lineList,temporarilyNodeList:this.dataInfo.unSaveNodeList.filter((function(e){return e.id!==a.dataInfo.id})),uuid:this.dataInfo.id},tableName:this.dataInfo.prevNode.tableName},this.formData.windowsFlag&&(t.windowsFieldName=this.formData.windowsFieldName,t.interval=this.formData.interval,t.unit=this.translation),this.formData.insert&&(t.targetTableName=this.formData.targetTableName),e.next=8,Object(H.n)(t);case 8:e.sent,this.$message.success("保存成功"),this.flink.realTimeTaskGetInfo(),this.handleClose(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),allowMove:function(e,t){var a=this.formData.fieldList.findIndex((function(t){return t.id===e.id}));return"next"===t&&a===this.formData.fieldList.length-1||"prev"===t&&0===a},move:function(e,t){var a=this.formData.fieldList.findIndex((function(t){var a=t.id;return e.id===a}));"next"===t?this.swapItem(a,a+1):this.swapItem(a,a-1)},remove:function(e,t){var a=this.formData[t].findIndex((function(t){return t.id===e.id}));this.formData[t].splice(a,1),this.$refs.multipleTable.toggleRowSelection(e)},swapItem:function(e,t){var a=this.formData.fieldList;a[t]=a.splice(e,1,a[t])[0]}}},ca=(a("b586"),Object(c.a)(la,(function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"数据处理【Group by】",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose,opened:e.opened}},[t("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("提示：GROUP BY语句用于根据一个或多个列对结果集进行分组；窗口函数中的字段名称必须保持一致。")]),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"150px","label-position":"left"}},[t("el-form-item",{attrs:{label:"节点名称：",prop:"nodeName"}},[t("el-input",{attrs:{placeholder:"请输入节点名称，1-20个字符",maxlength:"20"},model:{value:e.formData.nodeName,callback:function(t){e.$set(e.formData,"nodeName",t)},expression:"formData.nodeName"}})],1),t("el-form-item",{attrs:{label:"字段名称：",prop:"fieldName"}},[t("el-input",{attrs:{placeholder:"请输入字段名称，1-20个字符",maxlength:"20"},model:{value:e.formData.fieldName,callback:function(t){e.$set(e.formData,"fieldName",t)},expression:"formData.fieldName"}})],1),t("el-form-item",{attrs:{label:"是否使用窗口函数",prop:"windowsFlag"}},[t("el-radio",{attrs:{label:!0},model:{value:e.formData.windowsFlag,callback:function(t){e.$set(e.formData,"windowsFlag",t)},expression:"formData.windowsFlag"}},[e._v("是")]),t("el-radio",{attrs:{label:!1},model:{value:e.formData.windowsFlag,callback:function(t){e.$set(e.formData,"windowsFlag",t)},expression:"formData.windowsFlag"}},[e._v("否")])],1),e.formData.windowsFlag?t("el-form-item",{attrs:{label:"分组窗口函数：",prop:"windowsFieldName"}},[t("el-input",{staticStyle:{display:"inline-block",width:"70%"},attrs:{placeholder:"请输入字段名称"},model:{value:e.formData.windowsFieldName,callback:function(t){e.$set(e.formData,"windowsFieldName",t)},expression:"formData.windowsFieldName"}}),t("el-select",{staticStyle:{display:"inline-block",width:"20%"},model:{value:e.windowFieldType,callback:function(t){e.windowFieldType=t},expression:"windowFieldType"}},[t("el-option",{attrs:{label:"滚动窗口",value:"scroll"}})],1)],1):e._e(),e.formData.windowsFlag?t("el-form-item",{attrs:{label:"interval：",prop:"interval"}},[t("el-input",{staticStyle:{display:"inline-block",width:"70%"},attrs:{placeholder:"interval，时间,eg.20"},model:{value:e.formData.interval,callback:function(t){e.$set(e.formData,"interval",t)},expression:"formData.interval"}}),t("el-select",{staticStyle:{display:"inline-block",width:"20%"},model:{value:e.translation,callback:function(t){e.translation=t},expression:"translation"}},[t("el-option",{attrs:{label:"second",value:"second"}}),t("el-option",{attrs:{label:"millisecond",value:"millisecond"}})],1)],1):e._e(),t("el-form-item",{attrs:{label:"",prop:"fieldList"}},[t("div",{staticClass:"title-required"},[e._v("\n          选择输出字段，要输出的字段，相当于要Select的字段\n        ")]),t("el-table",{ref:"multipleTable",attrs:{data:e.fieldList,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"字段名称",prop:"fieldName"}}),t("el-table-column",{attrs:{label:"字段类型",prop:"fieldType"}}),t("el-table-column",{attrs:{label:"业务含义",prop:"fieldDesc"}})],1),t("div",{staticClass:"title-required"},[e._v("\n          已选字段\n        ")]),t("el-table",{attrs:{data:e.formData.fieldList}},[t("el-table-column",{attrs:{label:"字段名称"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{attrs:{disabled:""},model:{value:o.fieldName,callback:function(t){e.$set(o,"fieldName",t)},expression:"row.fieldName"}})]}}])}),t("el-table-column",{attrs:{label:"字段别名"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{model:{value:o.fieldAlias,callback:function(t){e.$set(o,"fieldAlias",t)},expression:"row.fieldAlias"}})]}}])}),t("el-table-column",{attrs:{label:"字段类型"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-select",{attrs:{disabled:""},model:{value:o.fieldType,callback:function(t){e.$set(o,"fieldType",t)},expression:"row.fieldType"}},e._l(e.fieldTypes,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1)]}}])}),t("el-table-column",{attrs:{label:"字段表达式"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-input",{model:{value:o.fieldExpression,callback:function(t){e.$set(o,"fieldExpression",t)},expression:"row.fieldExpression"}})]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("div",{staticClass:"editor-div"},[t("button",{attrs:{disabled:e.allowMove(o,"prev")},on:{click:function(t){return e.move(o,"prev")}}},[e._v("\n                上移\n              ")]),t("button",{attrs:{disabled:e.allowMove(o,"next")},on:{click:function(t){return e.move(o,"next")}}},[e._v("\n                下移\n              ")]),t("button",{on:{click:function(t){return e.remove(o,"fieldList")}}},[e._v("\n                删除\n              ")])])]}}])})],1)],1),t("el-form-item",{attrs:{label:"",prop:"insert"}},[t("el-checkbox",{model:{value:e.formData.insert,callback:function(t){e.$set(e.formData,"insert",t)},expression:"formData.insert"}},[e._v("insert 支持insert into，将select查询集合insert\n          到目标表（必须是已存在的表）")])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.insert,expression:"formData.insert"}],attrs:{label:"目标表：",prop:"targetTableName"}},[t("el-input",{attrs:{placeholder:"请输入需insert的目标表"},model:{value:e.formData.targetTableName,callback:function(t){e.$set(e.formData,"targetTableName",t)},expression:"formData.targetTableName"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.handleClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)],1)],1)}),[],!1,null,"3d3a7864",null).exports),da=a("3835"),ua={8:"Sink 输出表【Hive】",9:"Sink 输出表【Kudu】",11:"Sink 输出表【oracle】",13:"Sink 输出表【mysql】",15:"Sink 输出表【redis】",17:"Sink 输出表【clickHouse】",19:"Sink 输出表【starRocks】",20:"Sink 输出表【elasticsearch】",12:"Source 维表【mysql】",10:"Source 维表【oracle】",14:"Source 维表【redis】",16:"Source 维表【clickHouse】",18:"Source 维表【starRocks】"},fa={name:"HiveDialog",props:["kafkaList","fieldTypes","nodeId"],inject:["flink"],data:function(){return{inTableList:[],dialogVisible:!1,title:"",dataInfo:null,paramNameList:[],formData:{inTable:"",nodeName:"",dataType:null,dataBase:null,tableId:null,partitionName:null,partitionValue:"",paramsList:[]},fieldList:[],dataTypeList:[],dataBaseList:[],tableIdList:[],partitionNameList:[],type:null,dataSourceList:[]}},methods:{esDataChange:function(){var e=this;if(""!=this.formData.dataBase&&this.esBool){var t={dbName:this.formData.dataBase,sourceId:this.formData.connectId};this.$API.post(this.$URL.getTableAndWord,t,(function(t){0==t.code?e.fieldList=t.data[0]&&!!t.data[0].relationshipes&&t.data[0].relationshipes.map((function(e){var t=e.relationFieldType;return{fieldName:e.relationFieldName,fieldType:t,isPartition:"",fieldAlias:e.relationFieldDesc}})):e.$message.error(t.msg)}))}},primaryKeyChange:function(){},changeInTable:function(){var e=this;this.formData.primaryKey&&(this.formData.primaryKey=""),this.fieldList=[],this.$API.get(this.$URL.getPrimaryKeyList,{id:this.formData.inTable},(function(t){if(0==t.code){e.tableIdList=t.data;var a=e.tableIdList;e.fieldList=a.map((function(e){var t=e.fieldType;return{fieldName:e.fieldName,fieldType:t,isPartition:"",fieldAlias:e.fieldDesc}}))}}))},getRedisIntable:function(){var e=this;this.inTableList=[],this.$API.get(this.$URL.getRedisInTable,{id:this.nodeId},(function(t){0==t.code&&(e.inTableList=t.data)}))},paramsNameChange:function(e,t){this.formData.paramsList[t].paramValueList="",this.formData.paramsList[t].paramsValue="",this.formData.paramsList.filter((function(t){return t.paramsName==e})).length>1&&(this.formData.paramsList[t].paramsName="",this.$message.error("不能选择重复参数"))},getParamsSelectList:function(){var e=this,t=new Map([["13",1],["11",2],["8",11],["9",14],["12",1],["10",2],["15",26],["17",15],["19",24],["21",12],["14",26],["16",15],["18",24],["20",12]]);this.$API.post(this.$URL.getParamsSelectList+"?sinkType=".concat([13,11,8,9,15,17,19,21].some((function(t){return t==e.type}))?2:1,"&connectType=").concat(t.get(this.type)),{},(function(t){0==t.code&&(e.paramNameList=t.data.map((function(e){return e.key})))}))},indexMethod:function(e){return e+1},deleteParamsRow:function(e){this.formData.paramsList.splice(e.$index,1)},addNewParams:function(){this.formData.paramsList.push({paramsName:"",paramsValue:""})},beforeOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.formData=this.$options.data().formData,this.fieldList=[],this.dataBaseList=[],this.tableIdList=[],this.dialogVisible=!0,this.dataInfo=e,t&&(this.dataInfo.isSql=t),this.type=this.dataInfo.type,this.getParamsSelectList(),this.getbdpDataCategoryList(),this.getRedisIntable(),this.getDataSourceList(),this.title=ua[this.dataInfo.type||this.dataInfo.nodeType]},getbdpDataCategoryList:function(){var e=this;this.$API.post(this.$URL.categoryConcernSearchNew,{type:"my",permissionType:17},(function(t){0==t.code?(e.dataTypeList=t.data.list.children,e.dataTypeList.map((function(e){"1"!=e.id&&"2"!=e.id||(e.disabled=!0)})),e.dataTypeList=e.dataTypeList.filter((function(e){return!(("1"==e.id||"2"==e.id)&&0==e.children.length)}))):e.$message.error(t.msg)}))},handleClose:function(){this.dialogVisible=!1,this.$refs.ruleForm.resetFields(),this.fieldList=[]},dataSourceChange:function(){var e=this;this.formData.dataBase="",this.formData.tableId="",this.redisBool||(this.dataBaseList=[],this.$API.get(this.$URL.getSourceByDataBase+"/".concat(this.formData.connectId),{},(function(t){if(0==t.code){var a,o=t.data;e.dataBaseList=o.map((function(e){return{label:e,value:e}})),1===(null===(a=e.dataBaseList)||void 0===a?void 0:a.length)&&(e.formData.dataBase=e.dataBaseList[0].value,e.esBool?e.esDataChange():e.dataChangeBySource())}})))},dataChangeBySource:function(){var e=this;this.formData.tableId="";var t={dbName:this.formData.dataBase,sourceId:this.formData.connectId};this.$API.post(this.$URL.getTableAndWord,t,(function(t){0==t.code?(e.tableIdList=t.data,e.tableIdList.forEach((function(e){e.label=e.tableName}))):e.$message.error(t.msg)}))},tableIdChange:function(){var e=this,t=this.tableIdList.filter((function(t){return t.id==e.formData.tableId}));this.fieldList=t[0]&&!!t[0].relationshipes&&t[0].relationshipes.map((function(e){var t=e.relationFieldType,a=e.relationFieldName,o=e.relationFieldDesc;return{primaryKey:e.primaryKey,fieldName:a,fieldType:t,isPartition:"",fieldAlias:o}}))},getDataSourceList:function(){var e=this,t=new Map([[13,1],[12,1],[10,2],[11,2],[14,26],[15,26],[16,15],[17,15],[18,24],[19,24],[20,12]]);this.dataSourceList=[];var a=this.dataInfo.type||this.dataInfo.nodeType,o={type_id:t.get(+a),proc_id:this.$route.query.id};this.$API.post(this.$URL.getConfConnectList,o,(function(t){0==t.code?t.data&&t.data.length>0&&(e.dataSourceList=t.data):e.$message.error(t.msg)}))},opened:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i,r,n,s,l,c,d,u,f,p,m,h,b,g,v,y,_=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dataInfo.uuid){e.next=29;break}return e.next=3,Object(H.h)({id:this.dataInfo.uuid});case 3:return t=e.sent.data.data,a=t.nodeName,o=t.config,i=o.dataType,r=o.tableType,n=o.dataBase,s=o.tableId,l=o.partitionName,c=o.paramsList,d=void 0===c?[]:c,u=o.partitionValue,f=t.fieldList,e.next=7,Object(H.i)({dataType:1,procId:this.$route.query.id,sourceType:""});case 7:return p=e.sent,m=p.data.data,this.dataBaseList=[],m.forEach((function(e){_.dataBaseList.push({label:e,value:e})})),this.formData={nodeName:a,tableType:r,dataType:i,dataBase:n,tableId:s,paramsList:d},this.fieldList=f,e.next=15,this.getTableInfoListAll();case 15:return this.formData.tableId=s,h=s,e.next=19,Object(H.p)({id:h});case 19:if(b=e.sent,(g=b.data.data).length){e.next=23;break}return e.abrupt("return");case 23:this.partitionNameList=[],g.forEach((function(e){_.partitionNameList.push({label:e.fieldName,value:e.fieldName})})),this.formData.partitionName=l,this.formData.partitionValue=u,e.next=36;break;case 29:if(this.isShow||this.redisBool||this.esBool){e.next=36;break}return e.next=32,Object(H.i)({dataType:1,procId:this.$route.query.id,sourceType:""});case 32:v=e.sent,y=v.data.data,this.dataBaseList=[],y.forEach((function(e){_.dataBaseList.push({label:e,value:e})}));case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getTableInfoListAll:(Ot=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.query.id,e.next=3,Object(H.l)({db_name:this.formData.dataBase,store_engine:"8"===this.dataInfo.type?1:2,category_id:this.formData.dataType&&this.formData.dataType[this.formData.dataType.length-1],page:1,limit:9999,proc_id:t});case 3:a=e.sent,o=a.data.page.list,this.tableIdList=[],o.forEach((function(e){i.tableIdList.push({label:e.tableName,value:e.id})}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return Ot.apply(this,arguments)}),handleTableIdChange:(jt=Object(A.a)(regeneratorRuntime.mark((function e(t){var a,o,i,r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([Object(H.c)({id:t}),Object(H.p)({id:t})]);case 4:a=e.sent,o=Object(da.a)(a,2),i=o[0].data.data,r=o[1].data.data,this.partitionNameList=[],r.forEach((function(e){n.partitionNameList.push({label:e.fieldName,value:e.fieldName})})),this.fieldList=[],i.forEach((function(e){n.fieldList.push({primaryKey:e.primaryKey,fieldName:e.fieldName,fieldType:e.fieldType,isPartition:0===e.isPartition?"不分区":"分区",fieldAlias:e.fieldAlias})}));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return jt.apply(this,arguments)}),submit:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.ruleForm.validate();case 3:return t={taskId:this.flink.$props.nodeData.id,id:this.dataInfo.uuid||null,nodeName:this.formData.nodeName,tableName:this.redisBool?this.formData.key:this.esBool?this.formData.dataBase:this.tableIdList.find((function(e){return(e.value||e.id)===a.formData.tableId})).label,nodeType:this.dataInfo.nodeType||this.dataInfo.type,connectId:this.formData.connectId||void 0,config:{tableType:this.formData.tableType,primaryKey:this.redisBool?this.tableIdList.filter((function(e){return e.id==a.formData.primaryKey}))[0].fieldName:void 0,dataType:this.formData.dataType&&this.formData.dataType[this.formData.dataType.length-1],dataBase:this.formData.dataBase,tableId:this.formData.tableId,partitionName:this.formData.partitionName,partitionValue:this.formData.partitionValue,paramsList:this.formData.paramsList,top:this.dataInfo.top||"",left:this.dataInfo.left||"",temporarilyLineList:this.dataInfo.lineList||[],temporarilyNodeList:this.dataInfo.unSaveNodeList&&this.dataInfo.unSaveNodeList.filter((function(e){return e.id!==a.dataInfo.id})),uuid:this.dataInfo.id||""},fieldList:this.fieldList},e.next=6,Object(H.n)(t);case 6:e.sent,this.$message.success("保存成功"),this.flink.isRefresh=!0,this.flink.realTimeTaskGetInfo(!0),this.handleClose(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),handleDataChange:function(){this.formData.dataBase&&!this.isShow&&(this.formData.tableId=null,this.getTableInfoListAll()),this.formData.tableId=""}},computed:{esBool:function(){var e=this;return[20,21].some((function(t){return t==(!!e.dataInfo&&(e.dataInfo.type||e.dataInfo.nodeType))}))},redisBool:function(){var e=this;return[14,15].some((function(t){return t==(!!e.dataInfo&&(e.dataInfo.type||e.dataInfo.nodeType))}))},isShow:function(){var e=this;return[10,11,12,13,16,17,18,19].some((function(t){return t==(!!e.dataInfo&&(e.dataInfo.type||e.dataInfo.nodeType))}))}}},pa=(a("5e33"),Object(c.a)(fa,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"hive-dialog"},[t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"60%","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose,opened:e.opened}},[t("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("提示：Flink Sql Sink_Create语句")]),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.formData,"label-width":"150px","label-position":"left"}},[t("div",{staticClass:"form-title"},[e._v("基本信息")]),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"节点名称：",prop:"nodeName",rules:[{required:!0,message:"请输入节点名称",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入节点名称，1-20个字符",maxlength:"20"},model:{value:e.formData.nodeName,callback:function(t){e.$set(e.formData,"nodeName",t)},expression:"formData.nodeName"}})],1)],1),e.isShow||e.esBool||e.redisBool?t("el-col",{attrs:{span:10}},[t("el-form-item",{key:"1",staticStyle:{"margin-left":"20px"},attrs:{label:"数据源：",prop:"connectId",rules:[{required:!0,message:"请选择数据源",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择数据源"},on:{change:e.dataSourceChange},model:{value:e.formData.connectId,callback:function(t){e.$set(e.formData,"connectId",t)},expression:"formData.connectId"}},e._l(e.dataSourceList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1):t("el-col",{attrs:{span:10}},[t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"资产类目：",prop:"dataType",rules:[{required:!1,message:"请选择资产类目",trigger:"change"}]}},[t("el-cascader",{attrs:{options:e.dataTypeList,placeholder:"请选择资产类目",props:{checkStrictly:!0,value:"id",label:"label"},clearable:"",filterable:""},on:{change:e.handleDataChange},model:{value:e.formData.dataType,callback:function(t){e.$set(e.formData,"dataType",t)},expression:"formData.dataType"}})],1)],1)],1),e.isShow?t("div",[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"数据库：",prop:"dataBase",rules:[{required:!0,message:"请选择数据库",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择数据库"},on:{change:e.dataChangeBySource},model:{value:e.formData.dataBase,callback:function(t){e.$set(e.formData,"dataBase",t)},expression:"formData.dataBase"}},e._l(e.dataBaseList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"表名：",prop:"tableId",rules:[{required:!0,message:"请选择表名",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择表名",filterable:""},on:{change:e.tableIdChange},model:{value:e.formData.tableId,callback:function(t){e.$set(e.formData,"tableId",t)},expression:"formData.tableId"}},e._l(e.tableIdList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.label}})})),1)],1)],1)],1)],1):e.redisBool?t("div",[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"输入表：",prop:"inTable",rules:[{required:!0,message:"请选择输入表",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择输入表"},on:{change:e.changeInTable},model:{value:e.formData.inTable,callback:function(t){e.$set(e.formData,"inTable",t)},expression:"formData.inTable"}},e._l(e.inTableList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.tableName}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{key:"primaryKey",staticStyle:{"margin-left":"20px"},attrs:{label:"主键：",prop:"primaryKey",rules:[{required:!0,message:"请选择主键",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择主键",filterable:""},on:{change:e.primaryKeyChange},model:{value:e.formData.primaryKey,callback:function(t){e.$set(e.formData,"primaryKey",t)},expression:"formData.primaryKey"}},e._l(e.tableIdList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.id,label:e.fieldName}})})),1)],1)],1)],1),t("el-row",{attrs:{type:"flex"}},[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"Key：",prop:"key",rules:[{required:!0,message:"请输入key",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入key"},model:{value:e.formData.key,callback:function(t){e.$set(e.formData,"key",t)},expression:"formData.key"}})],1)],1)],1)],1):e.esBool?t("div",[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"index：",prop:"dataBase",rules:[{required:!0,message:"请选择index",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择index"},on:{change:e.esDataChange},model:{value:e.formData.dataBase,callback:function(t){e.$set(e.formData,"dataBase",t)},expression:"formData.dataBase"}},e._l(e.dataBaseList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1)],1):t("div",[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"数据库：",prop:"dataBase",rules:[{required:!0,message:"请选择数据库",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择数据库"},on:{change:e.handleDataChange},model:{value:e.formData.dataBase,callback:function(t){e.$set(e.formData,"dataBase",t)},expression:"formData.dataBase"}},e._l(e.dataBaseList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"表名：",prop:"tableId",rules:[{required:!0,message:"请选择表名",trigger:"change"}]}},[t("el-select",{attrs:{placeholder:"请选择表名",filterable:""},on:{change:e.handleTableIdChange},model:{value:e.formData.tableId,callback:function(t){e.$set(e.formData,"tableId",t)},expression:"formData.tableId"}},e._l(e.tableIdList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1)],1)],1),t("div",{staticClass:"form-title"},[e._v("字段信息")]),t("el-table",{attrs:{data:e.fieldList,"max-height":"240px"}},[t("el-table-column",{attrs:{prop:"fieldName",label:"字段名称"}}),t("el-table-column",{attrs:{prop:"fieldType",label:"字段类型"}}),e.isShow?e._e():t("el-table-column",{attrs:{prop:"isPartition",label:"是否分区"}}),t("el-table-column",{attrs:{prop:"fieldAlias",label:"业务含义"}})],1),e.partitionNameList.length>0&&"8"===e.type?t("div",{staticClass:"form-title"},[e._v("写入分区")]):e._e(),e.partitionNameList.length>0&&"8"===e.type?t("el-row",{attrs:{type:"flex",align:"center"}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"写入分区：",prop:"partitionName"}},[t("el-select",{attrs:{placeholder:"请选择分区字段",filterable:""},model:{value:e.formData.partitionName,callback:function(t){e.$set(e.formData,"partitionName",t)},expression:"formData.partitionName"}},e._l(e.partitionNameList,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)],1)],1),t("el-col",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{span:1}},[e._v("=")]),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"",prop:"partitionValue","label-width":"0"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.partitionValue,callback:function(t){e.$set(e.formData,"partitionValue",t)},expression:"formData.partitionValue"}})],1)],1)],1):e._e(),t("div",{staticClass:"form-title"},[e._v("参数配置")]),t("el-table",{attrs:{data:e.formData.paramsList}},[t("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),t("el-table-column",{attrs:{label:"参数名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"paramsList."+a.$index+".paramsName",rules:{required:!0,message:"参数名不能为空",trigger:"blur"}}},[t("el-select",{attrs:{placeholder:"请选择参数名"},on:{change:function(t){return e.paramsNameChange(t,a.$index)}},model:{value:a.row.paramsName,callback:function(t){e.$set(a.row,"paramsName",t)},expression:"scope.row.paramsName"}},e._l(e.paramNameList,(function(e,a){return t("el-option",{key:a,attrs:{value:e,label:e}})})),1)],1)]}}])}),t("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"paramsList."+a.$index+".paramsValue",rules:{required:!0,message:"参数值不能为空",trigger:"blur"}}},[t("el-input",{attrs:{placeholder:"请输入参数值"},model:{value:a.row.paramsValue,callback:function(t){e.$set(a.row,"paramsValue",t)},expression:"scope.row.paramsValue"}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作",align:"right",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteParamsRow(a)}}},[e._v("删除")])]}}])})],1),t("ul",{staticClass:"addNew clearfix"},[t("li",{staticClass:"file",staticStyle:{position:"absolute",left:"50%",transform:"translateX(-50%)"},on:{click:e.addNewParams}},[t("i",{staticClass:"el-icon-plus"}),e._v("添加\n          ")])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.handleClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")])],1)],1)],1)}),[],!1,null,"40b89c7c",null).exports),ma=(a("02c6"),["nodeId","nodeName"]);function ha(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function ba(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ha(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ga,va,ya,_a,ka,xa,wa,Ta,Sa,La={1:ta,2:oa,3:ra,4:sa,5:ca,6:ta,8:pa,9:pa},Na={props:["panelData","isLock"],inject:["flink"],data:function(){return{jsPlumb:null,easyFlowVisible:!0,flowInfoVisible:!1,loadEasyFlowFinish:!1,flowHelpVisible:!1,data:{nodeList:[],lineList:[]},activeElement:{type:void 0,nodeId:void 0,sourceId:void 0,targetId:void 0},zoom:.5,isEditMenuShow:!1,kafkaList:[],dialogComponent:null,frontConfig:{},taskDetail:{},deleteLineShow:!1}},mixins:[Rt.a],components:{draggable:Mt.a,flowNode:Et.a,nodeMenu:Ht,FlowNodeForm:Yt},directives:{flowDrag:{bind:function(e,t,a,o){t&&(e.onmousedown=function(t){if(2!=t.button){var a=t.clientX,o=t.clientY;e.style.cursor="move",document.onmousemove=function(t){t.preventDefault();var i=t.clientX-a;a=t.clientX,e.scrollLeft+=-i;var r=t.clientY-o;o=t.clientY,e.scrollTop+=-r},document.onmouseup=function(t){e.style.cursor="auto",document.onmousemove=null,document.onmouseup=null}}})}}},mounted:function(){this.jsPlumb=jsPlumb.getInstance(),this.getKafkaList()},methods:{getUUID:function(){return Math.random().toString(36).substr(3,10)},getKafkaList:(ya=Object(A.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.d)({procId:this.$route.query.id});case 2:t=e.sent,this.kafkaList=t.data.data;case 4:case"end":return e.stop()}}),e,this)}))),function(){return ya.apply(this,arguments)}),refreshId:function(e,t){this.flink.realTimeTaskGetInfo()},jsPlumbInit:function(){var e=this;this.jsPlumb.ready((function(){e.jsPlumb.importDefaults(e.jsplumbSetting),e.jsPlumb.setSuspendDrawing(!1,!0),e.loadEasyFlow(),e.jsPlumb.bind("click",(function(t,a){e.activeElement.type="line",e.activeElement.sourceId=t.sourceId,e.activeElement.targetId=t.targetId,e.$refs.nodeForm.lineInit({from:t.sourceId,to:t.targetId,label:t.getLabel()})})),e.jsPlumb.bind("connection",(function(t){var a=t.source.id,o=t.target.id;e.loadEasyFlowFinish&&e.data.lineList.push({from:a,to:o})})),e.jsPlumb.bind("connectionDetached",(function(t){e.deleteLine(t.sourceId,t.targetId)})),e.jsPlumb.bind("connectionMoved",(function(t){e.changeLine(t.originalSourceId,t.originalTargetId)})),e.jsPlumb.bind("contextmenu",(function(t,a){e.deleteLineShow=!0,e.contextmenuLine=t,e.$refs.line_menu.style.top=a.clientY+"px",e.$refs.line_menu.style.left=a.clientX+"px",e.$nextTick((function(){e.$refs.line_menu.focus()}))})),e.jsPlumb.bind("beforeDrop",(function(t){var a=t.sourceId,o=t.targetId,i=e.data.lineList.filter((function(e){return e.to==o})).length,r=e.data.lineList.filter((function(e){return e.from==a}));if(!i.length&&!r.length)return e.$refs.flowNode.forEach((function(e){return e.initDom=""})),e.data.nodeList.find((function(e){return e.id===a})).uuid?"0"===t.connection.target.dataset.allow?(e.$message.error("不支持连接到source节点"),!1):"2"===t.connection.source.dataset.allow?(e.$message.error("输出节点不支持连接到其他节点"),!1):a===o?(e.$message.error("节点不支持连接自己"),!1):e.hasLine(a,o)?(e.$message.error("该关系已存在,不允许重复创建"),!1):e.hashOppositeLine(a,o)?(e.$message.error("不支持两个节点之间连线回环"),!1):(e.$message.success("连接成功"),!0):(e.$message.error("请先保存节点在连接到下一条数据"),!1);e.$message.error("一个节点只能建立一条连线")})),e.jsPlumb.bind("beforeDetach",(function(e){})),e.jsPlumb.setContainer(e.$refs.efContainer)}))},loadEasyFlow:function(){for(var e=this,t=0;t<this.data.nodeList.length;t++){var a=this.data.nodeList[t];this.jsPlumb.makeSource(a.id,this.jsplumbSourceOptions),this.jsPlumb.makeTarget(a.id,this.jsplumbTargetOptions),a.viewOnly||this.jsPlumb.draggable(a.id,{containment:"parent",stop:function(e){}})}for(t=0;t<this.data.lineList.length;t++){var o=this.data.lineList[t],i={source:o.from,target:o.to,label:o.label?o.label:"",connector:o.connector?o.connector:"",anchors:o.anchors?o.anchors:void 0,paintStyle:o.paintStyle?o.paintStyle:void 0};this.jsPlumb.connect(i,this.jsplumbConnectOptions)}this.$nextTick((function(){this.loadEasyFlowFinish=!0,this.$nextTick((function(){e.jsPlumb.setSuspendDrawing(!1,!0)}))}))},deleteElement:function(e){var t=this;"node"===e?(this.deleteNode(this.activeElement),this.isEditMenuShow=!1):"line"===e&&this.$confirm("确定删除所点击的线吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(A.a)(regeneratorRuntime.mark((function e(){var a,o,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.deleteLineShow=!1,a=t.taskDetail.config&&t.taskDetail.config.temporarilyLineList||[],o=t.taskDetail.config&&t.taskDetail.config.temporarilyNodeList||[],!a.find((function(e){return e.from==t.contextmenuLine.source.id}))){e.next=10;break}return i=a.filter((function(e){return e.from!==t.contextmenuLine.source.id})),e.next=8,Object(H.a)({taskId:t.taskDetail.menuId,config:{temporarilyLineList:i,temporarilyNodeList:o}});case 8:e.sent,t.$message.success("操作成功");case 10:r=t.jsPlumb.getConnections({source:t.contextmenuLine.source.id,target:t.contextmenuLine.target.id})[0],t.jsPlumb.deleteConnection(r);case 12:case"end":return e.stop()}}),e)})))).catch((function(e){}))},deleteLine:function(e,t){this.data.lineList=this.data.lineList.filter((function(a){return a.from!=e||a.to!=t}))},changeLine:function(e,t){this.deleteLine(e,t)},changeNodeSite:function(e){for(var t=0;t<this.data.nodeList.length;t++){var a=this.data.nodeList[t];a.id===e.nodeId&&(a.left=e.left,a.top=e.top)}},addNode:function(e,t,a){var o=e.originalEvent.clientX,i=e.originalEvent.clientY,r=this.$refs.efContainer,n=r.getBoundingClientRect(),s=o,l=i;if(s<n.x||s>n.width+n.x||l<n.y||n.y>n.y+n.height)this.$message.error("请把节点拖入到画布中");else if(this.isLock)this.$message.error("该任务已被锁定,请解锁后操作");else{s=s-n.x+r.scrollLeft,l=l-n.y+r.scrollTop,s-=85,l-=16;for(var c=this.getUUID(),d=t.name,u=d,f=1;f<1e4;){for(var p=!1,m=0;m<this.data.nodeList.length;m++){this.data.nodeList[m].name===u&&(u=d+f,p=!0)}if(!p)break;f++}var h={id:c,name:u,applyName:"",type:t.type,left:s+"px",top:l+"px",style:t.style,allowTo:t.allowTo};this.data.nodeList.push(h),this.$nextTick((function(){this.jsPlumb.makeSource(c,this.jsplumbSourceOptions),this.jsPlumb.makeTarget(c,this.jsplumbTargetOptions),this.jsPlumb.draggable(c,{containment:"parent",stop:function(e){}})}))}},deleteNode:function(e){var t=this,a=(e.nodeId,e.nodeName,Object(Ft.a)(e,ma));return this.$confirm("删除该节点后，数据无法恢复。","确定要删除吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(Object(A.a)(regeneratorRuntime.mark((function e(){var o,i,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.taskDetail.config&&t.taskDetail.config.temporarilyLineList||[]||[],i=t.taskDetail.config&&t.taskDetail.config.temporarilyNodeList||[],r=o.filter((function(e){var t=e.from,o=e.to;return t!=a.id&&o!=a.id})),!a.uuid){e.next=10;break}return e.next=6,Object(H.a)({taskId:t.taskDetail.menuId,id:a.uuid,config:{temporarilyLineList:r,temporarilyNodeList:i}});case 6:e.sent,t.flink.realTimeTaskGetInfo(),e.next=20;break;case 10:if((n=i.filter((function(e){return e.id!==a.id}))).length!=i.length){e.next=16;break}t.data.nodeList=t.data.nodeList.filter((function(e){return e.id!==a.id})),t.data.lineList=t.data.lineList.filter((function(e){var t=e.from,o=e.to;return t!=a.id&&o!=a.id})),e.next=20;break;case 16:return e.next=18,Object(H.a)({taskId:t.taskDetail.menuId,config:{temporarilyLineList:r,temporarilyNodeList:n}});case 18:e.sent,t.flink.realTimeTaskGetInfo();case 20:t.$nextTick((function(){this.jsPlumb.removeAllEndpoints(a.id)}));case 21:case"end":return e.stop()}}),e)})))).catch((function(e){})),!0},clickNode:(va=Object(A.a)(regeneratorRuntime.mark((function e(t){var a,o,i,r,n,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.activeElement.nodeId=t,a=this.data.nodeList.find((function(e){return e.id===t})),o=this.data.nodeList.filter((function(e){return!e.uuid})),i=this.data.lineList,r=i.find((function(e){return e.to===t})),n=r&&this.data.nodeList.find((function(e){return e.id===r.from}))||null,"1"===a.type||r&&i.length){e.next=9;break}return this.$message.error("请先连线再编辑"),e.abrupt("return");case 9:this.dialogComponent=La[a.type],this.$nextTick((function(){if(r){var e=ba(ba({},a),{},{lineList:i,id:a.id,prevNode:n,unSaveNodeList:o});s.$refs.updateNode.beforeOpen(e,6==a.type)}else s.$refs.updateNode.beforeOpen(ba(ba({},a),{},{unSaveNodeList:o,lineList:i}),6==a.type)}));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return va.apply(this,arguments)}),getNodesAndChangeStyle:function(e){this.jsPlumb.getConnections({source:this.activeElement.nodeId})[0].connector.canvas.style.opacity=.2},contextmenuNode:function(e,t){var a=this;this.activeElement=e,this.isEditMenuShow=!0,this.$refs.edit_menu.style.left=t.clientX+"px",this.$refs.edit_menu.style.top=t.clientY+"px",this.$nextTick((function(){a.$refs.edit_menu.focus()}))},hasLine:function(e,t){for(var a=0;a<this.data.lineList.length;a++){var o=this.data.lineList[a];if(o.from===e&&o.to===t)return!0}return!1},hashOppositeLine:function(e,t){return this.hasLine(t,e)},nodeRightMenu:function(e,t){this.menu.show=!0,this.menu.curNodeId=e,this.menu.left=t.x+"px",this.menu.top=t.y+"px"},repaintEverything:function(){this.jsPlumb.repaint()},dataInfo:function(){this.flowInfoVisible=!0,this.$nextTick((function(){this.$refs.flowInfo.init()}))},dataReload:function(){var e=this;this.easyFlowVisible=!1,this.$nextTick((function(){e.easyFlowVisible=!0,e.$nextTick((function(){e.jsPlumb=jsPlumb.getInstance(),e.$nextTick((function(){e.jsPlumbInit()}))}))}))},zoomAdd:function(){this.zoom>=1||(this.zoom=this.zoom+.1,this.$refs.efContainer.style.transform="scale(".concat(this.zoom,")"),this.jsPlumb.setZoom(this.zoom))},zoomSub:function(){this.zoom<=0||(this.zoom=this.zoom-.1,this.$refs.efContainer.style.transform="scale(".concat(this.zoom,")"),this.jsPlumb.setZoom(this.zoom))},openHelp:function(){this.flowHelpVisible=!0,this.$nextTick((function(){this.$refs.flowHelp.init()}))},changePanelData:function(e){var t=this;this.taskDetail=e,this.data.nodeList=e.nodeList.map((function(e,a){var o=Vt.find((function(t){var a=t.type;return Number(a)===e.nodeType})),i=e.config,r=i.left,n=i.top;return Object.assign({uuid:e.id,left:r,top:n},o,e,{id:e.config.uuid||t.getUUID()})})),e.config&&e.config.temporarilyNodeList&&e.config.temporarilyNodeList.length&&(this.data.nodeList=[].concat(Object(u.a)(this.data.nodeList),Object(u.a)(e.config.temporarilyNodeList)));var a=this.taskDetail.config&&JSON.parse(JSON.stringify(this.taskDetail.config.temporarilyLineList))||[],o=e.lineList.map((function(e){return{from:e.webFrom,to:e.webTo}}));this.data.lineList=Kt.a.uniqBy([].concat(Object(u.a)(a),Object(u.a)(o)),"from"),this.$nextTick((function(){t.dataReload()}))},submitData:(ga=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.data.lineList.length===this.data.nodeList.length-1&&this.data.lineList.length){e.next=2;break}return e.abrupt("return",Promise.reject("请连线再保存任务"));case 2:if(!(t=this.data.lineList.map((function(e){var t=e.from,o=e.to,i=a.data.nodeList.find((function(e){var a=e.id;return t===a})),r=a.data.nodeList.find((function(e){var t=e.id;return o===t}));return{nodeFrom:i.uuid,nodeTo:r.uuid,webFrom:i.id,webTo:r.id}}))).some((function(e){return!e.nodeFrom||!e.nodeTo}))){e.next=5;break}return e.abrupt("return",Promise.reject("请先保存节点再保存任务"));case 5:return e.abrupt("return",Promise.resolve({lineList:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return ga.apply(this,arguments)})}},Ia=(a("4a82"),Object(c.a)(Na,(function(){var e=this,t=e._self._c;return e.easyFlowVisible?t("div",{staticStyle:{height:"calc(100vh)"}},[t("div",{staticStyle:{display:"flex",height:"calc(100% - 47px)"}},[t("div",{staticClass:"left-menu"},[t("node-menu",{ref:"nodeMenu",on:{addNode:e.addNode}})],1),t("div",{directives:[{name:"flowDrag",rawName:"v-flowDrag"}],ref:"efContainer",staticClass:"container",attrs:{id:"efContainer"},on:{click:function(t){e.isEditMenuShow=!1},contextmenu:function(e){e.preventDefault(),e.stopPropagation()}}},[e._l(e.data.nodeList,(function(a){return[t("flow-node",{key:a.id,ref:"flowNode",refInFor:!0,style:St({},a.style),attrs:{id:a.id,node:a,activeElement:e.activeElement},on:{changeNodeSite:e.changeNodeSite,nodeRightMenu:e.nodeRightMenu,clickNode:e.clickNode,contextmenuNode:e.contextmenuNode}})]})),t("div",{staticStyle:{position:"absolute",top:"1000px",left:"1000px"}},[e._v(" ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditMenuShow,expression:"isEditMenuShow"}],ref:"edit_menu",attrs:{id:"edit_menu",tabindex:"1"},on:{blur:function(t){e.isEditMenuShow=!1}}},[t("ul",[t("li",{on:{click:function(t){return e.deleteElement("node")}}},[e._v("移除")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.deleteLineShow,expression:"deleteLineShow"}],ref:"line_menu",attrs:{id:"line_menu",tabindex:"0"},on:{blur:function(t){e.deleteLineShow=!1}}},[t("ul",[t("li",{on:{click:function(t){return e.deleteElement("line")}}},[e._v("移除")])])])],2)]),t(e.dialogComponent,{ref:"updateNode",tag:"component",attrs:{kafkaList:e.kafkaList},on:{refreshId:e.refreshId}})],1):e._e()}),[],!1,null,"33e9c252",null).exports),Da={applyName:"",type:"1"},$a={inject:["flink"],props:["nodeList","lockModal"],data:function(){return{activeNames:["entry"],kafkaList:[],isEditMenuShow:!1,activeElement:{}}},components:{Source:ta},computed:{buttonList:function(){return this.nodeList.filter((function(e){return 1==e.nodeType}))}},methods:{blur:function(){this.isEditMenuShow=!1},addSource:function(){this.lockModal||(this.buttonList.length>9?this.$message.warning("最多添加10个输入表！"):this.$refs.source.beforeOpen(Da,!1))},getKafkaList:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.d)({procId:this.$route.query.id});case 2:t=e.sent,this.kafkaList=t.data.data;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),edit:function(e){e.uuid=e.id,this.$refs.source.beforeOpen(e)},contextmenu:function(e,t){var a=this;e.preventDefault(),this.isEditMenuShow=!0,this.$refs.edit_menu.style.left=e.clientX+"px",this.$refs.edit_menu.style.top=e.clientY+"px",this.$nextTick((function(){a.$refs.edit_menu.focus()})),this.activeElement=t},deleteElement:function(e){var t=this;this.$confirm("删除该表后，数据无法恢复。","确定要删除吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(Object(A.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(H.a)({id:e});case 2:a.sent,t.flink.realTimeTaskGetInfo(!0);case 4:case"end":return a.stop()}}),a)}))))}},mounted:function(){this.getKafkaList()}},Ca=(a("ea56"),Object(c.a)($a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"realtime_task_params_config"},[t("div",{staticClass:"section"},[e._v("\n                提示：点击connector创建实时SQL的输入表和输出表 ，输入表和输出表支持创建多个；请保持SQL编辑器中使用的输入表，输入表的表名，表结构与connector中一致，否则会影响到代码运行失败及后续血缘追踪。\n            ")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.buttonList}},[t("el-table-column",{attrs:{label:"表名",prop:"tableName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"创建人",prop:"createPerName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"创建时间",width:"140",prop:"createTime"}}),t("el-table-column",{attrs:{label:"操作","header-align":"right",align:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"delete",attrs:{type:"text",disabled:e.lockModal},on:{click:function(t){return e.deleteElement(a.row.id)}}},[e._v("移除")])]}}])})],1),t("ul",{staticClass:"addNew clearfix"},[t("li",{staticClass:"file",on:{click:e.addSource}},[t("i",{staticClass:"el-icon-plus"}),e._v("添加输入表")])]),t("Source",{ref:"source",attrs:{kafkaList:e.kafkaList}})],1)}),[],!1,null,"5aa3db02",null).exports),ja={props:["nodeList","lockModal","isDimensionTable","nodeId"],inject:["flink"],data:function(){return{dialogComponent:"HiveDialog",activeNames:["entry"],kafkaList:[],isEditMenuShow:!1}},components:{Source:ta,HiveDialog:pa},computed:{buttonList:function(){if(this.isDimensionTable)return this.nodeList.filter((function(e){var t=e.nodeType;return 10==t||12==t||14==t||16==t||18==t}));var e=[6,9,8,11,13,15,17,19,20];return this.nodeList.filter((function(t){var a=t.nodeType;return e.some((function(e){return e==a}))}))}},methods:{addSource:function(e){this.lockModal||(this.buttonList.length>9?this.$message.warning("最多添加10个输出表！"):"6"==e?this.$refs.source.beforeOpen({type:e},!0):this.$refs.updateNode.beforeOpen({type:e},!0))},getKafkaList:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.d)({procId:this.$route.query.id});case 2:t=e.sent,this.kafkaList=t.data.data;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),edit:function(e){e.uuid=e.id,e.type=e.nodeType,this.$refs.source.beforeOpen(e,!0)},contextmenu:function(e,t){var a=this;e.preventDefault(),this.isEditMenuShow=!0,this.$refs.edit_menu.style.left=e.clientX+"px",this.$refs.edit_menu.style.top=e.clientY+"px",this.$nextTick((function(){a.$refs.edit_menu.focus()})),this.activeElement=t},deleteElement:function(e){var t=this;this.$confirm("删除该表后，数据无法恢复。","确定要删除吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(Object(A.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(H.a)({id:e});case 2:a.sent,t.flink.realTimeTaskGetInfo(!0);case 4:case"end":return a.stop()}}),a)}))))},blur:function(){this.isEditMenuShow=!1}},mounted:function(){this.getKafkaList()}},Oa=(a("0ffa"),a("e642"),Object(c.a)(ja,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"realtime_task_params_config"},[e.isDimensionTable?e._e():t("div",{staticClass:"section"},[e._v("\n                提示：点击connector创建实时SQL的输入表和输出表 ，输入表和输出表支持创建多个；请保持SQL编辑器中使用的输入表，输入表的表名，表结构与connector中一致，否则会影响到代码运行失败及后续血缘追踪。\n            ")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.buttonList}},[t("el-table-column",{attrs:{label:"表名",prop:"tableName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"创建人",prop:"createPerName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"创建时间",width:"140",prop:"createTime"}}),t("el-table-column",{attrs:{label:"操作","header-align":"right",align:"right",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"delete",attrs:{type:"text",disabled:e.lockModal},on:{click:function(t){return e.deleteElement(a.row.id)}}},[e._v("移除")])]}}])})],1),t("ul",{staticClass:"addNew clearfix"},[t("el-popover",{attrs:{"popper-class":"addNew-list",placement:"right-start",width:"170",trigger:"click"}},[e.isDimensionTable?t("ul",{staticClass:"source-list"},[t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("12")}}},[e._v("mysql维表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("10")}}},[e._v("oracle维表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("14")}}},[e._v("redis维表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("16")}}},[e._v("clickHouse维表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("18")}}},[e._v("starRocks维表")])]):t("ul",{staticClass:"source-list"},[t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("6")}}},[e._v("kafka输出表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("9")}}},[e._v("kudu输出表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("8")}}},[e._v("hive输出表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("11")}}},[e._v("oracle输出表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("13")}}},[e._v("mySql输出表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("15")}}},[e._v("redis输出表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("17")}}},[e._v("clickHouse输出表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("19")}}},[e._v("starRocks输出表")]),t("li",{staticClass:"source-item",on:{click:function(t){return e.addSource("20")}}},[e._v("elasticsearch输出表")])]),e.isDimensionTable?t("li",{staticClass:"file",attrs:{slot:"reference"},slot:"reference"},[t("i",{staticClass:"el-icon-plus"}),e._v(" 添加维表")]):t("li",{staticClass:"file",attrs:{slot:"reference"},slot:"reference"},[t("i",{staticClass:"el-icon-plus"}),e._v(" 输出表")])])],1),t("Source",{ref:"source",attrs:{kafkaList:e.kafkaList}}),t(e.dialogComponent,{ref:"updateNode",tag:"component",attrs:{nodeId:e.nodeId,kafkaList:e.kafkaList}})],1)}),[],!1,null,"763e4d8c",null).exports),Fa={data:function(){return{dialogVisible:!1,dataInfo:""}},computed:{innerText:function(){return this.dataInfo&&this.dataInfo.split("\n").join("<br />")||""}},methods:{handleClose:function(){},openModal:(_a=Object(A.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogVisible=!0,e.next=3,Object(H.m)(t);case 3:a=e.sent,this.dataInfo=a.data.data;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return _a.apply(this,arguments)})}},Pa=Object(c.a)(Fa,(function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"SQL预览",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[t("div",{domProps:{innerHTML:e._s(e.innerText)}})])],1)}),[],!1,null,"7fe361d4",null).exports,Ma=a("838b"),Ra={props:{realTimeCollectionConfig:{type:Object,default:function(){return{}}},isLock:{type:Number,default:1}},components:{VueJsonPretty:a.n(Ma).a},data:function(){return{nopartitionList:[],fieldNameList:[],newFieldsList:[],isLoading:!1,popLoding:!1,activeNames:[1,2,3],isWriteLimit:"1",isProp:!1,tableView:"",visible:!1,form:{config:{resourceId:"",topicName:"",startPosition:"",params:[],store_engine:1,targetTableName:"",targetTableId:"",targetDbname:"",writeWay:"",jobMemory:1,paralleLimit:1,fieldName:"",partition:"",writeLimit:0,isDynamicPartition:!1,fields:[],collectionTimeName:"",collectionTimeFormat:""}},connectList:[],dbList:[],tableList:[],partitionList:[],rules:{"config.resourceId":[{required:!0,message:"请选择数据来源",trigger:"change"}],"config.topicName":[{required:!0,message:"请选择数据来源获取topic",trigger:"blur"}],"config.startPosition":[{required:!0,message:"请选择启动位点",trigger:"change"}],"config.targetDbname":[{required:!0,message:"请选择目标数据库",trigger:"change"}],"config.targetTableName":[{required:!0,message:"请选择目标数仓表",trigger:"change"}],"config.writeWay":[{required:!0,message:"请选择书写模式",trigger:"change"}],"config.fieldName":[{required:!0,message:"请选择分区字段",trigger:"change"}],"config.partition":[{required:!0,message:"请填写分区字段值",trigger:"blur"},{pattern:/^[,a-zA-Z0-9_-]*$/,message:"只能输入英文，数字，下划线,中划线以及英文逗号",trigger:"blur"}]}}},computed:{lock:function(){return 0===this.isLock},validateValue:function(){return 0==this.form.config.isDynamicPartition?[{required:!0,message:"分区值不能为空",trigger:"blur"}]:[]},validateTypeTime:function(){return""!=this.form.config.collectionTimeFormat?[{required:!0,message:"请选择采集配置",trigger:"change"}]:[]},validateType:function(){return""!=this.form.config.collectionTimeName?[{required:!0,message:"请填写采集时间格式",trigger:"blur"}]:[]}},created:function(){},methods:{chengeStartPosition:function(e){var t=this;"SPECIFIC-OFFSETS"==e?this.form.config.params.unshift({key:"connector.specific-offsets",value:"",canotEdit:!0}):this.form.config.params.forEach((function(e,a){"connector.specific-offsets"==e.key&&t.form.config.params.splice(a,1)}))},timeNameChange:function(e){},fieldNameChange:function(e,t){var a=this;this.fieldNameList.map((function(o,i){o==e&&a.fieldNameList.includes(e)&&a.newFieldsList.map((function(o,i){o.field_name==e&&(a.$message({message:"不能插入重复字段数据",type:"warning"}),a.newFieldsList[t].field_name="")}))}))},fieldChange:function(e){var t=this;this.nopartitionList.map((function(a){a.fieldName==e&&t.$message({message:"采集时间字段必须是非分区字段",type:"warning"})}))},partitionChange:function(e){var t=this;1==e&&(this.form.config.fields=[],this.partitionList.map((function(e){t.form.config.fields.push({field_name:e.fieldName,class_type:"STRING",isPartition:!0,parsePartitionPath:"",partitionValue:""})})))},getConfConnectListAllKafka:(Sa=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,e.next=4,Object(H.d)({procId:this.$route.query.id});case 4:t=e.sent,a=t.data.data,this.isLoading=!1,this.connectList=a,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.isLoading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return Sa.apply(this,arguments)}),getProcInfoListDbs:(Ta=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,e.next=4,Object(H.i)({dataType:1,procId:this.$route.query.id,sourceType:""});case 4:t=e.sent,a=t.data.data,this.isLoading=!1,this.dbList=a,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.isLoading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return Ta.apply(this,arguments)}),getTableInfoList:function(){var e=Object(A.a)(regeneratorRuntime.mark((function e(t){var a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("reset"!=t){e.next=3;break}return this.isProp=!1,e.abrupt("return");case 3:this.isLoading=!0,this.tableList=[],this.isProp?this.isProp=!1:this.form.config.targetTableName="",a={db_name:this.form.config.targetDbname,proc_id:this.$route.query.id,store_engine:this.form.config.store_engine},this.$API.post(this.$URL.getTableInfoList,a,(function(e){o.isLoading=!1,0==e.code?o.tableList=e.data:o.$message.error(e.msg)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),tableViewData:(wa=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tableView="",this.popLoding=!0,t={resourceId:this.form.config.resourceId},e.prev=3,e.next=6,Object(H.o)(t);case 6:a=e.sent,o=a.data.data,this.tableView=0==o.length?"暂无数据":o,this.popLoding=!1,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),this.popLoding=!1;case 15:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(){return wa.apply(this,arguments)}),changeTable:function(e,t){if(this.partitionList=[],this.form.config.fields.map((function(e){e.field_name="",e.partitionValue="",e.parsePartitionPath=""})),this.form.config.isDynamicPartition=this.form.config.fieldName=this.form.config.partition="",e){var a=this.tableList.find((function(t){return t.tableName==e}));this.form.config.targetTableId=a.id,a.id&&(this.taskGetPartFields(a.id,t),this.taskGetNoPartFields(a.id,0))}},handleSelect:function(e){},querySearch:function(e,t){var a=this.nopartitionList;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return 0===t.fieldName.toLowerCase().indexOf(e.toLowerCase())}},taskGetPartFields:(xa=Object(A.a)(regeneratorRuntime.mark((function e(t,a){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,e.next=4,Object(H.p)({id:t});case 4:o=e.sent,i=o.data.data,this.partitionList=i,"change"==a&&(this.partitionList.length>0?this.form.config.isDynamicPartition=!1:(this.form.config.isDynamicPartition="",this.form.config.fields=[])),this.isLoading=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.isLoading=!1;case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e,t){return xa.apply(this,arguments)}),taskGetNoPartFields:(ka=Object(A.a)(regeneratorRuntime.mark((function e(t,a){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,e.next=4,Object(H.p)({id:t,flag:a});case 4:o=e.sent,i=o.data.data,this.nopartitionList=i,this.isLoading=!1,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.isLoading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e,t){return ka.apply(this,arguments)}),resourceChange:function(e){if(e){var t=this.connectList.find((function(t){return t.id==e}));this.form.config.topicName=t.topic}else this.form.config.topicName=""},resetForm:function(e){this.$refs[e].resetFields()},deleteParams:function(e,t){1==t?this.form.config.params.remove(e.row):this.form.config.fields.remove(e.row)},addParams:function(e){this.lock||(1==e?this.form.config.params.push({key:"",value:""}):this.form.config.fields.push({field_name:"",isPartition:!0,parsePartitionPath:"",partitionValue:""}))}},mounted:function(){this.getConfConnectListAllKafka(),this.getProcInfoListDbs(),this.getTableInfoList()},watch:{realTimeCollectionConfig:{handler:function(e){var t=this;if(Object.keys(e||{}).length){var a=Object.assign({},e);this.form.config=JSON.parse(JSON.stringify(a)),this.isProp=!0,e.targetTableId&&(this.taskGetPartFields(e.targetTableId),this.taskGetNoPartFields(e.targetTableId,0)),this.$nextTick((function(){t.getTableInfoList("reset")})),e.writeLimit>0&&(this.isWriteLimit="2")}},deep:!0,immediate:!0},form:{handler:function(e,t){var a=this;if(this.$emit("haveEditRTC"),this.newFieldsList=e.config.fields||[],this.fieldNameList=[],this.newFieldsList.map((function(e,t){""!=e.field_name&&a.fieldNameList.push(e.field_name)})),e.config.collectionTimeName){this.$refs.ruleForm.validateField(["collectionTimeFormat"],(function(e){return!0}))}else if(e.config.collectionTimeFormat){this.$refs.ruleForm.validateField(["collectionTimeName"],(function(e){return!0}))}},deep:!0},activeNames:{handler:function(e){this.$refs.table&&(this.$refs.table.$ready="1"===e)},immediate:!0}}},Ea=(a("4749"),a("1bf5"),Object(c.a)(Ra,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"real_time_collection"},[t("p",{staticClass:"collect_p"},[e._v("\n    在这里配置数据的来源端和写入端，可以是默认的数据源，也可以是您创建的自有数据源查看支持的数据来源类型。\n  ")]),t("div",[t("el-form",{ref:"ruleForm",attrs:{size:"mini","label-width":"100px","label-position":"left",model:e.form,rules:e.rules,disabled:e.lock}},[t("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-collapse-item",{attrs:{title:"数据源信息配置",name:"1"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"数据来源",prop:"config.resourceId"}},[t("el-select",{attrs:{filterable:"",clearable:""},on:{change:e.resourceChange},model:{value:e.form.config.resourceId,callback:function(t){e.$set(e.form.config,"resourceId",t)},expression:"form.config.resourceId"}},e._l(e.connectList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"topic",prop:"config.topicName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.config.topicName,callback:function(t){e.$set(e.form.config,"topicName",t)},expression:"form.config.topicName"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"启动位点",prop:"config.startPosition"}},[t("el-select",{attrs:{filterable:"",clearable:""},on:{change:e.chengeStartPosition},model:{value:e.form.config.startPosition,callback:function(t){e.$set(e.form.config,"startPosition",t)},expression:"form.config.startPosition"}},[t("el-option",{attrs:{value:"LATEST",label:"LATEST"}}),t("el-option",{attrs:{value:"EARLIEST",label:"EARLIEST"}}),t("el-option",{attrs:{value:"GROUP-OFFSETS",label:"GROUP-OFFSETS"}}),t("el-option",{attrs:{value:"SPECIFIC-OFFSETS",label:"SPECIFIC-OFFSETS"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"数据预览"}},[t("el-popover",{directives:[{name:"loading",rawName:"v-loading",value:e.popLoding,expression:"popLoding"}],attrs:{trigger:"click",placement:"bottom",width:"400","popper-class":"reatime_view_data","visible-arrow":!1},on:{hide:function(){e.popLoding=!1}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",[t("vue-json-pretty",{attrs:{data:e.tableView}})],1),t("el-button",{attrs:{slot:"reference",disabled:""==e.form.config.resourceId||""==e.form.config.topicName},on:{click:e.tableViewData},slot:"reference"},[e._v("预览")])],1)],1)],1)],1),t("el-form-item",{attrs:{label:"配置参数"}},[t("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.form.config.params,size:"mini"}},[t("el-table-column",{attrs:{label:"参数名",width:"calc(50% - 30px)"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"config.params."+a.$index+".key",rules:{required:!0,message:"参数名不能为空",trigger:"blur"}}},[t("el-input",{attrs:{"show-word-limit":"",maxlength:"100",disabled:a.row.canotEdit},model:{value:a.row.key,callback:function(t){e.$set(a.row,"key","string"==typeof t?t.trim():t)},expression:"scope.row.key"}})],1)]}}])}),t("el-table-column",{attrs:{label:"参数值",width:"calc(50% - 30px)"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"config.params."+a.$index+".value",rules:{required:!0,message:"参数值不能为空",trigger:"blur"}}},[t("el-input",{attrs:{"show-word-limit":"",maxlength:"100"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value","string"==typeof t?t.trim():t)},expression:"scope.row.value"}})],1)]}}])}),t("el-table-column",{attrs:{label:"操作",align:"right",width:"60","header-align":"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{disabled:a.row.canotEdit,type:"text"},on:{click:function(t){return e.deleteParams(a,1)}}},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"add_button",attrs:{type:"text"},on:{click:function(t){return e.addParams(1)}}},[e._v("+ 添加")])],1)],1),t("el-collapse-item",{attrs:{title:"目标数据信息配置",name:"2"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"目标数据源"}},[t("el-select",{attrs:{filterable:""},on:{change:e.getTableInfoList},model:{value:e.form.config.store_engine,callback:function(t){e.$set(e.form.config,"store_engine",t)},expression:"form.config.store_engine"}},[t("el-option",{attrs:{value:1,label:"Hive"}}),t("el-option",{attrs:{value:2,label:"kudu"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"目标数据库",prop:"config.targetDbname"}},[t("el-select",{attrs:{filterable:""},on:{change:e.getTableInfoList},model:{value:e.form.config.targetDbname,callback:function(t){e.$set(e.form.config,"targetDbname",t)},expression:"form.config.targetDbname"}},e._l(e.dbList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"目标数仓表",prop:"config.targetTableName"}},[t("el-select",{attrs:{filterable:"",clearable:""},on:{change:function(t){return e.changeTable(t,"change")}},model:{value:e.form.config.targetTableName,callback:function(t){e.$set(e.form.config,"targetTableName",t)},expression:"form.config.targetTableName"}},e._l(e.tableList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.tableName,value:e.tableName}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"书写模式",prop:"config.writeWay"}},[t("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.form.config.writeWay,callback:function(t){e.$set(e.form.config,"writeWay",t)},expression:"form.config.writeWay"}},[t("el-option",{attrs:{value:"cover",label:"覆盖"}}),t("el-option",{attrs:{value:"append",label:"追加"}})],1)],1)],1),t("el-col",{attrs:{span:24}},[e.partitionList&&e.partitionList.length>0?t("el-form-item",{attrs:{label:"分区配置",prop:"config.isDynamicPartition"}},[t("el-switch",{staticClass:"config",attrs:{"active-text":"动态分区","inactive-text":"静态分区"},on:{change:function(t){return e.partitionChange(t)}},model:{value:e.form.config.isDynamicPartition,callback:function(t){e.$set(e.form.config,"isDynamicPartition",t)},expression:"form.config.isDynamicPartition"}})],1):e._e()],1)],1),e.partitionList&&e.partitionList.length>0?t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"写入分区"}},[t("el-table",{attrs:{data:e.form.config.fields,size:"mini"}},[t("el-table-column",{attrs:{label:"序号",type:"index",width:"50"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{"line-height":"40px","margin-top":"-10px"}},[e._v(e._s(a.$index+1)+" ")])]}}],null,!1,1654874311)}),t("el-table-column",{attrs:{label:"分区名称"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.config.isDynamicPartition,expression:"!form.config.isDynamicPartition"}],attrs:{"label-width":"0",prop:"config.fields."+a.$index+".field_name",rules:{required:!0,message:"分区名称不能为空",trigger:"change"}}},[t("el-select",{ref:"filedBox",attrs:{filterable:"",clearable:"",placeholder:"请选择分区字段"},on:{change:function(t){return e.fieldNameChange(t,a.$index)}},model:{value:a.row.field_name,callback:function(t){e.$set(a.row,"field_name",t)},expression:"scope.row.field_name"}},e._l(e.partitionList,(function(e){return t("el-option",{key:e.fieldName,attrs:{label:e.fieldName,value:e.fieldName}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.config.isDynamicPartition,expression:"form.config.isDynamicPartition"}],attrs:{"label-width":"0",prop:"config.fields."+a.$index+".field_name"}},[t("el-input",{attrs:{disabled:e.form.config.isDynamicPartition,placeholder:"请输入分区字段名称"},model:{value:a.row.field_name,callback:function(t){e.$set(a.row,"field_name","string"==typeof t?t.trim():t)},expression:"scope.row.field_name"}})],1)]}}],null,!1,3696438359)}),t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"config.fields."+a.$index+".parsePartitionPath"}},[t("el-input",{attrs:{maxlength:"100",placeholder:"如：data.a.c，可不填"},model:{value:a.row.parsePartitionPath,callback:function(t){e.$set(a.row,"parsePartitionPath","string"==typeof t?t.trim():t)},expression:"scope.row.parsePartitionPath"}})],1)]}}],null,!1,944382081)},[t("template",{slot:"header"},[e._v("\n                      解析路径\n                      "),t("el-tooltip",{attrs:{effect:"dark",content:"topic中有嵌套json无法解析时，\n                      请填写解析路径，平台会通过路径自动解析路径，保证数据的正常写入。",placement:"top"}},[t("i",{staticClass:"icon icon-ic_remind"})])],1)],2),t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0",prop:"config.fields."+a.$index+".partitionValue",rules:e.validateValue}},[t("el-input",{attrs:{maxlength:"50",placeholder:"格式：${yyyy-MM-dd hh:mm:ss} ",disabled:e.form.config.isDynamicPartition},model:{value:a.row.partitionValue,callback:function(t){e.$set(a.row,"partitionValue",t)},expression:"scope.row.partitionValue"}})],1)]}}],null,!1,1417484432)},[t("template",{slot:"header"},[e._v("\n                      分区值\n                      "),t("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                          1、当设置的分区名称在数据源有值时，默认解析数据源的值作为分区值"),t("br"),e._v("\n                          2、当设置的分区名称在数据源无值时，默认解析当前时间作为分区值\n                        ")]),t("i",{staticClass:"icon icon-ic_remind"})])],1)],2),t("el-table-column",{attrs:{label:"操作",align:"right",width:"60","header-align":"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{type:"text",disabled:e.form.config.isDynamicPartition},on:{click:function(t){return e.deleteParams(a,2)}}},[e._v("删除")])],1)]}}],null,!1,2276540908)})],1),t("el-button",{staticClass:"add_button",attrs:{type:"text",disabled:e.form.config.isDynamicPartition},on:{click:function(t){return e.addParams(2)}}},[e._v("+ 添加")])],1)],1)],1):e._e(),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"采集配置",prop:"config.collectionTimeName",rules:e.validateTypeTime}},[t("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",clearable:"",placeholder:"请选择字段"},on:{change:e.timeNameChange},model:{value:e.form.config.collectionTimeName,callback:function(t){e.$set(e.form.config,"collectionTimeName",t)},expression:"form.config.collectionTimeName"}},e._l(e.nopartitionList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.fieldName,value:e.fieldName}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"采集时间",prop:"config.collectionTimeFormat",rules:e.validateType}},[t("el-input",{attrs:{maxlength:"100",placeholder:"请填写采集时间格式，如：${yyyy-MM-dd hh:mm:ss}"},model:{value:e.form.config.collectionTimeFormat,callback:function(t){e.$set(e.form.config,"collectionTimeFormat",t)},expression:"form.config.collectionTimeFormat"}})],1)],1)],1)],1),t("el-collapse-item",{attrs:{title:"同步设置",name:"3"}},[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"写入流量控制"}},[t("el-radio-group",{model:{value:e.isWriteLimit,callback:function(t){e.isWriteLimit=t},expression:"isWriteLimit"}},[t("el-radio",{attrs:{label:"1"}},[e._v("不限速")]),t("el-radio",{attrs:{label:"2"}},[e._v("限速")])],1)],1)],1),t("el-col",{attrs:{span:9}},["2"==e.isWriteLimit?t("el-form-item",{attrs:{"label-width":"0"}},[t("el-input-number",{attrs:{"controls-position":"right",precision:0,min:1,max:99999},model:{value:e.form.config.writeLimit,callback:function(t){e.$set(e.form.config,"writeLimit",t)},expression:"form.config.writeLimit"}}),t("span",{staticStyle:{"padding-left":"10px"}},[e._v("条/s")])],1):e._e()],1)],1)],1)],1)],1)],1)])}),[],!1,null,"54b30770",null).exports);function Aa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function qa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Aa(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Aa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var za,Va,Ua,Ba={components:{attribute:gt,paramConfig:yt,history:kt,realTiemHeader:wt,panel:Ia,codeEditor:q.a,entryConfig:Ca,outputConfig:Oa,Review:Pa,realTimeCollection:Ea},props:["resource","nodeData"],provide:function(){return{flink:this}},computed:{entryList:function(){return this.nodeList.filter((function(e){return 1==e.nodeType}))},outputList:function(){return this.nodeList.filter((function(e){var t=e.nodeType;return 6==t||9==t||8==t}))}},data:function(){return{isRefresh:!1,tableId:null,dialogVisible:!1,checkResultJson:{},isLoading:!1,node:{},ruleForm:{name:"flinksql",resourceId:null,mainFunction:"",mainArgs:""},rules:{resourceId:[{required:!0,message:"请选择资源",trigger:"change"}],mainFunction:[{pattern:'[^ "]+',required:!0,message:"请输入mainFunction",trigger:"blur"}]},drawerAttribute:!1,drawerParamConfig:!0,entryVisible:!1,outputVisible:!1,isDimensionTable:!1,isVisibility:"hidden",drawerHistory:!1,eidtCount:0,eidtCountRTC:0,taskType:"",checkStatus:0,panelData:{},mysql:"",nodeList:[],resourceList:[],fieldTypes:[],taskName:"",lockModal:!1,realTimeCollectionConfig:{}}},methods:{toRealTimeTask:function(){sessionStorage.setItem("flinkToRealTime",this.taskName),this.$router.push("taskOperations?name=flinkToRealTime&type=online&from=taskOnline")},realtimeresource:function(){var e=this,t={menuId:this.node.id,limit:500,page:1,procId:this.$route.query.id,typeResource:1};this.$API.post(this.$URL.realtimeresource,t,(function(t){0==t.code?e.resourceList=t.page.list:e.$message(t.msg)}))},openDrawer:function(e,t){this.isDimensionTable=!!t,this.$set(this.$data,e,!0),"drawerParamConfig"==e&&"hidden"==this.isVisibility&&(this.isVisibility="visible")},saveTask:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"save";if(1===this.taskType){var a=this.$refs.paramConfig.$refs.fuleForm;delete a.checkPointInterval,delete a.checkPointTime,delete a.checkPointTimeout,this.$refs.ruleForm.validate((function(o){if(!o)return!1;Promise.all([a].map(e.getFormPromise)).then((function(a){a.every((function(e){return!!e}))?e.realTimeTaskSave(t):(e.$message.warning("请完善参数配置必填项"),e.openDrawer("drawerParamConfig"))}))}))}else if(4===this.taskType){var o=this.$refs.paramConfig.$refs.fuleForm;this.$refs.realTimeCollection.$refs.ruleForm.validate((function(a){if(!a)return!1;Promise.all([o].map(e.getFormPromise)).then((function(a){a.every((function(e){return!!e}))?e.realTimeTaskSave(t):(e.$message.warning("请完善参数配置必填项"),e.openDrawer("drawerParamConfig"))}))}))}else this.realTimeTaskSave(t)},getFormPromise:function(e){return new Promise((function(t){e.validate((function(e){t(e)}))}))},realTimeTaskSave:(Ua=Object(A.a)(regeneratorRuntime.mark((function e(t){var a,i,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoading=!0,e.prev=2,3!==this.taskType){e.next=10;break}return e.next=7,this.$refs.panel.submitData().then((function(e){i=e})).catch((function(e){r.isLoading=!1}));case 7:a=qa(qa(qa({},i),this.$refs.paramConfig.ruleForm),{},{taskType:this.taskType,menuId:this.node.id,lockState:"saveAndLock"==t?0:null}),e.next=11;break;case 10:1===this.taskType?a=qa(qa(qa({},this.ruleForm),this.$refs.paramConfig.ruleForm),{},{taskType:this.taskType,menuId:this.node.id,lockState:"saveAndLock"==t?0:null}):4===this.taskType?("1"==this.$refs.realTimeCollection.isWriteLimit&&(this.$refs.realTimeCollection.form.config.writeLimit=0),a=qa(qa({},this.$refs.paramConfig.ruleForm),{},{menuId:this.node.id,taskType:this.taskType,config:qa({},this.$refs.realTimeCollection.form.config),lockState:"saveAndLock"==t?0:null})):a=qa(qa({},this.$refs.paramConfig.ruleForm),{},{menuId:this.node.id,taskType:this.taskType,flinkSQL:this.mysql,lockState:"saveAndLock"==t?0:null});case 11:a.restartStrategyEnable=a.restartStrategyEnable?1:0,a.restartStrategyEnable?1==a.restartStrategyType?delete a.failureInterval:3!=a.restartStrategyType&&4!=a.restartStrategyType||(delete a.retryCount,delete a.retryInterval,delete a.failureInterval):(delete a.retryCount,delete a.restartStrategyType,delete a.retryInterval,delete a.failureInterval),this.$API.post(this.$URL.realTimeTaskSave,a,(function(e){r.isLoading=!1,0==e.code?(r.$message.success("保存成功"),r.node.lockState="saveAndLock"==t?0:1,r.node.lastUpdateTime=e.data.updateTime,o.a.$emit("realTimeMenuTreeDataUpData"),r.eidtCount=0,r.eidtCountRTC=0,r.realTimeTaskGetInfo()):r.$message.error(e.msg)})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),this.$message.error(e.t0);case 20:case"end":return e.stop()}}),e,this,[[2,17]])}))),function(e){return Ua.apply(this,arguments)}),deleteTask:function(){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.isLoading=!0,e.$API.delete(e.$URL.realTimeDelete+"/"+e.node.id,{},(function(t){e.isLoading=!1,0==t.code?(o.a.$emit("realTimeMenuTreeDataUpData"),o.a.$emit("realTimeDeleteTask",{data:e.node})):e.$message.error(t.msg)}))})).catch((function(){}))},lock:function(){var e=this;this.isLoading=!0;var t={menuId:this.node.id,lockState:1==this.node.lockState?0:1};this.$API.post(this.$URL.realTimeTaskLock,t,(function(a){e.isLoading=!1,0==a.code?(e.node.lockState=t.lockState,o.a.$emit("realTimeMenuTreeDataUpData"),e.isRefresh=!0,e.realTimeTaskGetInfo()):e.$message.error(a.msg)}))},runTask:(Va=Object(A.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3!==this.taskType){e.next=11;break}return e.prev=1,e.next=4,this.$refs.panel.submitData();case 4:e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),this.$message.error(e.t0),e.abrupt("return");case 11:if(!(1==this.taskType&&this.eidtCount>2)){e.next=14;break}return this.$alert("您编辑完后尚未保存，请先保存再运行!","提示",{}),e.abrupt("return");case 14:if(!(4==this.taskType&&this.eidtCountRTC>0)){e.next=17;break}return this.$alert("您编辑完后尚未保存，请先保存再运行!","提示",{}),e.abrupt("return");case 17:this.isLoading=!0,this.$API.get(this.$URL.realTimeTaskRun+"/"+this.node.id,{},(function(e){t.isLoading=!1,0==e.code?t.realTimeTaskGetInfo():t.$message.error(e.msg)}));case 19:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return Va.apply(this,arguments)}),cancelTask:function(){var e=this;this.isLoading=!0,this.$API.get(this.$URL.realTimeTaskPause+"/"+this.node.id,{},(function(t){e.isLoading=!1,0==t.code?e.realTimeTaskGetInfo():e.$message.error(t.msg)}))},stopTask:function(){var e=this;this.isLoading=!0,this.$API.get(this.$URL.realTimeTaskCancel+"/"+this.node.id,{},(function(t){e.isLoading=!1,0==t.code?e.realTimeTaskGetInfo():e.$message.error(t.msg)}))},nativeDebug:function(){this.dialogVisible=!0},diaClose:function(){this.dialogVisible=!1},test:function(){var e=this;this.$API.get(this.$URL.realTimeNativeDebug+this.node.id,{},(function(t){0==t.code?(e.$message({message:"任务提交成功",type:"success",duration:1500,onClose:function(){}}),e.dialogVisible=!1):e.$message.error(t.msg)}))},upload:function(e,t){var a=this,o=new FormData;o.append("file",e.raw),o.append("tableId",this.tableId),o.append("menuId",this.node.id);var i=o;this.$API.file(this.$URL.realTimeUpload,i,(function(e){0==e.code?a.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){}}):a.$message.error(e.msg)}))},beforeUploadFile:function(e){this.tableId=e.config.tableId},dataCheck:function(){var e=this;this.isLoading=!0,this.$API.get(this.$URL.realTimeDataCheck+this.node.id,{},(function(t){e.isLoading=!1,0==t.code?e.realTimeTaskGetInfo():e.$message.error(t.msg)}))},refresh:function(){this.isRefresh=!0,this.realTimeTaskGetInfo()},realTimeTaskGetInfo:function(e){var t=this;this.isLoading=!0,this.$API.get(this.$URL.realTimeTaskGetInfo+"/"+this.node.id,{},(function(a){if(t.isLoading=!1,t.node.runState=a.data.runState,t.node.lockState=a.data.lockState,t.taskName=a.data.taskName,0==a.code){t.checkStatus=a.data.check,t.checkResultJson=a.data.checkResultJson,t.taskType=a.data.taskType,t.eidtCount=0;var o=a.data,i=o.parallelism,r=o.jobManagerMemory,n=o.taskManagerMemory,s=o.taskManagerCount,l=o.slot,c=o.savepointPath,d=o.checkpointPath,u=o.checkPointInterval,f=o.checkPointTime,p=o.checkPointTimeout,m=o.restartStrategyEnable,h=o.retryCount,b=o.restartStrategyType,g=o.retryInterval,v=o.failureInterval,y=o.flinkVersion;if(t.$refs.paramConfig.ruleForm.parallelism=i,t.$refs.paramConfig.ruleForm.jobManagerMemory=r,t.$refs.paramConfig.ruleForm.taskManagerMemory=n,t.$refs.paramConfig.ruleForm.taskManagerCount=s,t.$refs.paramConfig.ruleForm.slot=l,t.$refs.paramConfig.ruleForm.savepointPath=c,t.$refs.paramConfig.ruleForm.checkpointPath=d,t.$refs.paramConfig.ruleForm.flinkVersion=y,t.$refs.paramConfig.ruleForm.checkPointInterval=u||3e4,t.$refs.paramConfig.ruleForm.checkPointTime=f||3e4,t.$refs.paramConfig.ruleForm.checkPointTimeout=p||6e4,t.$refs.paramConfig.ruleForm.restartStrategyEnable=1==m,t.$refs.paramConfig.ruleForm.retryCount=h||3,t.$refs.paramConfig.ruleForm.restartStrategyType=b||"",t.$refs.paramConfig.ruleForm.retryInterval=g||"60",t.$refs.paramConfig.ruleForm.failureInterval=v||"60",1===a.data.taskType)a.data&&(t.ruleForm=a.data),t.ruleForm.name=t.node.name;else if(a.data&&3===a.data.taskType)t.panelData=a.data,t.nodeList=a.data.nodeList,t.lockModal=0==t.node.lockState,t.$nextTick((function(){t.$refs.panel.changePanelData(a.data)}));else if(2===a.data.taskType){t.lockModal=0==t.node.lockState,t.nodeList=a.data.nodeList;var _=t.$store.state.old.admin_info.userName,k=(new Date).Format("yyyy-MM-dd hh:mm:ss");if(a.data.flinkSQL)t.$nextTick((function(){e||(t.mysql=a.data.flinkSQL)}));else{if(t.isRefresh)return;var x="SQL\n******************************\nAuthor:".concat(_,"\nCreate Time:").concat(k,"\ncomment:编写flinkSQL代码\n******************************");t.$nextTick((function(){t.$refs.codeEditor.getCodeAndComment(x),t.$refs.codeEditor.setCodeValue()}))}}else 4===a.data.taskType&&(t.realTimeCollectionConfig=a.data.config,t.$nextTick((function(){t.eidtCountRTC=0})))}else t.$message.error(a.msg)}))},haveEdit:function(){this.eidtCount++},haveEditRTC:function(){this.eidtCountRTC++},changeTaskType:function(){var e=this;this.$confirm("转化成SQL模式后，再也无法转化回DAG模式,你还要继续吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){e.isLoading=!0;var t=qa(qa({},e.$refs.panel.submitData()),{},{taskType:2,menuId:e.node.id});e.$API.post(e.$URL.realTimeTaskSave,t,(function(t){e.isLoading=!1,0==t.code?(e.$message.success("转换成功"),e.node.lastUpdateTime=t.data.updateTime,o.a.$emit("realTimeMenuTreeDataUpData"),e.eidtCount=0,e.eidtCountRTC=0,e.realTimeTaskGetInfo()):e.$message.error(t.msg)}))}))},getFieldTypes:(za=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.f)();case 2:t=e.sent,a=t.data.data,this.fieldTypes=a;case 5:case"end":return e.stop()}}),e,this)}))),function(){return za.apply(this,arguments)}),review:function(){this.$refs.review.openModal(this.nodeData.id)}},watch:{nodeData:{handler:function(e){this.node=JSON.parse(JSON.stringify(e)),this.realtimeresource(),this.realTimeTaskGetInfo()},deep:!0,immediate:!0},ruleForm:{handler:function(e){this.eidtCount++},deep:!0}},mounted:function(){this.getFieldTypes()}},Ja=(a("2948"),a("7c48"),Object(c.a)(Ba,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"realtime_task_flink"},[t("real-tiem-header",{attrs:{node:e.node,taskType:e.taskType},on:{saveTask:e.saveTask,deleteTask:e.deleteTask,lock:e.lock,runTask:e.runTask,cancelTask:e.cancelTask,stopTask:e.stopTask,refresh:e.refresh,nativeDebug:e.nativeDebug,dataCheck:e.dataCheck,saveAndLock:function(t){return e.saveTask("saveAndLock")}}},[t("div",{staticClass:"run_state_out",attrs:{slot:"in"},slot:"in"},[3===e.taskType?t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.review}},[e._v("sql预览")]):e._e(),3===e.taskType?t("el-button",{attrs:{type:"text"},on:{click:e.changeTaskType}},[e._v("切换为SQL模式")]):e._e(),2==e.taskType||3==e.taskType?t("span",[2==e.checkStatus?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},e._l(e.checkResultJson,(function(a,o,i){return t("li",{key:i},[e._v("\n              "+e._s(o+" : "+a)+"\n            ")])})),0),t("span",{staticStyle:{"font-size":"12px","margin-right":"10px"}},[e._v("数据检查状态：检查失败")])]):t("span",{staticStyle:{"font-size":"12px","margin-right":"10px"}},[e._v("数据检查状态："+e._s(0==e.checkStatus?"未检查":1==e.checkStatus?"检查成功":2==e.checkStatus?"检查失败":"未检查"))])],1):e._e(),t("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text"},on:{click:e.toRealTimeTask}},[e._v("任务运维")]),t("span",{staticStyle:{"font-size":"12px"}},[e._v("运行状态："+e._s(0==e.node.runState?"失败":1==e.node.runState?"成功":2==e.node.runState?"运行中":3==e.node.runState?"未运行":"停止"))])],1)]),t("div",{staticClass:"lay_out",class:{layOutCode:2===e.taskType}},[e.lockModal?t("div",{staticClass:"lock-modal"}):e._e(),1===e.taskType?t("div",{staticClass:"form_out"},[t("el-form",{ref:"ruleForm",staticStyle:{width:"500px"},attrs:{disabled:0==e.node.lockState,model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"任务名称:"}},[t("el-input",{attrs:{maxlength:"200",disabled:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"资源:",prop:"resourceId"}},[t("el-select",{attrs:{placeholder:"请选择资源",disabled:e.node.createPer!=e.$store.state.old.admin_info.userId},model:{value:e.ruleForm.resourceId,callback:function(t){e.$set(e.ruleForm,"resourceId",t)},expression:"ruleForm.resourceId"}},e._l(e.resourceList,(function(e){return t("el-option",{key:e.resourceId,attrs:{label:e.resourceName,value:e.resourceId}})})),1)],1),t("el-form-item",{attrs:{label:"main函数:",prop:"mainFunction"}},[t("el-input",{attrs:{maxlength:"200"},model:{value:e.ruleForm.mainFunction,callback:function(t){e.$set(e.ruleForm,"mainFunction",t)},expression:"ruleForm.mainFunction"}})],1),t("el-form-item",{attrs:{label:"main args:"}},[t("el-input",{attrs:{maxlength:"200"},model:{value:e.ruleForm.mainArgs,callback:function(t){e.$set(e.ruleForm,"mainArgs",t)},expression:"ruleForm.mainArgs"}})],1)],1)],1):2===e.taskType?t("div",{staticClass:"form_out"},[t("div",{staticClass:"code-wrapper"},[t("codeEditor",{ref:"codeEditor",attrs:{hasTooltip:!0,height:"500px",isLock:0==e.node.lockState},model:{value:e.mysql,callback:function(t){e.mysql=t},expression:"mysql"}})],1)]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:3===e.taskType,expression:"taskType === 3"}],staticClass:"form_out"},[t("panel",{ref:"panel",attrs:{isLock:0==e.node.lockState},on:{refresh:e.realTimeTaskGetInfo}})],1),4===e.taskType?t("div",{staticStyle:{flex:"1",overflow:"auto"}},[t("real-time-collection",{ref:"realTimeCollection",attrs:{isLock:e.node.lockState,realTimeCollectionConfig:e.realTimeCollectionConfig},on:{haveEditRTC:e.haveEditRTC}})],1):e._e(),t("div",{staticClass:"right"},[t("ul",[t("li",{on:{click:function(t){return e.openDrawer("drawerAttribute")}}},[e._v("基本属性")]),2===e.taskType?t("li",{on:{click:function(t){return e.openDrawer("entryVisible")}}},[e._v("\n            输入\n          ")]):e._e(),2===e.taskType?t("li",{on:{click:function(t){return e.openDrawer("outputVisible","isDimensionTable")}}},[e._v("\n            维表\n          ")]):e._e(),2===e.taskType?t("li",{on:{click:function(t){return e.openDrawer("outputVisible")}}},[e._v("\n            输出\n          ")]):e._e(),t("li",{on:{click:function(t){return e.openDrawer("drawerParamConfig")}}},[e._v("参数配置")]),t("li",{on:{click:function(t){return e.openDrawer("drawerHistory")}}},[e._v("操作历史")])])]),t("el-drawer",{attrs:{title:"基本属性",visible:e.drawerAttribute,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawerAttribute=t}}},[t("attribute",{attrs:{nodeItme:e.node}})],1),t("el-drawer",{attrs:{title:"输入",visible:e.entryVisible,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.entryVisible=t}}},[t("entryConfig",{attrs:{nodeList:e.nodeList,lockModal:e.lockModal}})],1),t("el-drawer",{attrs:{title:e.isDimensionTable?"维表":"输出",visible:e.outputVisible,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.outputVisible=t}}},[t("outputConfig",{attrs:{isDimensionTable:e.isDimensionTable,lockModal:e.lockModal,nodeId:e.node.id,nodeList:e.nodeList}})],1),t("el-drawer",{style:{visibility:e.isVisibility},attrs:{title:"参数配置",visible:e.drawerParamConfig,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawerParamConfig=t}}},[t("param-config",{ref:"paramConfig",attrs:{taskType:e.taskType,node:e.node},on:{haveEdit:e.haveEdit}})],1),t("el-drawer",{attrs:{title:"操作历史",visible:e.drawerHistory,modal:!1,direction:"rtl"},on:{"update:visible":function(t){e.drawerHistory=t}}},[e.drawerHistory?t("history",{attrs:{nodeItme:e.node}}):e._e()],1)],1),t("Review",{ref:"review"}),t("el-dialog",{attrs:{title:"本地调试",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.diaClose}},[t("div",{staticClass:"content"},[t("div",{staticClass:"sub-title"},[e._v("已选择的输入表")]),t("div",{staticClass:"enter"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.entryList}},[t("el-table-column",{attrs:{label:"表名",prop:"tableName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"创建人",prop:"createPerName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"创建时间",width:"140",prop:"createTime"}}),t("el-table-column",{attrs:{label:"操作","header-align":"right",align:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-upload",{attrs:{action:"null","show-file-list":!1,"auto-upload":!1,"before-upload":e.beforeUploadFile(a.row),"on-change":e.upload}},[t("el-button",{staticClass:"delete",attrs:{type:"text"}},[e._v("上传")])],1)]}}])})],1)],1),t("div",{staticClass:"sub-title"},[e._v("已选择的输出表")]),t("div",{staticClass:"output"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.outputList}},[t("el-table-column",{attrs:{label:"表名",prop:"tableName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"类型",prop:"tableName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"创建人",prop:"createPerName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"创建时间","header-align":"right",align:"right",width:"140",prop:"createTime"}})],1)],1)]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.diaClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.test}},[e._v("启动调试")])],1)])],1)}),[],!1,null,"1e47e6ae",null).exports);function Ha(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return Wa(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Wa(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,r=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function Wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var Ka,Ga={components:{flink:Ja},data:function(){return{editableTabsValue:"",editableTabs:[],componentIs:{},resource:[]}},methods:{removeTab:function(e){var t=this;this.editableTabsValue==e&&this.editableTabs.forEach((function(a,o){if("node"+a.id==e){var i=t.editableTabs[o+1]||t.editableTabs[o-1];t.editableTabsValue=i&&"node"+i.id}})),this.editableTabs=this.editableTabs.filter((function(t){return"node"+t.id!==e}))},tabClick:function(e){var t=e.name;o.a.$emit("changeTabOnline",{id:Number(t.replace(/node/,""))})},addTab:function(e){this.editableTabs.push(e),this.componentIs["node"+e.id]=Ja,this.editableTabsValue="node"+e.id},wifiTab:function(e){this.editableTabsValue="node"+e.id},realtimeresource:function(){var e=this,t={limit:500,page:1,procId:this.$route.query.id,typeResource:1};this.$API.post(this.$URL.realtimeresource,t,(function(t){0==t.code?e.resource=t.page.list:e.$message(t.msg)}))},creatRealTimeTask:function(){o.a.$emit("realTimeMenuTreeDataAddOrReNameMenuOrTask",{data:null,type:"addtask"})},clearTabs:function(){this.editableTabs=[]}},mounted:function(){var e=this;o.a.$off("refreshTabs"),o.a.$on("refreshTabs",(function(){e.clearTabs()})),o.a.$off("realTimeTaskOpen"),o.a.$on("realTimeTaskOpen",(function(t){var a,o=Ha(e.editableTabs);try{for(o.s();!(a=o.n()).done;){if(a.value.id==t.data.id)return void e.wifiTab(t.data)}}catch(e){o.e(e)}finally{o.f()}e.addTab(t.data)})),o.a.$off("realTimeDeleteTask"),o.a.$on("realTimeDeleteTask",(function(t){var a,o=Ha(e.editableTabs);try{for(o.s();!(a=o.n()).done;){if(a.value.id==t.data.id)return void e.removeTab("node"+t.data.id)}}catch(e){o.e(e)}finally{o.f()}})),o.a.$off("realTimeTaskReName"),o.a.$on("realTimeTaskReName",(function(t){var a,o=Ha(e.editableTabs);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(i.id==t.data.id)return void(i.name=t.data.name)}}catch(e){o.e(e)}finally{o.f()}})),this.realtimeresource()}},Ya=(a("9e09"),a("daa57"),Object(c.a)(Ga,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"data_process_task_realtime_main_index"},[t("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":e.removeTab,"tab-click":e.tabClick},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},[e._l(e.editableTabs,(function(a){return t("el-tab-pane",{key:a.id,attrs:{name:"node"+a.id,label:a.name}},[t(e.componentIs["node"+a.id],{tag:"component",attrs:{resource:e.resource,nodeData:a}})],1)})),0==e.editableTabs.length?t("div",{staticClass:"create_task",on:{click:e.creatRealTimeTask}},[t("svg-icon",{staticStyle:{"font-size":"56px",margin:"30px auto 28px auto"},attrs:{"icon-class":"addOnLine","class-name":"disabled"}}),t("h2",{staticStyle:{"font-size":"16px"}},[e._v("新建实时任务")])],1):e._e()],2)],1)}),[],!1,null,"039bb66f",null).exports),Xa={data:function(){return{isLoading:!1,udfList:[]}},methods:{procInfoListUdfFuncs:(Ka=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,e.next=4,this.http.get(this.$URL.procInfoListUdfFuncs);case 4:t=e.sent,a=t.data.data,this.isLoading=!1,this.udfList=a,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.isLoading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return Ka.apply(this,arguments)}),copyHandl:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),this.$message.success("复制成功"),t.remove()}},mounted:function(){this.procInfoListUdfFuncs()}},Qa=(a("9447"),Object(c.a)(Xa,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"udf_left_bar"},[t("ul",{staticClass:"udf_list"},e._l(e.udfList,(function(a){return t("li",{key:a.jarMethodName+a.createTime},[t("span",{attrs:{title:a.jarMethodName}},[e._v(e._s(a.jarMethodName))]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.desc||"暂无说明",placement:"top"}},[t("el-button",{staticClass:"fr",attrs:{size:"mini",type:"text"}},[e._v(" 说明 ")])],1),t("el-button",{staticClass:"fr",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.copyHandl(a.jarMethodName)}}},[e._v(" 复制名称 ")])],1)})),0)])}),[],!1,null,null,null).exports);function Za(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function eo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Za(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var to,ao={data:function(){return{tableHeight:window.innerHeight-270,isLoading:!1,form:{typeResource:[],resourceName:""},tableData:[]}},methods:{realtimeresourceListAll:(to=Object(A.a)(regeneratorRuntime.mark((function e(){var t,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=eo(eo({},this.form),{},{procId:this.$route.query.id}),e.prev=1,this.isLoading=!0,e.next=5,this.http.post(this.$URL.realtimeresourceListAll,t);case 5:a=e.sent,o=a.data.data,this.tableData=o,this.isLoading=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.isLoading=!1;case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return to.apply(this,arguments)}),copyHandl:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),this.$message.success("复制成功"),t.remove()}},mounted:function(){this.realtimeresourceListAll()}},oo=(a("985a"),Object(c.a)(ao,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"resource_file_index"},[t("el-form",{attrs:{size:"mini","label-width":"60px","label-position":"left"}},[t("el-form-item",{attrs:{label:"资源类型"}},[t("el-checkbox-group",{on:{change:e.realtimeresourceListAll},model:{value:e.form.typeResource,callback:function(t){e.$set(e.form,"typeResource",t)},expression:"form.typeResource"}},[t("el-checkbox",{attrs:{label:3,name:"type"}},[e._v("公共")]),t("el-checkbox",{attrs:{label:1,name:"type"}},[e._v("实时")]),t("el-checkbox",{attrs:{label:2,name:"type"}},[e._v("离线")])],1)],1),t("el-form-item",{attrs:{label:"资源名称"}},[t("el-input",{attrs:{placeholder:"输入资源名称进行搜索"},model:{value:e.form.resourceName,callback:function(t){e.$set(e.form,"resourceName","string"==typeof t?t.trim():t)},expression:"form.resourceName"}},[t("i",{staticClass:"el-input__icon icon icon-sousuochaxunchakan",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.realtimeresourceListAll},slot:"suffix"})])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{"max-height":e.tableHeight,data:e.tableData}},[t("el-table-column",{attrs:{label:"资源类型",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n            "+e._s(1==t.row.typeResource?"实时":2==t.row.typeResource?"离线":"公共")+"\r\n        ")]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",width:"48",label:"资源ID",prop:"resourceId"}}),t("el-table-column",{attrs:{label:"资源名称","show-overflow-tooltip":"",prop:"resourceName"}}),t("el-table-column",{attrs:{width:"80",prop:"resourceName"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("span",[e._v("操作")]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("复制地址即获取资源文件对应的地址参数，形如：${bdp.hdfs.file.资源ID}，"),t("br"),e._v("可在shell任务中通过 wget ${bdp.hdfs.file.资源ID} 命令下载文件。")]),t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"vertical-align":"middle"}})])]}},{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.copyHandl(a.row.useAddress)}}},[e._v("复制地址")])]}}])})],1)],1)}),[],!1,null,null,null).exports),io={data:function(){return{editableTabsValue:"offLine",editableTabs:[],allUsers:"",refresh:!0,isShowUdf:!1,isShowResource:!1}},components:{dragZone:xe.dragZone,dragHandle:xe.dragHandle,dragContent:xe.dragContent,offLineLeftBar:w,mainBar:ht,realTimeMainBar:Ya,realTimeLeftBar:R,udfLeftBar:Qa,resourceFile:oo},methods:{listProcRelUsers:function(){var e=this;return new Promise((function(t,a){e.$API.get(e.$URL.listProcRelUsers+"/"+e.$route.query.id,{},(function(a){0==a.code?(e.allUsers=a.data,t(a.data)):e.$message.error(a.msg)}))}))},showDraw:function(e){this.isShowUdf=this.isShowResource=!1,this[e]=!this[e]}},mounted:function(){this.listProcRelUsers(),this.editableTabsValue=this.$route.params.realTimeWorkId?"onLine":"offLine"},watch:{}},ro=(a("861a"),a("6ec9"),Object(c.a)(io,(function(){var e=this,t=e._self._c;return e.refresh?t("div",{staticClass:"data_process_task_index"},[t("el-tabs",{staticClass:"out_tabs",staticStyle:{height:"100%"},attrs:{"tab-position":"left"},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},[t("el-tab-pane",{staticStyle:{height:"100%"},attrs:{name:"offLine",label:"离线任务"}},[t("drag-zone",{staticClass:"zt-drag-container"},[t("drag-content",{staticClass:"zt-scrollbar"},[t("off-line-leftBar",{attrs:{allUsers:e.allUsers}})],1),t("drag-handle"),t("drag-content",[t("main-bar")],1)],1)],1),t("el-tab-pane",{staticStyle:{height:"100%"},attrs:{name:"onLine",label:"实时任务"}},[t("drag-zone",{staticClass:"zt-drag-container"},[t("drag-content",[t("real-time-left-bar",{attrs:{allUsers:e.allUsers}})],1),t("drag-handle"),t("drag-content",[t("real-time-main-bar")],1)],1)],1)],1),t("div",{staticClass:"left_button",class:{active:e.isShowUdf},on:{click:function(t){return e.showDraw("isShowUdf")}}},[e._v("u d f函数")]),t("div",{staticClass:"left_button",class:{active:e.isShowResource},staticStyle:{top:"375px"},on:{click:function(t){return e.showDraw("isShowResource")}}},[e._v("资源文件")]),t("el-drawer",{staticClass:"left_draw",attrs:{title:"udf函数",visible:e.isShowUdf,direction:"ltr","show-close":!0,wrapperClosable:!1,modal:!1,size:"316px","destroy-on-close":!0},on:{"update:visible":function(t){e.isShowUdf=t}}},[t("udf-left-bar")],1),t("el-drawer",{staticClass:"left_draw",attrs:{title:"资源文件",visible:e.isShowResource,direction:"ltr","show-close":!0,wrapperClosable:!1,modal:!1,size:"316px","destroy-on-close":!0},on:{"update:visible":function(t){e.isShowResource=t}}},[t("resource-file")],1)],1):e._e()}),[],!1,null,"b52fdb76",null));t.default=ro.exports},"2b3d":function(e,t,a){"use strict";a("50e0")},"2b5a":function(e,t,a){var o=a("561b");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("78c23a72",o,!0,{sourceMap:!1,shadowMode:!1})},"2bca":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_job_srteam{overflow:auto}.data_process_task_job_srteam .cannotEdit{color:rgba(4,12,44,.25)}.data_process_task_job_srteam .cannotEdit:hover{color:rgba(4,12,44,.25)!important}.data_process_task_job_srteam .el-tree .el-tree-node__children{overflow:visible}.data_process_task_job_srteam .el-tabs--card>.el-tabs__header .el-tabs__nav{border-top:none}",""])},"2c35":function(e,t,a){var o=a("e5cf");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("6d7bdb58",o,!0,{sourceMap:!1,shadowMode:!1})},"2ca6":function(e,t,a){"use strict";a("29c2")},"2cc4":function(e,t,a){var o=a("54de");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("261764ff",o,!0,{sourceMap:!1,shadowMode:!1})},"2e39":function(e,t,a){var o=a("7f92");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("1cfee286",o,!0,{sourceMap:!1,shadowMode:!1})},"2e99":function(e,t,a){var o=a("c50a");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("6ba35b14",o,!0,{sourceMap:!1,shadowMode:!1})},"2f5e":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".el-node-form-tag{position:absolute;top:50%;margin-left:-15px;height:40px;width:15px;background-color:#fbfbfb;border:1px solid #dce3e8;border-right:none;z-index:0}",""])},"302c":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.udf_left_bar{height:100%;background:#fff;border-right:1px solid #e9e9e9;padding:10px}.udf_left_bar .top{border-bottom:1px solid #e9e9e9;padding-bottom:15px}.udf_left_bar .udf_list{font-size:12px;padding-top:10px;border-top:1px solid #e5e6e9}.udf_left_bar .udf_list li{margin-bottom:10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.udf_left_bar .udf_list li>span{-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;text-overflow:ellipsis}",""])},"307f":function(e,t,a){"use strict";a("75d8")},3332:function(e,t,a){var o=a("bfe5");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("583e18f6",o,!0,{sourceMap:!1,shadowMode:!1})},3467:function(e,t,a){"use strict";a.r(t);a("96cf");var o,i=a("1da1"),r=a("b8fa"),n={name:"transferDetail",data:function(){return{transferCodeList:[],detailObj:{}}},props:{transferId:{type:String}},methods:{close:function(){this.$router.push("/myData/transferAuth")},getDetail:(o=Object(i.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.e)(this.$route.query.transferId);case 2:t=e.sent,a=t.data.data,this.detailObj=a;case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},components:{},computed:{},created:function(){this.getDetail()},mounted:function(){}},s=(a("2b3d"),a("2877")),l=Object(s.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"transferDetail"},[t("div",{staticClass:"zt-head",staticStyle:{"text-align":"center"}},[t("div",{staticClass:"zt-back",staticStyle:{float:"left"}},[t("i",{staticClass:"el-icon-back",staticStyle:{"padding-right":"10px",cursor:"pointer"},on:{click:e.close}}),e._v("返回列表\n    ")]),t("div",{staticClass:"title"},[e._v("转让详情")])]),t("div",{staticClass:"zt-bg-content zt-scrollbar",staticStyle:{overflow:"auto",height:"calc(100vh - 100px)"}},[t("div",{staticClass:"item-box"},[t("div",{staticClass:"zt-flag-title"},[e._v("基本信息")]),t("div",{staticClass:"content"},[t("el-row",[t("el-col",{staticClass:"item",attrs:{span:8}},[t("span",[e._v("转让ID：")]),e._v(e._s(e.detailObj.transferId)),t("span")]),t("el-col",{staticClass:"item",attrs:{span:8}},[t("span",[e._v("转让人：")]),e._v(e._s(e.detailObj.transferPerName)),t("span")]),t("el-col",{staticClass:"item",attrs:{span:8}},[t("span",[e._v("受让人：")]),e._v(e._s(e.detailObj.assigneePerName)),t("span")]),t("el-col",{staticClass:"item",attrs:{span:24}},[t("span",[e._v("转让理由：")]),e._v(e._s(e.detailObj.transferReason)),t("span")])],1)],1)]),e.detailObj.projectName&&e.detailObj.projectName.length?t("div",{staticClass:"item-box"},[t("div",{staticClass:"zt-flag-title"},[e._v("转让类型：项目")]),t("div",{staticClass:"content"},[t("el-row",[t("el-col",{staticClass:"item",attrs:{span:24}},[t("span",[e._v("项目名称：")]),e._v(e._s((e.detailObj.projectName||[]).join("、"))),t("span")])],1)],1)]):e._e(),e.detailObj.bdqTaskDTOS&&e.detailObj.bdqTaskDTOS.length?t("div",{staticClass:"item-box"},[t("div",{staticClass:"zt-flag-title"},[e._v("转让类型：代码文件")]),t("div",{staticClass:"content"},[t("el-row",[t("el-col",{staticClass:"item",attrs:{span:24}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detailObj.bdqTaskDTOS}},[t("el-table-column",{attrs:{label:"所属项目",prop:"projectName",width:"200",align:"left"}}),t("el-table-column",{attrs:{label:"任务类型",prop:"codeFileType",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s("1"===a.row.codeFileType?"离线任务":"实时任务"))])]}}],null,!1,2238783632)}),t("el-table-column",{attrs:{label:"任务名称",prop:"codeFileName",align:"left"}})],1)],1)],1)],1)]):e._e(),e.detailObj.serverName&&e.detailObj.serverName.length?t("div",{staticClass:"item-box"},[t("div",{staticClass:"zt-flag-title"},[e._v("转让类型：数据服务")]),t("div",{staticClass:"content"},[t("el-row",[t("el-col",{staticClass:"item",attrs:{span:24}},[t("span",[e._v("服务名称：")]),e._v(e._s((e.detailObj.serverName||[]).join("、"))),t("span")])],1)],1)]):e._e(),e.detailObj.tables&&e.detailObj.tables.length?t("div",{staticClass:"item-box"},[t("div",{staticClass:"zt-flag-title"},[e._v("转让类型：数据表")]),t("div",{staticClass:"content"},[t("el-row",[t("el-col",{staticClass:"item",attrs:{span:24}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detailObj.tables}},[t("el-table-column",{attrs:{label:"表名称",prop:"tableName",width:"200",align:"left"}}),t("el-table-column",{attrs:{label:"表类型",width:"200",prop:"tableTypeStr",align:"left"}}),t("el-table-column",{attrs:{label:"创建人",width:"200",prop:"createUserName",align:"left"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"300",label:"表描述",prop:"tableDesc",align:"right"}})],1)],1)],1)],1)]):e._e()])])}),[],!1,null,"1515c681",null);t.default=l.exports},"35c2":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-7e69211c]{color:#1740dc}.success-color[data-v-7e69211c]{color:#52c41a}.warning-color[data-v-7e69211c]{color:#faad14}.error-color[data-v-7e69211c]{color:#f5222d}.info-color[data-v-7e69211c]{color:#909399}.border-color[data-v-7e69211c]{border:1px solid #e5e6e9}.realtime_main_header[data-v-7e69211c]{border-bottom:1px solid #e9e9e9;padding-bottom:6px;margin-bottom:4px}.realtime_main_header .icon_button_grounp[data-v-7e69211c]{display:-webkit-box;display:-ms-flexbox;display:flex}.realtime_main_header .icon_button_grounp .icon_button[data-v-7e69211c]{margin-right:12px;cursor:pointer}.realtime_main_header .icon_button_grounp .icon_button .icon[data-v-7e69211c]{color:#282f4a}.realtime_main_header .icon_button_grounp .icon_button .icon[data-v-7e69211c]:hover{color:#1740dc}.realtime_main_header .icon_button_grounp .icon_button.disable[data-v-7e69211c]{cursor:not-allowed;color:rgba(4,12,44,.25)}",""])},3835:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var o=a("06c5");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o,i,r=[],n=!0,s=!1;try{for(a=a.call(e);!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return r}}(e,t)||Object(o.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"396a":function(e,t,a){var o=a("5659");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("12e2f455",o,!0,{sourceMap:!1,shadowMode:!1})},3981:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-1ab89492]{color:#1740dc}.success-color[data-v-1ab89492]{color:#52c41a}.warning-color[data-v-1ab89492]{color:#faad14}.error-color[data-v-1ab89492]{color:#f5222d}.info-color[data-v-1ab89492]{color:#909399}.border-color[data-v-1ab89492]{border:1px solid #e5e6e9}.data_process_task_leftbar[data-v-1ab89492]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;background:#fff;padding:10px;padding-bottom:30px;overflow:auto}.data_process_task_leftbar[data-v-1ab89492]::-webkit-scrollbar{width:7px;height:7px;border-radius:3px;background-color:transparent}.data_process_task_leftbar[data-v-1ab89492]::-webkit-scrollbar-track{background-color:transparent}.data_process_task_leftbar[data-v-1ab89492]::-webkit-scrollbar-thumb{border-radius:10px;background:rgba(4,12,44,.25);border-radius:3px}.data_process_task_leftbar[data-v-1ab89492]::-webkit-scrollbar-corner{background-color:transparent}.data_process_task_leftbar .title[data-v-1ab89492]{color:#040c2c;font-size:13px;font-weight:600;height:24px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.data_process_task_leftbar .top[data-v-1ab89492]{border-bottom:1px solid #e9e9e9;padding-bottom:15px;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.data_process_task_leftbar .top .add_root[data-v-1ab89492]{background:#f0f1f3;width:24px;height:24px;text-align:center;line-height:24px;cursor:pointer}.data_process_task_leftbar .serch_out[data-v-1ab89492]{margin:10px 0}",""])},"39db":function(e,t,a){var o=a("b3d5");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("629b88c3",o,!0,{sourceMap:!1,shadowMode:!1})},"3d88":function(e,t,a){var o=a("fed4");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("3b792a6f",o,!0,{sourceMap:!1,shadowMode:!1})},"3ff3":function(e,t,a){"use strict";a("eaa0")},4043:function(e,t,a){"use strict";a("4ab6")},4175:function(e,t,a){"use strict";a("9381")},"41f6":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.realtime_task_flink .el-drawer__body{overflow:auto}",""])},4279:function(e,t,a){var o=a("ee2f");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("380db1ab",o,!0,{sourceMap:!1,shadowMode:!1})},4342:function(e,t,a){"use strict";a("7f7f"),a("3b2b");var o={data:function(){var e=this;return{valiFile:function(t,a,o){e.hasFile?o():o(new Error("请上传文件"))},dialogVisible:!1,progress:0,isShowProgress:!1,form:{resourceName:"",typeResource:1,fileExtension:1,resourceDesc:"",file:"",fileList:[]},fileTypeList:[{name:"jar",value:1},{name:"py",value:2},{name:"txt",value:3},{name:"sh",value:4},{name:"excel",value:5}],fileList:[],rules:{resourceName:[{required:!0,validator:function(e,t,a){""==t?a(new Error("请输入资源名称")):!RegExp("^[-_a-zA-Z0-9一-龥]*$").test(t)||""==t||t.length>20||t.length<2?a(new Error("仅支持中英文、数字、下划线、中划线组合,2-20位字符")):a()},trigger:"blur"}],fileList:[{required:!0,message:"请上传文件",trigger:"change"}],fileExtension:[{required:!0,message:"请选择文件类型",trigger:"change"}],typeResource:[{required:!0,message:"请选择资源类型",trigger:"change"}],resourceDesc:[{max:200,message:"长度在200个字符以内",trigger:"blur"}]}}},computed:{},mounted:function(){},methods:{exceedFile:function(e,t){this.$message({message:"只能选择1个文件，若要替换，请先删除已选文件",type:"warning"})},fileChange:function(e,t){var a=e.name.substring(e.name.lastIndexOf(".")+1),o=e.size/1024/1024;return this.form.fileExtension=a,-1==e.name.lastIndexOf(".")?(this.$message({message:"文件后缀名不能为空",type:"warning"}),void(this.form.fileList=[])):o>200?(this.$message({message:"文件大小不得超过200M",type:"warning"}),void(this.form.fileList=[])):(t.length>1&&t.splice(0,1),this.form.fileList=t,this.form.file=e.raw,void this.$refs.upload.clearValidate())},handleRemove:function(e,t){this.form.fileList=t},beforeUploadFile:function(e){},handleSuccess:function(e,t,a){this.$message({message:"上传成功！",type:"success"})},handleError:function(e,t,a){this.$message.error("文件上传失败")},init:function(e){this.dialogVisible=!0},closeDialog:function(){this.$refs.form.resetFields(),this.form.file="",this.form.fileList=[],this.dialogVisible=!1},submitForm:function(){var e=this;this.$refs.form.validate((function(t){if(t){var a=new FormData;a.append("file",e.form.file),a.append("resourceName",e.form.resourceName),a.append("typeResource",e.form.typeResource),a.append("resourceDesc",e.form.resourceDesc),a.append("procId",parseInt(e.$route.query.id)),a.append("fileExtension",e.form.fileExtension),e.isShowProgress=!0,e.progress=0,e.$API.file(e.$URL.saveRealtimeresource,a,(function(t){e.isShowProgress=!1,0==t.code?(e.$message({message:"保存成功！",type:"success"}),e.$emit("refreshDataList"),e.closeDialog()):e.$message.error(t.msg)}),(function(e){}),(function(t){var a=t.loaded/t.total*100|0;e.progress=a}))}}))}}},i=(a("f0e0"),a("2877")),r={data:function(){return{formInline:{resourceName:"",searchUserId:"",typeResource:""},dataList:[],typeList:[{name:"全部",id:""},{name:"实时资源",id:1},{name:"离线资源",id:2},{name:"公共资源",id:3}],dataListLoading:!1,pageOption:{size:10,page:1,total:0}}},props:["tableType","createUserList"],components:{createResource:Object(i.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"createResource"},[t("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"新建资源",width:"600px",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("保存")])],1)]},proxy:!0}])},[t("div",[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isShowProgress,expression:"isShowProgress"}],ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"资源名称",prop:"resourceName"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"仅支持中英文、数字、下划线、中划线组合,2-20位字符"},model:{value:e.form.resourceName,callback:function(t){e.$set(e.form,"resourceName",t)},expression:"form.resourceName "}})],1),t("el-form-item",{attrs:{label:"资源类型",prop:"typeResource"}},[t("el-radio-group",{model:{value:e.form.typeResource,callback:function(t){e.$set(e.form,"typeResource",t)},expression:"form.typeResource"}},[t("el-radio",{attrs:{label:1}},[e._v("实时资源")]),t("el-radio",{attrs:{label:2}},[e._v("离线资源")]),t("el-radio",{attrs:{label:3}},[e._v("公共资源")])],1)],1),t("el-form-item",{ref:"upload",attrs:{label:"上传文件",prop:"fileList"}},[t("el-upload",{ref:"uploadFile",attrs:{action:"null",limit:1,"auto-upload":!1,"on-change":e.fileChange,"on-remove":e.handleRemove,"on-exceed":e.exceedFile,"file-list":e.form.fileList}},[t("el-button",{attrs:{size:"small",plain:""}},[e._v("选择文件")])],1)],1),t("el-form-item",{attrs:{label:"描述",prop:"resourceDesc"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:e.form.resourceDesc,callback:function(t){e.$set(e.form,"resourceDesc",t)},expression:"form.resourceDesc"}})],1)],1),e.isShowProgress?t("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:e.progress}}):e._e()],1)])],1)}),[],!1,null,null,null).exports},methods:{refreshDataList:function(){this.getDataTableList(),this.$emit("resetCreateUserList")},reset:function(){this.formInline=this.$options.data().formInline,this.getDataTableList(1)},getDataTableList:function(e){var t=this;this.dataListLoading=!0;var a={resourceName:this.formInline.resourceName,searchUserId:this.formInline.searchUserId,table_type:this.tableType,typeResource:this.formInline.typeResource,procId:parseInt(this.$route.query.id),page:e||this.pageOption.page,limit:this.pageOption.size};this.$API.post(this.$URL.getRealtimeresource,a,(function(e){if(0==e.code){t.dataListLoading=!1,t.dataList=e.page.list;var a=e.page,o=a.currPage,i=a.pageSize,r=a.totalCount;t.pageOption={page:o,size:i,total:r};e.data.length}else t.dataList=[],t.dataListLoading=!1,t.totalPage=0}))},addResource:function(){var e=this;this.$nextTick((function(){e.$refs.createResource.init()}))},deleteResource:function(e){var t=this;this.$confirm("确定进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={resourceId:e};t.$API.post(t.$URL.deleteRealtimeresource,a,(function(e){0==e.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataTableList()}}):t.$message.error(e.msg)}))})).catch((function(){}))},realtimeresourceDownload:function(e){var t=document.createElement("a");t.style.display="none",t.href=this.$URL.realtimeresourceDownload+"?resourceId="+e,t.click()},handleSizeChange:function(e){this.pageOption.size=e,this.getDataTableList()},handleCurrentChange:function(e){this.pageOption.page=e,this.getDataTableList()}},mounted:function(){this.getDataTableList()}},n=(a("55bf"),Object(i.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"RealtimeResource"},[t("div",{staticClass:"fl"},[t("el-button",{attrs:{type:"primary"},on:{click:e.addResource}},[e._v("新建资源")])],1),t("el-form",{staticClass:"fr",attrs:{inline:!0,model:e.formInline,"label-position":"left"}},[t("el-form-item",[t("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.formInline.typeResource,callback:function(t){e.$set(e.formInline,"typeResource",t)},expression:"formInline.typeResource "}},e._l(e.typeList,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),t("el-form-item",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择创建人"},model:{value:e.formInline.searchUserId,callback:function(t){e.$set(e.formInline,"searchUserId",t)},expression:"formInline.searchUserId"}},e._l(e.createUserList,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入资源名"},model:{value:e.formInline.resourceName,callback:function(t){e.$set(e.formInline,"resourceName","string"==typeof t?t.trim():t)},expression:"formInline.resourceName"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getDataTableList(1)}}},[e._v("查询")])],1),t("el-form-item",{staticStyle:{"margin-right":"0"}},[t("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1),t("div",{staticClass:"cards clearfix"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList}},[t("el-table-column",{attrs:{prop:"resourceId",label:"资源ID"}}),t("el-table-column",{attrs:{prop:"resourceName",label:"资源名称"}}),t("el-table-column",{attrs:{label:"资源类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.typeResource?"实时资源":2==t.row.typeResource?"离线资源":"公共资源")+"\n        ")]}}])}),t("el-table-column",{attrs:{prop:"resourceFilename2",label:"资源文件"}}),t("el-table-column",{attrs:{prop:"username",label:"创建人"}}),t("el-table-column",{attrs:{prop:"resourceDesc",label:"描述"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),t("el-table-column",{attrs:{label:"操作",align:"right","header-align":"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteResource(o.resourceId)}}},[e._v("删除")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.realtimeresourceDownload(o.resourceId)}}},[e._v("下载")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pageOption.page,"page-sizes":[10,50,100,200],"page-size":e.pageOption.size,layout:"total, sizes, prev, pager, next, jumper",total:e.pageOption.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("createResource",{ref:"createResource",on:{refreshDataList:function(t){return e.refreshDataList()}}})],1)}),[],!1,null,"bd05e6aa",null));t.a=n.exports},4510:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-23fea436]{color:#1740dc}.success-color[data-v-23fea436]{color:#52c41a}.warning-color[data-v-23fea436]{color:#faad14}.error-color[data-v-23fea436]{color:#f5222d}.info-color[data-v-23fea436]{color:#909399}.border-color[data-v-23fea436]{border:1px solid #e5e6e9}.data_process_task_output[data-v-23fea436]{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex}.data_process_task_output .left[data-v-23fea436]{height:100%;-webkit-box-flex:1;-ms-flex:1;flex:1;overflow-x:auto;overflow-y:hidden}.data_process_task_output .left .page-modal[data-v-23fea436]{background:rgba(0,0,0,.3);height:calc(100vh - 200px);width:calc(100% - 40px);position:absolute;top:42px;z-index:10}.data_process_task_output .left .ctr[data-v-23fea436]{line-height:30px;height:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;margin-top:10px}.data_process_task_output .left .form_content[data-v-23fea436]{overflow:auto;width:100%}.data_process_task_output .left .title[data-v-23fea436]{background:#fff;padding-left:8px;border-left:3px solid #1740dc;margin:10px 0;height:16px;line-height:16px;color:#040c2c;font-weight:600}.data_process_task_output .left .code_out[data-v-23fea436]{margin-top:18px}.data_process_task_output .right[data-v-23fea436]{width:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:12px}.data_process_task_output .right .attribute[data-v-23fea436]{text-align:center;color:#666;font-size:12px;cursor:pointer;padding:12px 5px;width:30px;background:#e9e9eb;border:1px solid #e5e6e9}.data_process_task_output .right .attribute[data-v-23fea436]:hover{color:#1740dc}",""])},"459f":function(e,t,a){var o=a("b8e9");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("715aa39f",o,!0,{sourceMap:!1,shadowMode:!1})},"46e6":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.process_ds_attribute .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}.process_ds_attribute .header-icon{margin-left:4px;margin-top:2px}.process_ds_attribute .section{padding-left:12px;padding-top:12px}.process_ds_attribute .cod_m_o{position:relative;margin-bottom:16px;margin-top:42px!important}.process_ds_attribute .cod_m_o .el-icon-full-screen{position:absolute;right:5px;top:-18px}.process_ds_attribute .cod_m_o .cede_editor{max-height:300px;overflow:auto}.process_ds_attribute .add_new{width:100%;height:30px;font-size:12px;line-height:30px;color:#040c2c;text-align:center;border:1px dashed #cdced5;cursor:pointer;margin:10px 0}.process_ds_attribute .add_new:hover{border-color:#1740dc;color:#1740dc}.process_ds_attribute .el-form-item--small.el-form-item{margin-bottom:10px}.process_ds_attribute_dialog .el-dialog{margin-top:5vh!important;min-height:90vh;width:90%!important}",""])},4749:function(e,t,a){"use strict";a("396a")},"4a82":function(e,t,a){"use strict";a("ad7f")},"4ab6":function(e,t,a){var o=a("7d00");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("65fec9d0",o,!0,{sourceMap:!1,shadowMode:!1})},"4c74":function(e,t,a){"use strict";a("1ea7")},"4d6a":function(e,t,a){"use strict";a("5d5c")},"4daa":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.process_ds_attribute .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}.process_ds_attribute .header-icon{margin-left:4px;margin-top:2px}.process_ds_attribute .section{padding:10px}.process_ds_attribute .section .minute .el-input__inner{padding-right:0}.process_ds_attribute .cod_m_o{position:relative;margin-bottom:16px;margin-top:42px!important}.process_ds_attribute .cod_m_o .el-icon-full-screen{position:absolute;right:5px;top:-18px}.process_ds_attribute .cod_m_o .cede_editor{max-height:300px;overflow:auto}.process_ds_attribute .sysdate_config .el-form-item__content{margin-left:0!important}.process_ds_attribute .el-input-number.is-controls-right .el-input__inner{text-align:left}.process_ds_attribute .add_new{width:100%;height:30px;font-size:12px;line-height:30px;color:#040c2c;text-align:center;border:1px dashed #cdced5;cursor:pointer;margin:10px 0}.process_ds_attribute .add_new:hover{border-color:#1740dc;color:#1740dc}.process_ds_attribute .el-form-item--small.el-form-item{margin-bottom:10px}.process_ds_attribute_dialog .el-dialog{margin-top:5vh!important;min-height:90vh;width:90%!important}.el-time-panel{left:-40px}",""])},"4f0b":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.importBlood .success label{color:#52c41a}.importBlood .pendding label{color:#faad14!important}.importBlood .fail label{color:#f5222d}",""])},"50e0":function(e,t,a){var o=a("9f4b");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("6e664d10",o,!0,{sourceMap:!1,shadowMode:!1})},"513f":function(e,t,a){"use strict";a("560f")},"521d":function(e,t,a){"use strict";a("5f03")},"525d":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.el-form-item.pre .el-form-item__label{white-space:pre-line;height:32px;line-height:16px}.process_ds_attribute .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}.process_ds_attribute .header-icon{margin-left:4px;margin-top:2px}.process_ds_attribute .section{padding:10px 12px}.process_ds_attribute .cod_m_o{position:relative;margin-bottom:16px;margin-top:42px!important}.process_ds_attribute .cod_m_o .el-icon-full-screen{position:absolute;right:5px;top:-18px}.process_ds_attribute .cod_m_o .cede_editor{max-height:300px;overflow:auto}.process_ds_attribute .number{font-size:12px}.process_ds_attribute .number .el-input__inner{padding-right:0}.process_ds_attribute .el-form-item--small.el-form-item{margin-bottom:10px}.process_ds_attribute_dialog .el-dialog{margin-top:5vh!important;min-height:90vh;width:90%!important}",""])},"54de":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_addfile .el-cascader{width:100%}.data_process_task_addfile .title{font-weight:700;border-left:4px solid #1740dc;padding-left:8px;margin-bottom:10px}",""])},5578:function(e,t,a){var o=a("c73d");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("35ca91c2",o,!0,{sourceMap:!1,shadowMode:!1})},"55bf":function(e,t,a){"use strict";a("a221")},"560f":function(e,t,a){var o=a("cefb");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("6bd11201",o,!0,{sourceMap:!1,shadowMode:!1})},"561b":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,'.primary-color[data-v-40b89c7c]{color:#1740dc}.success-color[data-v-40b89c7c]{color:#52c41a}.warning-color[data-v-40b89c7c]{color:#faad14}.error-color[data-v-40b89c7c]{color:#f5222d}.info-color[data-v-40b89c7c]{color:#909399}.border-color[data-v-40b89c7c]{border:1px solid #e5e6e9}.hive-dialog[data-v-40b89c7c]{width:100%}.form-title[data-v-40b89c7c]:before{display:inline-block;content:"";height:10px;width:2px;background-color:#0e77d1;margin-right:5px}.form-title[data-v-40b89c7c]{margin-bottom:15px;margin-top:15px}.el-row[data-v-40b89c7c]{margin-bottom:10px!important}.el-form-item__error[data-v-40b89c7c]{position:relative!important}.el-cascader--small[data-v-40b89c7c],.el-select[data-v-40b89c7c]{width:100%!important}',""])},5632:function(e,t,a){var o=a("fdb9");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("2377f826",o,!0,{sourceMap:!1,shadowMode:!1})},5659:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-54b30770]{color:#1740dc}.success-color[data-v-54b30770]{color:#52c41a}.warning-color[data-v-54b30770]{color:#faad14}.error-color[data-v-54b30770]{color:#f5222d}.info-color[data-v-54b30770]{color:#909399}.border-color[data-v-54b30770]{border:1px solid #e5e6e9}.real_time_collection[data-v-54b30770]{height:100%;padding-bottom:20px}.real_time_collection .collect_p[data-v-54b30770]{text-align:left;padding:20px 0;font-size:12px;color:#5c6176}.real_time_collection[data-v-54b30770] .el-table__body,.real_time_collection[data-v-54b30770] .el-table__header{width:100%!important}",""])},"5c38":function(e,t,a){var o=a("84ad");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("9a8ed366",o,!0,{sourceMap:!1,shadowMode:!1})},"5d5c":function(e,t,a){var o=a("a5ec");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("27cc973d",o,!0,{sourceMap:!1,shadowMode:!1})},"5e33":function(e,t,a){"use strict";a("2b5a")},"5f03":function(e,t,a){var o=a("c5d8");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("26e92f66",o,!0,{sourceMap:!1,shadowMode:!1})},"5f19":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_shell .vue-codemirror{border:none!important}.data_process_task_shell .el-drawer__body{overflow:auto;padding-bottom:4px}.data_process_task_shell .ds_dialog .el-dialog{margin-top:5vh!important;overflow:hidden;height:90vh;width:90%!important}.data_process_task_shell .ds_dialog .el-dialog .edit{height:calc(90vh - 150px)}",""])},"5fb7":function(e,t,a){"use strict";a("f022")},6078:function(e,t,a){var o=a("260a");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("71e24de8",o,!0,{sourceMap:!1,shadowMode:!1})},"60fd":function(e,t,a){var o=a("41f6");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("a433e3b2",o,!0,{sourceMap:!1,shadowMode:!1})},"64d4":function(e,t,a){var o=a("302c");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("12793227",o,!0,{sourceMap:!1,shadowMode:!1})},"67aa":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,'.primary-color[data-v-292d70f9]{color:#1740dc}.success-color[data-v-292d70f9]{color:#52c41a}.warning-color[data-v-292d70f9]{color:#faad14}.error-color[data-v-292d70f9]{color:#f5222d}.info-color[data-v-292d70f9]{color:#909399}.border-color[data-v-292d70f9]{border:1px solid #e5e6e9}.editor-div[data-v-292d70f9]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}.editor-div button[data-v-292d70f9]{cursor:pointer}.title-required[data-v-292d70f9]:before{content:"*";color:#f56c6c;margin-right:4px}',""])},6811:function(e,t,a){var o=a("525d");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("d59d51fa",o,!0,{sourceMap:!1,shadowMode:!1})},6859:function(e,t,a){var o=a("d86f");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("a537bc90",o,!0,{sourceMap:!1,shadowMode:!1})},"6ec9":function(e,t,a){"use strict";a("a04c")},"6fc3":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-bd05e6aa]{color:#1740dc}.success-color[data-v-bd05e6aa]{color:#52c41a}.warning-color[data-v-bd05e6aa]{color:#faad14}.error-color[data-v-bd05e6aa]{color:#f5222d}.info-color[data-v-bd05e6aa]{color:#909399}.border-color[data-v-bd05e6aa]{border:1px solid #e5e6e9}",""])},"715d":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.realtime_task_history .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}",""])},"725f":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-380771fc]{color:#1740dc}.success-color[data-v-380771fc]{color:#52c41a}.warning-color[data-v-380771fc]{color:#faad14}.error-color[data-v-380771fc]{color:#f5222d}.info-color[data-v-380771fc]{color:#909399}.border-color[data-v-380771fc]{border:1px solid #e5e6e9}.data_process_task_main_index[data-v-380771fc]{height:100%}.data_process_task_main_index .create_task[data-v-380771fc]{width:162px;height:168px;background:#f6f7f8;margin:25px 0 0 40px;text-align:center;cursor:pointer}.data_process_task_main_index .add_new[data-v-380771fc]{width:100%;height:30px;font-size:12px;line-height:30px;color:#040c2c;text-align:center;border:1px dashed #cdced5;cursor:pointer;margin-bottom:10px}.data_process_task_main_index .add_new[data-v-380771fc]:hover{border-color:#1740dc;color:#1740dc}",""])},7550:function(e,t,a){"use strict";a("5578")},"75d8":function(e,t,a){var o=a("1d7c");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("46643ae8",o,!0,{sourceMap:!1,shadowMode:!1})},"76ba":function(e,t,a){"use strict";a("0855")},"77a3":function(e,t,a){"use strict";a("7b05")},"790a":function(e,t,a){"use strict";a("e551")},"79db":function(e,t,a){var o=a("13a8");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("3a94a371",o,!0,{sourceMap:!1,shadowMode:!1})},"7b05":function(e,t,a){var o=a("ca24");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("49da0af0",o,!0,{sourceMap:!1,shadowMode:!1})},"7c48":function(e,t,a){"use strict";a("60fd")},"7d00":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.udf{text-align:initial}.udf .el-button--text{padding:9px 0!important}.udf .tips{margin-bottom:8px}.udf .delete{color:red;cursor:pointer}.udf .el-input.is-disabled .el-input__inner{border:none;background:none;cursor:auto;color:#333;padding:0}.udf .add_udf_out{background:#f2f2f2;text-align:center}",""])},"7eb3":function(e,t,a){"use strict";a("e270")},"7f92":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-039bb66f]{color:#1740dc}.success-color[data-v-039bb66f]{color:#52c41a}.warning-color[data-v-039bb66f]{color:#faad14}.error-color[data-v-039bb66f]{color:#f5222d}.info-color[data-v-039bb66f]{color:#909399}.border-color[data-v-039bb66f]{border:1px solid #e5e6e9}.data_process_task_realtime_main_index[data-v-039bb66f]{height:100%}.data_process_task_realtime_main_index .create_task[data-v-039bb66f]{width:162px;height:168px;background:#f6f7f8;margin:25px 0 0 40px;text-align:center;cursor:pointer}",""])},"82b6":function(e,t,a){var o=a("2ada");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("a6671a5c",o,!0,{sourceMap:!1,shadowMode:!1})},"836b":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.real_time_add_menu_file .el-drawer__body{overflow:auto}.real_time_add_menu_file .in_label .el-radio__label{font-size:12px}",""])},"838b":function(e,t,a){e.exports=function(){var e={228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}},858:function(e){e.exports=function(e){if(Array.isArray(e))return e}},646:function(e,t,a){var o=a(228);e.exports=function(e){if(Array.isArray(e))return o(e)}},713:function(e){e.exports=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},860:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},884:function(e){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],o=!0,i=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(o=(n=s.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw r}}return a}}},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},38:function(e,t,a){var o=a(858),i=a(884),r=a(379),n=a(521);e.exports=function(e,t){return o(e)||i(e,t)||r(e,t)||n()}},319:function(e,t,a){var o=a(646),i=a(860),r=a(379),n=a(206);e.exports=function(e){return o(e)||i(e)||r(e)||n()}},8:function(e){function t(a){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(a)}e.exports=t},379:function(e,t,a){var o=a(228);e.exports=function(e,t){if(e){if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}},312:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var o=a(38),i=a.n(o),r=a(319),n=a.n(r),s=a(713),l=a.n(s);function c(e,t,a,o,i,r,n,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),o&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),n?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=l):i&&(l=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}var d=c({props:{data:{required:!0,type:String}},methods:{toggleBrackets:function(e){this.$emit("click",e)}}},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"vjs-tree-brackets",on:{click:function(t){return t.stopPropagation(),e.toggleBrackets(t)}}},[e._v(e._s(e.data))])}),[],!1,null,null,null).exports,u=c({props:{checked:{type:Boolean,default:!1},isMultiple:Boolean},computed:{uiType:function(){return this.isMultiple?"checkbox":"radio"},model:{get:function(){return this.checked},set:function(e){this.$emit("input",e)}}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{class:["vjs-check-controller",e.checked?"is-checked":""],on:{click:function(e){e.stopPropagation()}}},[a("span",{class:"vjs-check-controller-inner is-"+e.uiType}),a("input",{class:"vjs-check-controller-original is-"+e.uiType,attrs:{type:e.uiType},domProps:{checked:e.model},on:{change:function(t){return e.$emit("change",e.model)}}})])}),[],!1,null,null,null).exports,f=c({props:{nodeType:{type:String,required:!0}},computed:{isOpen:function(){return"objectStart"===this.nodeType||"arrayStart"===this.nodeType},isClose:function(){return"objectCollapsed"===this.nodeType||"arrayCollapsed"===this.nodeType}},methods:{handleClick:function(){this.$emit("click")}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isOpen||e.isClose?a("span",{class:"vjs-carets vjs-carets-"+(e.isOpen?"open":"close"),on:{click:e.handleClick}},[a("svg",{attrs:{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}},[a("path",{attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}})])]):e._e()}),[],!1,null,null,null).exports,p=a(8),m=a.n(p);function h(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.key,r=o.index,n=o.type,s=void 0===n?"content":n,l=o.showComma,c=void 0!==l&&l,d=o.length,u=void 0===d?1:d,f=h(e);if("array"===f){var p=g(e.map((function(e,o,i){return b(e,"".concat(t,"[").concat(o,"]"),a+1,{index:o,showComma:o!==i.length-1,length:u,type:s})})));return[b("[",t,a,{key:i,length:e.length,type:"arrayStart"})[0]].concat(p,b("]",t,a,{showComma:c,length:e.length,type:"arrayEnd"})[0])}if("object"===f){var m=Object.keys(e),v=g(m.map((function(o,i,r){return b(e[o],o.includes(".")?"".concat(t,'["').concat(o,'"]'):"".concat(t,".").concat(o),a+1,{key:o,showComma:i!==r.length-1,length:u,type:s})})));return[b("{",t,a,{key:i,index:r,length:m.length,type:"objectStart"})[0]].concat(v,b("}",t,a,{showComma:c,length:m.length,type:"objectEnd"})[0])}return[{content:e,level:a,key:i,index:r,path:t,showComma:c,length:u,type:s}]}function g(e){if("function"==typeof Array.prototype.flat)return e.flat();for(var t=n()(e),a=[];t.length;){var o=t.shift();Array.isArray(o)?t.unshift.apply(t,n()(o)):a.push(o)}return a}var v=c({components:{Brackets:d,CheckController:u,Carets:f},props:{node:{required:!0,type:Object},collapsed:Boolean,showDoubleQuotes:Boolean,showLength:Boolean,checked:Boolean,selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"}},data:function(){return{editing:!1}},computed:{valueClass:function(){return"vjs-value vjs-value-".concat(this.dataType)},dataType:function(){return h(this.node.content)},prettyKey:function(){return this.showDoubleQuotes?'"'.concat(this.node.key,'"'):this.node.key},selectable:function(){return this.nodeSelectable(this.node)&&(this.isMultiple||this.isSingle)},isMultiple:function(){return"multiple"===this.selectableType},isSingle:function(){return"single"===this.selectableType},defaultValue:function(){var e,t,a=(null!==(e=null===(t=this.node)||void 0===t?void 0:t.content)&&void 0!==e?e:"")+"";return"string"===this.dataType?'"'.concat(a,'"'):a}},methods:{handleInputChange:function(e){var t,a,o="null"===(a=null===(t=e.target)||void 0===t?void 0:t.value)?null:"undefined"===a?void 0:"true"===a||"false"!==a&&(a[0]+a[a.length-1]==='""'||a[0]+a[a.length-1]==="''"?a.slice(1,-1):"number"==typeof Number(a)&&!isNaN(Number(a))||"NaN"===a?Number(a):a);this.$emit("value-change",o,this.node.path)},handleIconClick:function(){this.$emit("icon-click",!this.collapsed,this.node.path)},handleBracketsClick:function(){this.$emit("brackets-click",!this.collapsed,this.node.path)},handleSelectedChange:function(){this.$emit("selected-change",this.node)},handleNodeClick:function(){this.$emit("node-click",this.node),this.selectable&&this.selectOnClickNode&&this.$emit("selected-change",this.node)},handleValueEdit:function(e){var t=this;if(this.editable&&!this.editing){this.editing=!0;var a=function a(o){var i;o.target!==e.target&&(null===(i=o.target)||void 0===i?void 0:i.parentElement)!==e.target&&(t.editing=!1,document.removeEventListener("click",a))};document.removeEventListener("click",a),document.addEventListener("click",a)}}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"vjs-tree-node":!0,"has-selector":e.showSelectController,"has-carets":e.showIcon,"is-highlight":e.highlightSelectedNode&&e.checked},on:{click:e.handleNodeClick}},[e.showLineNumber?a("span",{staticClass:"vjs-node-index"},[e._v("\n    "+e._s(e.node.id+1)+"\n  ")]):e._e(),e.showSelectController&&e.selectable&&"objectEnd"!==e.node.type&&"arrayEnd"!==e.node.type?a("check-controller",{attrs:{"is-multiple":e.isMultiple,checked:e.checked},on:{change:e.handleSelectedChange}}):e._e(),a("div",{staticClass:"vjs-indent"},[e._l(e.node.level,(function(t,o){return a("div",{key:o,class:{"vjs-indent-unit":!0,"has-line":e.showLine}})})),e.showIcon?a("carets",{attrs:{"node-type":e.node.type},on:{click:e.handleIconClick}}):e._e()],2),e.node.key?a("span",{staticClass:"vjs-key"},[e._v(e._s(e.prettyKey)+":")]):e._e(),a("span",["content"!==e.node.type?a("brackets",{attrs:{data:e.node.content},on:{click:e.handleBracketsClick}}):a("span",{class:e.valueClass,on:{click:function(t){!e.editable||e.editableTrigger&&"click"!==e.editableTrigger||e.handleValueEdit(t)},dblclick:function(t){e.editable&&"dblclick"===e.editableTrigger&&e.handleValueEdit(t)}}},[e.editable&&e.editing?a("input",{style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"},domProps:{value:e.defaultValue},on:{change:e.handleInputChange}}):e._t("value",[e._v(e._s(e.defaultValue))],{node:e.node,defaultValue:e.defaultValue})],2),e.node.showComma?a("span",[e._v(",")]):e._e(),e.showLength&&e.collapsed?a("span",{staticClass:"vjs-comment"},[e._v(" // "+e._s(e.node.length)+" items ")]):e._e()],1)],1)}),[],!1,null,null,null);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k=c({name:"VueJsonPretty",components:{TreeNode:v.exports},model:{prop:"data"},props:{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:1/0},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},selectedValue:{type:[Array,String],default:function(){return""}},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},collapsedOnClickBrackets:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"}},data:function(){var e=this;return{translateY:0,visibleData:null,hiddenPaths:b(this.data,this.rootPath).reduce((function(t,a){var o=a.level>=e.deep;return"objectStart"!==a.type&&"arrayStart"!==a.type||!o?t:_(_({},t),{},l()({},a.path,1))}),{})}},computed:{originFlatData:function(){return b(this.data,this.rootPath)},flatData:function(e){for(var t=e.originFlatData,a=e.hiddenPaths,o=null,i=[],r=t.length,n=0;n<r;n++){var s=_(_({},t[n]),{},{id:n}),l=a[s.path];if(o&&o.path===s.path){var c="objectStart"===o.type,d=_(_(_({},s),o),{},{showComma:s.showComma,content:c?"{...}":"[...]",type:c?"objectCollapsed":"arrayCollapsed"});o=null,i.push(d)}else{if(l&&!o){o=s;continue}if(o)continue;i.push(s)}}return i},selectedPaths:{get:function(){var e=this.selectedValue;return e&&"multiple"===this.selectableType&&Array.isArray(e)?e:[e]},set:function(e){this.$emit("update:selectedValue",e)}},propsError:function(){return!this.selectableType||this.selectOnClickNode||this.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}},watch:{propsError:{handler:function(e){if(e)throw new Error("[VueJsonPretty] ".concat(e))},immediate:!0},flatData:{handler:function(e){this.updateVisibleData(e)},immediate:!0}},methods:{updateVisibleData:function(e){if(this.virtual){var t=this.height/this.itemHeight,a=this.$refs.tree&&this.$refs.tree.scrollTop||0,o=Math.floor(a/this.itemHeight),i=o<0?0:o+t>e.length?e.length-t:o;i<0&&(i=0);var r=i+t;this.translateY=i*this.itemHeight,this.visibleData=e.filter((function(e,t){return t>=i&&t<r}))}else this.visibleData=e},handleTreeScroll:function(){this.updateVisibleData(this.flatData)},handleSelectedChange:function(e){var t=e.path,a=this.selectableType;if("multiple"===a){var o=this.selectedPaths.findIndex((function(e){return e===t})),r=n()(this.selectedPaths);-1!==o?this.selectedPaths.splice(o,1):this.selectedPaths.push(t),this.$emit("selected-change",this.selectedPaths,r)}else if("single"===a&&this.selectedPaths[0]!==t){var s=i()(this.selectedPaths,1)[0],l=t;this.selectedPaths=l,this.$emit("selected-change",l,s)}},handleNodeClick:function(e){this.$emit("node-click",e)},updateCollapsedPaths:function(e,t){if(e)this.hiddenPaths=_(_({},this.hiddenPaths),{},l()({},t,1));else{var a=_({},this.hiddenPaths);delete a[t],this.hiddenPaths=a}},handleBracketsClick:function(e,t){this.collapsedOnClickBrackets&&this.updateCollapsedPaths(e,t),this.$emit("brackets-click",e)},handleIconClick:function(e,t){this.updateCollapsedPaths(e,t),this.$emit("icon-click",e)},handleValueChange:function(e,t){var a=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if(null===t)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);if("object"!==m()(t))return t;if(a.get(t))return a.get(t);if(Array.isArray(t)){var o=t.map((function(t){return e(t,a)}));return a.set(t,o),o}var i={};for(var r in t)i[r]=e(t[r],a);return a.set(t,i),i}(this.data),o=this.rootPath;new Function("data","val","data".concat(t.slice(o.length),"=val"))(a,e),this.$emit("input",a)}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"tree",class:{"vjs-tree":!0,"is-virtual":e.virtual},style:e.showLineNumber?{paddingLeft:12*Number(e.flatData.length.toString().length)+"px"}:{},on:{scroll:function(t){e.virtual&&e.handleTreeScroll()}}},[a("div",{staticClass:"vjs-tree-list",style:e.virtual&&{height:e.height+"px"}},[a("div",{staticClass:"vjs-tree-list-holder",style:e.virtual&&{height:e.flatData.length*e.itemHeight+"px"}},[a("div",{staticClass:"vjs-tree-list-holder-inner",style:e.virtual&&{transform:"translateY("+e.translateY+"px)"}},e._l(e.visibleData,(function(t){return a("tree-node",{key:t.id,style:e.itemHeight&&20!==e.itemHeight?{lineHeight:e.itemHeight+"px"}:{},attrs:{node:t,collapsed:!!e.hiddenPaths[t.path],"show-double-quotes":e.showDoubleQuotes,"show-length":e.showLength,"collapsed-on-click-brackets":e.collapsedOnClickBrackets,checked:e.selectedPaths.includes(t.path),"selectable-type":e.selectableType,"show-line":e.showLine,"show-line-number":e.showLineNumber,"show-select-controller":e.showSelectController,"select-on-click-node":e.selectOnClickNode,"node-selectable":e.nodeSelectable,"highlight-selected-node":e.highlightSelectedNode,"show-icon":e.showIcon,editable:e.editable,"editable-trigger":e.editableTrigger},on:{"node-click":e.handleNodeClick,"brackets-click":e.handleBracketsClick,"icon-click":e.handleIconClick,"selected-change":e.handleSelectedChange,"value-change":e.handleValueChange},scopedSlots:e._u([{key:"value",fn:function(t){return[e._t("nodeValue",null,{node:t.node,defaultValue:t.defaultValue})]}}],null,!0)})})),1)])])])}),[],!1,null,null,null).exports,x=Object.assign({},k,{version:"1.9.1"})}},t={};function a(o){if(t[o])return t[o].exports;var i=t[o]={exports:{}};return e[o](i,i.exports,a),i.exports}return a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a(312)}()},"84ad":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.realtime_task_attribute .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}.realtime_task_attribute .section{padding-top:10px;font-size:12px;color:#040c2c}.realtime_task_attribute .section>div{margin-bottom:10px}",""])},"861a":function(e,t,a){"use strict";a("2e99")},"86b9":function(e,t,a){"use strict";a.d(t,"n",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return f})),a.d(t,"h",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"f",(function(){return h})),a.d(t,"m",(function(){return b})),a.d(t,"b",(function(){return g})),a.d(t,"q",(function(){return v})),a.d(t,"p",(function(){return y})),a.d(t,"o",(function(){return _})),a.d(t,"i",(function(){return k})),a.d(t,"k",(function(){return x})),a.d(t,"j",(function(){return w})),a.d(t,"l",(function(){return T})),a.d(t,"c",(function(){return S}));a("8e6e"),a("ac6a"),a("456d");var o=a("ade3"),i=a("2b0e"),r=a("fedb"),n=a("ca00");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e){return i.default.http.post(r.a.saveNodeData,e)},d=function(e){return i.default.http.get(r.a.getMetaDbListByConnect+"/".concat(e))},u=function(e){return i.default.http.get(r.a.getConfDbListByConnect+"/".concat(e))},f=function(e){return i.default.http.get(r.a.getConfConnectListAllKafka,{params:e})},p=function(e){return i.default.http.get(r.a.getNodeDetail,{params:e})},m=function(e){return i.default.http.post(r.a.deleteNodeConnect,e)},h=function(){return i.default.http.get(r.a.getFieldTypes)},b=function(e){return i.default.http.get(Object(n.e)(r.a.reviewSql,{id:e}))},g=function(){return i.default.http.get(r.a.downLoadFieldFile,{responseType:"arraybuffer"})},v=function(e){return i.default.http.post(r.a.uploadFieldFile,e)},y=function(e){return i.default.http.get(r.a.taskGetPartFields,{params:e})},_=function(e){return i.default.http.post(r.a.tableViewData,e)},k=function(e){return i.default.http.post(r.a.getProcInfoListDbs,l({},e))},x=function(e){return i.default.http.post(r.a.getRealTimeTableList,e)},w=function(e){var t=e.id;return i.default.http.get(r.a.getRealTimeDetail+"/".concat(t))},T=function(e){return i.default.http.post(r.a.getTableInfoListNew,e)},S=function(e){return i.default.http.get(r.a.getAllFields,{params:e})}},"86e0":function(e,t,a){var o=a("cce5");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("915b22ae",o,!0,{sourceMap:!1,shadowMode:!1})},"8ca0":function(e,t,a){"use strict";a("d4ef")},"8cd2":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.createResource .el-form-item__label{width:110px!important}.createResource .handle{width:100%;text-align:right}",""])},"8e65":function(e,t,a){"use strict";a("6859")},"90c0":function(e,t,a){var o=a("67aa");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("815ea60c",o,!0,{sourceMap:!1,shadowMode:!1})},"90f8":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-13c6dad5]{color:#1740dc}.success-color[data-v-13c6dad5]{color:#52c41a}.warning-color[data-v-13c6dad5]{color:#faad14}.error-color[data-v-13c6dad5]{color:#f5222d}.info-color[data-v-13c6dad5]{color:#909399}.border-color[data-v-13c6dad5]{border:1px solid #e5e6e9}.data_process_task_output.stream[data-v-13c6dad5]{height:calc(100% - 28px);display:-webkit-box;display:-ms-flexbox;display:flex}.data_process_task_output.stream .left[data-v-13c6dad5]{-webkit-box-flex:1;-ms-flex:1;flex:1}.data_process_task_output.stream .left .title[data-v-13c6dad5]{background:#fff;padding-left:8px;border-left:3px solid #1740dc;margin:10px 0;height:16px;line-height:16px;color:#040c2c;font-weight:600}.data_process_task_output.stream .left .code_out[data-v-13c6dad5]{margin-top:18px}.data_process_task_output.stream .left .is_run[data-v-13c6dad5]{margin-left:18px;margin-top:3px;color:#67c23a}.data_process_task_output.stream .left .el-button--mini.is-round[data-v-13c6dad5],.data_process_task_output.stream .left[data-v-13c6dad5] .el-button--mini{padding:7px 7px!important}.data_process_task_output.stream .right[data-v-13c6dad5]{width:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:transparent;margin-left:12px}.data_process_task_output.stream .right .attribute[data-v-13c6dad5]{text-align:center;color:#666;font-size:12px;cursor:pointer;padding:12px 5px;width:30px;background:#e9e9eb;border:1px solid #e5e6e9}.data_process_task_output.stream .right .attribute[data-v-13c6dad5]:hover{color:#1740dc}.data_process_task_output.stream #edit_menu[data-v-13c6dad5]{position:fixed;padding:12px 0;line-height:2.4;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);background:#fff;color:#040c2c;z-index:2}.data_process_task_output.stream #edit_menu li[data-v-13c6dad5]{padding:0 20px;cursor:pointer}.data_process_task_output.stream #edit_menu li[data-v-13c6dad5]:hover{background:#f2f3f4;color:#1740dc}",""])},"92ce8":function(e,t,a){var o=a("2f5e");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("434e777c",o,!0,{sourceMap:!1,shadowMode:!1})},"934f":function(e,t,a){var o=a("1000");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("14839ee6",o,!0,{sourceMap:!1,shadowMode:!1})},9381:function(e,t,a){var o=a("836b");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("285d2ee4",o,!0,{sourceMap:!1,shadowMode:!1})},9447:function(e,t,a){"use strict";a("64d4")},9487:function(e,t,a){"use strict";a("4279")},"94d9":function(e,t,a){"use strict";a("fabf")},"94ff":function(e,t,a){"use strict";a("459f")},9715:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-14f2dafa]{color:#1740dc}.success-color[data-v-14f2dafa]{color:#52c41a}.warning-color[data-v-14f2dafa]{color:#faad14}.error-color[data-v-14f2dafa]{color:#f5222d}.info-color[data-v-14f2dafa]{color:#909399}.border-color[data-v-14f2dafa]{border:1px solid #e5e6e9}.label-tabs[data-v-14f2dafa]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.label-tabs i[data-v-14f2dafa]{width:5px;height:5px;background:#00f;margin-left:5px;border-radius:50%;display:inline-block}.data_process_task_ds[data-v-14f2dafa]{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex}.data_process_task_ds .left[data-v-14f2dafa]{height:calc(100% - 56px);-webkit-box-flex:1;-ms-flex:1;flex:1;overflow-x:auto;overflow-y:auto}.data_process_task_ds .left .button_out[data-v-14f2dafa]{height:30px;position:sticky;top:0;background:#fff;z-index:100}.data_process_task_ds .left .paramType .cede_editor[data-v-14f2dafa]{position:relative;margin-top:-32px;max-height:300px;overflow:auto}.data_process_task_ds .left .form_content[data-v-14f2dafa]{margin-top:6px;height:100%}.data_process_task_ds .left .form_content .isform[data-v-14f2dafa]{height:100%;padding-bottom:50px}.data_process_task_ds .left .form_content .addNew[data-v-14f2dafa]{width:100%;height:30px;font-size:12px;line-height:30px;color:#040c2c;text-align:center;border:1px dashed #cdced5;cursor:pointer;margin:10px 0}.data_process_task_ds .left .form_content .addNew[data-v-14f2dafa]:hover{border-color:#1740dc;color:#1740dc}.data_process_task_ds .left .title[data-v-14f2dafa]{background:#fff;padding-left:8px;border-left:3px solid #1740dc;margin:20px 0;height:16px;line-height:16px;color:#040c2c;font-weight:600}.data_process_task_ds .left .sebar[data-v-14f2dafa]{padding:0 11px}.data_process_task_ds .right[data-v-14f2dafa]{width:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:12px}.data_process_task_ds .right .attribute[data-v-14f2dafa]{text-align:center;color:#666;font-size:12px;cursor:pointer;padding:12px 5px;width:30px;background:#e9e9eb;border:1px solid #e5e6e9}.data_process_task_ds .right .attribute[data-v-14f2dafa]:hover{color:#1740dc}.data_process_task_ds .task_edit .el-form-item__content[data-v-14f2dafa]{margin-left:0!important;margin-top:-7px!important}.data_process_task_ds .cod_m_o[data-v-14f2dafa]{position:relative;margin-bottom:16px;margin-top:42px!important}.data_process_task_ds .cod_m_o .ctr[data-v-14f2dafa]{line-height:30px;height:30px;position:absolute;top:-60px;right:20px}.data_process_task_ds .cod_m_o .cede_editor[data-v-14f2dafa]{position:relative;margin-top:-32px;max-height:300px;overflow:auto}.data_process_task_ds .itemtooltip[data-v-14f2dafa]{margin-left:4px}.is_set_null[data-v-14f2dafa] label{width:auto!important}[data-v-14f2dafa] .cell .el-form-item{margin-bottom:0!important}",""])},"985a":function(e,t,a){"use strict";a("3d88")},"99e2":function(e,t,a){var o=a("9715");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("73e791cb",o,!0,{sourceMap:!1,shadowMode:!1})},"9e09":function(e,t,a){"use strict";a("2e39")},"9f4b":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-1515c681]{color:#1740dc}.success-color[data-v-1515c681]{color:#52c41a}.warning-color[data-v-1515c681]{color:#faad14}.error-color[data-v-1515c681]{color:#f5222d}.info-color[data-v-1515c681]{color:#909399}.border-color[data-v-1515c681]{border:1px solid #e5e6e9}.transferDetail .item-box[data-v-1515c681]{border-bottom:1px solid #e5e6e9;padding-bottom:14px;margin-bottom:14px}.transferDetail .item-box .zt-flag-title[data-v-1515c681]{margin-bottom:10px}.transferDetail .item-box .content .item[data-v-1515c681]{color:rgba(4,12,44,.85);font-size:12px;line-height:18px;margin-bottom:10px}",""])},"9f9e":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.process_ds_attribute .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}.process_ds_attribute .header-icon{margin-left:4px;margin-top:2px}.process_ds_attribute .section{padding:10px 12px}.process_ds_attribute .cod_m_o{position:relative;margin-bottom:16px;margin-top:42px!important}.process_ds_attribute .cod_m_o .el-icon-full-screen{position:absolute;right:5px;top:-18px}.process_ds_attribute .cod_m_o .cede_editor{max-height:300px;overflow:auto}.process_ds_attribute .number{font-size:12px}.process_ds_attribute .number .el-input__inner{padding-right:0}.process_ds_attribute .el-form-item--small.el-form-item{margin-bottom:10px}.process_ds_attribute_dialog .el-dialog{margin-top:5vh!important;min-height:90vh;width:90%!important}",""])},"9faa":function(e,t,a){var o=a("4510");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("8c04dc52",o,!0,{sourceMap:!1,shadowMode:!1})},"9fc5":function(e,t,a){var o=a("35c2");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("7b3d4361",o,!0,{sourceMap:!1,shadowMode:!1})},a04c:function(e,t,a){var o=a("dbff");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("159037a8",o,!0,{sourceMap:!1,shadowMode:!1})},a0bc:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.realtime_task_params_config .section{padding-left:12px;padding-top:12px}.realtime_task_params_config .section .item{width:100%}.realtime_task_params_config .section .item .unit{margin-left:8px}.el-form-item.hh .el-form-item__label{white-space:pre-line;height:32px;line-height:16px}",""])},a119:function(e,t,a){"use strict";a("82b6")},a18b:function(e,t,a){"use strict";a("86e0")},a1c3:function(e,t,a){"use strict";a("7f7f"),a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("8e6e"),a("ac6a"),a("456d");var o=a("ade3"),i=a("f121");function r(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw r}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={props:["item"],data:function(){return{apiUrl:i.a.apiUrl,tableData:[],propItem:this.item,fileList:[],editJarName:"",createrPerId:"",saveLoading:!1}},methods:{getData:function(){var e=this,t={procId:this.propItem.id};this.tableData=[],this.$API.get(this.$URL.getProcInfoGetUdfFuncs,t,(function(t){0==t.code?(e.editJarName=t.data[0].jarName,e.tableData=t.data.map((function(e){return l(l({},e),{},{disabled:!0})}))):e.$message.error(t.msg)}))},changFile:function(e,t){},upError:function(e,t,a){this.$message.error("上传jar包失败")},onSuccess:function(e,t,a){this.editJarName="",0==e.code?(this.$message.success("上传成功"),this.editJarName=e.data.jarName,this.createrPerId=e.data.createrPerId):(this.$message.error(e.msg),this.$refs.upload.clearFiles())},addUdf:function(){this.tableData.push({jarClassName:"",jarMethodName:"",jarName:this.editJarName,procId:this.propItem.id,createrPerId:this.createrPerId,disabled:!1})},removeUdf:function(e){var t=this;this.$confirm("是否确认删除该方法？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.row.id?t.getProcInfoDeleteUdfFuncs(e.row.id,e):t.tableData.splice(e.$index,1)})).catch((function(){}))},getProcInfoDeleteUdfFuncs:function(e,t){var a=this;this.$API.get(this.$URL.getProcInfoDeleteUdfFuncs+"/"+e,{},(function(e){0==e.code?a.tableData.splice(t.$index,1):a.$message.error(e.msg)}))},save:function(){var e=this;this.saveLoading=!0;var t=[];if(this.tableData.length<1)return this.$message.error("注册方法类名和方法名不能为空"),void(this.saveLoading=!1);var a,o=r(this.tableData);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(this.saveLoading=!1,""==i.jarClassName||""==i.jarMethodName)return void this.$message.error("注册方法类名和方法名不能为空");if(""==this.editJarName)return this.saveLoading=!1,void this.$message.error("未上传jar包");t.push({jarName:i.jarName||this.editJarName,jarClassName:i.jarClassName,jarMethodName:i.jarMethodName,procId:i.procId,createrPerId:i.createrPerId,id:i.id||null})}}catch(e){o.e(e)}finally{o.f()}this.$API.post(this.$URL.getProcInfoGenerateUdf,t||{},(function(t){e.saveLoading=!1,0==t.code?(e.$message.success("保存成功"),e.getData()):e.$message.error(t.msg)}))},clearFiles:function(){this.$refs.upload.clearFiles()}},mounted:function(){},watch:{item:{handler:function(e){this.propItem=e},deep:!0}}},d=(a("4043"),a("2877")),u={components:{udfUpLoad:Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"udf"},[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.apiUrl+this.$URL.getProcInfoUploadJar,headers:{token:e.$store.state.old.admin_info.token},data:{procId:e.propItem.id},multiple:!1,accept:".jar","on-error":e.upError,"on-success":e.onSuccess,"on-change":e.changFile,limit:1,"file-list":e.fileList}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传jar包")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jar文件")])],1),t("el-table",{staticStyle:{"margin-top":"12px"},attrs:{data:e.tableData,border:"","max-height":"320"}},[t("el-table-column",{attrs:{label:"类"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{title:a.row.jarClassName,disabled:a.row.disabled,size:"mini"},model:{value:a.row.jarClassName,callback:function(t){e.$set(a.row,"jarClassName",t)},expression:"scope.row.jarClassName"}})]}}])}),t("el-table-column",{attrs:{label:"方法"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{attrs:{title:a.row.jarMethodName,disabled:a.row.disabled,size:"mini"},model:{value:a.row.jarMethodName,callback:function(t){e.$set(a.row,"jarMethodName",t)},expression:"scope.row.jarMethodName"}})]}}])}),t("el-table-column",{attrs:{width:"50",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("i",{staticClass:"el-icon-remove-outline delete",attrs:{title:"删除"},on:{click:function(t){return e.removeUdf(a)}}})]}}])})],1),t("div",{staticClass:"add_udf_out"},[t("el-button",{attrs:{type:"text"},on:{click:e.addUdf}},[e._v("+ 新增方法")])],1),e._m(0),t("el-button",{staticStyle:{padding:"9px 0px"},attrs:{loading:e.saveLoading,type:"primary"},on:{click:e.save}},[e._v("保存")])],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"tips"},[e("p",[this._v("1、上传新jar包后将自动覆盖原有类及方法。")]),e("p",[this._v("2、输入jar包内的类名，并自定义方法进行注册。")]),e("p",[this._v("3、使用方法：在sql语句中，直接使用方法名（）调用。")])])}],!1,null,null,null).exports},data:function(){return{dialogVisible:!1,activeName:"info",show_deleteItem:!1,show_addMember:!1,item:{id:"",name:""},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],desc:[{required:!0,message:"请输入项目描述",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}]},members:[],member_data:{username:""}}},methods:{init:function(e){this.item=JSON.parse(JSON.stringify(e)),this.get_member_list(),this.dialogVisible=!0,this.activeName="info"},diaClose:function(){this.$refs.udf.clearFiles()},beforeLeave:function(e){var t=this;if("删除项目"==e)return this.$confirm("确认删除 "+this.item.name+" 项目？","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){t.delete_item()})),!1},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(a)switch(e){case"item":t.edit_item();break;case"add_member":t.add_member()}}))},handleClick:function(e){"udf"==e.name&&this.$refs.udf.getData()},edit_item:function(){var e=this;this.$API.post(this.$URL.getProcInfoUpdate,{id:this.item.id,name:this.item.name,desc:this.item.desc},(function(t){0==t.code?(e.$message({message:"修改成功！",type:"success"}),e.$emit("itemManagescs"),e.dialogVisible=!1):e.$message.error(t.msg)}))},delete_item:function(){var e=this;this.$API.post(this.$URL.getProcInfoDelete,{id:this.item.id},(function(t){0==t.code?(e.dialogVisible=!1,e.$message({message:"删除成功！",type:"success"}),e.show_deleteItem=!1,e.$emit("itemManagescs","success")):e.$message.error({message:t.msg})}))},get_member_list:function(){var e=this;this.$API.get(this.$URL.getProcInfoGetProcUser+this.item.id,{},(function(t){0==t.code?e.members=t.data:e.$message.error({message:t.msg})}))},add_member:function(){var e=this;this.$API.post(this.$URL.getProcInfoSaveProcUser,{procId:this.item.id,userName:this.member_data.username},(function(t){0==t.code?(e.$message.success("添加成功"),e.get_member_list(),e.show_addMember=!1):e.$message.error({message:t.msg})}))},del_member:function(e,t){var a=this;this.$confirm("确认移除成员 "+t+" ？","提示",{confirmButtonText:"移除",cancelButtonText:"取消",type:"warning"}).then((function(){a.$API.post(a.$URL.getProcInfoDelProcUser,{procId:a.item.id,userId:e},(function(e){0==e.code?(a.$message.success("移除成功"),a.get_member_list()):a.$message.error({message:e.msg})}))}))}},mounted:function(){}},f=(a("e326"),Object(d.a)(u,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"}},[t("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:" 管理",width:"800px !important",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.diaClose}},[t("el-tabs",{staticStyle:{height:"500px"},attrs:{"tab-position":"left","before-leave":e.beforeLeave},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"基本信息",name:"info"}},[t("el-form",{ref:"item",staticClass:"form",attrs:{model:e.item,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"项目名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}})],1),t("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"项目描述",prop:"desc"}},[t("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"输入项目描述"},model:{value:e.item.desc,callback:function(t){e.$set(e.item,"desc",t)},expression:"item.desc"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("item")}}},[e._v("保存")])],1)],1)],1),t("el-tab-pane",{attrs:{label:"项目成员",name:"merber"}},[t("el-button",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.member_data.username="",e.show_addMember=!0}}},[e._v("\n        添加成员\n        ")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.members,height:"458px",border:""}},[t("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),t("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"danger",disabled:e.$store.state.old.admin_info.userId==a.row.user_id,plain:""},on:{click:function(t){return e.del_member(a.row.user_id,a.row.username)}}},[e._v("\n                移除成员\n              ")])]}}])})],1)],1),t("el-tab-pane",{attrs:{label:"UDF函数",name:"udf"}},[t("udf-up-load",{ref:"udf",attrs:{item:e.item}})],1),t("el-tab-pane",{staticClass:"delete",attrs:{name:"删除项目",label:"删除项目"}})],1)],1),t("el-dialog",{attrs:{title:"新增项目成员",visible:e.show_addMember},on:{"update:visible":function(t){e.show_addMember=t}}},[t("el-form",{ref:"add_member",staticClass:"form",attrs:{model:e.member_data,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("add_member")}},model:{value:e.member_data.username,callback:function(t){e.$set(e.member_data,"username",t)},expression:"member_data.username"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("add_member")}}},[e._v("添加")])],1)],1)],1)],1)}),[],!1,null,null,null));t.a=f.exports},a221:function(e,t,a){var o=a("6fc3");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("da9e3d3a",o,!0,{sourceMap:!1,shadowMode:!1})},a2f5:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,'.primary-color[data-v-d34659e6]{color:#1740dc}.success-color[data-v-d34659e6]{color:#52c41a}.warning-color[data-v-d34659e6]{color:#faad14}.error-color[data-v-d34659e6]{color:#f5222d}.info-color[data-v-d34659e6]{color:#909399}.border-color[data-v-d34659e6]{border:1px solid #e5e6e9}.editor-div[data-v-d34659e6]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}.editor-div button[data-v-d34659e6]{cursor:pointer}.title-required[data-v-d34659e6]:before{content:"*";color:#f56c6c;margin-right:4px}',""])},a564:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_main_index .el-tabs.el-tabs--card.el-tabs--top{height:100%}.data_process_task_main_index .el-tabs.el-tabs--card.el-tabs--top .el-tabs__content{height:calc(100% - 56px)}.data_process_task_main_index .el-tabs.el-tabs--card.el-tabs--top .el-tabs__content .el-tab-pane{height:100%}.data_process_task_main_index .el-tabs--card>.el-tabs__header .el-tabs__nav{border-top:none}",""])},a5d3:function(e,t,a){"use strict";t.a=function e(t,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children",r=null;if(t){for(var n in t){if(null!==r)break;if(t[n][o]==a){r=t[n];break}t[n][i]&&(r=e(t[n][i],a,o,i))}return r}}},a5ec:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-255f726a]{color:#1740dc}.success-color[data-v-255f726a]{color:#52c41a}.warning-color[data-v-255f726a]{color:#faad14}.error-color[data-v-255f726a]{color:#f5222d}.info-color[data-v-255f726a]{color:#909399}.border-color[data-v-255f726a]{border:1px solid #e5e6e9}.data_process_task_shell[data-v-255f726a]{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex}.data_process_task_shell .left[data-v-255f726a]{height:100%;-webkit-box-flex:1;-ms-flex:1;flex:1;overflow-x:auto;overflow-y:hidden}.data_process_task_shell .left .ctr[data-v-255f726a]{line-height:30px;height:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline}.data_process_task_shell .left .form_content[data-v-255f726a]{overflow:auto;height:calc(100% - 60px);width:100%}.data_process_task_shell .left .form_content .page-modal[data-v-255f726a]{background:rgba(0,0,0,.3);height:calc(100vh - 200px);width:calc(100% - 40px);position:absolute;top:42px;z-index:10}.data_process_task_shell .left .title[data-v-255f726a]{background:#fff;padding-left:8px;border-left:3px solid #1740dc;margin:10px 0;height:16px;line-height:16px;color:#040c2c;font-weight:600}.data_process_task_shell .left .code_out[data-v-255f726a]{margin-top:18px}.data_process_task_shell .right[data-v-255f726a]{width:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:12px}.data_process_task_shell .right .attribute[data-v-255f726a]{text-align:center;color:#666;font-size:12px;cursor:pointer;padding:12px 5px;width:30px;background:#e9e9eb;border:1px solid #e5e6e9}.data_process_task_shell .right .attribute[data-v-255f726a]:hover{color:#1740dc}",""])},ad7f:function(e,t,a){var o=a("23e7");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("594c87b6",o,!0,{sourceMap:!1,shadowMode:!1})},ae22:function(e,t,a){"use strict";a("5c38")},aec9:function(e,t,a){"use strict";a("c6c0")},af92:function(e,t,a){"use strict";a("ddcd")},b2ca:function(e,t,a){var o=a("2bca");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("59281037",o,!0,{sourceMap:!1,shadowMode:!1})},b2fe:function(e,t,a){var o=a("a564");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("5a40e1c7",o,!0,{sourceMap:!1,shadowMode:!1})},b39a:function(e,t,a){var o=a("d3f4");e.exports=function(e,t){if(!o(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},b3d5:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,'.primary-color[data-v-3d3a7864]{color:#1740dc}.success-color[data-v-3d3a7864]{color:#52c41a}.warning-color[data-v-3d3a7864]{color:#faad14}.error-color[data-v-3d3a7864]{color:#f5222d}.info-color[data-v-3d3a7864]{color:#909399}.border-color[data-v-3d3a7864]{border:1px solid #e5e6e9}.editor-div[data-v-3d3a7864]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}.editor-div button[data-v-3d3a7864]{cursor:pointer}.title-required[data-v-3d3a7864]:before{content:"*";color:#f56c6c;margin-right:4px}',""])},b586:function(e,t,a){"use strict";a("39db")},b7e8:function(e,t,a){"use strict";a("b84d")},b84d:function(e,t,a){var o=a("e787");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("4b666adb",o,!0,{sourceMap:!1,shadowMode:!1})},b8e9:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-81b3efae]{color:#1740dc}.success-color[data-v-81b3efae]{color:#52c41a}.warning-color[data-v-81b3efae]{color:#faad14}.error-color[data-v-81b3efae]{color:#f5222d}.info-color[data-v-81b3efae]{color:#909399}.border-color[data-v-81b3efae]{border:1px solid #e5e6e9}.data_process_task_output[data-v-81b3efae],.dataDev[data-v-81b3efae]{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex}.data_process_task_output .left[data-v-81b3efae],.dataDev .left[data-v-81b3efae]{height:100%;-webkit-box-flex:1;-ms-flex:1;flex:1;overflow-x:auto;overflow-y:hidden}.data_process_task_output .left .page-modal[data-v-81b3efae],.dataDev .left .page-modal[data-v-81b3efae]{background:rgba(0,0,0,.3);height:calc(100vh - 200px);width:calc(100% - 40px);position:absolute;top:42px;z-index:10}.data_process_task_output .left .ctr[data-v-81b3efae],.dataDev .left .ctr[data-v-81b3efae]{line-height:30px;height:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;margin-top:10px}.data_process_task_output .left .form_content[data-v-81b3efae],.dataDev .left .form_content[data-v-81b3efae]{overflow:auto;position:relative;height:calc(100% - 68px)}.data_process_task_output .left .title[data-v-81b3efae],.dataDev .left .title[data-v-81b3efae]{background:#fff;padding-left:8px;border-left:3px solid #1740dc;margin:10px 0;height:16px;line-height:16px;color:#040c2c;font-weight:600}.data_process_task_output .left .code_out[data-v-81b3efae],.dataDev .left .code_out[data-v-81b3efae]{width:100%;position:absolute;top:-5px}.data_process_task_output .right[data-v-81b3efae],.dataDev .right[data-v-81b3efae]{width:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:transparent;margin-left:12px}.data_process_task_output .right .attribute[data-v-81b3efae],.dataDev .right .attribute[data-v-81b3efae]{text-align:center;color:#666;font-size:12px;cursor:pointer;padding:12px 5px;width:30px;background:#e9e9eb;border:1px solid #e5e6e9}.data_process_task_output .right .attribute[data-v-81b3efae]:hover,.dataDev .right .attribute[data-v-81b3efae]:hover{color:#1740dc}",""])},b8fa:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"g",(function(){return u})),a.d(t,"h",(function(){return f})),a.d(t,"e",(function(){return p}));var o=a("2b0e"),i=a("f33f"),r=a("847b"),n=function(e){return o.default.http.post(i.a.getTransferList,e)},s=function(e){return o.default.http.get(i.a.getProjectList+"?type=".concat(e))},l=function(e){return o.default.http.get(r.a.getOfflineList+"/"+e)},c=function(e){return o.default.http.get(r.a.realTimeTaskList+"?procId="+e)},d=function(){return o.default.http.get(i.a.getServerList)},u=function(){return o.default.http.get(i.a.getTransferPerson)},f=function(e){return o.default.http.post(i.a.saveTransferData,e)},p=function(e){return o.default.http.get(i.a.transferDetail+"/"+e)}},bcd8:function(e,t,a){"use strict";a("2744")},bee4:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,'.primary-color[data-v-222349b3]{color:#1740dc}.success-color[data-v-222349b3]{color:#52c41a}.warning-color[data-v-222349b3]{color:#faad14}.error-color[data-v-222349b3]{color:#f5222d}.info-color[data-v-222349b3]{color:#909399}.border-color[data-v-222349b3]{border:1px solid #e5e6e9}.form-title[data-v-222349b3]:before{display:inline-block;content:"";height:10px;width:2px;background-color:#0e77d1;margin-right:5px}.form-title[data-v-222349b3]{margin-bottom:15px}.title-required[data-v-222349b3]:before{content:"*";color:#f56c6c;margin-right:4px}.editor-div[data-v-222349b3]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}.editor-div button[data-v-222349b3]{cursor:pointer}',""])},bf69:function(e,t,a){"use strict";a("92ce8")},bfe5:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-009710ad]{color:#1740dc}.success-color[data-v-009710ad]{color:#52c41a}.warning-color[data-v-009710ad]{color:#faad14}.error-color[data-v-009710ad]{color:#f5222d}.info-color[data-v-009710ad]{color:#909399}.border-color[data-v-009710ad]{border:1px solid #e5e6e9}#edit_menu[data-v-009710ad]{position:fixed;padding:12px 0;line-height:2.4;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);background:#fff;color:#040c2c;z-index:2;outline:none}#edit_menu li[data-v-009710ad]{padding:0 20px;font-size:12px;cursor:pointer}#edit_menu li[data-v-009710ad]:hover{color:#1740dc;background:#f2f3f4}",""])},c26b:function(e,t,a){"use strict";var o=a("86cc").f,i=a("2aeb"),r=a("dcbc"),n=a("9b43"),s=a("f605"),l=a("4a59"),c=a("01f9"),d=a("d53b"),u=a("7a56"),f=a("9e1e"),p=a("67ab").fastKey,m=a("b39a"),h=f?"_s":"size",b=function(e,t){var a,o=p(t);if("F"!==o)return e._i[o];for(a=e._f;a;a=a.n)if(a.k==t)return a};e.exports={getConstructor:function(e,t,a,c){var d=e((function(e,o){s(e,d,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[h]=0,null!=o&&l(o,a,e[c],e)}));return r(d.prototype,{clear:function(){for(var e=m(this,t),a=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete a[o.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var a=m(this,t),o=b(a,e);if(o){var i=o.n,r=o.p;delete a._i[o.i],o.r=!0,r&&(r.n=i),i&&(i.p=r),a._f==o&&(a._f=i),a._l==o&&(a._l=r),a[h]--}return!!o},forEach:function(e){m(this,t);for(var a,o=n(e,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(o(a.v,a.k,this);a&&a.r;)a=a.p},has:function(e){return!!b(m(this,t),e)}}),f&&o(d.prototype,"size",{get:function(){return m(this,t)[h]}}),d},def:function(e,t,a){var o,i,r=b(e,t);return r?r.v=a:(e._l=r={i:i=p(t,!0),k:t,v:a,p:o=e._l,n:void 0,r:!1},e._f||(e._f=r),o&&(o.n=r),e[h]++,"F"!==i&&(e._i[i]=r)),e},getEntry:b,setStrong:function(e,t,a){c(e,t,(function(e,a){this._t=m(e,t),this._k=a,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?d(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,d(1))}),a?"entries":"values",!a,!0),u(t)}}},c2a4:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.process_algo_attribute .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}.process_algo_attribute .section{padding:10px 12px}.process_algo_attribute .el-form-item--small.el-form-item{margin-bottom:10px}",""])},c423:function(e,t,a){"use strict";a("1fd1")},c50a:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-b52fdb76]{color:#1740dc}.success-color[data-v-b52fdb76]{color:#52c41a}.warning-color[data-v-b52fdb76]{color:#faad14}.error-color[data-v-b52fdb76]{color:#f5222d}.info-color[data-v-b52fdb76]{color:#909399}.border-color[data-v-b52fdb76]{border:1px solid #e5e6e9}.data_process_task_index[data-v-b52fdb76]{height:calc(100% - 22px);position:relative}.data_process_task_index .active[data-v-b52fdb76]{color:#1740dc}",""])},c5d8:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.realtime_task_history .section{padding-left:10px;padding-top:10px}.realtime_task_history .section .infinite-list{padding:10px;background:#e5e6e9;margin-top:8px;overflow:auto}.realtime_task_history .section .infinite-list li{line-height:28px;font-size:12px;color:#040c2c}.realtime_task_history .section .infinite-list li .time{margin-right:4px}",""])},c6a2:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_realtime_task_job_srteam .drag_model{position:fixed;top:0;left:0;z-index:9999;background:rgba(135,182,235,.904);padding:6px 10px;border-radius:4px;color:khaki}",""])},c6c0:function(e,t,a){var o=a("90f8");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("1ae5afe6",o,!0,{sourceMap:!1,shadowMode:!1})},c73d:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_checkTask .el-select{display:block}.data_process_task_checkTask .ds_dialog .el-dialog{margin-top:5vh!important;overflow:hidden;height:90vh;width:90%!important}.data_process_task_checkTask .ds_dialog .el-dialog .edit{height:calc(90vh - 150px)}.data_process_task_checkTask .el-drawer__body{overflow:auto}.data_process_task_checkTask .upstreamNode .el-form-item__content{display:-webkit-box;display:-ms-flexbox;display:flex}.data_process_task_checkTask .upstreamNode .el-form-item__content .el-select{margin-right:5px}",""])},c76e:function(e,t,a){"use strict";a("021d")},ca24:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}",""])},ca9f:function(e,t,a){"use strict";a("111b")},cce5:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_output .vue-codemirror{border:none!important}.data_process_task_output .form_content{height:calc(100vh - 320px)}.data_process_task_output .el-drawer__body{overflow:auto;padding-bottom:4px}",""])},ce9a:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}[data-v-flink] .el-button--small,[data-v-flink] .el-button--text{padding:4px!important}[data-v-kafka] .el-form-item__label{padding:0}.el-form-item__error{position:relative!important}",""])},cefb:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-75d37642]{color:#1740dc}.success-color[data-v-75d37642]{color:#52c41a}.warning-color[data-v-75d37642]{color:#faad14}.error-color[data-v-75d37642]{color:#f5222d}.info-color[data-v-75d37642]{color:#909399}.border-color[data-v-75d37642]{border:1px solid #e5e6e9}.task_log_log_info[data-v-75d37642]{height:100%}.task_log_log_info .go-back[data-v-75d37642]{float:right;font-size:12px}.task_log_log_info .go-back .back-btn[data-v-75d37642]{padding-left:5px;text-decoration:underline;cursor:pointer;color:#4566e3}.task_log_log_info .top-detail[data-v-75d37642]{height:82px;padding:15px 0 0 26px;text-align:left}.task_log_log_info .top-detail .name[data-v-75d37642]{line-height:18px;margin-bottom:10px}.task_log_log_info .top-detail .name .sub-title[data-v-75d37642]{font-size:18px;color:#040c2c}.task_log_log_info .top-detail .name .status[data-v-75d37642]{padding:2px 6px;line-height:18px;margin-left:5px;color:#1890ff;font-size:12px;border:1px solid #1890ff;border-radius:2px}.task_log_log_info .top-detail .status-detail[data-v-75d37642]{font-size:12px;color:rgba(4,12,44,.65)}.task_log_log_info .top-detail .status-detail>span[data-v-75d37642]{margin-right:20px}.task_log_log_info .top-detail .status-detail>span .error-status[data-v-75d37642]{padding:2px 6px;margin-left:5px;color:#faae14;font-size:12px;border:1px solid #faae14;border-radius:2px}.task_log_log_info .log-content .drag-handle[data-v-75d37642]{width:10px}.task_log_log_info .log-content .left[data-v-75d37642]{border:1px solid #e5e6e9;border-right:none}.task_log_log_info .log-content .right[data-v-75d37642]{border:1px solid #e5e6e9}.task_log_log_info .log-content .right .clearfix[data-v-75d37642]{width:100%}.task_log_log_info .log-content .right .log-title[data-v-75d37642]{width:100%;text-align:center;font-size:14px;color:rgba(4,12,44,.85);padding:0 0 15px}.task_log_log_info .show-log[data-v-75d37642]{word-break:keep-all}.task_log_log_info .drag-zone[data-v-75d37642]{margin-top:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:stretch;-ms-flex-pack:stretch;justify-content:stretch;height:calc(100% - 130px)}.task_log_log_info .drag-zone .drag-content[data-v-75d37642]{border-radius:3px}.task_log_log_info .drag-zone .drag-content.left[data-v-75d37642]{min-width:200px;max-width:1200px}.task_log_log_info .drag-zone .drag-content.left .fd[data-v-75d37642]{width:100%}.task_log_log_info .drag-zone .drag-content.right[data-v-75d37642]{-webkit-box-flex:1;-ms-flex:1;flex:1}.task_log_log_info .drag-zone .drag-content.right .hd[data-v-75d37642]{width:100%}.task_log_log_info .left[data-v-75d37642]{width:35%;border:1px solid #e5e6e9;position:relative}.task_log_log_info .left .return[data-v-75d37642]{position:absolute;top:0;left:0}.task_log_log_info .right[data-v-75d37642]{float:right;width:65%;height:100%;overflow:auto;border:1px solid #e5e6e9}.task_log_log_info .right .ft[data-v-75d37642]{text-align:left;display:-webkit-box;display:-ms-flexbox;display:flex;padding:0;margin-bottom:10px;font-size:14px}.task_log_log_info .right .ft .info_ul[data-v-75d37642]{margin-bottom:22px}.task_log_log_info .right .ft .info_ul .error-status[data-v-75d37642]{padding:2px 6px;margin-left:5px;color:#faae14;font-size:12px;border:1px solid #faae14;border-radius:2px}",""])},d277:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}#tab-删除项目{color:red}.el-button--mini,.el-button--mini.is-round{padding:7px 15px!important}",""])},d4ef:function(e,t,a){var o=a("e994");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("b4a20394",o,!0,{sourceMap:!1,shadowMode:!1})},d595:function(e,t,a){var o=a("8cd2");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("04e96871",o,!0,{sourceMap:!1,shadowMode:!1})},d5f8:function(e,t,a){"use strict";t.a={"primary-color":"#1740DC","primary-color-op":"rgba(23,64,220, 0.8)","success-color":"#1890FF","warning-color":"#faad14","error-color":"#f5222d","@info-color":"#909399","sider-menu-bg":"#ffffff","sider-menu-logo-bg":"rgba(256,256,256, 0.072)","sider-menu-font-color":"#040C2C","sider-menu-selectd-bg":"#F0F1F3;","sys-menu-bgcolor":"@primary-color","sys-cell-color":"#ffffff","silder-menu-border-right":"#E5E6E9","font-info-color":"#040C2C"}},d86f:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_realtime_task_job_srteam{overflow:auto}.data_realtime_task_job_srteam .cannotEdit{color:rgba(4,12,44,.25)}.data_realtime_task_job_srteam .cannotEdit:hover{color:rgba(4,12,44,.25)!important}.data_realtime_task_job_srteam .el-tree .el-tree-node__children{overflow:visible}.data_realtime_task_job_srteam .el-tree>div.el-tree-node{margin-bottom:10px}",""])},d8ad:function(e,t,a){"use strict";var o=new(a("2b0e").default);t.a=o},d8ba:function(e,t,a){"use strict";a("6078")},d9fca:function(e,t,a){var o=a("4daa");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("56fed99a",o,!0,{sourceMap:!1,shadowMode:!1})},daa57:function(e,t,a){"use strict";a("2353")},dbff:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_index /deep/ .el-tabs--left .el-tabs__header.is-left{margin-right:0}.data_process_task_index .el-select{display:block}.data_process_task_index .out_tabs>.el-tabs__content{height:100%}.data_process_task_index .out_tabs>.el-tabs__header .el-tabs__nav-scroll{width:26px}.data_process_task_index .out_tabs>.el-tabs__header .el-tabs__nav-scroll .el-tabs__item.is-left{font-size:12px;padding:10px 6px;height:auto;line-height:20px;position:static;white-space:normal;text-align:center}.data_process_task_index .zt-drag-container .drag-content:first-child{width:250px;overflow:auto}.data_process_task_index .el-drawer.rtl{margin-top:108px;height:calc(100% - 108px)}.data_process_task_index .el-drawer.rtl:focus{outline:none}.data_process_task_index .el-drawer.rtl .el-drawer__header{padding:12px 20px;color:#040c2c;font-size:16px;margin-bottom:0;border-bottom:1px solid #e5e6e9;font-weight:600}.data_process_task_index .el-drawer.rtl .el-drawer__body{padding:20px}.data_process_task_index .left_button{position:absolute;left:0;text-align:center;top:270px;color:#666;background:#f0f1f3;border:1px solid #e5e6e9;font-size:12px;word-break:break-all;cursor:pointer;padding:12px 5px;width:24px}.data_process_task_index .el-drawer__wrapper.left_draw{top:100px;left:244px;bottom:12px}.data_process_task_index .el-drawer__wrapper.left_draw .el-drawer__header{margin-bottom:0;padding:10px;color:#040c2c;font-size:13px;font-weight:600}.data_process_task_index .el-drawer__wrapper.left_draw .el-drawer__body{height:100%;overflow:auto}.data_process_task_index .el-collapse{border:none}.data_process_task_index .el-collapse-item__header,.data_process_task_index .el-collapse-item__wrap{border-top:none;border-bottom:none}.data_process_task_index .el-tabs__item{line-height:40px;height:40px}.data_process_task_index .data_process_task_main_index .el-tab-pane{padding-left:10px}.data_process_task_index .el-tabs--card>.el-tabs__header .el-tabs__nav{border-top:none}.data_process_task_index .el-collapse-item__header{font-weight:600}",""])},dd7a:function(e,t,a){"use strict";a("2cc4")},ddcd:function(e,t,a){var o=a("21bff");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("57ed6613",o,!0,{sourceMap:!1,shadowMode:!1})},dff5:function(e,t,a){"use strict";a("d9fca")},e063:function(e,t,a){"use strict";a("90c0")},e0b8:function(e,t,a){"use strict";var o=a("7726"),i=a("5ca1"),r=a("2aba"),n=a("dcbc"),s=a("67ab"),l=a("4a59"),c=a("f605"),d=a("d3f4"),u=a("79e5"),f=a("5cc5"),p=a("7f20"),m=a("5dbc");e.exports=function(e,t,a,h,b,g){var v=o[e],y=v,_=b?"set":"add",k=y&&y.prototype,x={},w=function(e){var t=k[e];r(k,e,"delete"==e||"has"==e?function(e){return!(g&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!d(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,a){return t.call(this,0===e?0:e,a),this})};if("function"==typeof y&&(g||k.forEach&&!u((function(){(new y).entries().next()})))){var T=new y,S=T[_](g?{}:-0,1)!=T,L=u((function(){T.has(1)})),N=f((function(e){new y(e)})),I=!g&&u((function(){for(var e=new y,t=5;t--;)e[_](t,t);return!e.has(-0)}));N||((y=t((function(t,a){c(t,y,e);var o=m(new v,t,y);return null!=a&&l(a,b,o[_],o),o}))).prototype=k,k.constructor=y),(L||I)&&(w("delete"),w("has"),b&&w("get")),(I||S)&&w(_),g&&k.clear&&delete k.clear}else y=h.getConstructor(t,e,b,_),n(y.prototype,a),s.NEED=!0;return p(y,e),x[e]=y,i(i.G+i.W+i.F*(y!=v),x),g||h.setStrong(y,e,b),y}},e270:function(e,t,a){var o=a("25fa");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("1a7f2ba7",o,!0,{sourceMap:!1,shadowMode:!1})},e311:function(e,t,a){var o=a("ffb8");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("0a3e41c3",o,!0,{sourceMap:!1,shadowMode:!1})},e326:function(e,t,a){"use strict";a("f5a2")},e505:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.process_shell_attribute .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}.process_shell_attribute .header-icon{margin-left:4px;margin-top:2px}.process_shell_attribute .section{padding:10px 12px}.process_shell_attribute .cod_m_o{position:relative;margin-bottom:16px;margin-top:42px!important}.process_shell_attribute .cod_m_o .el-icon-full-screen{position:absolute;right:5px;top:-18px}.process_shell_attribute .cod_m_o .cede_editor{max-height:300px;overflow:auto}.process_shell_attribute .number{font-size:12px}.process_shell_attribute .number .el-input__inner{padding-right:0}.process_shell_attribute .add_new{width:100%;height:30px;font-size:12px;line-height:30px;color:#040c2c;text-align:center;border:1px dashed #cdced5;cursor:pointer;margin:10px 0}.process_shell_attribute .add_new:hover{border-color:#1740dc;color:#1740dc}.process_shell_attribute .el-form-item--small.el-form-item{margin-bottom:10px}",""])},e551:function(e,t,a){var o=a("ce9a");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("2cd138f7",o,!0,{sourceMap:!1,shadowMode:!1})},e57b:function(e,t,a){"use strict";a("99e2")},e5cf:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-e349b472]{color:#1740dc}.success-color[data-v-e349b472]{color:#52c41a}.warning-color[data-v-e349b472]{color:#faad14}.error-color[data-v-e349b472]{color:#f5222d}.info-color[data-v-e349b472]{color:#909399}.border-color[data-v-e349b472]{border:1px solid #e5e6e9}.task-fold .item[data-v-e349b472]{cursor:pointer}.data_realtime_task_leftbar[data-v-e349b472]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;height:100%;background:#fff;border-right:1px solid #e9e9e9;padding:10px 10px 30px 10px;overflow:auto}.data_realtime_task_leftbar[data-v-e349b472]::-webkit-scrollbar{width:7px;height:7px;border-radius:3px;background-color:transparent}.data_realtime_task_leftbar[data-v-e349b472]::-webkit-scrollbar-track{background-color:transparent}.data_realtime_task_leftbar[data-v-e349b472]::-webkit-scrollbar-thumb{border-radius:10px;background:rgba(4,12,44,.25);border-radius:3px}.data_realtime_task_leftbar[data-v-e349b472]::-webkit-scrollbar-corner{background-color:transparent}.data_realtime_task_leftbar .top[data-v-e349b472]{border-bottom:1px solid #e9e9e9;padding-bottom:15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.data_realtime_task_leftbar .top .add_root[data-v-e349b472]{background:#f0f1f3;width:24px;height:24px;text-align:center;line-height:24px;cursor:pointer}.data_realtime_task_leftbar .serch_out[data-v-e349b472]{margin:10px 0}.data_realtime_task_leftbar .title[data-v-e349b472]{color:#040c2c;font-size:13px;font-weight:600;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},e642:function(e,t,a){"use strict";a("27ab")},e6771:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-763e4d8c]{color:#1740dc}.success-color[data-v-763e4d8c]{color:#52c41a}.warning-color[data-v-763e4d8c]{color:#faad14}.error-color[data-v-763e4d8c]{color:#f5222d}.info-color[data-v-763e4d8c]{color:#909399}.border-color[data-v-763e4d8c]{border:1px solid #e5e6e9}.addNew[data-v-763e4d8c]{width:100%;height:40px;line-height:40px;color:#000;text-align:center;border:1px dashed #d9d9d9;cursor:pointer}.addNew .file[data-v-763e4d8c]{margin:0 auto;width:100px}.addNew .clearfix[data-v-763e4d8c]{padding-left:10px;padding-right:10px}.button-wrapper[data-v-763e4d8c]{padding:20px;overflow:auto}.button-wrapper .buttons[data-v-763e4d8c]{margin-top:10px!important;margin-left:10px!important;display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;background:#fff;border:1px solid #dcdfe6;color:#606266;-webkit-appearance:none;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;outline:0;margin:0;-webkit-transition:.1s;transition:.1s;font-weight:500;padding:10px 20px;font-size:12px;border-radius:3px}#edit_menu[data-v-763e4d8c]{position:fixed;padding:4px 0;line-height:2.4;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);background:#fff;color:#040c2c;z-index:2;outline:none}#edit_menu li[data-v-763e4d8c]{padding:0 20px;cursor:pointer}#edit_menu li[data-v-763e4d8c]:hover{background:#f2f3f4;color:#1740dc}",""])},e6c6:function(e,t,a){"use strict";a("2c35")},e6c7:function(e,t,a){"use strict";a("3332")},e787:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_algorithm .el-select{display:block}.data_process_task_algorithm .ds_dialog .el-dialog{margin-top:5vh!important;overflow:hidden;height:90vh;width:90%!important}.data_process_task_algorithm .ds_dialog .el-dialog .edit{height:calc(90vh - 150px)}.data_process_task_algorithm .el-drawer__body{overflow:auto}",""])},e7f9:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-5659c24a]{color:#1740dc}.success-color[data-v-5659c24a]{color:#52c41a}.warning-color[data-v-5659c24a]{color:#faad14}.error-color[data-v-5659c24a]{color:#f5222d}.info-color[data-v-5659c24a]{color:#909399}.border-color[data-v-5659c24a]{border:1px solid #e5e6e9}.data_process_task_output[data-v-5659c24a]{height:calc(100% - 28px);display:-webkit-box;display:-ms-flexbox;display:flex}.data_process_task_output .left[data-v-5659c24a]{-webkit-box-flex:1;-ms-flex:1;flex:1}.data_process_task_output .left .title[data-v-5659c24a]{background:#fff;padding-left:8px;border-left:3px solid #1740dc;margin:10px 0;height:16px;line-height:16px;color:#040c2c;font-weight:600}.data_process_task_output .left .el-button--mini.is-round[data-v-5659c24a],.data_process_task_output .left[data-v-5659c24a] .el-button--mini{padding:7px 7px!important}.data_process_task_output .left .code_out[data-v-5659c24a]{margin-top:18px}.data_process_task_output .left .is_run[data-v-5659c24a]{margin-left:18px;margin-top:3px;color:#67c23a}.data_process_task_output .right[data-v-5659c24a]{width:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:transparent;margin-left:12px}.data_process_task_output .right .attribute[data-v-5659c24a]{text-align:center;color:#666;font-size:12px;cursor:pointer;padding:12px 5px;width:30px;background:#e9e9eb;border:1px solid #e5e6e9}.data_process_task_output .right .attribute[data-v-5659c24a]:hover{color:#1740dc}.data_process_task_output #edit_menu[data-v-5659c24a]{position:fixed;padding:12px 0;line-height:2.4;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);background:#fff;color:#040c2c;z-index:2}.data_process_task_output #edit_menu li[data-v-5659c24a]{padding:0 20px;cursor:pointer}.data_process_task_output #edit_menu li[data-v-5659c24a]:hover{background:#f2f3f4;color:#1740dc}",""])},e823:function(e,t,a){var o=a("bee4");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("211156e0",o,!0,{sourceMap:!1,shadowMode:!1})},e8a7:function(e,t,a){var o=a("ea05");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("5a6a1bb8",o,!0,{sourceMap:!1,shadowMode:!1})},e994:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_job_srteam .drag_model{position:fixed;top:0;left:0;z-index:9999;background:rgba(135,182,235,.904);padding:6px 10px;border-radius:4px;color:khaki}",""])},e9b0:function(e,t,a){var o=a("0757");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("3026b125",o,!0,{sourceMap:!1,shadowMode:!1})},ea05:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.addNew-list.el-popover{width:120px;min-width:120px}.addNew-list.el-popover .source-list{width:150px}.addNew-list.el-popover .source-list .source-item{padding:0 10px;height:30px;line-height:30px;cursor:pointer}.addNew-list.el-popover .source-list .source-item:hover{background-color:#f5f7fa}",""])},ea56:function(e,t,a){"use strict";a("0d75")},eaa0:function(e,t,a){var o=a("a2f5");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("c3df63ea",o,!0,{sourceMap:!1,shadowMode:!1})},eb28:function(e,t,a){"use strict";a("b2fe")},ee2f:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.process_ds_attribute .el-collapse-item__header{background:#fff;padding-left:8px;border-left:3px solid #1740dc;height:16px;line-height:16px}.process_ds_attribute .section{padding:10px 12px}.process_ds_attribute .cod_m_o2{position:relative;margin-bottom:16px;margin-right:10px;margin-top:12px!important}.process_ds_attribute .cod_m_o2 .CodeMirror-gutter.CodeMirror-linenumbers{min-width:29px!important}.process_ds_attribute .cod_m_o2 .el-icon-full-screen{position:absolute;right:15px;top:-18px}.process_ds_attribute .cod_m_o2 .cede_editor{max-height:300px;overflow:auto}.process_ds_attribute .el-form-item--small.el-form-item{margin-bottom:10px}",""])},f022:function(e,t,a){var o=a("3981");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("58d62a16",o,!0,{sourceMap:!1,shadowMode:!1})},f03c:function(e,t,a){"use strict";a("e311")},f0e0:function(e,t,a){"use strict";a("d595")},f27d:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-5aa3db02]{color:#1740dc}.success-color[data-v-5aa3db02]{color:#52c41a}.warning-color[data-v-5aa3db02]{color:#faad14}.error-color[data-v-5aa3db02]{color:#f5222d}.info-color[data-v-5aa3db02]{color:#909399}.border-color[data-v-5aa3db02]{border:1px solid #e5e6e9}.addNew[data-v-5aa3db02]{width:100%;height:40px;line-height:40px;color:#000;text-align:center;cursor:pointer;border:1px dashed #d9d9d9}.addNew .clearfix[data-v-5aa3db02]{padding-left:10px;padding-right:10px}.button-wrapper[data-v-5aa3db02]{padding:20px;overflow:auto}.button-wrapper .buttons[data-v-5aa3db02]{margin-top:10px!important;margin-left:10px!important;display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;background:#fff;border:1px solid #dcdfe6;color:#606266;-webkit-appearance:none;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;outline:0;margin:0;-webkit-transition:.1s;transition:.1s;font-weight:500;padding:10px 20px;font-size:12px;border-radius:3px}#edit_menu[data-v-5aa3db02]{position:fixed;padding:4px 0;line-height:2.4;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);background:#fff;color:#040c2c;z-index:2;outline:none}#edit_menu li[data-v-5aa3db02]{padding:0 20px;cursor:pointer}#edit_menu li[data-v-5aa3db02]:hover{background:#f2f3f4;color:#1740dc}",""])},f400:function(e,t,a){"use strict";var o=a("c26b"),i=a("b39a");e.exports=a("e0b8")("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=o.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return o.def(i(this,"Map"),0===e?0:e,t)}},o,!0)},f5a2:function(e,t,a){var o=a("d277");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("a738242c",o,!0,{sourceMap:!1,shadowMode:!1})},f792:function(e,t,a){"use strict";a("5632")},fabf:function(e,t,a){var o=a("715d");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("aa48b18c",o,!0,{sourceMap:!1,shadowMode:!1})},fdb9:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,'.primary-color[data-v-131654c5]{color:#1740dc}.success-color[data-v-131654c5]{color:#52c41a}.warning-color[data-v-131654c5]{color:#faad14}.error-color[data-v-131654c5]{color:#f5222d}.info-color[data-v-131654c5]{color:#909399}.border-color[data-v-131654c5]{border:1px solid #e5e6e9}.form-title[data-v-131654c5]:before{display:inline-block;content:"";height:10px;width:2px;background-color:#0e77d1;margin-right:5px}.addNew[data-v-131654c5],.form-title[data-v-131654c5]{margin-bottom:15px}.addNew[data-v-131654c5]{width:100%;height:40px;line-height:40px;color:#000;text-align:center;border:1px dashed #d9d9d9}.addNew .file[data-v-131654c5]{display:inline-block;cursor:pointer}.addNew .clearfix[data-v-131654c5]{padding-left:10px;padding-right:10px}.edit-icon[data-v-131654c5]{font-size:16px;cursor:pointer}.editor-div[data-v-131654c5]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}.editor-div button[data-v-131654c5]{cursor:pointer}.el-cascader--small[data-v-131654c5],.el-select[data-v-131654c5]{width:100%!important}.el-row[data-v-131654c5]{margin-bottom:10px!important}',""])},fed4:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.resource_file_index{padding-top:10px;margin:10px;border-top:1px solid #f0f1f3}.resource_file_index .el-form .el-checkbox__label,.resource_file_index .el-form .el-form-item__label{font-size:12px}.resource_file_index .el-table th>.cell{line-height:1.2}",""])},ffb8:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.data_process_task_output.stream .page-modal{background:rgba(0,0,0,.3);height:calc(100vh - 200px);width:calc(100% - 40px);position:absolute;top:28px;z-index:10}.data_process_task_output.stream .tips{padding:0 10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:12px}.data_process_task_output.stream .vue-codemirror{border:none!important}.data_process_task_output.stream .el-drawer.rtl{margin:0;height:100%}.data_process_task_output.stream .el-drawer__body{overflow:auto;padding-bottom:4px}",""])}}]);