(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b94dba88"],{3586:function(t,e,n){var a=n("ea3e");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n("499e").default)("0db0c350",a,!0,{sourceMap:!1,shadowMode:!1})},a6ee:function(t,e,n){"use strict";n("3586")},cb29:function(t,e,n){"use strict";n.d(e,"M",(function(){return i})),n.d(e,"L",(function(){return o})),n.d(e,"s",(function(){return u})),n.d(e,"W",(function(){return c})),n.d(e,"w",(function(){return s})),n.d(e,"x",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"t",(function(){return p})),n.d(e,"V",(function(){return f})),n.d(e,"B",(function(){return h})),n.d(e,"C",(function(){return g})),n.d(e,"k",(function(){return b})),n.d(e,"Z",(function(){return m})),n.d(e,"ab",(function(){return v})),n.d(e,"r",(function(){return y})),n.d(e,"y",(function(){return x})),n.d(e,"l",(function(){return w})),n.d(e,"G",(function(){return I})),n.d(e,"O",(function(){return L})),n.d(e,"N",(function(){return T})),n.d(e,"d",(function(){return k})),n.d(e,"E",(function(){return R})),n.d(e,"f",(function(){return C})),n.d(e,"fb",(function(){return _})),n.d(e,"A",(function(){return j})),n.d(e,"X",(function(){return B})),n.d(e,"Y",(function(){return D})),n.d(e,"z",(function(){return O})),n.d(e,"db",(function(){return U})),n.d(e,"K",(function(){return q})),n.d(e,"h",(function(){return z})),n.d(e,"g",(function(){return S})),n.d(e,"F",(function(){return M})),n.d(e,"u",(function(){return N})),n.d(e,"p",(function(){return V})),n.d(e,"q",(function(){return A})),n.d(e,"P",(function(){return F})),n.d(e,"I",(function(){return P})),n.d(e,"J",(function(){return E})),n.d(e,"e",(function(){return Q})),n.d(e,"D",(function(){return $})),n.d(e,"H",(function(){return H})),n.d(e,"a",(function(){return J})),n.d(e,"gb",(function(){return G})),n.d(e,"eb",(function(){return K})),n.d(e,"bb",(function(){return W})),n.d(e,"cb",(function(){return X})),n.d(e,"b",(function(){return Y})),n.d(e,"i",(function(){return Z})),n.d(e,"Q",(function(){return tt})),n.d(e,"m",(function(){return et})),n.d(e,"v",(function(){return nt})),n.d(e,"c",(function(){return at})),n.d(e,"T",(function(){return rt})),n.d(e,"U",(function(){return it})),n.d(e,"R",(function(){return ot})),n.d(e,"S",(function(){return ut})),n.d(e,"o",(function(){return ct})),n.d(e,"n",(function(){return st}));var a=n("2b0e"),r=n("fedb"),i=function(){return a.default.http.get(r.a.getRuleCreateUserList)},o=function(t){return a.default.http.post(r.a.getRuleDetailCreateUserListNew,t)},u=function(t){return a.default.http.post(r.a.getQualityInfoList,t)},c=function(t){return a.default.http.get(r.a.qualityRuleDeleteAll+"?qualityInfoId=".concat(t.qualityInfoId))},s=function(t){return a.default.http.get(r.a.getRuleDataSourceList+"?typeId=".concat(t.typeId))},l=function(){return a.default.http.get(r.a.getRuleDataSourceList)},d=function(){return a.default.http.get(r.a.getDatasourceTypeList)},p=function(t){return a.default.http.post(r.a.getQualityRuleList,t)},f=function(t){return a.default.http.get(r.a.qualityRuleDelete+"?ruleId=".concat(t.ruleId))},h=function(t){return a.default.http.get(r.a.getRuleTabelList+"?connectId=".concat(t.connectId,"&databaseName=").concat(t.databaseName))},g=function(t){return a.default.http.get(r.a.getRuleTemplateList+"?ruleType=".concat(t.ruleType))},b=function(t){return a.default.http.post(r.a.getFieldList,t)},m=function(t){return a.default.http.post(r.a.qualityRuleSave,t)},v=function(t){return a.default.http.post(r.a.qualityRuleVerify,t)},y=function(t){return a.default.http.post(r.a.getPartitionList,t)},x=function(t){return a.default.http.get(r.a.getRuleDetail+"?ruleId=".concat(t.ruleId))},w=function(t){return a.default.http.post(r.a.getListByDbAndConnent,t)},I=function(t){return a.default.http.get(r.a.getTableQualitys,{params:t})},L=function(t){return a.default.http.post(r.a.getlistTableQualitySumCount,t)},T=function(t){return a.default.http.post(r.a.getlistTableQualityCharts,t)},k=function(t){return a.default.http.post(r.a.downLoadRuleReport,t,{responseType:"arraybuffer"})},R=function(t){return a.default.http.get(r.a.getSubscribeInfo,{params:t})},C=function(){return a.default.http.get(r.a.getAllUsers)},_=function(t){return a.default.http.post(r.a.updateSubscribeInfo,t)},j=function(){return a.default.http.get(r.a.getRuleProjectList)},B=function(t){return a.default.http.get(r.a.qualityRuleJobList+"?procId=".concat(t.procId))},D=function(t){return a.default.http.get(r.a.qualityRuleNodeList+"?jobId=".concat(t.jobId))},O=function(t){return a.default.http.post(r.a.getRuleJobList,t)},U=function(t){return a.default.http.post(r.a.saveBatchAdd,t)},q=function(){return a.default.http.get(r.a.getUserProjectList)},z=function(){return a.default.http.get(r.a.getCategoryList)},S=function(t){return a.default.http.get(r.a.getAssetCategoryList+"?categoryId=".concat(t.categoryId))},M=function(t){return a.default.http.get(r.a.getTableQualityScore+"?procId=".concat(t.procId))},N=function(t){return a.default.http.post(r.a.getQualityScoreHistoryList,t)},V=function(t){return a.default.http.post(r.a.getPageExceptionTopList,t)},A=function(t){return a.default.http.post(r.a.getPageScoreTopList,t)},F=function(t){return a.default.http.post(r.a.immediateExecution+"".concat(t.ruleId))},P=function(t){return a.default.http.get(r.a.getTodayAvgScoreAndRatio+"?assetId=".concat(t.assetId))},E=function(t){return a.default.http.post(r.a.getTrendList,t)},Q=function(t){return a.default.http.post(r.a.getAlarmRank,t)},$=function(t){return a.default.http.post(r.a.getScoreRank,t)},H=function(t){return a.default.http.post(r.a.getTemplateList,t)},J=function(t){return a.default.http.post(r.a.addTemplate,t)},G=function(t){return a.default.http.post(r.a.updateTemplate,t)},K=function(t){return a.default.http.get(r.a.templateDetail+"?id=".concat(t.id))},W=function(t){return a.default.http.post(r.a.ruleAppList,t)},X=function(t){return a.default.http.post(r.a.ruleLogList,t)},Y=function(t){return a.default.http.post(r.a.delTemplate+"?id=".concat(t.id))},Z=function(t){return a.default.http.get(r.a.getCreatePerList)},tt=function(t){return a.default.http.get(r.a.monitorDetail+t.monitorId)},et=function(t){return a.default.http.get(r.a.getMonitorCreatePerList)},nt=function(t){return a.default.http.get(r.a.getRuleCreatePerList)},at=function(t){return a.default.http.post(r.a.deleteMonitorRule+t.id)},rt=function(t){return a.default.http.post(r.a.monitorRelRuleList,t)},it=function(t){return a.default.http.post(r.a.monitorlogList,t)},ot=function(t){return a.default.http.post(r.a.monitorHistoryList,t)},ut=function(t){return a.default.http.get(r.a.monitorHistoryResultList+t.id)},ct=function(t){return a.default.http.post(r.a.getNotificationUser,t)},st=function(){return a.default.http.get(r.a.getMonitorObjectList)}},ea3e:function(t,e,n){(t.exports=n("2350")(!1)).push([t.i,'.primary-color[data-v-38560952]{color:#1740dc}.success-color[data-v-38560952]{color:#52c41a}.warning-color[data-v-38560952]{color:#faad14}.error-color[data-v-38560952]{color:#f5222d}.info-color[data-v-38560952]{color:#909399}.border-color[data-v-38560952]{border:1px solid #e5e6e9}.bar[data-v-38560952]{width:100%;height:300px}.item-wrapper[data-v-38560952]{width:31%;height:330px;margin-top:40px;border:1px solid #f0f1f3}.back-to-list[data-v-38560952]{float:left;cursor:pointer}.header-title[data-v-38560952]{text-align:center}.header-detail[data-v-38560952]{padding:10px 20px;line-height:40px;border-bottom:1px solid #ccc}.content-header[data-v-38560952]:before{content:"";height:20px;width:5px;background-color:#00f;display:inline-block;vertical-align:bottom;margin-right:6px}.content-header[data-v-38560952]{font-size:16px;font-weight:500;line-height:20px}div.active[data-v-report][data-v-38560952]{border-color:#1740dc;color:#1740dc}div.active[data-v-report][data-v-38560952] .el-input__inner{border-color:#1740dc!important}div[data-v-report][data-v-38560952]{display:inline-block}span[data-v-report][data-v-38560952]{padding:2px 16px 2px 16px;border:1px solid #ccc;border-radius:5px;color:rgba(0,0,0,.64705882);font-size:14px;margin-right:5px;cursor:pointer}span[data-v-report].active[data-v-38560952]{border-color:#1740dc;color:#1740dc}.right-choice[data-v-38560952]{text-align:right;margin-top:20px;margin-right:10px}.charts-wrapper[data-v-38560952]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-ms-flex-wrap:wrap;flex-wrap:wrap}.charts-wrapper .noData[data-v-38560952]{height:80px;line-height:80px;color:#909399}.icon-ic_download[data-v-38560952]{font-size:16px;cursor:pointer}.charts-title[data-v-38560952]{font-size:16px;font-weight:500;position:relative;line-height:38px;padding:0 20px;color:#040c2c;border-bottom:1px solid #f0f1f3;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.charts-title .el-button--text[data-v-38560952]{position:absolute;right:0;font-size:20px}',""])},f108:function(t,e,n){"use strict";n.r(e);n("7f7f"),n("ac6a"),n("96cf");var a,r,i,o=n("1da1"),u=n("cb29"),c=n("313e"),s=n.n(c),l=n("a8ed"),d={range:0,week:1,month:2},p={1:"固定值",2:"波动率"},f={mixins:[l.a],components:{},data:function(){return{options:[{label:"B",value:"B"},{label:"KB",value:"KB"},{label:"MB",value:"MB"},{label:"GB",value:"GB"}],dataInfo:{},type:"week",startTime:"",tableIds:[],cacheData:[],pageOption:{page:1,limit:10,totalCount:0}}},computed:{tableId:function(){var t;return this.$route.query.tableId?this.$route.query.tableId:(t="",t)}},methods:{getList:(i=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,a,r,i,o,c,s,l,p=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n="range"===this.type&&this.startTime[0]||"",a="range"===this.type&&this.startTime[1]||"",r={dateType:d[this.type],startTime:n,endTime:a,qualityInfoId:this.tableId,page:this.pageOption.page,limit:this.pageOption.limit},t.prev=3,t.next=6,Object(u.N)(r);case 6:i=t.sent,o=i.data.page,this.tableIds=o.list||[],c=o.pageSize,s=o.totalCount,l=o.currPage,this.pageOption={limit:c,totalCount:s,page:l},this.$nextTick((function(){o.list.forEach((function(t){t.isChangeUnit&&(p.$set(t,"changeUnit","B"),t.staticsLists.forEach((function(t){t.statisticValueB=t.statisticValue,t.statisticValueKB=parseFloat((t.statisticValue/1024).toFixed(2)),t.statisticValueMB=parseFloat((t.statisticValue/1024/1024).toFixed(2)),t.statisticValueGB=parseFloat((t.statisticValue/1024/1024/1024).toFixed(2))}))),e.drawChart(t,"")})),p.cacheData=o.list})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3);case 17:case"end":return t.stop()}}),t,this,[[3,14]])}))),function(){return i.apply(this,arguments)}),changeUnit:function(t){this.drawChart(this.cacheData[t],this.cacheData[t].changeUnit)},drawChart:function(t,e){var n=s.a.init(document.getElementById(t.ruleId)),a=[],r=[];t.staticsLists.forEach((function(t){a.push(t["statisticValue"+e]||0),r.push(t.statisticDate||0)})),n.setOption({tooltip:{trigger:"axis",formatter:function(e){var n="";return n+=e[0].name+"</br>",n+=p[t.compareType]+e[0].value+"".concat(2===t.compareType?"%":"","</br>")}},legend:{data:[p[t.compareType]],top:0,right:0},color:["#5B8FF9"],grid:{top:40,bottom:20,left:20,right:20,containLabel:!0},xAxis:[{type:"category",data:r}],yAxis:[{type:"value",name:p[t.compareType],axisLabel:{show:!0,interval:"auto",formatter:function(e,n){return"".concat(e).concat(2===t.compareType?"%":"")}}}],series:[{name:p[t.compareType],type:"bar",barMaxWidth:20,itemStyle:{normal:{label:{}}},data:a}]}),window.addEventListener("resize",(function(){n.resize()}))},download:(r=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,a,r,i,o,c,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="range"===this.type&&this.startTime[0]||"",a="range"===this.type&&this.startTime[1]||"",r={dateType:d[this.type],startTime:n,endTime:a,qualityInfoId:this.tableId,ruleId:e.ruleId},t.next=4,Object(u.d)(r);case 4:i=t.sent,o=new Blob([i.data],{type:"text/json;charset=utf-8"}),c=window.URL.createObjectURL(o),(s=document.createElement("a")).download=i.headers.filename,s.href=c,s.click();case 11:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),getRulesTableList:(a=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,a,r,i,o,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:"",n=c.length>1&&void 0!==c[1]?c[1]:"",a=c.length>2&&void 0!==c[2]?c[2]:"",r={connectId:e,databaseName:n,tableName:a},t.next=6,Object(u.l)(r);case 6:i=t.sent,(o=i.data).data.length&&(this.tableId=o.data[0].id,this.getList());case 9:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},mounted:function(){var t=this.$route.query,e=t.connectId,n=t.dbName,a=t.tableName,r=t.tableId;e&&this.getRulesTableList(e,n,a),r&&(this.tableId=r)},watch:{type:function(t){this.getList()},startTime:function(t){"range"===this.type&&this.getList()},$route:{handler:function(t,e){"/ruleView"==t.path&&this.getList()},immediate:!0}}},h=(n("a6ee"),n("2877")),g=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ruleView"},[e("div",{staticClass:"header-detail"},[e("div",{staticClass:"back-to-list",on:{click:function(e){return t.$router.push("dataQuality/qualityReport")}}},[e("i",{staticClass:"el-icon-back"}),t._v("返回列表\n    ")]),e("h2",{staticClass:"header-title"},[t._v("表"+t._s(t.$route.query.tableName)+"的质量概览")])]),e("div",{staticClass:"main-content"},[e("div",{staticClass:"wrap"},[e("div",{staticClass:"right-choice"},[e("span",{class:["week"===t.type?"active":""],attrs:{"data-v-report":""},on:{click:function(e){t.type="week"}}},[t._v("本周")]),e("span",{class:["month"===t.type?"active":""],attrs:{"data-v-report":""},on:{click:function(e){t.type="month"}}},[t._v("本月")]),e("div",{class:["range"===t.type?"active":""],attrs:{"data-v-report":""}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,size:"mini"},on:{change:function(e){t.type="range"}},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1)]),e("div",{staticClass:"charts-wrapper"},[t._l(t.tableIds,(function(n,a){return e("div",{key:n.ruleId,staticClass:"item-wrapper"},[e("div",{staticClass:"charts-title"},[t._v("\n            "+t._s(n.ruleName)+"\n            "),n.isChangeUnit?e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:"请选择"},on:{change:function(e){return t.changeUnit(a)}},model:{value:n.changeUnit,callback:function(e){t.$set(n,"changeUnit",e)},expression:"item.changeUnit"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),n.isDownload?e("i",{staticClass:"icon icon-ic_download",on:{click:function(e){return t.download(n)}}}):t._e()],1),e("div",{staticClass:"bar",attrs:{id:n.ruleId}})])})),t.tableIds.length?t._e():e("div",{staticClass:"noData"},[t._v("暂无数据")])],2),e("el-pagination",{attrs:{"current-page":t.pageOption.page,"page-sizes":[10,20,50,100],"page-size":t.pageOption.limit,total:t.pageOption.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1)])])}),[],!1,null,"38560952",null);e.default=g.exports}}]);