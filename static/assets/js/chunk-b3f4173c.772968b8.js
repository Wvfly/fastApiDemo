(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b3f4173c","chunk-74af32dc"],{"0037":function(t,e,r){"use strict";r("7f7f"),r("6762"),r("2fdb");var n=r("d8ad"),a=function(t,e,r){return e.trim()?e.includes(" ")?r(new Error("部门名称不允许带有空格")):void r():r(new Error("请输入部门名称"))},i={data:function(){return{isFirstDepartment:!0,isReName:!1,dialogVisible:!1,dePartmentTreeData:"",defaultProps:{checkStrictly:!0,label:"name",value:"id"},parentId:"",form:{parentDepartment:"",departmentName:""},rules:{departmentName:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:2,max:20,message:"长度在2-20字符",trigger:"blur"},{validator:a,trigger:"blur"}],parentDepartment:[{required:!0,message:"请选择上级部门",trigger:"blur"}]}}},methods:{diaClose:function(){this.form.departmentName="",this.$refs.ruleForm.resetFields()},departmentSave:function(t,e,r){var a=this,i={parentId:t,name:e,descName:r};this.$API.post(this.$URL.departmentSave,i,(function(e){0==e.code?(a.$message.success("保存成功"),n.a.$emit("dePartmentRefresh",t),a.dialogVisible=!1):a.$message.error(e.msg)}))},reName:function(t,e){var r=this,a={id:t,name:e};this.$API.post(this.$URL.departmentReName,a,(function(t){0==t.code?(r.$message.success("保存成功"),n.a.$emit("dePartmentRefresh"),r.dialogVisible=!1):r.$message.error(t.msg)}))},submit:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;t.isReName?t.reName(t.parentId,t.form.departmentName):t.departmentSave(t.parentId,t.form.departmentName)}))}},mounted:function(){var t=this;n.a.$off("addDePartment"),n.a.$on("addDePartment",(function(e,r,n,a,i){e&&(t.dialogVisible=!0,t.parentId=r,t.isFirstDepartment=n,t.isReName=a.isReName,a.isReName?t.form.departmentName=a.name:t.form.departmentName="",i&&(t.dePartmentTreeData=i))})),n.a.$off("emitPathId"),n.a.$on("emitPathId",(function(e){t.form.parentDepartment=e}))},watch:{"form.parentDepartment":{handler:function(t){t.length&&(this.parentId=t[t.length-1])},deep:!0}}},o=(r("9960"),r("2877")),s=Object(o.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"craeat_or_edit_department"},[e("el-dialog",{attrs:{title:t.isReName?"重命名":"新增部门",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.diaClose}},[e("el-form",{ref:"ruleForm",attrs:{model:t.form,"label-width":"80px",rules:t.rules,"label-position":"left"}},[t.isFirstDepartment||t.isReName?t._e():e("el-form-item",{attrs:{label:"上级部门",prop:"parentDepartment"}},[e("el-cascader",{attrs:{options:t.dePartmentTreeData,props:t.defaultProps,filterable:"",clearable:""},model:{value:t.form.parentDepartment,callback:function(e){t.$set(t.form,"parentDepartment",e)},expression:"form.parentDepartment"}})],1),e("el-form-item",{attrs:{label:"部门名称",prop:"departmentName"}},[e("el-input",{attrs:{placeholder:"2-20字符，支持中英文，数字或符号（除空格）",maxlength:"20","show-word-limit":""},model:{value:t.form.departmentName,callback:function(e){t.$set(t.form,"departmentName",e)},expression:"form.departmentName"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保 存")])],1)],1)],1)}),[],!1,null,null,null);e.a=s.exports},"05f1":function(t,e,r){"use strict";var n={props:{editMenuShow:{type:Boolean,default:function(){return!1}},loading:{type:Boolean,default:function(){return!1}}},data:function(){return{isShow:this.editMenuShow,event:"",el:null}},methods:{onBlur:function(t){this.isShow=!1}},mounted:function(){var t=this;document.body.addEventListener("click",(function(){t.isShow=!1}))},watch:{editMenuShow:function(t){var e=this;this.isShow=t,t&&this.$nextTick((function(){e.$refs.edit_menu.focus()}))},isShow:function(t){this.$emit("update:editMenuShow",t)},event:{handler:function(t){var e=this;this.isShow&&this.$nextTick((function(){var r=e.$refs.edit_menu;document.body.clientHeight-t.clientY-40>r.offsetHeight?r.style.top=t.clientY+5+"px":r.style.top=t.clientY-r.offsetHeight+"px",document.body.clientWidth-t.clientX-20>r.offsetWidth?r.style.left=t.clientX-20+"px":r.style.left=t.clientX-r.offsetWidth+"px"}))},deep:!0}}},a=(r("e6c7"),r("2877")),i=Object(a.a)(n,(function(){return(0,this._self._c)("ul",{directives:[{name:"show",rawName:"v-show",value:this.isShow,expression:"isShow"},{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],ref:"edit_menu",attrs:{id:"edit_menu",tabindex:"1"},on:{blur:this.onBlur}},[this._t("default")],2)}),[],!1,null,"009710ad",null);e.a=i.exports},"0a49":function(t,e,r){var n=r("9b43"),a=r("626a"),i=r("4bf8"),o=r("9def"),s=r("cd1c");t.exports=function(t,e){var r=1==t,d=2==t,c=3==t,u=4==t,l=6==t,f=5==t||l,p=e||s;return function(e,s,m){for(var h,g,v=i(e),y=a(v),b=n(s,m,3),x=o(y.length),D=0,w=r?p(e,x):d?p(e,0):void 0;x>D;D++)if((f||D in y)&&(g=b(h=y[D],D,v),t))if(r)w[D]=g;else if(g)switch(t){case 3:return!0;case 5:return h;case 6:return D;case 2:w.push(h)}else if(u)return!1;return l?-1:c||u?u:w}}},"127a":function(t,e,r){var n=r("ff9e");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("499e").default)("2dc6d3a3",n,!0,{sourceMap:!1,shadowMode:!1})},"1c38":function(t,e,r){"use strict";r("127a")},"20d6":function(t,e,r){"use strict";var n=r("5ca1"),a=r("0a49")(6),i="findIndex",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),n(n.P+n.F*o,"Array",{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(i)},"232a":function(t,e,r){"use strict";r("bb99")},3332:function(t,e,r){var n=r("bfe5");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("499e").default)("583e18f6",n,!0,{sourceMap:!1,shadowMode:!1})},"357d":function(t,e,r){"use strict";r("7f7f"),r("8e6e"),r("ac6a"),r("456d");var n=r("ade3"),a=(r("96cf"),r("1da1")),i=r("d8ad"),o=r("67e0");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var c,u,l,f={data:function(){return{dutyList:[],isLoading:!1,dialogVisible:!1,addDuty:{departmentId:"",name:""}}},mounted:function(){var t=this;i.a.$on("getDepartment",(function(e){var r=e.data,n=e.id;t.dutyList=r,t.addDuty.departmentId=n})),i.a.$on("getDeleteDepartment",(function(e){e.id===t.addDuty.departmentId&&(t.dutyList=[],i.a.$emit("deleteAllDuty"))}))},destroyed:function(){i.a.$off("getDepartment")},methods:{add:function(){this.addDuty.departmentId?this.dialogVisible=!0:this.$message.error("请先选择部门")},getDutyList:(l=Object(a.a)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.addDuty.departmentId,this.isLoading=!0,t.next=5,Object(o.n)({departmentId:e});case 5:r=t.sent,this.dutyList=r.data.data,this.isLoading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(){return l.apply(this,arguments)}),addSubmit:(u=Object(a.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=d({},this.addDuty),t.prev=1,t.next=4,this.$refs.addDuty.validate();case 4:return t.next=6,Object(o.a)(e);case 6:t.sent,this.$message.success("添加成功"),this.handleClose(),this.getDutyList(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1);case 15:case"end":return t.stop()}}),t,this,[[1,12]])}))),function(){return u.apply(this,arguments)}),handleClose:function(){this.dialogVisible=!1,this.$refs.addDuty.resetFields()},remove:(c=Object(a.a)(regeneratorRuntime.mark((function t(e,r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.dutyId,r.stopPropagation(),t.prev=2,t.next=5,Object(o.j)({dutyId:n});case 5:t.sent,this.$message.success("已删除职务"),i.a.$emit("deleteDuty",n),this.getDutyList(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2);case 14:case"end":return t.stop()}}),t,this,[[2,11]])}))),function(t,e){return c.apply(this,arguments)}),renderTree:function(t,e){var r=this,n=(e.node,e.data);e.store;return t("div",{class:"custom-tree",attrs:{"data-v-user":!0}},[t("div",[n.name]),t("div",[t("el-button",{attrs:{type:"text",icon:"el-icon-delete","data-v-user":!0},on:{click:function(t){return r.remove(n,t)}},class:"delete-icon"})])])},nodeClick:function(t){i.a.$emit("getDuty",t)}}},p=(r("765b"),r("2877")),m=Object(p.a)(f,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"user_manage_tree_list dutyList"},[e("div",{staticClass:"top"},[e("div",{staticStyle:{"font-weight":"500"}},[t._v("职务列表")]),e("div",{staticClass:"addFirstAid",attrs:{title:"添加顶级目录"},on:{click:t.add}},[t._v("\n      +\n    ")])]),e("div",{staticClass:"tree"},[t.dutyList.length?e("el-tree",{attrs:{data:t.dutyList,"highlight-current":"","node-key":"dutyId",props:{label:"name"},"render-content":t.renderTree,"empty-text":"请选择部门查看"},on:{"node-click":t.nodeClick}}):e("div",{staticClass:"empty-text-wrap"},[e("img",{attrs:{src:r("f7f9"),alt:""}}),t._v("\n      请选择部门查看\n    ")])],1),e("el-dialog",{attrs:{title:"添加职务",visible:t.dialogVisible,width:"40%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"addDuty",attrs:{model:t.addDuty,"label-width":"120px","label-position":"left"}},[e("el-form-item",{attrs:{prop:"name",label:"职务名称:",rules:{required:!0,message:"请输入职务名称"}}},[e("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入职务",maxlength:"20","show-word-limit":""},model:{value:t.addDuty.name,callback:function(e){t.$set(t.addDuty,"name",e)},expression:"addDuty.name"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("确定")])],1)],1)],1)}),[],!1,null,null,null);e.a=m.exports},3835:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("06c5");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,e)||Object(n.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"411d":function(t,e,r){"use strict";r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("6b54"),r("7f7f"),r("96cf");var n=r("1da1"),a=r("d8ad"),i=r("05f1"),o=r("67e0");function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var c,u={components:{editMenu:i.a},data:function(){return{expandedKeys:[],isLoading:!1,treeData:[],defaultProps:{label:"name"},pathName:[],pathId:[],filterText:"",isEditMenuShow:!1,nodeDate:""}},methods:{nodeClick:(c=Object(n.a)(regeneratorRuntime.mark((function t(e,r,n){var i,s,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.expandedKeys.length=0,this.isEditMenuShow=!1,i=e.id,s=e.departmentType,t.next=5,Object(o.n)({departmentId:i});case 5:d=t.sent,a.a.$emit("getDepartment",{data:d.data.data,id:i}),a.a.$emit("getDepartmentId",{id:i}),this.$emit("getList",{id:i,departmentType:s||null});case 9:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return c.apply(this,arguments)}),nodeContextmenu:function(t,e,r,n){return 1!=r.level&&2!=r.level&&(1==e.departmentType?(this.$message.error("行政部门不支持编辑"),!1):(this.nodeDate=r,this.$refs.editMenu.event=t,this.isEditMenuShow=!0,void(this.pathId=[])))},addDePartment:function(){a.a.$emit("addDePartment",!0,0,!0,{isReName:!1})},addNodeDePartment:function(){var t=this;this.getAllParent(this.pathId,this.nodeDate,"id",(function(){a.a.$emit("emitPathId",t.pathId)})),a.a.$emit("addDePartment",!0,this.nodeDate.data.id,!1,{isReName:!1},this.treeData)},modevDepartment:function(){var t=this;this.getAllParent(this.pathId,this.nodeDate,"id",(function(){a.a.$emit("emitMoveDePartmentPathId",!0,t.pathId,t.treeData,t.nodeDate.data.id)}))},deletDePartment:function(){var t=this,e=this;this.$confirm("此操作将永久删除该部门及其子部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.departmentDel(t.nodeDate.data.id),a.a.$emit("getDeleteDepartment",{id:e.nodeDate.data.id})})).catch((function(){}))},reName:function(){a.a.$emit("addDePartment",!0,this.nodeDate.data.id,!1,{isReName:!0,name:this.nodeDate.data.name})},addStaff:function(){a.a.$emit("dePartmentAddStaff",this.nodeDate.data.id)},departmentGetList:function(){var t=this;this.isLoading=!0;this.$API.get(this.$URL.getDepartmentListNew,{},(function(e){t.isLoading=!1,0==e.code?t.treeData=e.data:t.$message.error(e.msg)}))},departmentDel:function(t){var e=this,r={id:t};this.$API.post(this.$URL.departmentDel,r,(function(t){0==t.code?e.departmentGetList():e.$message.error(t.msg)}))},departmentMove:function(t,e){0==result.code||this.$message.error(result.msg)},getAllParent:function(t,e,r,n){if(e.level&&0!==e.level)if(this.getAllParent(t,e.parent,r,n),Array.isArray(r)){var a,i={},o=s(r);try{for(o.s();!(a=o.n()).done;){var d=a.value;i[d]=e.data[d]}}catch(t){o.e(t)}finally{o.f()}t=t.push(i)}else t.push(e.data[r]);else n&&this.$nextTick((function(){n()}))},filterNode:function(t,e,r){if(!t)return!0;var n=[];this.getReturnNode(r,n,t);var a=!1;return n.forEach((function(t){a=a||t})),a},getReturnNode:function(t,e,r){var n=t.data&&t.data.name&&-1!==t.data.name.indexOf(r);n&&e.push(n),!n&&1!=t.level&&t.parent&&this.getReturnNode(t.parent,e,r)}},mounted:function(){var t=this;this.expandedKeys.length>0&&(this.expandedKeys.length=0),this.departmentGetList(),a.a.$on("dePartmentRefresh",(function(e){t.expandedKeys[0]=e,t.departmentGetList()}))},watch:{filterText:function(t){this.$refs.tree.filter(t)},treeData:{handler:function(t){a.a.$emit("treeDataChange",t)},deep:!0}}},l=(r("232a"),r("2877")),f=Object(l.a)(u,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"user_manage_tree_list zt-scrollbar"},[e("div",{staticClass:"top"},[e("div",{staticStyle:{"font-weight":"500"}},[t._v("部门列表")]),e("div",{staticClass:"addFirstAid",attrs:{title:"添加顶级目录"},on:{click:t.addDePartment}},[t._v("\n      +\n    ")])]),e("div",{staticClass:"tree"},[e("div",{staticClass:"serch",staticStyle:{margin:"20px 0 10px"}},[e("el-input",{staticClass:"serach_out",attrs:{placeholder:"输入部门名称",size:"mini"},model:{value:t.filterText,callback:function(e){t.filterText="string"==typeof e?e.trim():e},expression:"filterText"}})],1),e("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.treeData,"default-expanded-keys":t.expandedKeys,"highlight-current":"","expand-on-click-node":!1,"check-on-click-node":!0,"node-key":"id","filter-node-method":t.filterNode,props:t.defaultProps},on:{"node-click":t.nodeClick,"node-contextmenu":t.nodeContextmenu}})],1),e("edit-menu",{ref:"editMenu",attrs:{editMenuShow:t.isEditMenuShow},on:{"update:editMenuShow":function(e){t.isEditMenuShow=e},"update:edit-menu-show":function(e){t.isEditMenuShow=e}}},[e("li",{on:{click:t.addNodeDePartment}},[t._v("添加子级部门")]),e("li",{on:{click:t.modevDepartment}},[t._v("移动部门")]),e("li",{on:{click:t.addStaff}},[t._v("添加员工")]),e("li",{on:{click:t.reName}},[t._v("重命名")]),e("li",{on:{click:t.deletDePartment}},[t._v("删除")])])],1)}),[],!1,null,null,null);e.a=f.exports},5491:function(t,e,r){var n=r("c301");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("499e").default)("748d590a",n,!0,{sourceMap:!1,shadowMode:!1})},"5a50":function(t,e,r){"use strict";r("5491")},"5ac0":function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color[data-v-cc7393ba]{color:#1740dc}.success-color[data-v-cc7393ba]{color:#52c41a}.warning-color[data-v-cc7393ba]{color:#faad14}.error-color[data-v-cc7393ba]{color:#f5222d}.info-color[data-v-cc7393ba]{color:#909399}.border-color[data-v-cc7393ba]{border:1px solid #e5e6e9}.dutyUserList[data-v-cc7393ba]{padding:8px 10px}.dutyUserList .top[data-v-cc7393ba]{line-height:24px}.search-header[data-v-cc7393ba]{padding:20px 0 0}.result-in[data-v-cc7393ba]{border:1px solid #e9e9e9;padding:10px 10px 10px 0;min-height:90px}.title-in-duty[data-v-cc7393ba]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;line-height:40px}.result-button[data-v-cc7393ba]:first-child{margin-left:10px}.result-button[data-v-cc7393ba]{margin-bottom:10px}.empty-text-wrap[data-v-cc7393ba]{text-align:center;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:rgba(4,12,44,.45);font-size:12px}",""])},"5cf9":function(t,e,r){var n=r("feb1");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("499e").default)("e8d83126",n,!0,{sourceMap:!1,shadowMode:!1})},"67e0":function(t,e,r){"use strict";r.d(e,"u",(function(){return i})),r.d(e,"m",(function(){return o})),r.d(e,"p",(function(){return s})),r.d(e,"q",(function(){return d})),r.d(e,"b",(function(){return c})),r.d(e,"n",(function(){return u})),r.d(e,"e",(function(){return l})),r.d(e,"t",(function(){return f})),r.d(e,"A",(function(){return p})),r.d(e,"y",(function(){return m})),r.d(e,"r",(function(){return h})),r.d(e,"f",(function(){return g})),r.d(e,"a",(function(){return v})),r.d(e,"o",(function(){return y})),r.d(e,"j",(function(){return b})),r.d(e,"s",(function(){return x})),r.d(e,"g",(function(){return D})),r.d(e,"z",(function(){return w})),r.d(e,"v",(function(){return I})),r.d(e,"w",(function(){return _})),r.d(e,"c",(function(){return $})),r.d(e,"k",(function(){return k})),r.d(e,"d",(function(){return S})),r.d(e,"l",(function(){return P})),r.d(e,"x",(function(){return O})),r.d(e,"i",(function(){return L})),r.d(e,"h",(function(){return C}));r("a481"),r("7f7f");var n=r("2b0e"),a=r("fedb"),i=function(t){var e=t.page,r=t.limit,i=t.name,o=t.flage;return n.default.http.post(a.a.getNewUserList,{page:e,limit:r,name:i,flage:o})},o=function(){return n.default.http.get(a.a.departmentGetListNew)},s=function(){return n.default.http.get(a.a.getRoleSelectNew)},d=function(){return n.default.http.get(a.a.getTreeRoleSelect)},c=function(t){return n.default.http.post(a.a.getTenantUserAdd,t)},u=function(t){var e=t.departmentId;return n.default.http.post(a.a.getDutyList,{departmentId:e})},l=function(t){var e=t.status,r=t.userId;return n.default.http.post(a.a.newUserEnable,{status:e,userId:r})},f=function(t){return n.default.http.get(a.a.getUserInfoNew.replace(":userId",t))},p=function(t){return n.default.http.post(a.a.getTenantUserUpdate,t)},m=function(){return n.default.http.post(a.a.allInitAllUserInfoUpdate,{})},h=function(t){var e=t.id;return n.default.http.post(a.a.getTenantUserDelete,{id:e})},g=function(t){return n.default.http.post(a.a.userBatchAuth,t)},v=function(t){return n.default.http.post(a.a.addDuty,t)},y=function(t){return n.default.http.post(a.a.getOutDutyUser,t)},b=function(t){var e=t.dutyId;return n.default.http.post(a.a.deleteDuty,{dutyId:e})},x=function(t){return n.default.http.post(a.a.getUsersByDuty,t)},D=function(t){return n.default.http.post(a.a.updateDutyUsers,t)},w=function(t){return n.default.http.post(a.a.updateRoleName,t)},I=function(t){return n.default.http.post(a.a.getListByRole,t)},_=function(t){return n.default.http.post(a.a.getListOutRole,t)},$=function(t){return n.default.http.post(a.a.addRole,t)},k=function(t){return n.default.http.post(a.a.deleteRole,t)},S=function(t){return n.default.http.post(a.a.addUserRole,t)},P=function(t){return n.default.http.post(a.a.deleteUserRole,t)},O=function(t){return n.default.http.post(a.a.selectAllUsersRole,t)},L=function(t){return n.default.http.post(a.a.clearAllUsersRole,t)},C=function(t){return n.default.http.post(a.a.changePassword,t)}},"737a":function(t,e,r){"use strict";r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("6b54");var n=r("d8ad");function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,d=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){d=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(d)throw o}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o={data:function(){return{pageIndex:1,pageSize:10,totalPage:0,tableData:[],dialogVisible:!1,filterText:"",isSearch:!1,userIds:[],departmentId:""}},methods:{getDataList:function(t,e){var r=this,n="";this.isSearch&&(n=this.filterText);var a={limit:t,page:e,noDepartmentFlage:0,username:n};this.$API.get(this.$URL.getUserList,a,(function(t){var e=t.page;r.totalPage=e.totalCount,r.tableData=e.list}))},currentChangeHandle:function(t){this.pageIndex=t,this.getDataList(this.pageSize,t)},serach:function(){this.pageIndex=1,""==this.filterText?this.isSearch=!1:this.isSearch=!0,this.getDataList(this.pageSize,1)},departmentBatchSave:function(){var t=this,e={departmentId:this.departmentId,userIds:this.userIds};this.$API.post(this.$URL.departmentBatchSave,e,(function(e){0==e.code?(t.$message.success("保存成功"),t.dialogVisible=!1):t.$message.error(e.msg)}))},selectionChange:function(t){if(this.userIds=[],t.length>0){var e,r=a(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;this.userIds.push(n.userId)}}catch(t){r.e(t)}finally{r.f()}}},submit:function(){0==this.userIds.length&&this.$message.error("请选择想要添加的员工"),this.departmentBatchSave()}},mounted:function(){var t=this;n.a.$off("dePartmentAddStaff"),n.a.$on("dePartmentAddStaff",(function(e){t.getDataList(t.pageSize,t.pageIndex),t.departmentId=e,t.dialogVisible=!0}))}},s=(r("5a50"),r("2877")),d=Object(s.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"de_partment_add_staff"},[e("el-dialog",{attrs:{title:"添加员工",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"serch"},[e("el-input",{staticClass:"serach_out",attrs:{placeholder:"输入用户名搜索"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),e("el-button",{staticStyle:{"margin-left":"20px"},on:{click:t.serach}},[t._v("搜索")])],1),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.selectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e("el-table-column",{attrs:{prop:"realName",label:"姓名"}})],1),e("el-pagination",{attrs:{"current-page":t.pageIndex,"page-size":t.pageSize,total:t.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.currentChangeHandle}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保 存")])],1)],1)],1)}),[],!1,null,"0148c4a0",null);e.a=d.exports},7514:function(t,e,r){"use strict";var n=r("5ca1"),a=r("0a49")(5),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),n(n.P+n.F*i,"Array",{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")("find")},"765b":function(t,e,r){"use strict";r("adbc")},9007:function(t,e,r){"use strict";r("5cf9")},"950f":function(t,e,r){var n=r("e2bd");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("499e").default)("14a3c6e5",n,!0,{sourceMap:!1,shadowMode:!1})},9960:function(t,e,r){"use strict";r("950f")},a2a4:function(t,e,r){"use strict";var n=r("2909"),a=r("d8ad"),i=r("a5d3"),o={data:function(){return{dialogVisible:!1,isShow:!1,dePartmentTreeData:[{id:0,name:"...",children:null}],defaultProps:{checkStrictly:!0,label:"name",value:"id"},parentId:"",nodeId:"",form:{parentDepartment:[0]},rules:{parentDepartment:[{required:!0,message:"请选择上级部门",trigger:"blur"}]}}},methods:{diaClose:function(){this.isShow=!1},submit:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;if(t.parentId!=t.nodeId){var r={parentId:t.parentId,id:t.nodeId};t.$API.post(t.$URL.departmentMove,r,(function(e){0==e.code?(t.$message.success("移动成功"),t.dialogVisible=!1,a.a.$emit("dePartmentRefresh")):t.$message(e.msg)}))}else t.$message.error("无法移动到部门本体")}))}},mounted:function(){var t=this;a.a.$off("emitMoveDePartmentPathId"),a.a.$on("emitMoveDePartmentPathId",(function(e,r,a,o){if(e)try{var s;t.$set(t.form,"parentDepartment",[0]),t.dialogVisible=!0,t.dePartmentTreeData[0].children=JSON.parse(JSON.stringify(a));var d=JSON.parse(JSON.stringify(t.dePartmentTreeData)),c=r.pop();t.isShow=!0,t.nodeId=o,(s=t.form.parentDepartment).push.apply(s,Object(n.a)(r));var u=Object(i.a)(d,c),l=Object(i.a)(d,u.parentId),f=l.children.indexOf(u);l.children.splice(f,1),0==l.children.length&&(l.children=null)}catch(t){}}))},watch:{"form.parentDepartment":{handler:function(t){this.parentId=t[t.length-1]},deep:!0}}},s=(r("9007"),r("1c38"),r("2877")),d=Object(s.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"move_dePartment"},[e("el-dialog",{attrs:{title:"移动部门",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.diaClose}},[t.isShow?e("el-form",{ref:"ruleForm",attrs:{model:t.form,"label-width":"80px",rules:t.rules}},[e("el-form-item",{attrs:{label:"上级部门",prop:"parentDepartment"}},[e("el-cascader",{attrs:{options:t.dePartmentTreeData,props:t.defaultProps,filterable:"",clearable:""},model:{value:t.form.parentDepartment,callback:function(e){t.$set(t.form,"parentDepartment",e)},expression:"form.parentDepartment"}})],1)],1):t._e(),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保 存")])],1)],1)],1)}),[],!1,null,"466c433c",null);e.a=d.exports},a5d3:function(t,e,r){"use strict";e.a=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children",i=null;if(e){for(var o in e){if(null!==i)break;if(e[o][n]==r){i=e[o];break}e[o][a]&&(i=t(e[o][a],r,n,a))}return i}}},a648:function(t,e,r){"use strict";r("aceb")},aceb:function(t,e,r){var n=r("5ac0");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("499e").default)("dfb73708",n,!0,{sourceMap:!1,shadowMode:!1})},adbc:function(t,e,r){var n=r("f72d");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("499e").default)("6d429586",n,!0,{sourceMap:!1,shadowMode:!1})},bb99:function(t,e,r){var n=r("df15");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r("499e").default)("481662f2",n,!0,{sourceMap:!1,shadowMode:!1})},bfe5:function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color[data-v-009710ad]{color:#1740dc}.success-color[data-v-009710ad]{color:#52c41a}.warning-color[data-v-009710ad]{color:#faad14}.error-color[data-v-009710ad]{color:#f5222d}.info-color[data-v-009710ad]{color:#909399}.border-color[data-v-009710ad]{border:1px solid #e5e6e9}#edit_menu[data-v-009710ad]{position:fixed;padding:12px 0;line-height:2.4;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);box-shadow:0 2px 4px rgba(0,0,0,.12),0 0 6px rgba(0,0,0,.04);background:#fff;color:#040c2c;z-index:2;outline:none}#edit_menu li[data-v-009710ad]{padding:0 20px;font-size:12px;cursor:pointer}#edit_menu li[data-v-009710ad]:hover{color:#1740dc;background:#f2f3f4}",""])},c301:function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.de_partment_add_staff .serch{margin-bottom:16px;display:-webkit-box;display:-ms-flexbox;display:flex}",""])},cd1c:function(t,e,r){var n=r("e853");t.exports=function(t,e){return new(n(t))(e)}},d8ad:function(t,e,r){"use strict";var n=new(r("2b0e").default);e.a=n},df15:function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.addFirstAid{background:#f0f1f3;border-radius:2px;width:24px;height:24px;line-height:21px;text-align:center;color:#666!important;font-size:25px!important}",""])},e2bd:function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.craeat_or_edit_department .el-cascader{width:100%}",""])},e6c7:function(t,e,r){"use strict";r("3332")},e853:function(t,e,r){var n=r("d3f4"),a=r("1169"),i=r("2b4c")("species");t.exports=function(t){var e;return a(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!a(e.prototype)||(e=void 0),n(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},ef96:function(t,e,r){"use strict";r("7f7f");var n,a,i=[function(){var t=this._self._c;return t("div",{staticClass:"empty-text-wrap"},[t("img",{attrs:{src:r("f7f9"),alt:""}}),this._v("\n    请选择部门及职务查看\n  ")])}],o=(r("20d6"),r("7514"),r("ac6a"),r("5df3"),r("3835")),s=(r("96cf"),r("1da1")),d=r("67e0"),c=r("d8ad"),u={data:function(){return{isLoading:!1,dutyId:"",departmentId:"",name:"",usersByDuty:[],usersOutDuty:[],timer:null}},methods:{getUserList:(a=Object(s.a)(regeneratorRuntime.mark((function t(){var e,r,n,a,i,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.name,r=this.dutyId,n=this.departmentId,t.prev=1,this.isLoading=!0,t.next=5,Promise.all([Object(d.o)({name:e,dutyId:r,departmentId:n}),Object(d.s)({name:e,dutyId:r})]);case 5:a=t.sent,i=Object(o.a)(a,2),s=i[0],c=i[1],this.usersOutDuty=s.data.data,this.usersByDuty=c.data.data,this.isLoading=!1,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1);case 17:case"end":return t.stop()}}),t,this,[[1,14]])}))),function(){return a.apply(this,arguments)}),selecIntUser:function(t,e){if("DIV"!==t.target.nodeName){var r=t.target.dataset.userid||t.target.parentNode.dataset.userid;if("out"===e){var n=this.usersByDuty.find((function(t){return t.userId==r})),a=this.usersByDuty.findIndex((function(t){return t.userId==r}));this.usersByDuty.splice(a,1),this.usersOutDuty.unshift(n)}else if("in"===e){var i=this.usersOutDuty.find((function(t){return t.userId==r})),o=this.usersOutDuty.findIndex((function(t){return t.userId==r}));this.usersOutDuty.splice(o,1),this.usersByDuty.unshift(i)}}},selectAll:function(){this.usersByDuty=this.usersByDuty.concat(this.usersOutDuty),this.usersOutDuty=[]},clearAll:function(){this.usersOutDuty=this.usersOutDuty.concat(this.usersByDuty),this.usersByDuty=[]},applySave:(n=Object(s.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={dutyId:this.dutyId,users:this.usersByDuty.map((function(t){return t.userId}))},t.prev=1,t.next=4,Object(d.g)(e);case 4:t.sent,this.$message.success("保存成功"),this.getUserList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return n.apply(this,arguments)})},mounted:function(){var t=this;c.a.$on("getDuty",(function(e){var r=e.dutyId;e.name;t.name="",t.dutyId=r,t.getUserList()})),c.a.$on("getDepartmentId",(function(e){var r=e.id;t.usersByDuty=[],t.usersOutDuty=[],t.dutyId="",t.name="",t.departmentId=r})),c.a.$on("deleteDuty",(function(e){t.dutyId===e&&(t.dutyId="")})),c.a.$on("deleteAllDuty",(function(){t.dutyId=""}))},destroyed:function(){c.a.$off("getDuty"),c.a.$off("getDepartmentId"),c.a.$off("deleteDuty"),c.a.$off("deleteAllDuty")},watch:{name:function(){var t=this;clearTimeout(t.timer),this.timer=setTimeout((function(){t.getUserList()}),500)}}},l=(r("a648"),r("2877")),f=Object(l.a)(u,(function(){var t=this,e=t._self._c;return t.dutyId?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"user_manage_tree_list dutyUserList"},[e("div",{staticClass:"top"},[e("div",[t._v("用户列表")]),e("div",{staticStyle:{float:"right"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.applySave}},[t._v("保存")])],1)]),e("div",{staticClass:"search-header"},[e("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入用户名",clearable:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1),e("div",{staticClass:"user-content"},[e("div",{staticClass:"title-in-duty"},[e("div",[t._v("已选择用户")]),e("div",[e("el-button",{attrs:{type:"text",disabled:!t.usersByDuty.length},on:{click:t.clearAll}},[t._v("清空")])],1)]),e("div",{staticClass:"result-in",on:{click:function(e){return t.selecIntUser(e,"out")}}},t._l(t.usersByDuty,(function(r){return e("el-button",{key:r.userId,staticClass:"result-button",attrs:{type:"primary",size:"mini","data-userid":r.userId}},[t._v(t._s(r.username))])})),1),e("div",{staticClass:"title-in-duty"},[e("div",[t._v("未选择用户")]),e("div",[e("el-button",{attrs:{type:"text",disabled:!t.usersOutDuty.length},on:{click:t.selectAll}},[t._v("全选")])],1)]),e("div",{staticClass:"result-in",on:{click:function(e){return t.selecIntUser(e,"in")}}},t._l(t.usersOutDuty,(function(r){return e("el-button",{key:r.userId,staticClass:"result-button",attrs:{type:"default",size:"mini","data-userid":r.userId}},[t._v(t._s(r.username))])})),1)])]):e("div",{staticStyle:{position:"relative",height:"100%"}},[t._m(0)])}),i,!1,null,"cc7393ba",null);e.a=f.exports},f72d:function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.user_manage_tree_list .tree{position:relative;margin-top:20px;height:80%}.user_manage_tree_list .tree .empty-text-wrap{text-align:center;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:rgba(4,12,44,.45);font-size:12px}.dutyList{padding:8px 10px}.dutyList .el-tree-node__expand-icon{display:none}.delete-icon{color:#f5222d;display:none;font-size:14px}.delete-icon:hover{color:#f77!important}.edit-icon{color:#1740dc;display:none;font-size:14px}.edit-icon:hover{color:#7bbcff!important}.custom-tree{padding:0 10px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;line-height:40px;font-size:12px}.custom-tree:hover .delete-icon,.custom-tree:hover .edit-icon{display:inline-block}",""])},f7f9:function(t,e,r){t.exports=r.p+"assets/img/kongzhuangtaipng.ed546dba.png"},feb1:function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color[data-v-466c433c]{color:#1740dc}.success-color[data-v-466c433c]{color:#52c41a}.warning-color[data-v-466c433c]{color:#faad14}.error-color[data-v-466c433c]{color:#f5222d}.info-color[data-v-466c433c]{color:#909399}.border-color[data-v-466c433c]{border:1px solid #e5e6e9}",""])},ff9e:function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.move_dePartment .el-cascader{width:100%}",""])}}]);