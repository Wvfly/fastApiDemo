(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-557dd987"],{2092:function(e,t,i){var o=i("a62c");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,i("499e").default)("e648d7fc",o,!0,{sourceMap:!1,shadowMode:!1})},3348:function(e,t,i){"use strict";i("ac6a"),i("8615");var o=i("bee2"),a=i("d4ec"),n=i("ade3"),s=Object(o.a)((function e(){var t=this;Object(a.a)(this,e),Object(n.a)(this,"getColorArr",(function(){return Object.values(t.themeColor)})),this.themeColor={main:"#5B8FF9",subPrimary:"#745AD8",primary:"#CB5BF9",error:"#F95B8E",warn:"#F9915B",success:"#5AD8A6",main2:"#0780cf",primary2:"#da1f18",error2:"#fa6d1d",warn2:"#b6b51f"}}));t.a=s},"504c":function(e,t,i){var o=i("9e1e"),a=i("0d58"),n=i("6821"),s=i("52a7").f;e.exports=function(e){return function(t){for(var i,r=n(t),l=a(r),c=l.length,p=0,d=[];c>p;)i=l[p++],o&&!s.call(r,i)||d.push(e?[i,r[i]]:r[i]);return d}}},"63a8":function(e,t,i){e.exports=i.p+"assets/img/offLineNum.60f5a89a.svg"},"6adf":function(e,t,i){e.exports=i.p+"assets/img/totalNum.539f1fce.svg"},7202:function(e,t,i){"use strict";i("2092")},8615:function(e,t,i){var o=i("5ca1"),a=i("504c")(!1);o(o.S,"Object",{values:function(e){return a(e)}})},a62c:function(e,t,i){(e.exports=i("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.overview_new{width:100%;background-color:#f0f2f5}.overview_new .top .top-controll{padding:0 16px;height:40px;line-height:40px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;background:#fff;border-bottom:1px solid #e5e6e9}.overview_new .top .top-controll /deep/ .select-text .el-input__inner{color:#040c2c;font-size:12px;padding-left:0}.overview_new .top .total{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:10px}.overview_new .top .total .total-item{-webkit-box-flex:2;-ms-flex:2;flex:2;height:116px;background:#fff;border:1px solid #e5e6e9;display:-webkit-box;display:-ms-flexbox;display:flex;padding:10px 15px 30px 15px;border-radius:4px;margin-left:10px;position:relative;cursor:default}.overview_new .top .total .total-item .el-divider--vertical{margin:2px 13px}.overview_new .top .total .total-item .count-name{font-size:14px;color:rgba(4,12,44,.45)}.overview_new .top .total .total-item .count-num{font-size:28px;padding-top:20px;display:inline-block}.overview_new .top .total .total-item .count-num.error{color:#f14500}.overview_new .top .total .total-item.first{-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:0}.overview_new .top .total .total-item.first .count-name{color:#040c2c}.overview_new .top .total .total-item img{height:27px;position:absolute;right:15px;top:17px}.overview_new .offline-overview{border:1px solid #f2f2f2;margin:10px 0}.overview_new .offline-overview .over-title{padding-bottom:10px;font-size:16px;color:#040c2c}.overview_new .offline-overview .hd{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.overview_new .offline-overview .hd .three{-webkit-box-flex:2;-ms-flex:2;flex:2}.overview_new .offline-overview .hd .three .sub-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:0 16px;margin-bottom:4px}.overview_new .offline-overview .hd .three .sub-header .btn-ctr{line-height:56px}.overview_new .offline-overview .hd .three .sub-header .btn-ctr .el-radio__label{font-size:12px;font-weight:400}.overview_new .offline-overview .hd .three .sub-header .el-radio{margin-right:0!important}.overview_new .offline-overview .hd .three .sub-header .el-radio-button--small .el-radio-button__inner{padding:8px 32px;font-size:12px}.overview_new .offline-overview .hd .three .sub-header .el-radio__input{display:none}.overview_new .offline-overview .hd .one,.overview_new .offline-overview .hd .two{-webkit-box-flex:1;-ms-flex:1;flex:1}.overview_new .offline-overview .hd .two{margin:0 10px}.overview_new .offline-overview .hd li{background-color:#fff;border:1px solid #e5e6e9;min-width:20%;height:276px}.overview_new .offline-overview .hd li .tit{font-size:12px;height:40px;line-height:40px;color:#040c2c;padding:0 20px}.overview_new .offline-overview .hd li #offline,.overview_new .offline-overview .hd li #pie01,.overview_new .offline-overview .hd li #pie02{width:100%;height:216px}.overview_new .offline-overview .hd li #barnodata{width:100%;height:100%}.overview_new .offline-overview .hd li #barnodata .tit{font-size:18px;font-weight:700}.overview_new .offline-overview .hd li #barnodata .text{text-align:center;padding-top:100px;line-height:20px}.overview_new .online-overview{border:1px solid #f2f2f2;padding:0 16px 16px}.overview_new .online-overview .over-title{height:40px;line-height:40px}.overview_new .online-overview .online{height:326px;-webkit-box-shadow:0 2px 12px 0 rgba(0,0,0,.1);box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.overview_new .online-overview .online .sub-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:0 16px;margin-bottom:4px}.overview_new .online-overview .online .sub-header .btn-ctr{line-height:56px}.overview_new .online-overview .online .sub-header .el-radio{margin-right:0!important}.overview_new .online-overview .online .sub-header .el-radio__input{display:none}.overview_new .online-overview .online #online{width:100%;height:266px}.overview_new .main .rank{border:1px solid #e5e6e9;border-bottom:none;padding:14px 20px;background-color:#fff}.overview_new .main .rank .el-table__body-wrapper{height:250px;overflow-y:auto}.overview_new .main .tit{padding:10px 20px;font-size:16px;background:#fff;color:#040c2c;border:1px solid #e5e6e9;border-bottom:none}.overview_new .main .annulars{width:100%}.overview_new .main .annulars li{float:left;width:20%;height:160px;cursor:pointer}.overview_new .main .annulars li.active{-webkit-box-shadow:0 2px 12px 0 rgba(0,0,0,.1);box-shadow:0 2px 12px 0 rgba(0,0,0,.1);cursor:pointer}.overview_new .main .annulars li .txt{width:50%;height:160px;padding:20px 0 0 20px}.overview_new .main .annulars li .annular{width:50%;height:160px}.overview_new .main #line{width:100%;height:300px}.overview_new .el-select .el-input .el-select__caret{color:#040c2c}",""])},b6a1:function(e,t,i){e.exports=i.p+"assets/img/onLineNum.8e4d063f.svg"},bb11:function(e,t,i){"use strict";i.r(t);i("7f7f"),i("ac6a");var o=i("313e"),a=i.n(o),n=i("3348"),s=(i("1c46"),new n.a),r={data:function(){return{tableDataLoading:!1,totalInfo:{allTotal:0,allRunNotrun:0,allRun:0,allFail:0,offlineTotal:0,offlineRun:0,offlineFail:0,offlineRunNotrun:0,realtimeTotal:0,realtimeRun:0,realtimeFail:0,realtimeRunNotrun:0},projectList:[],project:"",id:this.$route.query.id,dataList:[],jobAlertsShow:!0,pieCharts1:{},pieCharts2:{},offlineCharts:{},onlineCharts:{},offlineTask:1,onlineTask:1,dateList:[{label:"今日",value:1},{label:"本周",value:2},{label:"本月",value:3}]}},methods:{todetail:function(e){switch(e){case"all":this.$router.push({path:"taskOperations",query:{id:this.project,type:"all"}});break;case"offline":this.$router.push({path:"taskOperations",query:{id:this.project,type:"offline"}});break;case"online":this.$router.push({path:"taskOperations",query:{id:this.project,type:"online"}});break;default:this.$router.push("taskOperations")}},toPage:function(e){this.$router.push(e)},getProjectList:function(){var e=this;return new Promise((function(t,i){e.$API.post(e.$URL.getListOwer,{page:1,limit:999},(function(o){if(0==o.code){var a=o.page.list;a.unshift({id:0,name:"所有项目"}),e.projectList=a,t(o)}else e.$message.error(o.msg),i(o)}))}))},changeProject:function(){this.getInfo(),this.taskRun(),this.runStatus(),this.getOffline(),this.getTableData()},taskRun:function(){var e=this,t={tooltip:{formatter:"{b}{c}"},series:[{tooltip:{show:!1},name:"刻度",type:"gauge",radius:"83%",z:1,min:0,max:1,center:["50%","50%"],splitNumber:5,startAngle:225,endAngle:-45,axisLine:{show:!0,lineStyle:{width:1,color:[[.1,"#F88168"],[.5,"#379EFD"],[.8,"#7AD4DF"],[1,"#70C27E"]]}},axisLabel:{show:!1},axisTick:{show:!0,lineStyle:{color:"auto",width:0},length:-15},splitLine:{show:!0,length:0,lineStyle:{color:"auto",width:1}},detail:{show:!1},pointer:{show:!1}},{name:"成功率",type:"gauge",radius:"80%",min:0,max:1,center:["50%","50%"],data:[],splitNumber:10,startAngle:225,endAngle:-45,z:5,axisLine:{show:!0,lineStyle:{width:0,color:[[.1,"#F88168"],[.5,"#379EFD"],[.8,"#7AD4DF"],[1,"#70C27E"]]}},axisLabel:{show:!0,color:"#000",fontSize:12,formatter:function(e){var t=e.toFixed(2);return.1==t?"差":.5==t?"中":.8==t?"良":1==t?"优":""}},axisTick:{splitNumber:10,show:!0,lineStyle:{color:"auto",width:2},length:8},splitLine:{show:!0,length:10,lineStyle:{color:"auto",width:2}},itemStyle:{normal:{color:"#24D8E7"}},pointer:{width:5,length:"80%"},detail:{formatter:function(e){return(100*e).toFixed(0)+"%"},fontSize:18,color:"#000",offsetCenter:["0%","75%"]},title:{offsetCenter:["0","55%"],fontSize:13,color:"#aaa",show:!0}}]};this.pieCharts1=a.a.init(document.getElementById("pie01")),this.$API.post(this.$URL.offlineWeekRateOfSuccess,{procId:this.project||0},(function(i){if(0==i.code){var o=i.data;o[0].value=o[0].value/100,t.series[1].data=o,e.pieCharts1.setOption(t)}else e.$message.error(i.msg)}));var i=this.pieCharts1;window.addEventListener("resize",(function(){i.resize()}))},runStatus:function(){var e=this,t=["#8E5BF9","#5B8FF9","#5AD8A6","#F9915B","#F6E21F","#FFD92C","#F6AE1F","#FF8857","#F45F20","#3D7CD4","#683AFB","#D3696D","#72A4C6","#A9E083"],i={title:{text:"",x:"center",y:"center",textStyle:{fontSize:20}},tooltip:{trigger:"item"},grid:{},legend:{bottom:10,itemWidth:6,itemHeight:2,icon:"rect",formatter:function(e){var t=0;i.series[0].data.map((function(e){t+=e.value-0}));var o=i.series[0].data.map((function(e){return e.name})).indexOf(e);return e+(t?(i.series[0].data[o].value/t*100).toFixed(2)+"%":"0%")}},series:[{type:"pie",center:["50%","33%"],radius:["45%","60%"],clockwise:!0,avoidLabelOverlap:!1,hoverOffset:5,itemStyle:{normal:{color:function(e){return t[e.dataIndex]}}},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"15",fontWeight:"bold",formatter:"{b}\n{d}%"}},labelLine:{show:!1},data:[]}]};this.pieCharts2=a.a.init(document.getElementById("pie02")),this.pieCharts2.showLoading({text:"拼命加载中..."}),this.$API.post(this.$URL.offlineRunState,{procId:this.project||0},(function(t){0==t.code?(i.series[0].data=t.data,e.pieCharts2.setOption(i)):e.$message.error(t.msg),e.pieCharts2.hideLoading()}));var o=this.pieCharts2;window.addEventListener("resize",(function(){o.resize()}))},drawLine:function(e,t){var i=s.getColorArr(),o=t.times||[],n=[],r=[];t.successValues.forEach((function(e){n.push(e.value)})),t.failValues.forEach((function(e){r.push(e.value)}));var l={legend:{icon:"rect",bottom:"2%",itemWidth:16,itemHeight:2,itemGap:20,textStyle:{color:"#556677"}},tooltip:{trigger:"axis",axisPointer:{lineStyle:{width:0}},backgroundColor:"#fff",textStyle:{color:"#5c6c7c"},padding:[10,10],extraCssText:"box-shadow: 0 0 10px 0 rgba(163,163,163,0.5)"},grid:{top:"15%"},xAxis:[{type:"category",data:o,axisLabel:{interval:0,margin:15},axisPointer:{label:{padding:[11,5,7]}},boundaryGap:!1}],yAxis:[{type:"value",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!0,lineStyle:{type:"dotted"}}}],series:[{name:"运行成功",type:"line",data:n,symbolSize:3,symbol:"circle",yAxisIndex:0,lineStyle:{width:1},itemStyle:{normal:{color:i[0],borderColor:i[0]}},areaStyle:{color:new a.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(179,204,253,68)"},{offset:1,color:"#F2F6FF"}])}},{name:"运行失败",type:"line",data:r,symbolSize:3,symbol:"circle",yAxisIndex:0,lineStyle:{width:1},itemStyle:{normal:{color:"#F9915B",borderColor:"#F9915B"}},areaStyle:{color:new a.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#FDD6C1"},{offset:1,color:"#FFF5F1"}])}}]};this[e+"charts"]=a.a.init(document.getElementById(e)),this[e+"charts"].setOption(l);var c=this[e+"charts"];window.addEventListener("resize",(function(){c.resize()}))},getTableData:function(){var e=this,t={procId:this.project||0,type:3};this.tableDataLoading=!0,this.$API.post(this.$URL.getOfflinerank,t,(function(t){e.tableDataLoading=!1,0==t.code?e.dataList=t.data:e.$message.error(t.msg)}))},getInfo:function(){var e=this;this.$API.post(this.$URL.getLastHourStatistics,{procId:this.project||0},(function(t){0==t.code?e.totalInfo=t.data:e.$message.error(t.msg)}))},getOffline:function(){var e=this,t={procId:this.project||0,type:this.offlineTask};this.$API.post(this.$URL.offlineComplete,t,(function(t){0==t.code?e.drawLine("offline",t.data):e.$message.error(t.msg)}))},getOnline:function(){var e=this,t={procId:this.project||0,type:this.onlineTask};this.$API.post(this.$URL.realtimeComplete,t,(function(t){0==t.code?e.drawLine("online",t.data):e.$message.error(t.msg)}))}},mounted:function(){this.$nextTick((function(){this.getProjectList(),this.changeProject()}))}},l=(i("7202"),i("2877")),c=Object(l.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"overview_new"},[t("div",{staticClass:"top"},[t("div",{staticClass:"top-controll"},[t("div",{staticClass:"left"},[t("el-select",{attrs:{size:"mini",placeholder:"请选择项目",filterable:""},on:{change:e.changeProject},model:{value:e.project,callback:function(t){e.project=t},expression:"project"}},e._l(e.projectList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"项目统计是角色权限范围内拥有的项目数据",placement:"top-start"}},[t("i",{staticClass:"header-icon icon icon-ic_remind",staticStyle:{"margin-left":"10px"}})])],1),t("div",{staticClass:"right"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toPage("factoryLink")}}},[e._v("开始创建项目")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toPage("taskOperations")}}},[e._v("任务运维")])],1)]),t("div",{staticClass:"total"},[t("div",{staticClass:"total-item first"},[t("span",{staticClass:"count-item"},[t("p",{staticClass:"count-name",staticStyle:{"font-size":"16px"}},[e._v("总项目数")]),t("span",{staticClass:"count-num"},[e._v(e._s(e.totalInfo.allTotal||0))])]),t("img",{attrs:{src:i("6adf")}})]),t("div",{staticClass:"total-item second"},[t("span",{staticClass:"count-item"},[t("p",{staticClass:"count-name tip"},[e._v("运行中总作业数\n              "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"总作业数包含离线作业流、作业流依赖、实时任务",placement:"top"}},[t("i",{staticClass:"icon icon-ic_remind",staticStyle:{"vertical-align":"middle"}})])],1),t("span",{staticClass:"count-num"},[t("span",[e._v(e._s(e.totalInfo.allRun||0))])])]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{staticClass:"count-item"},[t("p",{staticClass:"count-name"},[e._v("失败总作业数")]),t("span",{staticClass:"count-num error",on:{click:function(t){return e.todetail("all")}}},[e._v(e._s(e.totalInfo.allFail||0))])]),t("img",{attrs:{src:i("c960")}})],1),t("div",{staticClass:"total-item"},[t("span",{staticClass:"count-item"},[t("p",{staticClass:"count-name"},[e._v("离线作业数")]),t("span",{staticClass:"count-num"},[e._v(e._s(e.totalInfo.offlineTotal||0))])]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{staticClass:"count-item"},[t("p",{staticClass:"count-name"},[e._v("运行中")]),t("span",{staticClass:"count-num"},[t("span",[e._v(e._s(e.totalInfo.offlineRun||0))])])]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{staticClass:"count-item"},[t("p",{staticClass:"count-name"},[e._v("失败")]),t("span",{staticClass:"count-num error",on:{click:function(t){return e.todetail("offline")}}},[e._v(e._s(e.totalInfo.offlineFail||0))])]),t("img",{attrs:{src:i("63a8")}})],1),t("div",{staticClass:"total-item"},[t("span",{staticClass:"count-item"},[t("p",{staticClass:"count-name"},[e._v("实时任务数")]),t("span",{staticClass:"count-num"},[e._v(e._s(e.totalInfo.realtimeTotal||0))])]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{staticClass:"count-item"},[t("p",{staticClass:"count-name"},[e._v("运行中")]),t("span",{staticClass:"count-num"},[t("span",[e._v(e._s(e.totalInfo.realtimeRun||0))])])]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{staticClass:"count-item"},[t("p",{staticClass:"count-name"},[e._v("失败")]),t("span",{staticClass:"count-num error",on:{click:function(t){return e.todetail("online")}}},[e._v(e._s(e.totalInfo.realtimeFail||0))])]),t("img",{attrs:{src:i("b6a1")}})],1)])]),t("div",{staticClass:"offline-overview"},[t("div",{staticClass:"over-title"},[e._v("离线概览")]),t("ul",{staticClass:"hd clearfix"},[e._m(0),e._m(1),t("li",{staticClass:"three"},[t("div",{staticClass:"sub-header"},[t("div",{staticClass:"tit"},[e._v("离线任务完成情况")]),t("div",{staticClass:"btn-ctr"},[t("el-radio-group",{on:{change:e.getOffline},model:{value:e.offlineTask,callback:function(t){e.offlineTask=t},expression:"offlineTask"}},e._l(e.dateList,(function(i,o){return t("el-radio-button",{key:o,attrs:{label:i.value}},[e._v(e._s(i.label))])})),1)],1)]),t("div",{attrs:{id:"offline"}})])])]),t("div",{staticClass:"main"},[t("div",{staticClass:"tit"},[e._v("离线任务执行时长排行top20")]),t("div",{staticClass:"rank"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList}},[t("el-table-column",{attrs:{type:"index",width:"80"},scopedSlots:e._u([{key:"header",fn:function(i){return[t("span",[e._v("序号")])]}}])}),t("el-table-column",{attrs:{prop:"procName",label:"所属项目"}}),t("el-table-column",{attrs:{prop:"jobName",label:"作业流/作业流依赖名称"}}),t("el-table-column",{attrs:{prop:"username",label:"创建人"}}),t("el-table-column",{attrs:{prop:"costStr",align:"right",label:"执行时长"}})],1)],1)])])}),[function(){var e=this._self._c;return e("li",{staticClass:"one"},[e("div",{staticClass:"tit"},[this._v("本周离线任务执行率")]),e("div",{attrs:{id:"pie01"}})])},function(){var e=this._self._c;return e("li",{staticClass:"two"},[e("div",{staticClass:"tit"},[e("span",{staticClass:"fl"},[this._v("本周调度离线任务状态分布")])]),e("div",{attrs:{id:"pie02"}})])}],!1,null,null,null);t.default=c.exports},c960:function(e,t,i){e.exports=i.p+"assets/img/runTimeNum.7207c065.svg"}}]);