(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0fd646b4"],{"0987":function(e,t,a){"use strict";a("fda3")},"22f9":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-7a62240a]{color:#1740dc}.success-color[data-v-7a62240a]{color:#52c41a}.warning-color[data-v-7a62240a]{color:#faad14}.error-color[data-v-7a62240a]{color:#f5222d}.info-color[data-v-7a62240a]{color:#909399}.border-color[data-v-7a62240a]{border:1px solid #e5e6e9}.filter_conter[data-v-7a62240a]{font-size:12px;color:rgba(4,12,44,.85);padding-bottom:13px}.filter_conter ul>li[data-v-7a62240a]{height:28px;line-height:28px;padding-left:12px}.filter_conter ul>li.active[data-v-7a62240a]{background:#f2f3f4}.filter_footer[data-v-7a62240a]{border-top:1px solid #e5e6e9;margin:0 -12px;text-align:center;padding-top:10px}.filter_footer .el-button--mini[data-v-7a62240a]{padding:5px 14px}",""])},"386b":function(e,t,a){var r=a("5ca1"),o=a("79e5"),i=a("be13"),n=/"/g,l=function(e,t,a,r){var o=String(i(e)),l="<"+t;return""!==a&&(l+=" "+a+'="'+String(r).replace(n,"&quot;")+'"'),l+">"+o+"</"+t+">"};e.exports=function(e,t){var a={};a[e]=t(l),r(r.P+r.F*o((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",a)}},"46b0":function(e,t,a){"use strict";a("52eb")},"52eb":function(e,t,a){var r=a("6fe8");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("45440b17",r,!0,{sourceMap:!1,shadowMode:!1})},"6fe8":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-18fa3ff0]{color:#1740dc}.success-color[data-v-18fa3ff0]{color:#52c41a}.warning-color[data-v-18fa3ff0]{color:#faad14}.error-color[data-v-18fa3ff0]{color:#f5222d}.info-color[data-v-18fa3ff0]{color:#909399}.border-color[data-v-18fa3ff0]{border:1px solid #e5e6e9}.customer-table[data-v-18fa3ff0]{width:100%;height:100%}",""])},"717c":function(e,t,a){"use strict";a.r(t);a("8e6e"),a("456d"),a("7f7f"),a("ac6a");var r=a("ade3"),o=a("d672");a("c466");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var n={data:function(){return{isHighLevel:!1,pageIndex:1,pageSize:20,totalCount:0,dataListLoading:!1,dataList:[],dateValue:[],form:{start_time:"",end_time:"",logType:"",platformType:"",userName:"",userId:null},detials:{},detialsLoading:!1,platformList:[],listLogForTypeList:[],userList:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},labelMap:{platformName:{name:"平台",filters:[]},platformModuleName:{name:"模块"},operation:{name:"设置项"},username:{name:"操作用户 "},ip:{name:"操作IP"},createDate:{name:"操作日期"},operationType:{name:"操作类型",align:"right",width:100,filters:[]},operator:{name:"详情记录",width:80,align:"right"}}}},mounted:function(){this.logListLog(),this.logListLogForType(),this.logListPlatformType(),this.getAllUsers()},methods:{handleFilterChange:function(e){"platformName"===e.prop?(this.form.platformType=e.value,this.currentPage=1,this.logListLog()):"operationType"===e.prop&&(this.form.logType=e.value,this.currentPage=1,this.logListLog())},logListLog:function(){var e=this;this.dataListLoading=!0;var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({page:this.pageIndex,limit:this.pageSize},this.form);this.$API.get(this.$URL.logListLog,t,(function(t){0==t.code?(e.dataListLoading=!1,e.dataList=t.data.list,e.totalCount=t.data.totalCount):e.$message.error(t.msg)}))},logListLogForType:function(){var e=this;this.dataListLoading=!0,this.$API.get(this.$URL.logListLogForType,{},(function(t){e.dataListLoading=!1,e.labelMap.operationType.filters.push({text:"全部",value:null}),0==t.code?t.data.forEach((function(t){e.labelMap.operationType.filters.push({text:t.name,value:t.type})})):e.$message.error(t.msg)}))},logListPlatformType:function(){var e=this;this.dataListLoading=!0,this.$API.get(this.$URL.logListPlatformType,{},(function(t){e.dataListLoading=!1,e.labelMap.platformName.filters.push({text:"全部",value:null}),0==t.code?t.data.forEach((function(t){e.labelMap.platformName.filters.push({text:t.name,value:t.type})})):e.$message.error(t.msg)}))},getAllUsers:function(){var e=this;this.dataListLoading=!0,this.$API.get(this.$URL.getCompileAllUsers,{},(function(t){e.dataListLoading=!1,0==t.code?e.userList=t.data:e.$message.error(t.msg)}))},openDetial:function(e){var t=this;this.detials={},this.detialsLoading=!0,this.$API.get(this.$URL.logOperationLog+"/".concat(e.id),{},(function(e){t.detialsLoading=!1,0==e.code?t.detials=e.data:t.$message.error(e.msg)}))},sizeChangeHandle:function(e){this.pageSize=e,this.logListLog()},currentChangeHandle:function(e){this.pageIndex=e,this.logListLog()},do_search:function(){this.pageIndex=1,this.logListLog()},do_reset:function(){this.form.userId=null,this.dateValue=[],this.form.start_time="",this.form.end_time="",this.do_search()},changDate:function(e){this.form.start_time=(null==e?void 0:e.length)>0?e[0]:"",this.form.end_time=(null==e?void 0:e.length)>0?e[1]:""}},components:{CustomerTable:o.a}},l=(a("0987"),a("2877")),s=Object(l.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"title"},[e._v("\n      操作审计\n  ")]),t("div",{staticClass:"logCompile"},[t("el-form",{staticClass:"form",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:""},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}},[t("el-select",{staticStyle:{"margin-bottom":"2px"},attrs:{filterable:"",clearable:"",placeholder:"请选择操作用户"},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}},e._l(e.userList,(function(e){return t("el-option",{key:e.userId,attrs:{value:e.userId,label:e.username}})})),1)],1),t("el-form-item",[t("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss",align:"right"},on:{change:e.changDate},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.do_search()}}},[e._v("查询")])],1),t("el-form-item",{staticStyle:{"margin-right":"0"}},[t("el-button",{on:{click:function(t){return e.do_reset()}}},[e._v("重置")])],1)],1),t("customer-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],ref:"customerTable",attrs:{dataList:e.dataList,labelMap:e.labelMap,height:630},on:{"filter-change":e.handleFilterChange},scopedSlots:e._u([{key:"row",fn:function(a){var r=a.row,o=a.prop;return["详情记录"===a.label?t("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detialsLoading,expression:"detialsLoading"}],staticClass:"details"},[t("h4",[e._v("操作详情")]),t("div",[t("ul",{staticStyle:{"max-height":"370px",overflow:"auto"}},[t("li",[e._v("平台："),t("span",[e._v(e._s(e.detials.platformName))])]),t("li",[e._v("模块："),t("span",[e._v(e._s(e.detials.platformModuleName))])]),t("li",[e._v("设置项："),t("span",[e._v(e._s(e.detials.operation))])]),t("li",[e._v("操作用户："),t("span",[e._v(e._s(e.detials.username))])]),t("li",[e._v("操作时间:"),t("span",[e._v(e._s(e.detials.createDate))])]),t("li",[e._v("操作ip："),t("span",[e._v(e._s(e.detials.ip))])]),t("li",[e._v("操作类型："),t("span",[e._v(e._s(e.detials.operationTypeName))])]),t("li",[e._v("请求参数："),t("span",[e._v(e._s(e.detials.params))])])])])]),t("el-button",{staticClass:"fr",attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.openDetial(r)}},slot:"reference"},[e._v("详情记录")])],1):t("span",[e._v("\n          "+e._s(r[o])+"\n        ")])]}}])}),t("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)])}),[],!1,null,"486466a2",null);t.default=s.exports},"876f":function(e,t,a){var r=a("22f9");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("4aaa896b",r,!0,{sourceMap:!1,shadowMode:!1})},"895c":function(e,t,a){"use strict";a("876f")},"9d02":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-486466a2]{color:#1740dc}.success-color[data-v-486466a2]{color:#52c41a}.warning-color[data-v-486466a2]{color:#faad14}.error-color[data-v-486466a2]{color:#f5222d}.info-color[data-v-486466a2]{color:#909399}.border-color[data-v-486466a2]{border:1px solid #e5e6e9}.title[data-v-486466a2]{height:48px;line-height:48px;border-bottom:1px solid #e5e6e9;font-weight:400;color:#040c2c;font-size:16px;padding:0 20px}.form[data-v-486466a2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.form .high-level-search[data-v-486466a2]{font-size:12px;color:#1740dc!important;cursor:pointer}.logCompile[data-v-486466a2]{padding:20px;text-align:left;padding-bottom:0}.logCompile .form .el-form-item[data-v-486466a2]:last-child{margin-top:-2px}.details[data-v-486466a2]{color:#040c2c}.details h4[data-v-486466a2]{padding-bottom:10px;border-bottom:1px;border-bottom:1px solid #e5e6e9}.details ul[data-v-486466a2]{font-size:12px;line-height:2.4}.details ul li span[data-v-486466a2]{margin-left:16px}",""])},c466:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("3b2b"),a("a481");function r(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var r in a)if(new RegExp("(".concat(r,")")).test(t)){var i=a[r]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?i:o(i))}return t}function o(e){return("00"+e).substr(e.length)}},d263:function(e,t,a){"use strict";a("386b")("fixed",(function(e){return function(){return e(this,"tt","","")}}))},d672:function(e,t,a){"use strict";a("8e6e"),a("ac6a"),a("456d");var r=a("ade3");a("d263"),a("7f7f");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("c5f6");var n={props:{label:{type:String,default:""},filterValue:{type:Array,default:function(){return[]}},initValue:{type:[String,Number]}},data:function(){return{val:null,visible:!1}},mounted:function(){this.val=this.initValue},methods:{comfirm:function(){this.$emit("change",this.val),this.visible=!1},reset:function(){this.val=null,this.$emit("change",this.val)}}},l=(a("895c"),a("2877")),s=Object(l.a)(n,(function(){var e=this,t=e._self._c;return t("span",[t("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("span",{style:{color:""==e.val||null==e.val?"":"#1740DC",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.label)+"\n        "),t("i",{staticClass:"icon icon-funnelplot-fill",style:{color:""==e.val||null==e.val?"#040C2C":"#1740DC",opacity:.55,marginLeft:"2px",position:"relative",fontSize:"12px"}})]),t("div",{staticClass:"filter_conter"},[t("el-scrollbar",[t("ul",{staticStyle:{"max-height":"200px",width:"100%"}},e._l(e.filterValue,(function(a){return t("li",{key:a.value,class:{active:a.value===e.val}},[t("el-radio",{staticStyle:{width:"100%"},attrs:{label:a.value},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},[e._v(e._s(a.text))])],1)})),0)])],1),t("div",{staticClass:"filter_footer"},[t("div",{staticClass:"btg"},[t("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.comfirm}},[e._v("确定")])],1)])])],1)}),[],!1,null,"7a62240a",null).exports;function c(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){l=!0,i=e},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var d={name:"CustomerTable",props:{dataList:{type:Array,default:function(){return[]}},labelMap:{type:Object,default:function(){return[]}},height:{type:Number,default:540},isShowToolTip:{type:Boolean,default:!0}},data:function(){return{scale:1,filterValue:null,isLoading:!1}},methods:{handleFilterChange:function(e,t){this.$emit("filter-change",{value:e,prop:t})},headerCellStyle:function(){return{}},headerRowStyle:function(){return{}},cellStyle:function(){return{}},rowStyle:function(){return{}},handleSortChange:function(e){this.$emit("sortChange",e)},triggerSearch:function(){},doLayout:function(){this.$refs.customerTable.doLayout()},reset:function(){var e=this;this.$nextTick((function(){var t,a=c(e.$refs.singleFileter);try{for(a.s();!(t=a.n()).done;){t.value.reset()}}catch(e){a.e(e)}finally{a.f()}}))}},components:{SingleFilter:s},watch:{dataList:function(e){e.length>0&&(this.isLoading=!1)}}},f=(a("46b0"),Object(l.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"customer-table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"customerTable",attrs:{data:e.dataList,"header-cell-style":e.headerCellStyle,"header-row-style":e.headerRowStyle,"cell-style":e.cellStyle,"row-style":e.rowStyle,"max-height":e.height},on:{"sort-change":e.handleSortChange}},e._l(e.labelMap,(function(a,r){return a.isShow?e._e():t("el-table-column",{key:r,attrs:{prop:r,label:a.name,align:a.align||"left",sortable:a.sortable,width:a.width,fixed:a.fixed,"show-overflow-tooltip":e.isShowToolTip},scopedSlots:e._u([a.header?{key:"header",fn:function(r){return[e._t(a.header,(function(){return[t("span",[e._v(e._s(a.name))])]}),{scope:i({header:a.name},r)})]}}:null,{key:"default",fn:function(t){var o=t.row;return[e._t("row",null,{row:o,prop:r,label:a.name})]}}],null,!0)},[a.filters?t("template",{slot:"header"},[t("single-filter",{ref:"singleFileter",refInFor:!0,attrs:{label:a.name,filterValue:a.filters,initValue:a.initValue},on:{change:function(t){return e.handleFilterChange(t,r)}}})],1):e._e()],2)})),1)],1)}),[],!1,null,"18fa3ff0",null));t.a=f.exports},fda3:function(e,t,a){var r=a("9d02");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("d15d8786",r,!0,{sourceMap:!1,shadowMode:!1})}}]);