(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1e1b0883"],{"0ecf":function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=6)}([function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t){e.exports=function(e,t,n,r,i,o){var a,s=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(a=e,s=e.default);var u,d="function"==typeof s?s.options:s;if(t&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0),n&&(d.functional=!0),i&&(d._scopeId=i),o?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=u):r&&(u=r),u){var c=d.functional,f=c?d.render:d.beforeCreate;c?(d._injectStyles=u,d.render=function(e,t){return u.call(t),f(e,t)}):d.beforeCreate=f?[].concat(f,u):[u]}return{esModule:a,exports:s,options:d}}},function(e,t,n){function r(e){for(var t=0;t<e.length;t++){var n=e[t],r=d[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(o(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(o(n.parts[i]));d[n.id]={id:n.id,refs:1,parts:a}}}}function i(){var e=document.createElement("style");return e.type="text/css",c.appendChild(e),e}function o(e){var t,n,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(r){if(h)return g;r.parentNode.removeChild(r)}if(v){var o=p++;r=f||(f=i()),t=a.bind(null,r,o,!1),n=a.bind(null,r,o,!0)}else r=i(),t=s.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}function a(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function s(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(19),d={},c=l&&(document.head||document.getElementsByTagName("head")[0]),f=null,p=0,h=!1,g=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n){h=n;var i=u(e,t);return r(i),function(t){for(var n=[],o=0;o<i.length;o++){var a=i[o];(s=d[a.id]).refs--,n.push(s)}for(t?r(i=u(e,t)):i=[],o=0;o<n.length;o++){var s;if(0===(s=n[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete d[s.id]}}}};var m=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n.n(r),o=n(15),a=function(e){n(18)},s=n(1)(i.a,o.a,!1,a,"data-v-65e34201",null);t.default=s.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n.n(r),o=n(14),a=function(e){n(17)},s=n(1)(i.a,o.a,!1,a,"data-v-59237a36",null);t.default=s.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n.n(r),o=n(13),a=function(e){n(16)},s=n(1)(i.a,o.a,!1,a,"data-v-5048c4bf",null);t.default=s.exports},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.install=t.dragContent=t.dragHandle=t.dragZone=void 0;var i=r(n(5)),o=r(n(4)),a=r(n(3)),s=function(e){e.component(i.default.name,i.default),e.component(o.default.name,o.default),e.component(a.default.name,a.default)},l={dragZone:i.default,dragHandle:o.default,dragContent:a.default,install:s};t.default=l,t.dragZone=i.default,t.dragHandle=o.default,t.dragContent=a.default,t.install=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"drag-content",props:{fixed:{type:[Number,Boolean],default:!1}},data:function(){return{sizeAttr:null,isMinSize:!1,isMaxSize:!1}},methods:{getCss:function(e,t){var n=document.defaultView.getComputedStyle(e,null);return t?n[t]:n},getSize:function(e){return e.getBoundingClientRect()[this.horizontal?"width":"height"]},getSizeAttr:function(e){return e+(this.horizontal?"Width":"Height")},getMinSize:function(){if(this.fixed)return this.getSize(this.$el);var e=this.getCss(this.$el,this.getSizeAttr("min"));return"0px"===e?e=0:e.includes("%")?e=parseFloat(e)/100*this.getSize(this.$parent.$el):e.includes("px")&&(e=parseFloat(e)),e<0&&(e=0),e},getMaxSize:function(){if(this.fixed)return this.getSize(this.$el);var e=this.getCss(this.$el,this.getSizeAttr("max"));return e.includes("%")?e=parseFloat(e)/100*this.getSize(this.$parent.$el):e.includes("px")&&(e=parseFloat(e)),e}},computed:{size:{get:function(){return this.sizeAttr},set:function(e){this.sizeAttr=e}},parentOptions:function(){return this.$parent&&this.$parent.options&&this.$parent.options},horizontal:function(){return"horizontal"===this.parentOptions.direction},isThreshold:function(){return this.isMinSize||this.isMaxSize},style:function(){var e={};return!this.fixed&&null!==this.size&&this.parentOptions&&(this.horizontal?e.width=this.size+"px":e.height=this.size+"px"),e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"drag-handle",props:{disabled:{type:Boolean,default:!1}},data:function(){return{canDrag:!1,todoContentsMaxSize:0,mouseHandleOffsetPrev:0,mouseHandleOffsetNext:0,nextHandleOffsetPosition:0}},computed:{direction:function(){return this.$parent.options.direction},horizontal:function(){return"horizontal"===this.direction},vertical:function(){return"vertical"===this.direction}},methods:{getAllHandles:function(){return this.$parent.$children.filter((function(e){return e.$vnode&&e.$vnode.componentOptions&&"drag-handle"===e.$vnode.componentOptions.tag}))},getHandles:function(){var e=this,t=this.getAllHandles(),n=[],r=[],i=!1;return t.forEach((function(t){var o=t===e;i=i||o,o||(i?r:n).push(t)})),{all:t,prev:n,next:r}},getHandle:function(){var e=this,t=this.getAllHandles(),n=null,r=null;return t.forEach((function(i,o){i===e&&(n=t[o-1],r=t[o+1])})),{prev:n,next:r}},getAllContents:function(){return this.$parent.$children.filter((function(e){return e.$vnode&&e.$vnode.componentOptions&&"drag-content"===e.$vnode.componentOptions.tag}))},getTodoContents:function(){var e=this,t=this.$parent.$children,n=[],r=[],i=[],o=!1,a=!1;return t.forEach((function(t){var s=t===e;o=o||s,t.$vnode&&t.$vnode.componentOptions&&("drag-content"===t.$vnode.componentOptions.tag?(n.push(t),o?a||r.push(t):i.push(t)):s||(o?a=!0:i=[]))})),{all:n,prev:i,next:r}},getSize:function(e){return e.getBoundingClientRect()[this.horizontal?"width":"height"]},getOffsetPosition:function(e){return this[this.horizontal?"offsetLeft":"offsetTop"](e)},getSizePlus:function(e){var t=this;return e.reduce((function(e,n){return e+t.getSize(n.$el)}),0)},getLiveContentsSize:function(){var e=this.getTodoContents(),t=(e.all,e.prev),n=e.next,r=this.getSizePlus(t),i=this.getSizePlus(n);return{all:r+i,prev:r,next:i}},offsetTop:function(e){var t=e.offsetTop;return null!=e.offsetParent&&(t+=this.offsetTop(e.offsetParent)),t},offsetLeft:function(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=this.offsetLeft(e.offsetParent)),t},mousePosition:function(e){return e[this.horizontal?"pageX":"pageY"]},handleSize:function(){return this.getSize(this.$el)},handleOffsetPosition:function(){return this.getOffsetPosition(this.$el)},handleMouseUp:function(){this.canDrag=!1,this.mouseHandleOffsetPrev=0,this.mouseHandleOffsetNext=0,this.nextHandleOffsetPosition=0,this.removeMouseEvents()},handleMouseDown:function(e){this.canDrag=!0;var t=this.handleSize(),n=this.mousePosition(e),r=this.handleOffsetPosition();this.todoContentsMaxSize=this.getLiveContentsSize().all,this.mouseHandleOffsetPrev=n-r,this.mouseHandleOffsetNext=t-this.mouseHandleOffsetPrev;var i=this.getHandle().next;this.nextHandleOffsetPosition=i?this.getOffsetPosition(i.$el):this.getOffsetPosition(this.$parent.$el)+this.getSize(this.$parent.$el),this.bindMouseEvents()},handleMouseMove:function(e){var t=this;if(this.disabled||!this.canDrag)return!1;var n=this.mousePosition(e),r=(this.handleOffsetPosition(),this.getOffsetPosition(this.$parent.$el)),i=this.getHandle(),o=i.prev,a=(i.next,this.getTodoContents()),s=(a.all,a.prev),l=a.next,u=n-this.mouseHandleOffsetPrev-(o?this.getOffsetPosition(o.$el)+this.getSize(o.$el):r),d=this.nextHandleOffsetPosition-n-this.mouseHandleOffsetNext;u<0&&(u=0),d<0&&(d=0),u>this.todoContentsMaxSize&&(u=this.todoContentsMaxSize),d>this.todoContentsMaxSize&&(d=this.todoContentsMaxSize);var c=s.reduce((function(e,t){return e+t.getMinSize()}),0),f=l.reduce((function(e,t){return e+t.getMinSize()}),0),p=s.reduce((function(e,t){return e+t.getMaxSize()}),0),h=l.reduce((function(e,t){return e+t.getMaxSize()}),0);if("string"==typeof p&&(p=this.todoContentsMaxSize-f),"string"==typeof h&&(h=this.todoContentsMaxSize-c),u>p||u<c||d>h||d<f)return!1;var g=function(e,n){var r=n/e.length,i=[],o=[],a=0;e.forEach((function(e){var n=t.getSize(e.$el);if(e.fixed)a+=n,o.push(e);else{var s=e.getMinSize(),l=e.getMaxSize(),u=n<=s,d=n>=l;e.isMinSize=u,e.isMaxSize=d,u&&r<s||d&&r>l?(e.size=u?s:l,a+=u?s:l,o.push(e)):i.push(e)}})),i.forEach((function(e){e.size=(n-a)/i.length}))};g(s,u),g(l,d)},bindMouseEvents:function(){document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove)},removeMouseEvents:function(){document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"drag-zone",props:{options:{type:Object,default:function(){return{direction:"horizontal"}}}},computed:{horizontal:function(){return"horizontal"===this.options.direction}}}},function(e,t,n){(e.exports=n(0)()).push([e.i,".drag-zone[data-v-5048c4bf]{position:relative}",""])},function(e,t,n){(e.exports=n(0)()).push([e.i,".drag-handle.horizontal[data-v-59237a36]{cursor:col-resize}.drag-handle.vertical[data-v-59237a36]{cursor:row-resize}.drag-handle.disabled[data-v-59237a36]{opacity:.5;cursor:no-drop}",""])},function(e,t,n){(e.exports=n(0)()).push([e.i,"",""])},function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"drag-zone"},[e._t("default")],2)},staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"drag-handle",class:{disabled:e.disabled,horizontal:"horizontal"===e.direction,vertical:"vertical"===e.direction},on:{mousedown:e.handleMouseDown}},[e._t("default")],2)},staticRenderFns:[]};t.a=r},function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"drag-content",class:{threshold:e.isThreshold},style:e.style},[e._t("default")],2)},staticRenderFns:[]};t.a=r},function(e,t,n){var r=n(10);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(2)("317119e1",r,!0)},function(e,t,n){var r=n(11);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(2)("55546ba7",r,!0)},function(e,t,n){var r=n(12);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),n(2)("28d2c7b4",r,!0)},function(e,t){e.exports=function(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=o[0],s={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}}])},"215e":function(e,t,n){(e.exports=n("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.role-list.role .tree [aria-disabled=true]>.el-tree-node__content{background:#fff}.role-list.role .tree .dis-btn{position:relative;width:100%;cursor:not-allowed;color:rgba(4,12,44,.25)}.role-list.role .zt-drag-container .drag-content:first-child{width:310px}.role-list.role .zt-drag-container .drag-content:last-child{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:10px}.custom-tree[data-v-role]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;line-height:40px;font-size:12px}.custom-tree[data-v-role]:hover .delete-icon,.custom-tree[data-v-role]:hover .edit-icon{display:inline-block}.edit-icon[data-v-role]{color:#1740dc;display:none;font-size:14px}.edit-icon[data-v-role]:hover{color:#7bbcff!important}.delete-icon[data-v-role]{color:red;display:none;font-size:14px}.delete-icon[data-v-role]:hover{color:#ec7d7d!important}",""])},"2f09":function(e,t,n){"use strict";n("d040")},3413:function(e,t,n){"use strict";n("7f7f"),n("8e6e"),n("456d"),n("7514");var r=n("ade3"),i=(n("ac6a"),n("5df3"),n("3835")),o=(n("96cf"),n("1da1")),a=(n("6762"),n("2fdb"),n("0ecf")),s=n("05f1"),l=n("67e0");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c,f,p,h,g,v,m,b,x,y,O=function(e,t,n){return t.trim()?t.includes(" ")||t.includes("\t")?n(new Error("角色名称不允许带有空格")):t.length<2||t.length>20?n(new Error("长度在2-20字符")):void n():n(new Error("请输入角色名称"))},z={data:function(){return{defaultProps:{children:"children",label:"roleName",disabled:this.disabledFn},isEditMenuShow:!1,targetData:{data:{roleId:""}},filterText:"",isLoading:!1,roleId:"",roleIdCopy:"",name:"",outRoleName:"",roleList:[{roleId:0,roleName:"全部角色",children:[]}],pageTop:{limit:20,page:1,total:0},pageBottom:{limit:20,page:1,total:0},roleUsers:[],roleOutUsers:[],timer:null,addRole:{roleName:""},dialogVisible:!1,rules:{roleName:[{required:!0,validator:O,trigger:"blur"}]},editRole:{roleName:"",roleId:""},rolwVisible:!1,username:"",isfilterRoles:!1,isfilterOutRoles:!1}},mounted:(y=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,e.next=4,Promise.all([Object(l.q)()]);case 4:t=e.sent,n=Object(i.a)(t,1),r=n[0].data.data,this.roleList[0].children=r,this.isLoading=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:this.$route.query.roleName&&this.$route.query.roleId&&(this.roleIdCopy=this.$route.query.roleId,this.$nextTick((function(){o.filterText=o.$route.query.roleName,o.nodeClickCopy()})));case 15:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return y.apply(this,arguments)}),components:{dragZone:a.dragZone,dragHandle:a.dragHandle,dragContent:a.dragContent,editMenu:s.a},methods:{disabledFn:function(e,t){return 0===e.have},filterNode:function(e,t){return!e||-1!==t.roleName.indexOf(e)},handleClose:function(){this.$refs.addRole.resetFields(),this.dialogVisible=!1},addSubmit:(x=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.addRole.roleName,e.prev=1,e.next=4,this.$refs.addRole.validate();case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return this.isLoading=!0,e.next=10,Object(l.c)({roleName:t,parentId:this.targetData.data.roleId});case 10:e.sent,this.$message.success("新建成功"),this.isLoading=!1,this.handleClose(),this.getRoleList(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1);case 20:case"end":return e.stop()}}),e,this,[[1,17]])}))),function(){return x.apply(this,arguments)}),nodeClickCopy:function(e,t,n){this.$refs.tree.setCurrentKey(this.$route.query.roleId),this.roleId=this.$route.query.roleId,this.getUsersByRole("",this.$route.query.roleId),this.getUsersNotRole()},nodeClick:function(e,t,n){if(0===e.have)return this.$refs.tree.setCurrentKey(this.roleId),void(t.isCurrent=!1);this.roleId=e.roleId,this.targetData={data:e},this.getUsersByRole(),this.getUsersNotRole()},getUsersByRole1:(b=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,s,u,d,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",n=c.length>1?c[1]:void 0,r={limit:this.pageTop.limit,page:this.pageTop.page,roleId:n,name:t},e.prev=3,this.isLoading=!0,e.next=7,Object(l.v)(r);case 7:i=e.sent,o=i.data.page,a=o.list,s=o.pageSize,u=o.totalCount,d=o.currPage,this.roleUsers=a,this.pageTop={limit:s,total:u,page:d},this.isLoading=!1,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3);case 18:case"end":return e.stop()}}),e,this,[[3,15]])}))),function(){return b.apply(this,arguments)}),getUsersByRole:(m=Object(o.a)(regeneratorRuntime.mark((function e(t,n){var r,i,o,a,s,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={limit:this.pageTop.limit,page:this.pageTop.page,roleId:this.roleId,name:this.name},e.prev=1,this.isLoading=!0,e.next=5,Object(l.v)(r);case 5:i=e.sent,o=i.data.page,a=o.list,s=o.pageSize,u=o.totalCount,d=o.currPage,this.roleUsers=a,this.pageTop={limit:s,total:u,page:d},this.isLoading=!1,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(e,t){return m.apply(this,arguments)}),getUsersNotRole:(v=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={limit:this.pageBottom.limit,page:this.pageBottom.page,roleId:this.roleId,name:this.outRoleName},e.prev=1,this.isLoading=!0,e.next=5,Object(l.w)(t);case 5:n=e.sent,r=n.data.page,i=r.list,o=r.pageSize,a=r.totalCount,s=r.currPage,this.roleOutUsers=i,this.pageBottom={limit:o,total:a,page:s},this.isLoading=!1,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return v.apply(this,arguments)}),getRoleList:(g=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.q)();case 2:t=e.sent,n=t.data.data,this.roleList[0].children=n;case 5:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)}),remove:(h=Object(o.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.targetData.data.roleId,t.isLoading=!0,e.next=4,Object(l.k)({roleId:n});case 4:e.sent,t.$message.success("已删除角色"),t.isLoading=!1,t.getRoleList(),n===t.roleId&&(t.roleId="");case 9:case"end":return e.stop()}}),e)})))).catch((function(e){}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)}),edit:function(){this.rolwVisible=!0,this.editRole=JSON.parse(JSON.stringify(this.targetData.data))},editRoleSubmit:(p=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.editRole.validate();case 3:return t=d({},this.editRole),this.isLoading=!0,e.next=7,Object(l.z)(t);case 7:this.$message.success("修改成功"),this.isLoading=!1,this.handleRoleClose(),this.getRoleList(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(){return p.apply(this,arguments)}),nodeContextmenu:function(e,t,n,r){0!==t.have&&(this.$refs.tree.setCurrentKey(t.roleId),this.targetData=n,this.$refs.editMenu.event=e,this.targetData.level<9&&(this.isEditMenuShow=!0))},renderTree:function(e,t){var n=this,r=t.data;return e("div",{class:"custom-tree",attrs:{"data-v-role":!0}},[e("div",[r.roleName]),e("div",[e("i",{on:{click:function(e){return n.edit(r,e)}},class:"edit-icon el-icon-edit",style:"margin-right:10px;",attrs:{"data-v-role":!0}}),e("i",{on:{click:function(e){return n.remove(r,e)}},class:"delete-icon el-icon-delete",attrs:{"data-v-role":!0}})])])},selecIntUser:(f=Object(o.a)(regeneratorRuntime.mark((function e(t,n){var r,i,o,a,s,u,d,c,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("DIV"===t.target.nodeName){e.next=30;break}if(r=t.target.dataset.userid||t.target.parentNode.dataset.userid,"out"!==n){e.next=15;break}return i=this.roleUsers.find((function(e){return e.userId==r})),o=i.userId,a={userId:o,roleId:this.roleId},this.isLoading=!0,e.next=9,Object(l.l)(a);case 9:e.sent,s=Math.ceil((this.pageTop.total-1)/this.pageTop.limit),this.pageTop.page=this.pageTop.page>s?s:this.pageTop.page,this.pageTop.page=this.pageTop.page<1?1:this.pageTop.page,e.next=25;break;case 15:if("in"!==n){e.next=25;break}return u=this.roleOutUsers.find((function(e){return e.userId==r})),d=u.userId,c={userId:d,roleId:this.roleId},this.isLoading=!0,e.next=21,Object(l.d)(c);case 21:e.sent,f=Math.ceil((this.pageBottom.total-1)/this.pageBottom.limit),this.pageBottom.page=this.pageBottom.page>f?f:this.pageBottom.page,this.pageBottom.page=this.pageBottom.page<1?1:this.pageBottom.page;case 25:this.getUsersByRole(),this.getUsersNotRole(),this.isLoading=!1,e.next=31;break;case 30:case 31:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)}),clearOrSelectAll:(c=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.roleId,r=this.name,e.prev=1,"clear"!==t){e.next=8;break}return e.next=5,Object(l.i)({roleId:n,name:r});case 5:e.sent,e.next=12;break;case 8:if("select"!=t){e.next=12;break}return e.next=11,Object(l.x)({roleId:n,name:r});case 11:e.sent;case 12:this.pageBottom.page=1,this.getUsersByRole(),this.getUsersNotRole(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1);case 20:case"end":return e.stop()}}),e,this,[[1,17]])}))),function(e){return c.apply(this,arguments)}),sizeChangeHandleTop:function(e){this.pageTop.limit=e,this.pageTop.page=1,this.getUsersByRole()},currentChangeHandleTop:function(e){this.pageTop.page=e,this.getUsersByRole()},sizeChangeHandleBottom:function(e){this.pageBottom.limit=e,this.pageBottom.page=1,this.getUsersNotRole()},currentChangeHandleBottom:function(e){this.pageBottom.page=e,this.getUsersNotRole()},handleRoleClose:function(){this.editRole.roleName="",this.editRole.roleId="",this.rolwVisible=!1},searchUser:function(e){"getUsersByRole"==e?this.isfilterRoles=!!this.name:this.isfilterOutRoles=!!this.outRoleName,this[e]()},reset:function(e){this[e]="","name"==e?(this.isfilterRoles=!1,this.getUsersByRole()):(this.isfilterOutRoles=!1,this.getUsersNotRole())}},watch:{filterText:function(e){this.$refs.tree.filter(e)}}},R=(n("2f09"),n("f500"),n("2877")),w=Object(R.a)(z,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"role-list role",staticStyle:{height:"calc(100vh - 140px)"}},[t("drag-zone",{staticClass:"zt-drag-container"},[t("drag-content",[t("div",{staticClass:"user_manage_tree_list zt-scrollbar",attrs:{"data-v":"role"}},[t("div",{staticClass:"top"},[t("div",{staticStyle:{"font-weight":"500"}},[e._v("角色列表")])]),t("div",{staticClass:"tree"},[t("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",placeholder:"请输入角色名称"},model:{value:e.filterText,callback:function(t){e.filterText="string"==typeof t?t.trim():t},expression:"filterText"}}),t("el-tree",{ref:"tree",attrs:{data:e.roleList,props:e.defaultProps,"highlight-current":"","node-key":"roleId","filter-node-method":e.filterNode},on:{"node-contextmenu":e.nodeContextmenu,"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.data;return t("span",{class:{"dis-btn":0==r.have}},[t("span",{attrs:{disabled:0==r.have}},[e._v(e._s(r.roleName))])])}}])})],1)])]),t("drag-handle"),t("drag-content",[t("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[t("el-input",{staticStyle:{width:"40%","margin-right":"10px"},attrs:{placeholder:"请输入已选择用户名称",disabled:!e.roleId},model:{value:e.name,callback:function(t){e.name="string"==typeof t?t.trim():t},expression:"name"}}),t("el-button",{attrs:{type:"primary",disabled:!e.roleId},on:{click:function(t){return e.searchUser("getUsersByRole")}}},[e._v("查询")]),t("el-button",{attrs:{disabled:!e.roleId},on:{click:function(t){return e.reset("name")}}},[e._v("重置")])],1),t("div",{staticClass:"user-content"},[t("div",{staticClass:"title-in-duty"},[t("div",[e._v("已选择用户")]),t("div",[t("el-popconfirm",{attrs:{title:"此操作会删除所有用户的角色，确定清空吗？"},on:{onConfirm:function(t){return e.clearOrSelectAll("clear")}}},[t("el-button",{attrs:{slot:"reference",type:"text",disabled:!e.roleUsers.length||e.isfilterRoles},slot:"reference"},[e._v("清空")])],1)],1)]),t("div",{staticClass:"result-in"},[t("div",{on:{click:function(t){return e.selecIntUser(t,"out")}}},e._l(e.roleUsers,(function(n){return t("el-button",{key:n.userId,staticClass:"result-button",attrs:{type:"primary",size:"mini","data-userid":n.userId}},[e._v(e._s(n.username))])})),1),t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.roleUsers.length,expression:"roleUsers.length"}],attrs:{"current-page":e.pageTop.page,"page-sizes":[10,20,50,100],"page-size":e.pageTop.limit,total:e.pageTop.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandleTop,"current-change":e.currentChangeHandleTop}})],1),t("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[t("el-input",{staticStyle:{width:"40%","margin-right":"10px"},attrs:{placeholder:"请输入未选择用户名称",disabled:!e.roleId},model:{value:e.outRoleName,callback:function(t){e.outRoleName="string"==typeof t?t.trim():t},expression:"outRoleName"}}),t("el-button",{attrs:{type:"primary",disabled:!e.roleId},on:{click:function(t){return e.searchUser("getUsersNotRole")}}},[e._v("查询")]),t("el-button",{attrs:{disabled:!e.roleId},on:{click:function(t){return e.reset("outRoleName")}}},[e._v("重置")])],1),t("div",{staticClass:"title-in-duty"},[t("div",[e._v("未选择用户")]),t("div",[t("el-popconfirm",{attrs:{icon:"el-icon-info",title:"此操作会添加所有用户的角色，确定全选吗？"},on:{onConfirm:function(t){return e.clearOrSelectAll("select")}}},[t("el-button",{attrs:{slot:"reference",type:"text",disabled:!e.roleOutUsers.length||e.isfilterOutRoles},slot:"reference"},[e._v("全选")])],1)],1)]),t("div",{staticClass:"result-in"},[t("div",{on:{click:function(t){return e.selecIntUser(t,"in")}}},e._l(e.roleOutUsers,(function(n){return t("el-button",{key:n.userId,staticClass:"result-button",attrs:{type:"default",size:"mini","data-userid":n.userId}},[e._v(e._s(n.username))])})),1),t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.roleOutUsers.length,expression:"roleOutUsers.length"}],attrs:{"current-page":e.pageBottom.page,"page-sizes":[10,20,50,100],"page-size":e.pageBottom.limit,total:e.pageBottom.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandleBottom,"current-change":e.currentChangeHandleBottom}})],1)])])],1),t("el-dialog",{attrs:{title:"添加角色",visible:e.dialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"addRole",attrs:{model:e.addRole,rules:e.rules,"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{prop:"roleName",label:"角色名称:"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"2-20字符，支持中英文，数字或符号（除空格）"},model:{value:e.addRole.roleName,callback:function(t){e.$set(e.addRole,"roleName",t)},expression:"addRole.roleName"}})],1),t("el-form-item",{attrs:{label:"直属角色:"}},[t("span",[e._v(e._s("/"+(e.targetData.data.parentName||"")))])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.addSubmit}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"修改角色",visible:e.rolwVisible,width:"40%","before-close":e.handleRoleClose},on:{"update:visible":function(t){e.rolwVisible=t}}},[t("el-form",{ref:"editRole",attrs:{model:e.editRole,rules:e.rules,"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{prop:"roleName",label:"角色名称:"}},[t("el-input",{attrs:{placeholder:"角色名称"},model:{value:e.editRole.roleName,callback:function(t){e.$set(e.editRole,"roleName",t)},expression:"editRole.roleName"}})],1),t("el-form-item",{attrs:{label:"直属角色:"}},[t("span",[e._v(e._s("/"+e.targetData.data.parentName))])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.editRoleSubmit}},[e._v("确定")]),t("el-button",{on:{click:e.handleRoleClose}},[e._v("取消")])],1)],1),t("edit-menu",{ref:"editMenu",attrs:{editMenuShow:e.isEditMenuShow},on:{"update:editMenuShow":function(t){e.isEditMenuShow=t},"update:edit-menu-show":function(t){e.isEditMenuShow=t}}},[e.targetData.level<7?t("li",{on:{click:function(t){e.dialogVisible=!0}}},[e._v("创建角色")]):e._e(),0!=e.targetData.data.roleId?t("li",{on:{click:e.edit}},[e._v("编辑")]):e._e(),0!=e.targetData.data.roleId?t("li",{on:{click:e.remove}},[e._v("删除")]):e._e()])],1)}),[],!1,null,"1ab628e9",null);t.a=w.exports},"9a1d":function(e,t,n){(e.exports=n("2350")(!1)).push([e.i,".primary-color[data-v-1ab628e9]{color:#1740dc}.success-color[data-v-1ab628e9]{color:#52c41a}.warning-color[data-v-1ab628e9]{color:#faad14}.error-color[data-v-1ab628e9]{color:#f5222d}.info-color[data-v-1ab628e9]{color:#909399}.border-color[data-v-1ab628e9]{border:1px solid #e5e6e9}.search-header[data-v-1ab628e9]{padding:20px}.result-in[data-v-1ab628e9]{border:1px solid #e9e9e9;padding:10px 10px 10px 0;height:calc(50vh - 180px);overflow-y:auto}.title-in-duty[data-v-1ab628e9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;line-height:40px;margin-top:10px}.result-button[data-v-1ab628e9]{margin-bottom:10px}.result-button[data-v-1ab628e9]:first-child{margin-left:10px}.empty-text-wrap[data-v-1ab628e9]{position:absolute;left:50%;top:30%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#909399;font-size:12px}",""])},a1ba:function(e,t,n){var r=n("215e");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("499e").default)("0a4b023a",r,!0,{sourceMap:!1,shadowMode:!1})},d040:function(e,t,n){var r=n("9a1d");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("499e").default)("0d96b8a6",r,!0,{sourceMap:!1,shadowMode:!1})},f500:function(e,t,n){"use strict";n("a1ba")}}]);