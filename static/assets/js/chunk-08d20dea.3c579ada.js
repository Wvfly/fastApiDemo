(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-08d20dea"],{"0049":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-474509ef]{color:#1740dc}.success-color[data-v-474509ef]{color:#52c41a}.warning-color[data-v-474509ef]{color:#faad14}.error-color[data-v-474509ef]{color:#f5222d}.info-color[data-v-474509ef]{color:#909399}.border-color[data-v-474509ef]{border:1px solid #e5e6e9}.mod-user[data-v-474509ef]{padding:20px;text-align:left}.mod-user .path_name[data-v-474509ef]{padding-bottom:9px;border-bottom:1px solid #e9e9e9;color:#1740dc;height:29px}.mod-user .mod_user_from[data-v-474509ef]{margin-top:8px}",""])},"0e94":function(e,t,a){"use strict";a("8454")},"0fcf":function(e,t,a){var r=a("ec62");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("58b50ab5",r,!0,{sourceMap:!1,shadowMode:!1})},2315:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.cascader-user .el-icon-arrow-down,.user-create>.el-cascader-panel,.user-create>.popper__arrow{display:none}.all-user .el-dropdown-link{font-size:12px!important;cursor:pointer}",""])},"253d":function(e,t,a){"use strict";a.r(t);var r=a("411d"),o=(a("7f7f"),a("d8ad")),s={data:function(){var e=this;return{dialogVisible:!1,dataForm:{id:0,userName:"",password:"",comfirmPassword:"",email:"",mobile:"",departmentId:"",workName:"",role:"",fromFlage:0},isAdd:!1,role_options:[{roleId:"",roleName:""}],dePartmentTreeData:[],defaultProps:{checkStrictly:!0,label:"name",value:"id"},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,validator:function(e,t,a){""==t?a(new Error("请输入密码")):a()},trigger:"blur"}],comfirmPassword:[{required:!0,validator:function(t,a,r){""==a?r(new Error("请再次输入密码")):a!=e.dataForm.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],mobile:[{required:!0,validator:function(e,t,a){if(!t)return a(new Error("手机号不能为空"));if(!/^1[3|4|5|7|8][0-9]\d{8}$/.test(t))return a(new Error("请输入正确的手机号"));a()},trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]}}},methods:{handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},closeDialog:function(){var e=this;this.$nextTick((function(){e.$refs.dataForm.resetFields(),e.dataForm={id:0,userName:"",password:"",comfirmPassword:"",email:"",mobile:"",departmentId:"",workName:"",role:"",fromFlage:0}}))},get_roleList:function(){var e=this;this.$API.get(this.$URL.getRoleSelect,{},(function(t){0==t.code?e.role_options=t.list:e.$message.error(t.msg)}))},init:function(e,t){var a=this;this.isAdd=e,this.dialogVisible=!0,this.dataForm.id=t||0,this.get_roleList(),e||this.$API.get(this.$URL.getUserInfo+"/".concat(this.dataForm.id),{},(function(e){0===e.code?(a.dataForm.userName=e.user.username,a.dataForm.email=e.user.email,a.dataForm.mobile=e.user.mobile,a.dataForm.password="",a.dataForm.workName=e.user.workName,a.dataForm.departmentId=e.user.departmentId,a.dataForm.role=e.user.roleIdList[0],a.dataForm.fromFlage=e.user.fromFlage):a.$message.error(e.msg)}))},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate((function(t){if(t){var a;a=e.dataForm.departmentId?e.dataForm.departmentId[e.dataForm.departmentId.length-1]||e.dataForm.departmentId:"";var r={userId:e.dataForm.id||void 0,username:e.dataForm.userName,password:e.dataForm.password,comfirmpassword:e.dataForm.comfirmPassword,email:e.dataForm.email,mobile:e.dataForm.mobile,departmentId:a,workName:e.dataForm.workName,roleIdList:[e.dataForm.role]};e.$API.post("".concat(e.dataForm.id?e.$URL.getUserUpdate:e.$URL.getUserSave),r,(function(t){0===t.code?(e.$emit("refreshDataList"),e.dialogVisible=!1,e.$message({message:"操作成功！",type:"success"})):e.$message.error(t.msg)}))}}))}},mounted:function(){var e=this;o.a.$off("treeDataChange"),o.a.$on("treeDataChange",(function(t){e.dePartmentTreeData=t}))},watch:{"dataForm.id":{handler:function(e,t){0==e?this.rules.comfirmPassword.required=!0:0!=e&&(this.rules.comfirmPassword.required=!1)}},deep:!0,immediate:!0}},i=(a("0e94"),a("25dc"),a("2877")),n={data:function(){return{isLoading:!1,dataForm:{userName:""},pathName:[],nodeId:"",dataList:[],pageIndex:1,pageSize:10,totalPage:0,dataListLoading:!1,dataListSelections:[],addOrUpdateVisible:!1}},components:{AddOrUpdate:Object(i.a)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-add-or-update"},[t("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closeDialog}},[t("el-form",{ref:"dataForm",staticClass:"demo-ruleForm",attrs:{model:e.dataForm,rules:e.rules,"label-width":"100px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit.apply(null,arguments)}}},[t("el-form-item",{attrs:{label:"用户名",prop:0==e.dataForm.fromFlage?"userName":""}},[t("el-input",{attrs:{disabled:0!=e.dataForm.fromFlage},model:{value:e.dataForm.userName,callback:function(t){e.$set(e.dataForm,"userName","string"==typeof t?t.trim():t)},expression:"dataForm.userName"}})],1),e.isAdd?e._e():t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{attrs:{type:"password",disabled:0!=e.dataForm.fromFlage,autocomplete:"new-password",placeholder:"不填写则不修改"},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}})],1),e.isAdd?t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"new-password"},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}})],1):e._e(),e.isAdd?t("el-form-item",{attrs:{label:"确认密码",prop:"comfirmPassword"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dataForm.comfirmPassword,callback:function(t){e.$set(e.dataForm,"comfirmPassword",t)},expression:"dataForm.comfirmPassword"}})],1):e._e(),t("el-form-item",{attrs:{label:"邮箱地址",prop:0==e.dataForm.fromFlage?"email":""}},[t("el-input",{attrs:{disabled:0!=e.dataForm.fromFlage},model:{value:e.dataForm.email,callback:function(t){e.$set(e.dataForm,"email",t)},expression:"dataForm.email"}})],1),t("el-form-item",{attrs:{label:"手机号"}},[t("el-input",{attrs:{disabled:0!=e.dataForm.fromFlage},model:{value:e.dataForm.mobile,callback:function(t){e.$set(e.dataForm,"mobile",t)},expression:"dataForm.mobile"}})],1),t("el-form-item",{attrs:{label:"部门"}},[t("el-cascader",{attrs:{options:e.dePartmentTreeData,props:e.defaultProps,filterable:"",clearable:""},model:{value:e.dataForm.departmentId,callback:function(t){e.$set(e.dataForm,"departmentId",t)},expression:"dataForm.departmentId"}})],1),t("el-form-item",{attrs:{label:"职务"}},[t("el-input",{model:{value:e.dataForm.workName,callback:function(t){e.$set(e.dataForm,"workName",t)},expression:"dataForm.workName"}})],1),t("el-form-item",{attrs:{label:"授权角色",prop:"role"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dataForm.role,callback:function(t){e.$set(e.dataForm,"role",t)},expression:"dataForm.role"}},e._l(e.role_options,(function(e){return t("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.dataFormSubmit}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,"960fe21a",null).exports},methods:{getDataList:function(e,t){var a=this;this.dataListLoading=!0;var r={page:e,limit:t,username:this.dataForm.userName,departmentId:this.nodeId};this.$API.get(this.$URL.getUserList,r,(function(e){0==e.code?(a.dataList=e.page.list,a.totalPage=e.page.totalCount):(a.dataList=[],a.totalPage=0,a.$message.error(e.msg)),a.$nextTick((function(){a.dataListLoading=!1}))}))},sizeChangeHandle:function(e){this.pageSize=e,this.getDataList(this.pageIndex,e)},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList(e,this.pageSize)},selectionChangeHandle:function(e){this.dataListSelections=e},addOrUpdateHandle:function(e,t){var a=this;this.addOrUpdateVisible=!0,this.$nextTick((function(){a.$refs.addOrUpdate.init(e,t)}))},userEnable:function(e,t){var a=this,r={userId:t.userId,status:e};this.$set(t,"loading",!0),this.$API.post(this.$URL.userEnable,r,(function(e){a.$set(t,"loading",!1),0!=e.code?a.$message.error(e.msg):a.getDataList(a.pageIndex,a.pageSize)}))},deleteHandle:function(e){var t=this;this.$confirm("确定进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$API.post("".concat(t.$URL.getUserDelete,"/").concat(e),{},(function(e){0==e.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataList(t.pageIndex,t.pageSize)}}):t.$message.error(e.msg)}))})).catch((function(){}))},allInitAllUserInfoUpdate:function(){var e=this;this.$confirm("将同步系统中所有用户数据，包含人员，手机号，邮箱，状态信息等","全量写入同步",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$API.post(e.$URL.allInitAllUserInfoUpdate,{},(function(t){0==t.code?e.$message({message:"同步成功",type:"success",duration:1500}):e.$message.error(t.msg)}))}))},auth:function(){o.a.$emit("openAuth",this.dataListSelections)},changePathname:function(e){this.pathName=this.pathName.filter((function(t,a){return a<e+1}))},goRoot:function(){this.pathName=[],this.nodeId=0,this.getDataList(1,this.pageSize,this.nodeId)}},mounted:function(){var e=this;this.getDataList(this.pageIndex,this.pageSize),o.a.$off("emitClickDePartmenNode"),o.a.$on("emitClickDePartmenNode",(function(t){e.pathName=t}))},watch:{pathName:{handler:function(e,t){e.length>0&&(t.length&&e[e.length-1].id!=t[t.length-1].id||!t.length)&&(this.pageIndex=1,this.nodeId=e[e.length-1].id,this.getDataList(1,this.pageSize))},deep:!0}}},l=(a("bc71"),Object(i.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"mod-user"},[t("div",{staticClass:"path_name"},[t("el-link",{attrs:{type:"primary"},on:{click:e.goRoot}},[e._v("...")]),e._l(e.pathName,(function(a,r){return t("el-link",{key:r,attrs:{type:"primary"},on:{click:function(t){return e.changePathname(r)}}},[e._v(e._s("/"+a.name)+" ")])}))],2),t("el-form",{staticClass:"mod_user_from",attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getDataList(1,e.pageSize)}}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"用户名"},model:{value:e.dataForm.userName,callback:function(t){e.$set(e.dataForm,"userName",t)},expression:"dataForm.userName"}})],1),t("el-form-item",[t("el-button",{on:{click:function(t){return e.getDataList(1,e.pageSize)}}},[e._v("查询")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrUpdateHandle(!0)}}},[e._v("新增")]),t("el-button",{attrs:{type:"primary"},on:{click:e.allInitAllUserInfoUpdate}},[e._v("同步用户")]),t("el-button",{attrs:{type:"danger",disabled:e.dataListSelections.length<=0},on:{click:e.auth}},[e._v("批量授权")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],attrs:{data:e.dataList},on:{"selection-change":e.selectionChangeHandle}},[t("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),t("el-table-column",{attrs:{prop:"userId","header-align":"center",width:"80",label:"ID"}}),t("el-table-column",{attrs:{prop:"username","header-align":"center","show-overflow-tooltip":"",label:"用户名"}}),t("el-table-column",{attrs:{prop:"roleName","header-align":"center","show-overflow-tooltip":"",align:"center",label:"角色"}}),t("el-table-column",{attrs:{prop:"departmentName","header-align":"center","show-overflow-tooltip":"",label:"部门"}}),t("el-table-column",{attrs:{prop:"workName","header-align":"center","show-overflow-tooltip":"",label:"职务"}}),t("el-table-column",{attrs:{prop:"email","header-align":"center","show-overflow-tooltip":"",label:"邮箱"}}),t("el-table-column",{attrs:{prop:"mobile","header-align":"center","show-overflow-tooltip":"",label:"手机号"}}),t("el-table-column",{attrs:{prop:"createTime","header-align":"center","show-overflow-tooltip":"",label:"创建时间"}}),t("el-table-column",{attrs:{"header-align":"right",align:"right",width:"246",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.status?t("el-button",{staticStyle:{color:"#67C23A"},attrs:{type:"text",size:"small",loading:a.row.loading},on:{click:function(t){return e.userEnable(1,a.row)}}},[e._v("启用")]):t("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small",loading:a.row.loading},on:{click:function(t){return e.userEnable(0,a.row)}}},[e._v("禁用")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.addOrUpdateHandle(!1,a.row.userId)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteHandle(a.row.userId)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}),t("AddOrUpdate",{ref:"addOrUpdate",on:{refreshDataList:function(t){return e.getDataList(1,e.pageSize)}}})],1)}),[],!1,null,"474509ef",null).exports),c=a("0037"),d=a("a2a4"),u=a("737a");a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54");function p(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){n=!0,s=e},f:function(){try{i||null==a.return||a.return()}finally{if(n)throw s}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var f,g,h,b,v,w,y,x,k,I,L={data:function(){return{dialogVisible:!1,options:[],roleOptions:[],dataForm:{userVal:[],role:""},rules:{userVal:[{required:!0,message:"请选择人员",trigger:"change"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},isLoading:!1}},methods:{diaClose:function(){this.$refs.dataForm.resetFields(),this.dataForm.role=""},getRoleList:function(){var e=this;this.$API.get(this.$URL.getRoleSelect,{},(function(t){0==t.code?e.roleOptions=t.list:e.$message.error(t.msg)}))},submit:function(){var e=this;this.$refs.dataForm.validate((function(t){if(!t)return!1;e.isLoading=!0;var a={roleId:e.dataForm.role,userIds:e.dataForm.userVal};e.$API.post(e.$URL.userBatchAuth,a,(function(t){e.isLoading=!1,0==t.code?(e.$message.success("操作成功"),e.dialogVisible=!1):e.$message.error(t.msg)}))}))}},mounted:function(){var e=this;o.a.$off("openAuth"),o.a.$on("openAuth",(function(t){e.dialogVisible=!0,e.options=t,e.dataForm.userVal=[];var a,r=p(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;e.dataForm.userVal.push(o.userId)}}catch(e){r.e(e)}finally{r.f()}})),this.getRoleList()}},$=Object(i.a)(L,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"batch_authorzation"},[t("el-dialog",{attrs:{title:"批量授权",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.diaClose}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}]},[t("el-form",{ref:"dataForm",attrs:{"label-width":"80px",model:e.dataForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"已选人员",prop:"userVal"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.dataForm.userVal,callback:function(t){e.$set(e.dataForm,"userVal",t)},expression:"dataForm.userVal"}},e._l(e.options,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.username,value:e.userId}})})),1)],1),t("el-form-item",{attrs:{label:"授权角色",prop:"role"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dataForm.role,callback:function(t){e.$set(e.dataForm,"role",t)},expression:"dataForm.role"}},e._l(e.roleOptions,(function(e){return t("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保 存")])],1)])],1)}),[],!1,null,"9611471a",null).exports,_=a("ade3"),U=(a("20d6"),a("2909")),F=(a("7514"),a("ac6a"),a("3835")),O=(a("96cf"),a("1da1")),C=(a("6762"),a("2fdb"),a("386d"),{data:function(){return{isLoading:!1,flage:null,disabled:!1,isActive:!1,loading:!1,list:[],selectList:[],pageOptions:{page:1,limit:10,total:0},formList:{name:""}}},methods:{init:function(e){this.flage=e,this.isActive=!0,this.getRelationTenantSelect()},rowStyle:function(e){var t=e.row,a=e.rowIndex;Object.defineProperty(t,"rowIndex",{value:a,writable:!0,enumerable:!1})},rowClick:function(e,t,a){var r=this.$refs.serveTable;this.selectList.find((function(t){return t.rowIndex==e.rowIndex}))?r.toggleRowSelection(e,!1):r.toggleRowSelection(e,!0)},rowClassName:function(e){var t=e.row,a=(e.rowIndex,"");return this.selectList.find((function(e){return e.rowIndex===t.rowIndex}))&&(a="current-row "),a},getRelationTenantSelect:function(){var e=this;this.loading=!0;var t=this.formList.name,a=this.pageOptions,r={current:a.page,size:a.limit,name:t,flage:this.flage};this.$API.post(1==this.flage?this.$URL.getRelationTenantSelect:this.$URL.getRelationLocalTenantSelect,r,(function(t){0==t.code?(e.loading=!1,e.list=t.data.records,e.pageOptions.total=t.data.total):(e.$message.error(t.msg),e.loading=!1,e.list=[],e.pageOptions.total=0)}))},sure:function(){var e=this;if(0!=this.selectList.length){this.isLoading=!0,this.disabled=!0;var t=[];this.selectList.map((function(e){t.push(e.userId)}));var a={list:t};this.$API.post(1==this.flage?this.$URL.getRelationTenant:this.$URL.getRelationLocalTenant,a,(function(t){0===t.code?(e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){}}),e.$emit("refreshDataList"),e.isActive=!1,e.isLoading=!1,e.disabled=!1):e.$message.error(t.msg)}))}else this.$message.error("请选择要关联的租户~")},diaClose:function(){this.selectList=[],this.pageOptions={page:1,limit:10,total:0},this.formList={name:""}},reset:function(){this.formList.name="",this.pageOptions.page=1,this.getRelationTenantSelect()},search:function(){this.pageOptions.page=1,this.getRelationTenantSelect()},handleSelectionChange:function(e){this.selectList=e},sizeChangeHandle:function(e){this.pageOptions.limit=e,this.pageOptions.page=1,this.getRelationTenantSelect()},currentChangeHandle:function(e){this.pageOptions.page=e,this.getRelationTenantSelect()}}}),N=Object(i.a)(C,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"addRelationTenant"},[t("el-dialog",{attrs:{title:"关联用户",visible:e.isActive,width:"80% !important"},on:{close:e.diaClose,"update:visible":function(t){e.isActive=t}}},[t("div",{staticStyle:{overflow:"hidden"}},[t("el-button",{staticStyle:{float:"right","margin-left":"10px"},on:{click:e.reset}},[e._v("重置")]),t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",clearable:""},on:{click:e.search}},[e._v("搜索")]),t("el-input",{staticStyle:{float:"right",width:"200px"},attrs:{clearable:"",placeholder:"请输入用户名/部门"},model:{value:e.formList.name,callback:function(t){e.$set(e.formList,"name","string"==typeof t?t.trim():t)},expression:"formList.name"}})],1),t("div",{staticClass:"table-wrapper"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"serveTable",staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:e.list,"row-style":e.rowStyle,"row-class-name":e.rowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.rowClick}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),t("el-table-column",{attrs:{prop:"username",label:"用户名"}}),t("el-table-column",{attrs:{prop:"realName",label:"姓名"}}),0==e.flage?t("el-table-column",{attrs:{prop:"dutyName",label:"职务"}}):e._e(),t("el-table-column",{attrs:{prop:"departmentName",label:"部门",width:"94"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":!0}}),0==e.flage?t("el-table-column",{attrs:{prop:"mobile",label:"手机号","show-overflow-tooltip":!0}}):e._e(),0==e.flage?t("el-table-column",{attrs:{prop:"tenantName",label:"所属租户","show-overflow-tooltip":!0}}):e._e(),0==e.flage?t("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":!0}}):e._e()],1),t("el-pagination",{attrs:{"current-page":e.pageOptions.page,"page-sizes":[10,20,50,100],"page-size":e.pageOptions.limit,total:e.pageOptions.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.isActive=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.isLoading,disabled:e.disabled},on:{click:e.sure}},[e._v("保存")])],1)])],1)}),[],!1,null,null,null).exports,P=a("67e0"),S=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,20}$/,R=/[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/,T=function(e,t,a){if(t&&!R.test(t))return a(new Error("邮箱格式不符"));a()},A=Object(_.a)({props:["flage"],components:{addRelationTenant:N},data:function(e){var t=this,a=function(e,t,a){return t?t.length<6||t.length>20?a(new Error("长度在6-20字符")):S.test(t)?void a():a(new Error("格式不符")):a(new Error("密码不能为空"))},r=function(e){return function(t,a,r){return a&&a.trim()?a.includes(" ")||a.includes("\t")?r(new Error("".concat(e,"不允许带有空格"))):void r():r(new Error("请输入".concat(e)))}};return{departmentName:"",userId:null,isMain:null,loading:!1,department:"",list:[],pageOptions:{limit:10,page:1,total:0},fromFlag:0,dialogCreate:!1,dialogTitle:"添加用户",dialogSync:!1,dialogBatch:!1,multi:[],createUser:{name:"",username:"",password:"",department:[],email:"",mobile:"",roleName:[],visible:!0,dutyId:"",confirmPassword:"",roleOutList:[]},changeForm:{password:"",confirmPassword:""},rules:{name:[{required:!0,validator:r("员工姓名"),trigger:"blur"},{min:2,max:20,message:"长度在2-20字符",trigger:"blur"}],username:[{required:!0,validator:r("用户名"),trigger:"blur"},{min:2,max:40,message:"长度在2-40字符",trigger:"blur"}],password:[{required:!0,validator:a,trigger:"blur"}],confirmPassword:[{required:!0,validator:function(e,a,r){return a?a!==t.createUser.password?r(new Error("和密码不一致，请重新输入")):void r():r(new Error("确认密码不能为空"))},trigger:"blur"}],email:[{validator:T,trigger:"blur"}],department:[{required:!0,message:"请选择部门",trigger:"change"}],roleName:[{required:!0,message:"请选择角色",trigger:"change"}]},rulesPassword:{password:[{required:!0,validator:a,trigger:"blur"}],confirmPassword:[{required:!0,validator:function(e,a,r){return a?a!==t.changeForm.password?r(new Error("和密码不一致，请重新输入")):void r():r(new Error("确认密码不能为空"))},trigger:"blur"}]},batchAuth:{userVal:"",role:""},equaName:!1,options:[],treeData:[],roleList:[],roleOutList:[],dutyList:[],passwordVisible:!1,departmentGetListLoading:!1}},mounted:(I=Object(O.a)(regeneratorRuntime.mark((function e(){var t,a,r,o,s,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,Promise.all([Object(P.u)({page:1,limit:10,flage:this.$props.flage}),Object(P.p)()]);case 4:t=e.sent,a=Object(F.a)(t,2),r=a[0].data.page,o=a[1].data.data,this.list=r.list,this.roleList=o,s=r.currPage,i=r.pageSize,n=r.totalCount,this.pageOptions={page:s,limit:i,total:n},this.loading=!1,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1);case 18:this.$route.query.status&&this.$route.query.userId&&(this.dialogCreate=!0,this.updateUser1(this.$route.query.userId));case 19:case"end":return e.stop()}}),e,this,[[1,15]])}))),function(){return I.apply(this,arguments)}),watch:{dialogCreate:function(e){e&&this.departmentGetList()}},methods:{departmentGetList:(k=Object(O.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.departmentGetListLoading=!0,e.prev=1,e.next=4,Object(P.m)();case 4:t=e.sent,this.treeData=this.formatTreeData(t.data.data),this.departmentGetListLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),this.departmentGetListLoading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return k.apply(this,arguments)}),rowStyle:function(e){var t=e.row,a=e.rowIndex;Object.defineProperty(t,"rowIndex",{value:a,writable:!0,enumerable:!1})},rowClick:function(e,t,a){var r=this.$refs.serveTable;this.multi.find((function(t){return t.rowIndex==e.rowIndex}))?r.toggleRowSelection(e,!1):r.toggleRowSelection(e,!0)},rowClassName:function(e){var t=e.row,a=(e.rowIndex,"");return this.multi.find((function(e){return e.rowIndex===t.rowIndex}))&&(a="current-row "),a},relationTenant:function(e){this.$refs.addRelationTenant.init(e)},getRelationTenantDel:function(e){var t=this;this.$confirm("确认取消关联该用户？","取消关联用户",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[];a.push(e.userId);var r={list:a};t.$API.post(t.$URL.getRelationTenantDel,r,(function(e){0===e.code?(t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){}}),t.getUserList()):t.$message.error(e.msg)}))})).catch((function(e){}))},reset:function(){this.department="",this.pageOptions.page=1,this.getUserList()},applySearch:function(){this.pageOptions.page=1,this.getUserList()},handleSelectionChange:function(e){this.multi=e},batchUpdate:function(){this.dialogBatch=!0,this.options=this.multi,this.batchAuth.userVal=this.multi.map((function(e){return e.userId}))},sizeChangeHandle:function(e){this.pageOptions.limit=e,this.pageOptions.page=1,this.getUserList()},currentChangeHandle:function(e){this.pageOptions.page=e,this.getUserList()},apply:function(e,t){var a=this,r=t.userId;Object(P.e)({status:e,userId:r}).then((function(t){var r=0===e?"禁用":"启用";a.$message.success("".concat(r,"成功")),a.getUserList()}))},deleteUser:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(P.r)({id:e}).then((function(e){t.$message.success("已删除用户"),t.getUserList()}))})).catch((function(e){}))},getUserList:(x=Object(O.a)(regeneratorRuntime.mark((function e(){var t,a,r,o,s,i,n,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,a=this.pageOptions,r=a.page,o=a.limit,this.loading=!0,Promise.reject("123"),e.next=6,Object(P.u)({page:r,limit:o,name:t.department,flage:this.$props.flage});case 6:s=e.sent,i=s.data.page,this.list=i.list,n=i.currPage,l=i.pageSize,c=i.totalCount,this.pageOptions={page:n,limit:l||t.limit,total:c},this.loading=!1;case 12:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)}),handleClose:function(){this.$refs.form.resetFields(),this.$refs.cascader.$refs.panel.activePath=[],this.$refs.cascader.$refs.panel.calculateCheckedNodePaths(),this.$refs.cascader.$refs.panel.syncActivePath(),this.isMain=null,this.dialogCreate=!1},batchClose:function(){this.$refs.formBatch.resetFields(),this.dialogBatch=!1},handleChange:(y=Object(O.a)(regeneratorRuntime.mark((function e(t){var a,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Array.isArray(t)&&t[t.length-1]||t,this.dutyList=[],this.createUser.dutyId="",a&&(!Array.isArray(a)||a.length)){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,Object(P.n)({departmentId:a});case 8:r=e.sent,o=r.data.data,this.dutyList=o&&o.map((function(e){var t=e.dutyId;return{label:e.name,value:t}})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5);case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e){return y.apply(this,arguments)}),applyCreate:(w=Object(O.a)(regeneratorRuntime.mark((function e(){var t,a,r,o,s,i,n,l,c,d,u,p,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRequest){e.next=2;break}return e.abrupt("return");case 2:return this.isRequest=!0,e.prev=3,e.next=6,this.$refs.form.validate();case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:if(this.departmentGetListLoading=!0,t=Array.isArray(this.createUser.department)&&this.createUser.department[this.createUser.department.length-1]||this.createUser.department,a=this.createUser.visible?1:0,r=this.createUser,o=r.email,s=r.confirmPassword,i=r.mobile,n=r.password,l=r.dutyId,c=r.name,d=r.roleName,u=r.username,p=r.roleOutList,l=l||"","添加用户"!==this.dialogTitle){e.next=21;break}return m={confirmPassword:s,departmentId:t,dutyId:l,email:o,mobile:i,password:n,realName:c,roles:[].concat(Object(U.a)(d),Object(U.a)(p)),status:a,username:u},e.next=18,Object(P.b)(m);case 18:e.sent,e.next=26;break;case 21:return f={departmentId:t,dutyId:l,email:o,mobile:i,realName:c,roles:[].concat(Object(U.a)(d),Object(U.a)(p)),status:a,userId:this.userId,username:u},e.next=24,Object(P.A)(f);case 24:e.sent,this.equaName&&(this.$store.state.old.admin_info.userName=u);case 26:this.handleClose(),this.$message.success("保存成功"),this.getUserList(),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(3);case 34:return e.prev=34,this.isRequest=!1,e.finish(34);case 37:this.departmentGetListLoading=!1;case 38:case"end":return e.stop()}}),e,this,[[3,31,34,37]])}))),function(){return w.apply(this,arguments)}),applySync:(v=Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.y)();case 2:e.sent;try{this.$message.success("同步成功"),this.dialogSync=!1,this.getUserList()}catch(e){}case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)}),formatTreeData:function(e){var t=this;return Array.isArray(e)&&e.length?e.map((function(e){var a=e.name,r=e.id,o=e.children;return{label:a,value:r,children:t.formatTreeData(o)}})):null},applyBatch:(b=Object(O.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.formBatch.validate();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return this.loading=!0,t={roleIds:this.batchAuth.role,userIds:this.batchAuth.userVal},e.next=10,Object(P.f)(t);case 10:e.sent,this.$message.success("操作成功"),this.$refs.formBatch.resetFields(),this.dialogBatch=!1,this.getUserList(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0);case 20:this.loading=!1;case 21:case"end":return e.stop()}}),e,this,[[0,17]])}))),function(){return b.apply(this,arguments)}),addUser:function(){this.dialogTitle="添加用户",this.fromFlag=0,this.dialogCreate=!0},updateUser1:(h=Object(O.a)(regeneratorRuntime.mark((function e(t){var a,r,o,s,i,n,l,c,d,u,p,m,f,g,h,b=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,this.dialogTitle="编辑用户",e.next=4,Object(P.t)(t);case 4:r=e.sent;try{this.dialogCreate=!0,o=r.data.data,s=o.confirmPassword,i=o.departmentName,n=o.departmentId,l=o.dutyId,c=o.email,d=o.mobile,o.password,u=o.realName,p=o.roleIdList,m=o.status,f=o.username,g=o.fromFlage,h=o.olderRoleIdList,this.$nextTick((function(){b.createUser={department:n,confirmPassword:s,email:c,mobile:d,password:"",name:u,roleName:p,visible:!!m,username:f,dutyId:"",roleOutList:[]},a.roleOutList=h,Object(U.a)(p).forEach((function(e,t){-1===a.roleList.findIndex((function(t){return t.roleId===e}))&&(a.createUser.roleOutList.push(e),a.createUser.roleName.splice(a.createUser.roleName.indexOf(e),1))})),b.equaName=f==b.$store.state.old.admin_info.userName,n&&b.handleChange(n),b.createUser.dutyId=n?l:"",b.departmentName=i,b.fromFlag=g}))}catch(e){}case 6:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)}),updateUser:(g=Object(O.a)(regeneratorRuntime.mark((function e(t){var a,r,o,s,i,n,l,c,d,u,p,m,f,g,h,b=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,this.dialogTitle="编辑用户",this.isMain=t.isMain,this.userId=t.userId,e.next=6,Object(P.t)(t.userId||t);case 6:r=e.sent;try{this.dialogCreate=!0,o=r.data.data,s=o.confirmPassword,i=o.departmentName,n=o.departmentId,l=o.dutyId,c=o.email,d=o.mobile,o.password,u=o.realName,p=o.roleIdList,m=o.status,f=o.username,g=o.fromFlage,h=o.olderRoleIdList,this.$nextTick((function(){b.createUser={department:n,confirmPassword:s,email:c,mobile:d,password:"",name:u,roleName:p,visible:!!m,username:f,dutyId:"",roleOutList:[]},a.roleOutList=h,Object(U.a)(p).forEach((function(e,t){-1===a.roleList.findIndex((function(t){return t.roleId===e}))&&(a.createUser.roleOutList.push(e),a.createUser.roleName.splice(a.createUser.roleName.indexOf(e),1))})),b.equaName=f==b.$store.state.old.admin_info.userName,n&&b.handleChange(n),b.createUser.dutyId=n?l:"",b.departmentName=i,b.fromFlag=g}))}catch(e){}case 8:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)}),changeUserPassword:function(e){var t=e.userId;this.userId=t,this.passwordVisible=!0},submitPassword:(f=Object(O.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.changePassword.validate();case 2:return t={userId:this.userId,newPassword:this.changeForm.password},this.loading=!0,e.prev=4,e.next=7,Object(P.h)(t);case 7:e.sent,this.$message.success("修改成功"),this.changePasswordClose(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4);case 15:this.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(){return f.apply(this,arguments)}),changePasswordClose:function(){this.$refs.changePassword.resetFields(),this.passwordVisible=!1}}},"watch",{"$store.state.old.admin_info.refresh":{handler:function(e){e&&(this.applySearch(),this.$store.state.old.admin_info.refresh=!1)}},deep:!0,immediate:!0,dialogCreate:function(e){e&&this.departmentGetList()}}),z=(a("88a6"),a("cbf4"),Object(i.a)(A,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"all-user"},[t("div",{staticStyle:{"margin-top":"0"}},[t("div",{staticClass:"button-wrapper"},[t("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入用户名/部门",clearable:""},model:{value:e.department,callback:function(t){e.department="string"==typeof t?t.trim():t},expression:"department"}}),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.applySearch},nativeOn:{key:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.applySearch.apply(null,arguments)}}},[e._v("查询")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1),e.flage?e._e():t("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加用户")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.relationTenant(e.flage?1:0)}}},[e._v("关联用户")]),t("el-button",{attrs:{disabled:!e.multi.length},on:{click:e.batchUpdate}},[e._v("批量授权")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"serveTable",staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:e.list,"row-style":e.rowStyle,"row-class-name":e.rowClassName},on:{"selection-change":e.handleSelectionChange,"row-click":e.rowClick}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),t("el-table-column",{attrs:{prop:"username",label:"用户名"}}),t("el-table-column",{attrs:{prop:"realName",label:"姓名"}}),t("el-table-column",{attrs:{prop:"dutyName",label:"职务"}}),t("el-table-column",{attrs:{prop:"departmentName",label:"部门",width:"94"}}),t("el-table-column",{attrs:{prop:"roleName",label:"角色",width:"94","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"mobile",label:"手机号","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{label:"操作",width:"130","header-align":"right",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[1!==a.row.status||e.flage?e._e():t("el-button",{staticClass:"disabled",attrs:{type:"text",disabled:0==a.row.isMain||e.$store.state.old.admin_info.userId==a.row.userId},nativeOn:{click:function(t){return t.stopPropagation(),e.apply(0,a.row)}}},[e._v("禁用")]),0!==a.row.status||e.flage?e._e():t("el-button",{attrs:{type:"text",disabled:0==a.row.isMain||e.$store.state.old.admin_info.userId==a.row.userId},nativeOn:{click:function(t){return t.stopPropagation(),e.apply(1,a.row)}}},[e._v("启用")]),e.flage?t("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return t.stopPropagation(),e.updateUser(a.row)}}},[e._v("编辑")]):e._e(),e.flage?t("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return t.stopPropagation(),e.getRelationTenantDel(a.row)}}},[e._v("取消关联")]):e._e(),t("div",{staticStyle:{display:"inline-block"},on:{click:function(e){e.stopPropagation()}}},[e.flage?e._e():t("el-dropdown",{staticStyle:{"margin-left":"20px"},attrs:{placement:"bottom-start"}},[t("span",{staticClass:"el-dropdown-link"},[e._v("更多"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return t.stopPropagation(),e.updateUser(a.row)}}},[e._v("编辑")])],1),0!=a.row.isMain?t("el-dropdown-item",[t("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return t.stopPropagation(),e.changeUserPassword(a.row)}}},[e._v("修改密码")])],1):e._e(),1==a.row.isMain&&e.$store.state.old.admin_info.userId!=a.row.userId?t("el-dropdown-item",[t("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return t.stopPropagation(),e.deleteUser(a.row.userId)}}},[e._v("删除")])],1):e._e(),0==a.row.isMain?t("el-dropdown-item",[t("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return t.stopPropagation(),e.getRelationTenantDel(a.row)}}},[e._v("取消关联")])],1):e._e()],1)],1)],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pageOptions.page,"page-sizes":[10,20,50,100],"page-size":e.pageOptions.limit,total:e.pageOptions.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogCreate,width:"50%","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.departmentGetListLoading,expression:"departmentGetListLoading"}],ref:"form",attrs:{model:e.createUser,"label-width":"90px","label-position":"left",rules:e.rules}},[t("el-form-item",{attrs:{label:"员工姓名:",prop:"name"}},[t("el-input",{attrs:{placeholder:"2-20字符，支持中英文、数字或符号（除空格）",disabled:1==e.flage||"编辑用户"===e.dialogTitle&&0==e.isMain},model:{value:e.createUser.name,callback:function(t){e.$set(e.createUser,"name",t)},expression:"createUser.name"}})],1),t("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[t("el-input",{attrs:{disabled:1==e.flage||"编辑用户"===e.dialogTitle&&0==e.isMain,placeholder:"2-20字符，支持中英文、数字或符号（除空格）"},model:{value:e.createUser.username,callback:function(t){e.$set(e.createUser,"username",t)},expression:"createUser.username"}})],1),"添加用户"===e.dialogTitle?t("el-form-item",{attrs:{label:"密码:",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入6-20个字符，至少一个大写字母、一个小写字母和一个数字"},model:{value:e.createUser.password,callback:function(t){e.$set(e.createUser,"password",t)},expression:"createUser.password"}})],1):e._e(),"添加用户"===e.dialogTitle?t("el-form-item",{attrs:{label:"确认密码:",prop:"confirmPassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入6-20个字符，至少一个大写字母、一个小写字母和一个数字"},model:{value:e.createUser.confirmPassword,callback:function(t){e.$set(e.createUser,"confirmPassword",t)},expression:"createUser.confirmPassword"}})],1):e._e(),t("el-form-item",{attrs:{label:"部门:",prop:"编辑用户"===e.dialogTitle&&0==e.isMain?"department1":"department"}},[t("el-cascader",{directives:[{name:"show",rawName:"v-show",value:0!=e.isMain,expression:"isMain!=0"}],ref:"cascader",staticClass:"cascader-user",staticStyle:{width:"100%"},attrs:{disabled:1==e.flage||"编辑用户"===e.dialogTitle&&0==e.isMain,options:e.treeData,filterable:"",clearable:"",props:{checkStrictly:!0},placeholder:"请输入部门名称匹配数据","popper-class":"user-create"},on:{change:e.handleChange},model:{value:e.createUser.department,callback:function(t){e.$set(e.createUser,"department",t)},expression:"createUser.department"}}),t("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.flage||"编辑用户"===e.dialogTitle&&0==e.isMain,expression:"flage == 1 ? true : dialogTitle === '编辑用户'&&isMain==0"}],attrs:{disabled:"",placeholder:"请输入部门名称匹配数据"},model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}})],1),t("el-form-item",{attrs:{label:"职务:",prop:"dutyId"}},[t("el-select",{attrs:{disabled:1==e.flage||"编辑用户"===e.dialogTitle&&0==e.isMain},model:{value:e.createUser.dutyId,callback:function(t){e.$set(e.createUser,"dutyId",t)},expression:"createUser.dutyId"}},e._l(e.dutyList,(function(e){var a=e.label,r=e.value;return t("el-option",{key:r,attrs:{label:a,value:r}})})),1)],1),t("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[t("el-input",{attrs:{disabled:1==e.flage||"编辑用户"===e.dialogTitle&&0==e.isMain,placeholder:"请输入邮箱"},model:{value:e.createUser.email,callback:function(t){e.$set(e.createUser,"email",t)},expression:"createUser.email"}})],1),t("el-form-item",{attrs:{label:"手机号:",prop:"mobile"}},[t("el-input",{attrs:{disabled:1==e.flage||"编辑用户"===e.dialogTitle&&0==e.isMain,placeholder:"请输入手机号"},model:{value:e.createUser.mobile,callback:function(t){e.$set(e.createUser,"mobile",t)},expression:"createUser.mobile"}})],1),t("el-form-item",{attrs:{label:"角色:",prop:"roleName"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:e.createUser.roleName,callback:function(t){e.$set(e.createUser,"roleName",t)},expression:"createUser.roleName"}},e._l(e.roleList,(function(e){return t("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.createUser.roleOutList&&e.createUser.roleOutList.length,expression:"createUser.roleOutList && createUser.roleOutList.length"}],attrs:{label:"不在权限内的角色:",prop:"roleOutList"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",disabled:""},model:{value:e.createUser.roleOutList,callback:function(t){e.$set(e.createUser,"roleOutList",t)},expression:"createUser.roleOutList"}},e._l(e.roleOutList,(function(e){return t("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),t("el-form-item",{attrs:{label:"是否启用:",prop:"visible"}},[t("el-switch",{attrs:{name:"是",disabled:1==e.flage||("编辑用户"===e.dialogTitle&&0==e.isMain||e.$store.state.old.admin_info.userId==e.userId)},model:{value:e.createUser.visible,callback:function(t){e.$set(e.createUser,"visible",t)},expression:"createUser.visible"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.handleClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.departmentGetListLoading},on:{click:e.applyCreate}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"同步用户",visible:e.dialogSync,width:"30%"},on:{"update:visible":function(t){e.dialogSync=t}}},[t("p",{staticStyle:{"text-align":"left"}},[e._v("\n      将同步系统中所有用户数据，包含人员、手机号、邮箱、状态、部门、姓名等信息\n    ")]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:function(t){e.dialogSync=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.applySync}},[e._v("确定")])],1)]),t("el-dialog",{attrs:{title:"批量授权",visible:e.dialogBatch,width:"40%","before-close":e.batchClose},on:{"update:visible":function(t){e.dialogBatch=t}}},[t("el-form",{ref:"formBatch",attrs:{model:e.batchAuth,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"已选人员:",prop:"userVal",rules:[{required:!0,message:"请选择人员",trigger:"change"}]}},[t("el-select",{staticStyle:{width:"380px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.batchAuth.userVal,callback:function(t){e.$set(e.batchAuth,"userVal",t)},expression:"batchAuth.userVal"}},e._l(e.options,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.username,value:e.userId}})})),1)],1),t("el-form-item",{attrs:{label:"授权角色:",prop:"role",rules:[{required:!0,message:"请选择角色",trigger:"blur"}]}},[t("el-select",{staticStyle:{width:"380px"},attrs:{placeholder:"请选择",multiple:""},model:{value:e.batchAuth.role,callback:function(t){e.$set(e.batchAuth,"role",t)},expression:"batchAuth.role"}},e._l(e.roleList,(function(e){return t("el-option",{key:e.roleId,staticStyle:{width:"380px"},attrs:{label:e.roleName,value:e.roleId}})})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.batchClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.applyBatch}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"修改用户密码",visible:e.passwordVisible,width:"45%","before-close":e.changePasswordClose},on:{"update:visible":function(t){e.passwordVisible=t}}},[t("el-form",{ref:"changePassword",attrs:{model:e.changeForm,rules:e.rulesPassword,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"密码:",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入6-20个字符，至少一个大写字母、一个小写字母和一个数字",type:"password"},model:{value:e.changeForm.password,callback:function(t){e.$set(e.changeForm,"password",t)},expression:"changeForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码:",prop:"confirmPassword"}},[t("el-input",{attrs:{placeholder:"请输入6-20个字符，至少一个大写字母、一个小写字母和一个数字",type:"password"},model:{value:e.changeForm.confirmPassword,callback:function(t){e.$set(e.changeForm,"confirmPassword",t)},expression:"changeForm.confirmPassword"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.changePasswordClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitPassword}},[e._v("确定")])],1)],1),t("addRelationTenant",{ref:"addRelationTenant",on:{refreshDataList:e.applySearch}})],1)}),[],!1,null,"0c58232c",null).exports),j=a("357d"),M=a("ef96"),D=a("3413"),V=a("0ecf"),q=(a("4360"),{data:function(){return{active:this.$checkPermission("platUsers")?"platform":"synchronize"}},components:{dragZone:V.dragZone,dragHandle:V.dragHandle,dragContent:V.dragContent,userList:l,treeList:r.a,addOrDepartment:c.a,moveDePartment:d.a,addStaff:u.a,auth:$,AllUser:z,DutyManage:j.a,DutyUsers:M.a,Role:D.a}}),E=(a("e1aa"),a("7501"),Object(i.a)(q,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"user_manage"},[t("div",{staticClass:"content-header"},[e._v("\n    用户管理\n  ")]),t("el-tabs",{staticStyle:{margin:"8px 20px"},attrs:{value:"platform"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e.$checkPermission("platUsers")?t("el-tab-pane",{attrs:{label:"本地用户",name:"platform",lazy:!0}},[t("AllUser",{attrs:{flage:0}})],1):e._e(),e.$checkPermission("syncUsers")?t("el-tab-pane",{attrs:{label:"IDM用户",name:"synchronize",lazy:!0}},[t("AllUser",{attrs:{flage:1}})],1):e._e()],1)],1)}),[],!1,null,"1e03a1ae",null));t.default=E.exports},"25dc":function(e,t,a){"use strict";a("0fcf")},"286d":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-960fe21a]{color:#1740dc}.success-color[data-v-960fe21a]{color:#52c41a}.warning-color[data-v-960fe21a]{color:#faad14}.error-color[data-v-960fe21a]{color:#f5222d}.info-color[data-v-960fe21a]{color:#909399}.border-color[data-v-960fe21a]{border:1px solid #e5e6e9}.el-dialog[data-v-960fe21a]{width:600px!important}",""])},"36ca":function(e,t,a){var r=a("0049");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("00e5cd88",r,!0,{sourceMap:!1,shadowMode:!1})},"5f2c":function(e,t,a){var r=a("2315");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("1252cab2",r,!0,{sourceMap:!1,shadowMode:!1})},"69c1":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.user_manage .user-tab .zt-drag-container .drag-content:first-child{width:250px}.user_manage .user-tab .zt-drag-container .drag-content:nth-child(n+1){width:320px}.user_manage .user-tab .zt-drag-container .drag-content:last-child{-webkit-box-flex:1;-ms-flex:1;flex:1}.user_manage .el-main{padding:0}.user_manage .el-tabs__header{margin:0}",""])},"6c8c":function(e,t,a){var r=a("a2ca");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("78d034c6",r,!0,{sourceMap:!1,shadowMode:!1})},7501:function(e,t,a){"use strict";a("92ce")},"7f9e":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-0c58232c]{color:#1740dc}.success-color[data-v-0c58232c]{color:#52c41a}.warning-color[data-v-0c58232c]{color:#faad14}.error-color[data-v-0c58232c]{color:#f5222d}.info-color[data-v-0c58232c]{color:#909399}.border-color[data-v-0c58232c]{border:1px solid #e5e6e9}.disabled[data-v-0c58232c]{color:#f5222d}.button-wrapper[data-v-0c58232c]{float:right;width:40%;margin-left:auto;margin-right:0;text-align:right}.el-button--text[data-v-0c58232c]{padding:0!important}",""])},8454:function(e,t,a){var r=a("286d");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("b4777d02",r,!0,{sourceMap:!1,shadowMode:!1})},"88a6":function(e,t,a){"use strict";a("ddfd")},"92ce":function(e,t,a){var r=a("69c1");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("7a7c6c50",r,!0,{sourceMap:!1,shadowMode:!1})},a2ca:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-1e03a1ae]{color:#1740dc}.success-color[data-v-1e03a1ae]{color:#52c41a}.warning-color[data-v-1e03a1ae]{color:#faad14}.error-color[data-v-1e03a1ae]{color:#f5222d}.info-color[data-v-1e03a1ae]{color:#909399}.border-color[data-v-1e03a1ae]{border:1px solid #e5e6e9}.content-header[data-v-1e03a1ae]{font-size:16px;font-weight:500;line-height:24px;border-bottom:1px solid #e5e6e9;padding:12px 20px;color:#040c2c}.user_manage[data-v-1e03a1ae]{height:100%;overflow:auto}",""])},bc71:function(e,t,a){"use strict";a("36ca")},cbf4:function(e,t,a){"use strict";a("5f2c")},ddfd:function(e,t,a){var r=a("7f9e");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("0bace4c6",r,!0,{sourceMap:!1,shadowMode:!1})},e1aa:function(e,t,a){"use strict";a("6c8c")},ec62:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.user-add-or-update .el-cascader{width:100%}",""])}}]);