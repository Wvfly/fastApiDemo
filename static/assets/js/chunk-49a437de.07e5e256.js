(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-49a437de"],{"0bd7":function(e,t,r){"use strict";r("62cd")},"35c9":function(e,t,r){(e.exports=r("2350")(!1)).push([e.i,".primary-color[data-v-76b25ed8]{color:#1740dc}.success-color[data-v-76b25ed8]{color:#52c41a}.warning-color[data-v-76b25ed8]{color:#faad14}.error-color[data-v-76b25ed8]{color:#f5222d}.info-color[data-v-76b25ed8]{color:#909399}.border-color[data-v-76b25ed8]{border:1px solid #e5e6e9}.content-header[data-v-76b25ed8]{font-size:16px;font-weight:500;line-height:24px;border-bottom:1px solid #e5e6e9;padding:12px 20px;color:#040c2c}.platformUserManage[data-v-76b25ed8]{height:100%;overflow:auto}",""])},3835:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r("06c5");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,s=[],n=!0,i=!1;try{for(r=r.call(e);!(n=(a=r.next()).done)&&(s.push(a.value),!t||s.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==r.return||r.return()}finally{if(i)throw o}}return s}}(e,t)||Object(a.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},4637:function(e,t,r){var a=r("c4d2");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("499e").default)("1897947b",a,!0,{sourceMap:!1,shadowMode:!1})},"62cd":function(e,t,r){var a=r("35c9");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("499e").default)("8e39ba1e",a,!0,{sourceMap:!1,shadowMode:!1})},7307:function(e,t,r){(e.exports=r("2350")(!1)).push([e.i,".primary-color[data-v-9cc68f98]{color:#1740dc}.success-color[data-v-9cc68f98]{color:#52c41a}.warning-color[data-v-9cc68f98]{color:#faad14}.error-color[data-v-9cc68f98]{color:#f5222d}.info-color[data-v-9cc68f98]{color:#909399}.border-color[data-v-9cc68f98]{border:1px solid #e5e6e9}.disabled[data-v-9cc68f98]{color:#f5222d}.button-wrapper[data-v-9cc68f98]{float:right;width:40%;margin-left:auto;margin-right:0;text-align:right}.el-button--text[data-v-9cc68f98]{padding:0!important}",""])},"7efb":function(e,t,r){"use strict";r("fd5a")},ad9d:function(e,t,r){(e.exports=r("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.cascader-user .el-icon-arrow-down,.user-create>.el-cascader-panel,.user-create>.popper__arrow{display:none}.all-user .el-dropdown-link{font-size:12px!important;cursor:pointer}",""])},b44d:function(e,t,r){var a=r("7307");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("499e").default)("51296006",a,!0,{sourceMap:!1,shadowMode:!1})},ba29:function(e,t,r){"use strict";r.r(t);r("7f7f"),r("ac6a"),r("5df3");var a,o,s,n,i,l,c=r("3835"),d=(r("96cf"),r("1da1")),u=(r("6762"),r("2fdb"),r("a481"),r("2b0e")),p=r("fedb"),f=function(e){var t=e.page,r=e.limit,a=e.name,o=e.flage;return u.default.http.post(p.a.getTenantUserList,{page:t,limit:r,name:a,flage:o})},m=function(e){return u.default.http.post(p.a.getTenantUserAdd,e)},g=function(e){return u.default.http.post(p.a.getTenantUserUpdate,e)},h=function(e){return u.default.http.post(p.a.getTenantUserPassword,e)},b=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,20}$/,w=/[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/,v=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/,y=function(e,t,r){return""==t?r(new Error("请输入邮箱")):t&&!w.test(t)?r(new Error("邮箱格式不符")):void r()},x={props:["flage"],data:function(e){var t=this,r=function(e,t,r){return t?t.length<6||t.length>20?r(new Error("长度在6-20字符")):b.test(t)?void r():r(new Error("格式不符")):r(new Error("密码不能为空"))},a=function(e){return function(t,r,a){return r&&r.trim()?r.includes(" ")?a(new Error("".concat(e,"不允许带有空格"))):void a():a(new Error("请输入".concat(e)))}};return{loading:!1,department:"",list:[],pageOptions:{limit:10,page:1,total:0},fromFlag:0,dialogCreate:!1,dialogTitle:"添加用户",dialogSync:!1,createUser:{name:"",username:"",password:"",email:"",mobile:"",visible:!0,confirmPassword:""},changeForm:{password:"",confirmPassword:""},rules:{name:[{required:!0,validator:a("姓名"),trigger:"blur"},{min:2,max:20,message:"长度在2-20字符",trigger:"blur"}],username:[{required:!0,validator:a("用户名"),trigger:"blur"},{min:2,max:40,message:"长度在2-40字符",trigger:"blur"}],password:[{required:!0,validator:r,trigger:"blur"}],confirmPassword:[{required:!0,validator:function(e,r,a){return r?r!==t.createUser.password?a(new Error("和密码不一致，请重新输入")):void a():a(new Error("确认密码不能为空"))},trigger:"blur"}],email:[{required:!0,validator:y,trigger:"blur"}],mobile:[{required:!0,validator:function(e,t,r){return""==t?r(new Error("请输入手机号")):t&&!v.test(t)?r(new Error("手机号格式不符")):void r()},trigger:"blur"}]},rulesPassword:{password:[{required:!0,validator:r,trigger:"blur"}],confirmPassword:[{required:!0,validator:function(e,r,a){return r?r!==t.changeForm.password?a(new Error("和密码不一致，请重新输入")):void a():a(new Error("确认密码不能为空"))},trigger:"blur"}]},passwordVisible:!1}},mounted:(l=Object(d.a)(regeneratorRuntime.mark((function e(){var t,r,a,o,s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([f({page:1,limit:10,flage:this.$props.flage})]);case 3:t=e.sent,r=Object(c.a)(t,1),a=r[0].data.data,this.list=a.records,o=a.current,s=a.size,n=a.total,this.pageOptions={page:o,limit:s,total:n},e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return l.apply(this,arguments)}),methods:{handleCommand:function(e){switch(e.command){case"a":this.updateUser(e.row);break;case"b":this.getTenantUserPassword(e.row);break;case"c":this.getTenantUserDelete(e.row)}},reset:function(){this.pageOptions.page=1,this.department="",this.getTenantUserList()},applySearch:function(){this.pageOptions.page=1,this.getTenantUserList()},sizeChangeHandle:function(e){this.pageOptions.limit=e,this.pageOptions.page=1,this.getTenantUserList()},currentChangeHandle:function(e){this.pageOptions.page=e,this.getTenantUserList()},apply:function(e,t){var r=this;(function(e){var t=e.state,r=e.id;return u.default.http.post(p.a.getTenantUserState,{state:t,id:r})})({state:e,id:t}).then((function(t){var a=0===e?"禁用":"启用";r.$message.success("".concat(a,"成功")),r.getTenantUserList()}))},getTenantUserDelete:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r,a;(r={id:e.userId},a=r.id,u.default.http.post(p.a.getTenantUserDelete,{id:a})).then((function(e){t.$message.success("已删除用户"),t.getTenantUserList()}))})).catch((function(e){}))},getTenantUserList:(i=Object(d.a)(regeneratorRuntime.mark((function e(){var t,r,a,o,s,n,i,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,r=this.pageOptions,a=r.page,o=r.limit,this.loading=!0,Promise.reject("123"),e.next=6,f({page:a,limit:o,name:t.department,flage:this.$props.flage});case 6:s=e.sent,n=s.data.data,this.list=n.records,i=n.current,l=n.size,c=n.total,this.pageOptions={page:i,limit:l||t.limit,total:c},this.loading=!1;case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),handleClose:function(){this.$refs.form.resetFields(),this.dialogCreate=!1},applyCreate:(n=Object(d.a)(regeneratorRuntime.mark((function e(){var t,r,a,o,s,n,i,l,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRequest){e.next=2;break}return e.abrupt("return");case 2:return this.isRequest=!0,e.prev=3,e.next=6,this.$refs.form.validate();case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:if(t=this.createUser.visible?1:0,r=this.createUser,a=r.email,o=r.confirmPassword,s=r.mobile,n=r.password,i=r.name,l=r.username,"添加用户"!==this.dialogTitle){e.next=18;break}return c={confirmPassword:o,email:a,mobile:s,password:n,realName:i,status:t,username:l},e.next=15,m(c);case 15:e.sent,e.next=22;break;case 18:return d={email:a,mobile:s,realName:i,status:t,userId:this.userId,username:l},e.next=21,g(d);case 21:e.sent;case 22:this.handleClose(),this.$message.success("保存成功"),this.getTenantUserList(),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3);case 30:return e.prev=30,this.isRequest=!1,e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[3,27,30,33]])}))),function(){return n.apply(this,arguments)}),applySync:(s=Object(d.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.http.post(p.a.allInitAllUserInfoUpdate,{});case 2:e.sent;try{this.$message.success("同步成功"),this.dialogSync=!1,this.getTenantUserList()}catch(e){}case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),addUser:function(){this.dialogTitle="添加用户",this.fromFlag=0,this.dialogCreate=!0},updateUser:(o=Object(d.a)(regeneratorRuntime.mark((function e(t){var r,a,o,s,n,i,l,c,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogTitle="编辑用户",this.userId=t.userId,e.next=4,f=t.userId,u.default.http.get(p.a.getTenantUserId.replace(":userId",f));case 4:r=e.sent;try{this.dialogCreate=!0,a=r.data.data,o=a.email,s=a.mobile,n=a.realName,i=a.status,l=a.username,c=a.fromFlage,this.$nextTick((function(){d.createUser={email:o,mobile:s,name:n,visible:!!i,username:l},d.fromFlag=c}))}catch(e){}case 6:case"end":return e.stop()}var f}),e,this)}))),function(e){return o.apply(this,arguments)}),getTenantUserPassword:function(e){var t=e.userId;this.userId=t,this.passwordVisible=!0},submitPassword:(a=Object(d.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.changePassword.validate();case 2:return t={userId:this.userId,newPassword:this.changeForm.password},e.prev=3,e.next=6,h(t);case 6:e.sent,this.$message.success("修改成功"),this.changePasswordClose(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3);case 14:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(){return a.apply(this,arguments)}),changePasswordClose:function(){this.$refs.changePassword.resetFields(),this.passwordVisible=!1}}},U=(r("e72f"),r("7efb"),r("2877")),k={components:{AllUser:Object(U.a)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"all-user"},[t("div",{staticStyle:{"margin-top":"0"}},[t("div",{staticClass:"button-wrapper"},[t("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}}),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.applySearch},nativeOn:{key:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.applySearch.apply(null,arguments)}}},[e._v("查询")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1),e.flage?e._e():t("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加用户")]),e.flage?t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogSync=!0}}},[e._v("同步用户")]):e._e()],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:e.list}},[t("el-table-column",{attrs:{prop:"username",label:"用户名"}}),t("el-table-column",{attrs:{prop:"realName",label:"姓名"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"mobile",label:"手机号","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":!0}}),e.flage?e._e():t("el-table-column",{attrs:{label:"操作",width:"130","header-align":"right",align:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[1===r.row.status?t("el-button",{staticClass:"disabled",attrs:{type:"text"},on:{click:function(t){return e.apply(0,r.row.userId)}}},[e._v("禁用")]):e._e(),0===r.row.status?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.apply(1,r.row.userId)}}},[e._v("启用")]):e._e(),t("el-dropdown",{staticStyle:{"margin-left":"20px"},attrs:{placement:"bottom-start"},on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[e._v("更多"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:{row:r.row,command:"a"}}},[e._v("\n              编辑\n            ")]),t("el-dropdown-item",{attrs:{command:{row:r.row,command:"b"}}},[e._v("\n              修改密码\n            ")]),t("el-dropdown-item",{attrs:{command:{row:r.row,command:"c"}}},[e._v("\n              删除\n            ")])],1)],1)]}}],null,!1,1708343994)})],1),t("el-pagination",{attrs:{"current-page":e.pageOptions.page,"page-sizes":[10,20,50,100],"page-size":e.pageOptions.limit,total:e.pageOptions.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogCreate,width:"50%","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("el-form",{ref:"form",attrs:{model:e.createUser,"label-width":"90px","label-position":"left",rules:e.rules}},[t("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[t("el-input",{attrs:{disabled:1===e.fromFlag,placeholder:"2-20字符，支持中英文、数字或符号（除空格）"},model:{value:e.createUser.username,callback:function(t){e.$set(e.createUser,"username",t)},expression:"createUser.username"}})],1),t("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[t("el-input",{attrs:{placeholder:"2-20字符，支持中英文、数字或符号（除空格）"},model:{value:e.createUser.name,callback:function(t){e.$set(e.createUser,"name",t)},expression:"createUser.name"}})],1),t("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[t("el-input",{attrs:{disabled:1===e.fromFlag,placeholder:"请输入邮箱"},model:{value:e.createUser.email,callback:function(t){e.$set(e.createUser,"email",t)},expression:"createUser.email"}})],1),t("el-form-item",{attrs:{label:"手机号:",prop:"mobile"}},[t("el-input",{attrs:{disabled:!!e.fromFlag,placeholder:"请输入手机号"},model:{value:e.createUser.mobile,callback:function(t){e.$set(e.createUser,"mobile",t)},expression:"createUser.mobile"}})],1),"添加用户"===e.dialogTitle?t("el-form-item",{attrs:{label:"密码:",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入6-20个字符，至少一个大写字母、一个小写字母和一个数字"},model:{value:e.createUser.password,callback:function(t){e.$set(e.createUser,"password",t)},expression:"createUser.password"}})],1):e._e(),"添加用户"===e.dialogTitle?t("el-form-item",{attrs:{label:"确认密码:",prop:"confirmPassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入6-20个字符，至少一个大写字母、一个小写字母和一个数字"},model:{value:e.createUser.confirmPassword,callback:function(t){e.$set(e.createUser,"confirmPassword",t)},expression:"createUser.confirmPassword"}})],1):e._e(),t("el-form-item",{attrs:{label:"是否启用:",prop:"visible"}},[t("el-switch",{attrs:{name:"是",disabled:!!e.fromFlag},model:{value:e.createUser.visible,callback:function(t){e.$set(e.createUser,"visible",t)},expression:"createUser.visible"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.handleClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.applyCreate}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"同步用户",visible:e.dialogSync,width:"30%"},on:{"update:visible":function(t){e.dialogSync=t}}},[t("p",{staticStyle:{"text-align":"left"}},[e._v("\n      同步系统中所有用户数据，包含用户名、部门、邮箱、手机号信息等，其中用户名、部门、邮箱号、手机号不允许修改\n      ")]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:function(t){e.dialogSync=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.applySync}},[e._v("确定")])],1)]),t("el-dialog",{attrs:{title:"修改用户密码",visible:e.passwordVisible,width:"45%","before-close":e.changePasswordClose},on:{"update:visible":function(t){e.passwordVisible=t}}},[t("el-form",{ref:"changePassword",attrs:{model:e.changeForm,rules:e.rulesPassword,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"密码:",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入6-20个字符，至少一个大写字母、一个小写字母和一个数字",type:"password"},model:{value:e.changeForm.password,callback:function(t){e.$set(e.changeForm,"password",t)},expression:"changeForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码:",prop:"confirmPassword"}},[t("el-input",{attrs:{placeholder:"请输入6-20个字符，至少一个大写字母、一个小写字母和一个数字",type:"password"},model:{value:e.changeForm.confirmPassword,callback:function(t){e.$set(e.changeForm,"confirmPassword",t)},expression:"changeForm.confirmPassword"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.changePasswordClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitPassword}},[e._v("确定")])],1)],1)],1)}),[],!1,null,"9cc68f98",null).exports},data:function(){return{active:"platform"}},methods:{}},_=(r("0bd7"),r("ccc7"),Object(U.a)(k,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"platformUserManage"},[t("div",{staticClass:"content-header"},[e._v("\n    平台用户管理\n  ")]),t("el-tabs",{staticStyle:{margin:"8px 20px"},attrs:{value:"platform"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[t("el-tab-pane",{attrs:{label:"平台用户",name:"platform"}},[t("AllUser",{attrs:{flage:0}})],1),t("el-tab-pane",{attrs:{label:"同步用户",name:"synchronize"}},[t("AllUser",{attrs:{flage:1}})],1)],1)],1)}),[],!1,null,"76b25ed8",null));t.default=_.exports},c4d2:function(e,t,r){(e.exports=r("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.platformUserManage .user-tab .zt-drag-container .drag-content:first-child{width:250px}.platformUserManage .user-tab .zt-drag-container .drag-content:nth-child(n+1){width:320px}.platformUserManage .user-tab .zt-drag-container .drag-content:last-child{-webkit-box-flex:1;-ms-flex:1;flex:1}.user_manage .el-main{padding:0}.user_manage .el-tabs__header{margin:0}",""])},ccc7:function(e,t,r){"use strict";r("4637")},e72f:function(e,t,r){"use strict";r("b44d")},fd5a:function(e,t,r){var a=r("ad9d");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("499e").default)("0bbc1c33",a,!0,{sourceMap:!1,shadowMode:!1})}}]);