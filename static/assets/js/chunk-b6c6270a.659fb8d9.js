(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b6c6270a"],{"589b":function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color[data-v-67f3da5c]{color:#1740dc}.success-color[data-v-67f3da5c]{color:#52c41a}.warning-color[data-v-67f3da5c]{color:#faad14}.error-color[data-v-67f3da5c]{color:#f5222d}.info-color[data-v-67f3da5c]{color:#909399}.border-color[data-v-67f3da5c]{border:1px solid #e5e6e9}.status-dot[data-v-67f3da5c]{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:5px}.monitorHistory[data-v-67f3da5c]{text-align:left}.monitorHistory>.title[data-v-67f3da5c]{height:48px;line-height:48px;border-bottom:1px solid #e5e6e9;font-weight:400;color:#040c2c;font-size:16px;padding:0 20px}.monitorHistory .add-btn[data-v-67f3da5c]{float:right;padding:15px 20px 0 20px}.monitorHistory .content[data-v-67f3da5c]{padding:0 20px}[data-v-67f3da5c] .el-drawer__header{padding:12px 20px;color:#040c2c;font-size:16px;margin-bottom:0;border-bottom:1px solid #e5e6e9;font-weight:600}.textOverFlow[data-v-67f3da5c]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""])},"670a":function(t,e,r){var a=r("589b");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,r("499e").default)("6aa05466",a,!0,{sourceMap:!1,shadowMode:!1})},ac7f:function(t,e,r){"use strict";r("c774")},ae51:function(t,e,r){(t.exports=r("2350")(!1)).push([t.i,".primary-color[data-v-57d6d906]{color:#1740dc}.success-color[data-v-57d6d906]{color:#52c41a}.warning-color[data-v-57d6d906]{color:#faad14}.error-color[data-v-57d6d906]{color:#f5222d}.info-color[data-v-57d6d906]{color:#909399}.border-color[data-v-57d6d906]{border:1px solid #e5e6e9}.status-dot[data-v-57d6d906]{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:5px}.monitorHistory[data-v-57d6d906]{text-align:left}.monitorHistory>.title[data-v-57d6d906]{height:48px;line-height:48px;border-bottom:1px solid #e5e6e9;font-weight:400;color:#040c2c;font-size:16px;padding:0 20px}.monitorHistory .add-btn[data-v-57d6d906]{float:right;padding:15px 20px 0 20px}.monitorHistory .content[data-v-57d6d906]{padding:0 20px}[data-v-57d6d906] .el-drawer__header{padding:12px 20px;color:#040c2c;font-size:16px;margin-bottom:0;border-bottom:1px solid #e5e6e9;font-weight:600}.textOverFlow[data-v-57d6d906]{white-space:nowrap}",""])},c774:function(t,e,r){var a=r("ae51");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,r("499e").default)("466cdfa8",a,!0,{sourceMap:!1,shadowMode:!1})},dab2f:function(t,e,r){"use strict";r("670a")},f798:function(t,e,r){"use strict";r.r(e);r("386d"),r("8e6e"),r("456d"),r("ac6a");var a=r("ade3"),o=(r("7f7f"),r("96cf"),r("1da1")),n=r("8e5b"),i=r("c858"),s=(r("c5f6"),r("c310"));function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){Object(a.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var c,d,p,f,m,h,g,v={name:"monitorOriginCompare",components:{LogDialog:i.a,OriginCompareLog:s.a},props:{total:{type:Number,default:0}},data:function(){return{isHighLevelSearch:!1,page:1,pageSize:10,totalCount:0,dataListLoading:!1,dataList:[],loading:!1,form:{createPer:"",taskName:this.$route.query.taskName,runMode:"",runResult:"",execStyle:"",execResult:"",monitorTarget:"",taskPer:"",start_end_time:["",""]},execStyleList:[{label:"手动",value:2},{label:"调度",value:1}],execResultList:[{label:"正常",value:"1"},{label:"失败",value:"2"},{label:"运行中",value:"3"},{label:"告警",value:"4"}],monitorTarget:[],taskPerList:[],monitorTargetList:[],monitorHistoryId:"",logRow:{},runLogVisible:!1}},mounted:function(){this.init(),this.getMonitorTargetList(),this.getTaskPerList()},methods:{init:(g=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getList();case 2:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)}),openLogDialog:function(t){this.runLogVisible=!0,this.monitorHistoryId=t.monitorHistoryId,this.logRow=t},gotoHistory:function(t){this.$router.push({path:"/historyDetail",query:{rowData:JSON.stringify(u(u({},t),{},{type:2,isCor:1,isCross:1}))}})},againRun:(h=Object(o.a)(regeneratorRuntime.mark((function t(e){var r,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.I)(e.qualityInfoId);case 2:0===(r=t.sent).data.code?this.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){a.getList()}}):this.$message.error(r.data.msg);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)}),search:function(){this.page=1,this.getList()},reset:function(){this.form.start_end_time=["",""],this.$refs.form.resetFields(),this.form.taskName="",this.search()},getexecStyleList:(m=Object(o.a)(regeneratorRuntime.mark((function t(){var e,r,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.q)();case 2:for(r in(e=t.sent).data.data)this.execStyleList.push({label:e.data.data[r],value:r});this.dataList.forEach((function(t){a.execStyleList.forEach((function(e){t.runMode==e.value&&(t.runMode=e.label)}))}));case 5:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)}),getExecResultList:(f=Object(o.a)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.r)();case 2:for(r in(e=t.sent).data.data)this.execResultList.push({label:e.data.data[r],value:r});case 4:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)}),getMonitorTargetList:(p=Object(o.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.g)();case 2:t.sent.data.data.forEach((function(t){e.monitorTargetList.push({label:t,value:t})}));case 4:case"end":return t.stop()}}),t)}))),function(){return p.apply(this,arguments)}),getTaskPerList:(d=Object(o.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.h)();case 2:t.sent.data.data.forEach((function(t){e.taskPerList.push({label:t,value:t})}));case 4:case"end":return t.stop()}}),t)}))),function(){return d.apply(this,arguments)}),getList:(c=Object(o.a)(regeneratorRuntime.mark((function t(){var e,r,a,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.dataListLoading=!0,a=u(u({},this.form),{},{page:this.page,pageSize:this.pageSize,startTime:(null===(e=this.form.start_end_time)||void 0===e?void 0:e[0])||"",endTime:(null===(r=this.form.start_end_time)||void 0===r?void 0:r[1])||"",id:this.$route.query.id||""}),t.next=4,Object(n.P)(a).then((function(t){0==t.data.code&&(o.dataListLoading=!1,o.dataList=t.data.data.records,o.totalCount=t.data.data.total,o.$emit("update:total",t.data.data.total))}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)}),sizeChangeHandle:function(t){this.pageSize=t,this.page=1,this.getList()},currentChangeHandle:function(t){this.page=t,this.getList()}},watch:{"ruleForm.taskName":{handler:function(t){this.search()},deep:!0,immediate:!0}}},b=(r("ac7f"),r("2877")),y=Object(b.a)(v,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"add-btn"},[e("el-form",{ref:"form",attrs:{inline:!0,model:t.form}},[e("el-row",{attrs:{type:"flex",justify:"end"}},[e("el-form-item",{attrs:{prop:"runMode"}},[e("el-select",{attrs:{placeholder:"请选择执行方式",clearable:""},model:{value:t.form.runMode,callback:function(e){t.$set(t.form,"runMode",e)},expression:"form.runMode"}},t._l(t.execStyleList,(function(t,r){return e("el-option",{key:r,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{prop:"runResult"}},[e("el-select",{attrs:{placeholder:"请选择运行结果",clearable:""},model:{value:t.form.runResult,callback:function(e){t.$set(t.form,"runResult",e)},expression:"form.runResult"}},t._l(t.execResultList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{prop:"taskName"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择监控对象",clearable:""},model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}},t._l(t.monitorTargetList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{prop:"createPer"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择任务责任人",clearable:""},model:{value:t.form.createPer,callback:function(e){t.$set(t.form,"createPer",e)},expression:"form.createPer"}},t._l(t.taskPerList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{on:{click:function(e){return t.reset()}}},[t._v("重置")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){t.isHighLevelSearch=!t.isHighLevelSearch}}},[t._v(t._s(t.isHighLevelSearch?"普通搜索":"高级搜索"))])],1)],1),t.isHighLevelSearch?e("el-row",{attrs:{type:"flex",justify:"end"}},[e("el-form-item",{attrs:{label:"",prop:"start_end_time"}},[e("el-date-picker",{attrs:{placeholder:"请选择监控执行日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.form.start_end_time,callback:function(e){t.$set(t.form,"start_end_time",e)},expression:"form.start_end_time"}})],1)],1):t._e()],1)],1),e("div",{staticClass:"content"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList}},[e("el-table-column",{attrs:{"show-overflow-tooltip":!0,"min-width":"130",prop:"taskName",fixed:"left",label:"任务名称"}}),e("el-table-column",{attrs:{width:"80","show-overflow-tooltip":!0,prop:"runMode",label:"执行方式"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[e("span",[t._v(t._s(1==a.runMode?"调度":2==a.runMode?"手动":""))])]}}])}),e("el-table-column",{attrs:{"min-width":"140",prop:"lastRunTime","show-overflow-tooltip":!0,label:"最近执行时间"}}),e("el-table-column",{attrs:{width:"100",prop:"timeConsuming","show-overflow-tooltip":!0,label:"运行耗时(s)"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[3==a.runResult?e("span",[t._v("--")]):e("span",[t._v(t._s(a.timeConsuming))])]}}])}),e("el-table-column",{attrs:{width:"80","show-overflow-tooltip":!0,label:"运行结果"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[e("i",{staticClass:"status-dot",style:{background:1==a.runResult?"#52C41A":2==a.runResult?"#f5222d":3==a.runResult?"#1740dc":4==a.runResult?"#faad14":""}}),e("span",[t._v(t._s(1==a.runResult?"正常":2==a.runResult?"失败":3==a.runResult?"运行中":4==a.runResult?"告警":""))])]}}])}),e("el-table-column",{attrs:{"min-width":"160","show-overflow-tooltip":!0,label:"源查询结果/目标查询结果",prop:"checkRuleNum"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[3==a.runResult?e("div",[t._v("--")]):e("div",[e("span",[t._v(t._s(a.sourceSqlResult?a.sourceSqlResult:"--"))]),t._v("/"),e("span",[t._v(t._s(a.targetSqlResult?a.targetSqlResult:"--"))])])]}}])}),e("el-table-column",{attrs:{width:"100","show-overflow-tooltip":!0,label:"通知状态",prop:"notifyState"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[3==a.runResult?e("div",[t._v("--")]):e("div",[t._v("\n              "+t._s(0==a.notifyState?"未触发":1==a.notifyState?"失败":2==a.notifyState?"成功":"未启用")+"\n            ")])]}}])}),e("el-table-column",{attrs:{width:"140","show-overflow-tooltip":!0,label:"操作人",prop:"updatePer"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[e("div",{staticClass:"textOverFlow"},[t._v(t._s(a.updatePer))])]}}])}),e("el-table-column",{attrs:{prop:"operationType","header-align":"right",width:"160",align:"right",fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[e("el-button",{attrs:{type:"text",disabled:3==a.runResult},on:{click:function(e){return t.againRun(a)}}},[t._v("重跑")]),e("el-button",{attrs:{type:"text",disabled:3==a.runResult||null==a.monitorHistoryId},on:{click:function(e){return t.openLogDialog(a)}}},[t._v("日志")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.gotoHistory(a)}}},[t._v("历史详情")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1),e("log-dialog",{ref:"logDialog",attrs:{monitorHistoryId:t.monitorHistoryId,logRow:t.logRow},on:{"update:monitorHistoryId":function(e){t.monitorHistoryId=e},"update:monitor-history-id":function(e){t.monitorHistoryId=e},"update:logRow":function(e){t.logRow=e},"update:log-row":function(e){t.logRow=e}}}),e("el-drawer",{attrs:{title:"运行日志",visible:t.runLogVisible,direction:"rtl",size:"900px",modal:!0},on:{"update:visible":function(e){t.runLogVisible=e}}},[t.runLogVisible?e("OriginCompareLog",{ref:"OriginCompareLogRef",attrs:{monitorHistoryId:t.monitorHistoryId,logRow:t.logRow,isHistory:1},on:{"update:monitorHistoryId":function(e){t.monitorHistoryId=e},"update:monitor-history-id":function(e){t.monitorHistoryId=e},"update:logRow":function(e){t.logRow=e},"update:log-row":function(e){t.logRow=e}}}):t._e()],1)],1)}),[],!1,null,"57d6d906",null).exports;function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){Object(a.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var R,_,k={data:function(){return{isHighLevelSearch:!1,page:1,pageSize:10,totalCount:0,dataListLoading:!1,dataList:[],loading:!1,form:{createPer:"",tableName:this.$route.query.tableName||"",runMode:"",runResult:"",execStyle:"",execResult:"",monitorTarget:"",taskPer:"",start_end_time:["",""]},execStyleList:[],execResultList:[],monitorTarget:[],taskPerList:[],monitorTargetList:[],monitorHistoryId:"",logRow:{},activeName:"表质量任务",corSourceTaskPageTotal:0}},components:{LogDialog:i.a,MonitorOriginCompare:y},computed:{},mounted:function(){this.$route.query.monitorHistoryId&&(this.monitorHistoryId=this.$route.query.monitorHistoryId,this.$refs.logDialog.openDialog()),this.init(),this.$route.query.tab&&(this.activeName="跨源对比任务")},methods:{init:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getList();case 2:return t.next=4,this.getexecStyleList();case 4:return t.next=6,this.getExecResultList();case 6:this.getMonitorTargetList(),this.getTaskPerList();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleClick:function(t,e){"表质量任务"==t.name&&(this.form.start_end_time=["",""],this.pageSize=10,this.page=1,this.form.runMode="",this.form.runResult="",this.form.tableName="",this.form.createPer="",this.init())},openLogDialog:function(t){this.monitorHistoryId=t.monitorHistoryId,this.logRow=t,this.$refs.logDialog.openDialog()},gotoHistory:function(t){this.$router.push({path:"/historyDetail",query:{rowData:JSON.stringify(x(x({},t),{},{isCor:0,isCross:0}))}})},againRun:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(e){var r,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.I)(e.qualityInfoId);case 2:0===(r=t.sent).data.code?this.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){a.getList()}}):this.$message.error(r.data.msg);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),goRuleList:function(t){localStorage.tableDetail=JSON.stringify({id:t.qualityInfoId,connectName:t.connectName,databaseName:t.databaseName,tableName:t.tableName}),this.$router.push({path:"/qualityrules",query:{id:t.qualityInfoId,dataSource:t.sourceName||t.connectName,dataBase:t.databaseName,dataTable:t.tableName}})},goQualityReport:function(t){this.$router.push({path:"/dataQualityNew/qualityReportNew",query:{connectId:t.connectId,dbName:t.databaseName,tableName:t.tableName}})},search:(_=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.page=1,t.next=3,this.getList();case 3:return t.next=5,this.getexecStyleList();case 5:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)}),reset:(R=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.form.start_end_time=["",""],this.$refs.form.resetFields(),this.form.tableName="",this.search();case 4:case"end":return t.stop()}}),t,this)}))),function(){return R.apply(this,arguments)}),getexecStyleList:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.execStyleList=[],t.next=3,Object(n.q)();case 3:for(r in e=t.sent,this.execStyleList=[],e.data.data)this.execStyleList.push({label:e.data.data[r],value:r});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),getExecResultList:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.r)();case 2:for(r in e=t.sent,this.execResultList=[],e.data.data)this.execResultList.push({label:e.data.data[r],value:r});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),getMonitorTargetList:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.p)();case 2:e=t.sent,this.monitorTargetList=[],e.data.data.forEach((function(t){r.monitorTargetList.push({label:t,value:t})}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),getTaskPerList:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.k)();case 2:e=t.sent,this.taskPerList=[],e.data.data.forEach((function(t){r.taskPerList.push({label:t,value:t})}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),getList:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){var e,r,a,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.dataListLoading=!0,a=x(x({},this.form),{},{page:this.page,pageSize:this.pageSize,startTime:(null===(e=this.form.start_end_time)||void 0===e?void 0:e[0])||"",endTime:(null===(r=this.form.start_end_time)||void 0===r?void 0:r[1])||"",tableName:this.form.tableName}),t.next=4,Object(n.n)(a).then((function(t){0==t.data.code&&(o.dataListLoading=!1,o.dataList=t.data.data.records,o.totalCount=t.data.data.total)}));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),sizeChangeHandle:function(t){this.pageSize=t,this.page=1,this.getList()},currentChangeHandle:function(t){this.page=t,this.getList()}}},L=(r("dab2f"),Object(b.a)(k,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"monitorHistory"},[e("div",{staticClass:"title"},[t._v("质量任务监控")]),e("div",{staticStyle:{padding:"0 20px"}},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"表质量任务("+t.totalCount+")",name:"表质量任务"}}),e("el-tab-pane",{attrs:{label:"跨源对比任务("+t.corSourceTaskPageTotal+")",name:"跨源对比任务"}})],1)],1),"表质量任务"==t.activeName?e("div",[e("div",{staticClass:"add-btn"},[e("el-form",{ref:"form",attrs:{inline:!0,model:t.form}},[e("el-row",{attrs:{type:"flex",justify:"end"}},[e("el-form-item",{attrs:{prop:"runMode"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择执行方式",clearable:""},model:{value:t.form.runMode,callback:function(e){t.$set(t.form,"runMode",e)},expression:"form.runMode"}},t._l(t.execStyleList,(function(t,r){return e("el-option",{key:r,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{prop:"runResult"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择运行结果",clearable:""},model:{value:t.form.runResult,callback:function(e){t.$set(t.form,"runResult",e)},expression:"form.runResult"}},t._l(t.execResultList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{prop:"tableName"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择监控对象",clearable:""},model:{value:t.form.tableName,callback:function(e){t.$set(t.form,"tableName",e)},expression:"form.tableName"}},t._l(t.monitorTargetList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{prop:"createPer"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择任务责任人",clearable:""},model:{value:t.form.createPer,callback:function(e){t.$set(t.form,"createPer",e)},expression:"form.createPer"}},t._l(t.taskPerList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查询")]),e("el-button",{on:{click:function(e){return t.reset()}}},[t._v("重置")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){t.isHighLevelSearch=!t.isHighLevelSearch}}},[t._v(t._s(t.isHighLevelSearch?"普通搜索":"高级搜索"))])],1)],1),t.isHighLevelSearch?e("el-row",{attrs:{type:"flex",justify:"end"}},[e("el-form-item",{attrs:{label:"",prop:"start_end_time"}},[e("el-date-picker",{attrs:{placeholder:"请选择监控执行日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.form.start_end_time,callback:function(e){t.$set(t.form,"start_end_time",e)},expression:"form.start_end_time"}})],1)],1):t._e()],1)],1),e("div",{staticClass:"content"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList}},[e("el-table-column",{attrs:{"show-overflow-tooltip":!0,"min-width":"110",prop:"tableName",fixed:"left",label:"表名"}}),e("el-table-column",{attrs:{width:"80","show-overflow-tooltip":!0,prop:"runMode",label:"执行方式"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(t._s(1==r.runMode?"调度":2==r.runMode?"手动":3==r.runMode?"任务节点":""))]}}],null,!1,510675431)}),e("el-table-column",{attrs:{width:"140",prop:"lastRunTime","show-overflow-tooltip":!0,label:"最近执行时间"}}),e("el-table-column",{attrs:{width:"100",prop:"timeConsuming","show-overflow-tooltip":!0,label:"运行耗时(s)"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[3==a.runResult?e("span",[t._v("--")]):e("span",[t._v(t._s(a.timeConsuming))])]}}],null,!1,595316248)}),e("el-table-column",{attrs:{width:"80","show-overflow-tooltip":!0,label:"运行结果"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[e("i",{staticClass:"status-dot",style:{background:1==a.runResult?"#52C41A":2==a.runResult?"#f5222d":3==a.runResult?"#1740dc":4==a.runResult?"#faad14":5==a.runResult?"#a61b3f":""}}),e("span",[t._v(t._s(1==a.runResult?"正常":2==a.runResult?"失败":3==a.runResult?"运行中":4==a.runResult?"告警":5==a.runResult?"阻断":""))])]}}],null,!1,2594364219)}),e("el-table-column",{attrs:{"min-width":"160","show-overflow-tooltip":!0,label:"强规则/弱规则/校验规则",prop:"checkRuleNum"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[e("div",[t._v(t._s(a.strongRule)+"/"+t._s(a.weakRule)+"/"+t._s(a.validationRule))])]}}],null,!1,1581381405)}),e("el-table-column",{attrs:{"min-width":"150","show-overflow-tooltip":!0,label:"强校验异常/弱校验异常",prop:"checkInormal"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[3==a.runResult?e("div",[t._v("--")]):e("div",[0==a.strongRuleAbnormal?e("span",[t._v(t._s(a.strongRuleAbnormal))]):e("span",{staticStyle:{color:"#f5222d"}},[t._v(t._s(a.strongRuleAbnormal))]),t._v("/"),0==a.weakRuleAbnormal?e("span",[t._v(t._s(a.weakRuleAbnormal))]):e("span",{staticStyle:{color:"#faad14"}},[t._v(t._s(a.weakRuleAbnormal))])])]}}],null,!1,67542891)}),e("el-table-column",{attrs:{width:"80","show-overflow-tooltip":!0,label:"通知状态"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[3==a.runResult?e("div",[t._v("--")]):e("div",[t._v("\n                    "+t._s(0==a.notifyState?"未触发":1==a.notifyState?"失败":2==a.notifyState?"成功":3==a.notifyState?"未启用":"")+"\n                  ")])]}}],null,!1,1754564811)}),e("el-table-column",{attrs:{width:"100","show-overflow-tooltip":!0,label:"操作人",prop:"updatePer"}}),e("el-table-column",{attrs:{prop:"operationType","header-align":"right",width:"250",align:"right",fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.row;return[e("el-button",{attrs:{type:"text",disabled:3==a.runResult},on:{click:function(e){return t.againRun(a)}}},[t._v("重跑")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.goRuleList(a)}}},[t._v("规则")]),e("el-button",{attrs:{type:"text",disabled:3==a.runResult},on:{click:function(e){return t.openLogDialog(a)}}},[t._v("日志")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.gotoHistory(a)}}},[t._v("历史详情")]),e("el-button",{attrs:{type:"text",disabled:3==a.runResult},on:{click:function(e){return t.goQualityReport(a)}}},[t._v("质量报告")])]}}],null,!1,1360645409)})],1),e("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1),e("log-dialog",{ref:"logDialog",attrs:{monitorHistoryId:t.monitorHistoryId,logRow:t.logRow,monitorId:t.logRow.id},on:{"update:monitorHistoryId":function(e){t.monitorHistoryId=e},"update:monitor-history-id":function(e){t.monitorHistoryId=e},"update:logRow":function(e){t.logRow=e},"update:log-row":function(e){t.logRow=e}}})],1):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:"跨源对比任务"==t.activeName,expression:"activeName == '跨源对比任务'"}]},[e("MonitorOriginCompare",{attrs:{total:t.corSourceTaskPageTotal},on:{"update:total":function(e){t.corSourceTaskPageTotal=e}}})],1)])}),[],!1,null,"67f3da5c",null));e.default=L.exports}}]);