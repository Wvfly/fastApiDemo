(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b02f6502"],{"06b0":function(e,t,a){var o=a("1766");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("1b361435",o,!0,{sourceMap:!1,shadowMode:!1})},"0d3a":function(e,t,a){var o=a("df87");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("6b3fc415",o,!0,{sourceMap:!1,shadowMode:!1})},1766:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-a85667e8]{color:#1740dc}.success-color[data-v-a85667e8]{color:#52c41a}.warning-color[data-v-a85667e8]{color:#faad14}.error-color[data-v-a85667e8]{color:#f5222d}.info-color[data-v-a85667e8]{color:#909399}.border-color[data-v-a85667e8]{border:1px solid #e5e6e9}.codeTableSetting .top-title[data-v-a85667e8]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}",""])},"2f21":function(e,t,a){"use strict";var o=a("79e5");e.exports=function(e,t){return!!e&&o((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},5134:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color{color:#1740dc}.success-color{color:#52c41a}.warning-color{color:#faad14}.error-color{color:#f5222d}.info-color{color:#909399}.border-color{border:1px solid #e5e6e9}.rule-table /deep/ .el-table__body .cell{padding-left:0}.rule-table:before{background-color:inherit}.rule-time{width:440px}.addCode .sub-ctr,.addCode .table-content{display:-webkit-box;display:-ms-flexbox;display:flex}.addCode .table-content{margin-bottom:15px}.addCode .table-content .sub-title{text-align:left;width:120px;font-size:12px;color:#606266}.addCode .table-content .sub-title .icon{margin-left:4px;font-size:12px;color:#f5222d}.addCode .table-content .right{-webkit-box-flex:1;-ms-flex:1;flex:1}.addCode .table-content .right .params_table .cell{line-height:normal!important}.addCode .table-content .right .params_table .cell .el-form-item{margin-bottom:3px!important}.addCode .table-content .right .params_table .cell .el-form-item__content{margin-left:0!important}.addCode .table-content .right .params_table .delete-btn{color:#040c2c}.addCode .table-content .right .params_table .delete-btn:hover{color:#1740dc}.addCode .table-content .right .addNew{width:100%;height:32px;line-height:32px;text-align:center;border:1px dashed #d9d9d9;cursor:pointer;color:#040c2c}.addCode .table-content .right .addNew:hover{color:#1740dc}",""])},"55dd":function(e,t,a){"use strict";var o=a("5ca1"),r=a("d8e8"),n=a("4bf8"),i=a("79e5"),l=[].sort,s=[1,2,3];o(o.P+o.F*(i((function(){s.sort(void 0)}))||!i((function(){s.sort(null)}))||!a("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(n(this)):l.call(n(this),r(e))}})},"747e":function(e,t,a){"use strict";a.r(t);a("386d"),a("7f7f"),a("8e6e"),a("456d"),a("ac6a");var o=a("ade3"),r=(a("96cf"),a("1da1")),n=(a("55dd"),a("a8b8"));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s,c,d={components:{},props:{ctr:{type:Object}},computed:{visible:function(){return this.ctr.dialogVisible}},data:function(){return{btnLoading:!1,isSubmit:!1,fieldTypeList:[],ParentTableList:[],form:{codeName:"",type:"",fieldType:"",codeValue:"",cascade:0,parentVOList:[{id:"",codeTableId:"",codeTableName:"",codeName:"",codeList:[]}],map:0,rejectVOList:[{id:"",codeTableId:"",codeTableName:"",codeName:"",codeList:[]}],source:""},rules:{codeName:[{required:!0,message:"请输入编码名称，以英文，数字开头，支持_、-、.等特殊字符（不含空格）",trigger:"blur",pattern:/^[a-zA-Z0-9][^\u4E00-\u9FA5]*$/}],type:[{required:!0,message:"请输入类别，以中英文，数字开头，支持_、-、.等特殊字符（不含空格）",trigger:"blur",pattern:/^[a-zA-Z0-9\u4E00-\u9FA5][\S]*$/}],fieldType:[{required:!0,message:"请选择字段类型",trigger:"change"}],codeValue:[{required:!0,message:"请输入码值",trigger:"blur"}]}}},watch:{visible:{handler:function(e,t){e&&(this.getTypeList(),this.getParentTableList(),"edit"==this.ctr.type&&this.dataAssetCodeDetail(this.ctr.id))}}},methods:{getParentTableList:function(){var e=this;this.$API.get(this.$URL.codeGetParentTableList,{},(function(t){0==t.code?e.ParentTableList=t.data:e.$message.error(t.msg)}))},changeParent:function(e,t,a,o){var r=this;"add"==o&&(this.form[t][a].id=""),this.$API.post(this.$URL.getCodeListByTableId,{id:this.ctr.id,codeTableId:e},(function(e){0==e.code?r.form[t][a].codeList=e.data:r.$message.error(e.msg)}))},getTypeList:function(){var e=this;this.$API.get(this.$URL.codeGetFieldTypeList,{},(function(t){0==t.code?(e.fieldTypeList=t.data,e.$nextTick((function(){e.form.fieldType=String(t.data[0].value)}))):e.$message.error(t.msg)}))},dataAssetCodeDetail:function(e){var t=this;this.$API.get(this.$URL.dataAssetCodeDetail,{id:e},(function(e){0==e.code?(t.form=e.data,t.form.parentVOList.forEach((function(e,a){t.$set(e,"codeList",[]),t.changeParent(e.codeTableId,"parentVOList",a)})),t.form.rejectVOList.forEach((function(e,a){t.$set(e,"codeList",[]),t.changeParent(e.codeTableId,"rejectVOList",a)})),0==t.form.parentVOList.length&&t.form.parentVOList.push({id:"",codeTableId:"",codeList:[]}),0==t.form.rejectVOList.length&&t.form.rejectVOList.push({id:"",codeTableId:"",codeList:[]})):t.$message.error(e.msg)}))},addNew:function(e){this.form[e].length>=10?this.$message.error():this.form[e].push({id:"",codeTableId:"",codeList:[]})},deleteCur:function(e,t){this.form[t].splice(e,1)},duplicate:function(e){var t=[];e.forEach((function(e){t.push(e.codeTableId+"table"+e.id)}));var a=[];return t.sort().sort((function(e,t){e==t&&-1===a.indexOf(e)&&a.push(e)})),a},submitForm:function(){var e=this;this.$refs.form.validate(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(a){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=e.form.cascade){t.next=7;break}if(!e.duplicate(e.form.parentVOList).length){t.next=4;break}return e.$message.error("存在重复级联关系，请确认后再次提交！"),t.abrupt("return");case 4:if(e.form.parentVOList.length){t.next=7;break}return e.$message.error("级联关系未填写，请确认后再次提交！"),t.abrupt("return");case 7:if(1!=e.form.map){t.next=14;break}if(!e.duplicate(e.form.rejectVOList).length){t.next=11;break}return e.$message.error("存在重复映射关系，请确认后再次提交！"),t.abrupt("return");case 11:if(e.form.rejectVOList.length){t.next=14;break}return e.$message.error("映射关系未填写，请确认后再次提交！"),t.abrupt("return");case 14:if(!a){t.next=25;break}if(!e.isSubmit){t.next=17;break}return t.abrupt("return");case 17:e.isSubmit=!0,(o=l(l({codeTableId:JSON.parse(e.$route.query.id)},e.form),{},{version:e.$route.query.version})).parentVOList=0==o.cascade?null:o.parentVOList,o.rejectVOList=0==o.map?null:o.rejectVOList,e.btnLoading=!0,"add"==e.ctr.type?e.$API.post(e.$URL.saveDataAssetCode,o,(function(t){0==t.code?(e.$message.success("新增成功！"),e.isSubmit=!1,e.btnLoading=!1,e.close(),e.$emit("refresh")):(e.isSubmit=!1,e.btnLoading=!1,e.$message.error(t.msg))})):(o.id=e.ctr.id,e.$API.post(e.$URL.updateDataAssetCode,o,(function(t){0==t.code?(e.$message.success("编辑成功！"),e.isSubmit=!1,e.btnLoading=!1,e.close(),e.$emit("refresh")):(e.isSubmit=!1,e.btnLoading=!1,e.$message.error(t.msg))}))),t.next=26;break;case 25:return t.abrupt("return",!1);case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},close:function(){this.$refs.form.resetFields(),this.form={codeName:"",type:"",fieldType:"",codeValue:"",cascade:0,parentVOList:[{id:"",codeTableId:"",codeList:[]}],map:0,rejectVOList:[{id:"",codeTableId:"",codeList:[]}],source:""},this.ctr.dialogVisible=!1}},created:function(){},mounted:function(){}},u=(a("a6e7"),a("2877")),f=Object(u.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"addCode"},[t("el-dialog",{staticClass:"reset-ruleForm",staticStyle:{"text-align":"left"},attrs:{title:"add"==e.ctr.type?"创建编码":"编辑编码",width:"600px",visible:e.ctr.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.ctr,"dialogVisible",t)},close:e.close}},[t("div",[t("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{key:"codeName",attrs:{label:"编码名称",prop:"codeName"}},[t("el-input",{attrs:{maxlength:"50",placeholder:"请输入编码名称，并以英文，数字开头，支持_、-、.等特殊字符，50字符以内"},model:{value:e.form.codeName,callback:function(t){e.$set(e.form,"codeName",t)},expression:"form.codeName"}})],1),t("el-form-item",{key:"type",attrs:{label:"类别",prop:"type"}},[t("el-input",{attrs:{maxlength:"50",placeholder:"请输入类别，并以中英文，数字开头，支持_、-、.等特殊字符，50字符以内"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),t("el-form-item",{key:"fieldType",attrs:{label:"类型",prop:"fieldType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.form.fieldType,callback:function(t){e.$set(e.form,"fieldType",t)},expression:"form.fieldType"}},e._l(e.fieldTypeList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:String(e.value)}})})),1)],1),t("el-form-item",{key:"codeValue",attrs:{label:"码值",prop:"codeValue"}},[t("el-input",{attrs:{type:"textarea",maxlength:"300",placeholder:"请输入码值"},model:{value:e.form.codeValue,callback:function(t){e.$set(e.form,"codeValue","string"==typeof t?t.trim():t)},expression:"form.codeValue"}})],1),t("el-form-item",{attrs:{label:"开启级联",prop:"cascade"}},[t("el-radio-group",{model:{value:e.form.cascade,callback:function(t){e.$set(e.form,"cascade",t)},expression:"form.cascade"}},[t("el-radio",{attrs:{label:0}},[e._v("否")]),t("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),1==e.form.cascade?t("div",{key:"table",staticClass:"table-content"},[t("div",{staticClass:"right"},[t("el-table",{staticClass:"params_table rule-table",staticStyle:{width:"100%"},attrs:{data:e.form.parentVOList}},[t("el-table-column",{attrs:{label:"上级码表"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"parentVOList."+a.$index+".codeTableId",rules:{required:!0,message:"不能为空",trigger:"change"}}},[t("el-select",{on:{change:function(t){return e.changeParent(t,"parentVOList",a.$index,"add")}},model:{value:a.row.codeTableId,callback:function(t){e.$set(a.row,"codeTableId",t)},expression:"scope.row.codeTableId"}},e._l(e.ParentTableList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.codeTableName,value:e.codeTableId}})})),1)],1)]}}],null,!1,2646272993)}),t("el-table-column",{attrs:{"min-width":"100",label:"上级编码"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"parentVOList."+a.$index+".id",rules:{required:!0,message:"不能为空",trigger:"change"}}},[t("el-select",{model:{value:a.row.id,callback:function(t){e.$set(a.row,"id",t)},expression:"scope.row.id"}},e._l(e.form.parentVOList[a.$index].codeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.codeName,value:e.codeId}})})),1)],1)]}}],null,!1,438387562)}),t("el-table-column",{attrs:{label:"操作","header-align":"right",width:"45px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{position:"relative",height:"100%"}},[t("el-button",{staticClass:"delete-btn",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteCur(a.$index,"parentVOList")}}},[e._v("删除")])],1)]}}],null,!1,1012652525)})],1),t("div",{staticClass:"addNew",on:{click:function(t){return e.addNew("parentVOList")}}},[e._v("添加+")])],1)]):e._e(),t("el-form-item",{attrs:{label:"开启映射",prop:"cascade"}},[t("el-radio-group",{model:{value:e.form.map,callback:function(t){e.$set(e.form,"map",t)},expression:"form.map"}},[t("el-radio",{attrs:{label:0}},[e._v("否")]),t("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),1==e.form.map?t("div",{key:"table1",staticClass:"table-content"},[t("div",{staticClass:"right"},[t("el-table",{staticClass:"params_table rule-table",staticStyle:{width:"100%"},attrs:{data:e.form.rejectVOList}},[t("el-table-column",{attrs:{label:"映射码表"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"rejectVOList."+a.$index+".codeTableId",rules:{required:!0,message:"不能为空",trigger:"change"}}},[t("el-select",{on:{change:function(t){return e.changeParent(t,"rejectVOList",a.$index,"add")}},model:{value:a.row.codeTableId,callback:function(t){e.$set(a.row,"codeTableId",t)},expression:"scope.row.codeTableId"}},e._l(e.ParentTableList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.codeTableName,value:e.codeTableId}})})),1)],1)]}}],null,!1,2764662849)}),t("el-table-column",{attrs:{"min-width":"100",label:"映射编码"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form-item",{attrs:{prop:"rejectVOList."+a.$index+".id",rules:{required:!0,message:"不能为空",trigger:"change"}}},[t("el-select",{model:{value:a.row.id,callback:function(t){e.$set(a.row,"id",t)},expression:"scope.row.id"}},e._l(e.form.rejectVOList[a.$index].codeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.codeName,value:e.codeId}})})),1)],1)]}}],null,!1,3930793898)}),t("el-table-column",{attrs:{label:"操作","header-align":"right",width:"45px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{position:"relative",height:"100%"}},[t("el-button",{staticClass:"delete-btn",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteCur(a.$index,"rejectVOList")}}},[e._v("删除")])],1)]}}],null,!1,952439774)})],1),t("div",{staticClass:"addNew",on:{click:function(t){return e.addNew("rejectVOList")}}},[e._v("添加+")])],1)]):e._e(),t("el-form-item",{key:"source",attrs:{label:"来源"}},[t("el-input",{attrs:{placeholder:"请输入来源，并以英文，数字开头，支持_、-、.等特殊字符，50字符以内"},model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.close}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("确定")])],1)])],1)}),[],!1,null,null,null).exports,p={name:"UpLoad",data:function(){return{fileList:[],isLoading:!1,file:""}},methods:{exceedFile:function(e,t){this.$message({message:"只能选择1个文件，若要替换，请先删除已选文件",type:"warning"})},handleRemove:function(e,t){this.fileList=t,this.file=""},downloadModal:function(){this.download()},download:(c=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.C)();case 2:t=e.sent,this.dealWithDownload(t.data,t.headers);case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),dealWithDownload:function(e,t){if(e){var a=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),o=window.URL.createObjectURL(a),r=document.createElement("a");r.download=t.filename,r.href=o,r.click()}},fileChange:function(e,t){var a=e.name.substring(e.name.lastIndexOf(".")+1);e.type,e.type;if("xlsx"!==a&&"xls"!==a)return this.$message.error("上传文件只能是 XLS/XLSX 格式！"),this.fileList=[],this.file="",!1;this.file=e.raw},beforeUpload:function(e){var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type,a="application/vnd.ms-excel"==e.type;return t||a||this.$message.error("上传文件只能是 XLS/XLSX 格式！"),t||a},uploadFile:function(e){if(this.file){var t=new FormData;t.append("tableId",JSON.parse(this.$route.query.id)),t.append("file",this.file),this.targetUpload({formData:t})}else this.$message.warning("请先选择 XLS/XLSX 格式文件！")},targetUpload:(s=Object(r.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formData,this.isLoading=!0,e.prev=2,e.next=5,Object(n.D)({formData:a});case 5:0===e.sent.data.code?(this.isLoading=!1,this.$emit("refresh"),this.$message.success("上传成功")):(this.isLoading=!1,this.$message.error("上传失败")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.isLoading=!1;case 12:return e.prev=12,this.$emit("closeBtnLoading"),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,9,12,15]])}))),function(e){return s.apply(this,arguments)})},components:{}};a("e53c");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}var b={components:{addCode:f,targetUpload:Object(u.a)(p,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"targetUpload"},[e._m(0),t("div",{staticClass:"operator"},[t("el-upload",{ref:"upload",staticClass:"upload-1",attrs:{action:"null","auto-upload":!1,accept:".xls,.xlsx",limit:1,"on-exceed":e.exceedFile,"on-remove":e.handleRemove,"on-change":e.fileChange,"file-list":e.fileList,"before-upload":e.beforeUpload}},[t("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("上传文件")])],1),t("el-button",{staticClass:"download-btn",on:{click:e.downloadModal}},[e._v("下载模板")])],1)])}),[function(){var e=this._self._c;return e("ul",{staticClass:"attention"},[e("li",[this._v("注意：")]),e("li",[this._v("1. 仅支持.xls .xlsx结尾的格式文件；")]),e("li",[this._v("2. 批量上传仅支持新增、修改（重复编码会进行覆盖）；")]),e("li",[this._v("3. 请按照模板表头中列出的必填限制填写；")]),e("li",[this._v("4. 单次批量上传需在1000条以内，文件大小不超过10MB。")])])}],!1,null,"20c9ca01",null).exports},data:function(){return{btnLoading:!1,ctr:{type:"add",dialogVisible:!1},tableHeight:window.innerHeight-300,createUserList:[],formInline:{codeName:"",createPer:""},tableList:[],page:{page:1,limit:10,pageSize:10,totalCount:0,id:""},isLoading:!1,isRemoveAble:!0,selectionList:[],target:{show:!1,type:"add"},updateDialog:!1,detailDialog:!1,detailContent:{}}},computed:{},watch:{},methods:{getCreateUserList:function(){var e=this;this.$API.post(this.$URL.codeCreateUserList,{codeTableId:JSON.parse(this.$route.query.id)},(function(t){0==t.code?e.createUserList=t.data:e.$message.error(t.msg)}))},getTableData:function(){var e=this,t=this.page,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({page:t.page,pageSize:t.limit,codeTableId:JSON.parse(this.$route.query.id)},this.formInline);this.isLoading=!0,this.$API.post(this.$URL.dataAssetCodeList,a,(function(t){e.isLoading=!1,0==t.code?(e.page.totalCount=t.data.total,e.tableList=[],t.data&&t.data.records&&t.data.records.length>0&&(e.tableList=t.data.records)):e.$message.error(t.msg)}))},sizeChangeHandle:function(e){this.page.page=1,this.page.limit=e,this.getTableData()},currentChangeHandle:function(e){this.page.page=e,this.getTableData()},uploadDone:function(){this.updateDialog=!1,this.search()},search:function(){this.page.page=1,this.getTableData()},reset:function(){this.formInline.codeName="",this.formInline.createPer="",this.search()},removeItem:function(e){this.codeDeleteList(e.id)},newCode:function(){this.ctr.type="add",this.ctr.dialogVisible=!0},edit:function(e){this.ctr.type="edit",this.ctr.id=e.id,this.ctr.dialogVisible=!0},detail:function(e){var t=this;this.$API.get(this.$URL.dataAssetCodeDetail,{id:e.id},(function(e){0==e.code?(t.detailContent=e.data,t.detailDialog=!0):t.$message.error(e.msg)}))},submitForm:function(){this.btnLoading=!0,this.$refs.upload.uploadFile()},batchDelete:function(){var e=this;this.$confirm("确认配置编码批量删除，你还要继续吗？","删除配置后数据无法找回",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[];e.selectionList.forEach((function(e){t.push(e.id)}));var a=t.join(",");e.$API.post(e.$URL.dataAssetCodeBatchDelete+a,{},(function(t){0==t.code?(e.$message.success("删除编码成功!"),e.page.page=1,e.getTableData()):e.$message.error(t.msg)}))})).catch((function(){return!1}))},selectionChaneg:function(e){this.selectionList=e,this.selectionList&&this.selectionList.length>0?this.isRemoveAble=!1:this.isRemoveAble=!0},codeDeleteList:function(e){var t=this;this.$confirm("是否确定删除这个编码?","删除编码",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$API.post(t.$URL.deleteDataAssetCode+e+"/"+t.$route.query.version,{},(function(e){0==e.code?(t.$message.success("删除编码成功!"),t.page.page=1,t.getTableData()):t.$message.error(e.msg)}))})).catch((function(){return!1}))}},created:function(){},mounted:function(){this.getTableData(),this.getCreateUserList()}},g=(a("a531"),Object(u.a)(b,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"codeTableSetting"},[t("div",{staticClass:"zt-head top-title"},[t("span",[e._v(e._s(e.$route.query.name)+"配置编码")]),t("el-button",{staticClass:"return",attrs:{type:"text"},on:{click:function(t){return e.$router.push("codeTableManage")}}},[e._v("返回码表管理")])],1),t("div",{staticClass:"content zt-bg-content"},[t("el-form",{attrs:{inline:!0,size:"small",model:e.formInline,"label-width":"70px"}},[t("div",{staticClass:"right fr",staticStyle:{"margin-right":"-10px"}},[t("el-form-item",{attrs:{label:""}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择创建人"},model:{value:e.formInline.createPer,callback:function(t){e.$set(e.formInline,"createPer",t)},expression:"formInline.createPer"}},e._l(e.createUserList,(function(e){return t("el-option",{key:e.createPer,attrs:{label:e.createPerName,value:e.createPer}})})),1)],1),t("el-form-item",{attrs:{label:""}},[t("el-input",{attrs:{placeholder:"请输入编码名称",clearable:""},model:{value:e.formInline.codeName,callback:function(t){e.$set(e.formInline,"codeName","string"==typeof t?t.trim():t)},expression:"formInline.codeName"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1),t("div",{staticClass:"left fl"},[t("el-form-item",[t("el-button",{attrs:{"data-v-btn":"",type:"primary",size:"mini"},on:{click:e.newCode}},[e._v("新建编码")])],1),t("el-form-item",[t("el-button",{attrs:{"data-v-btn":"",size:"mini"},on:{click:function(t){e.updateDialog=!0}}},[e._v("快速导入")])],1),t("el-form-item",[t("el-button",{attrs:{"data-v-btn":"",disabled:e.isRemoveAble,size:"mini"},on:{click:e.batchDelete}},[e._v("批量删除")])],1)],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableList,"max-height":e.tableHeight},on:{"selection-change":e.selectionChaneg}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"left",prop:"id",align:"left",label:"编码ID",width:"100"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"left",prop:"codeName",align:"left",label:"编码名称",width:"100"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"left",prop:"type",align:"left",label:"类别",width:"100"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"left",prop:"fieldTypeName",align:"left",label:"类型",width:"100"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"left",prop:"codeValue",align:"left",label:"码值",width:"100"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"left",prop:"source",align:"left",label:"来源",width:"100"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"createUserName","header-align":"left",align:"left",label:"创建人"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"updateUserName","header-align":"left",align:"left",label:"最新修改人"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"updateTime","header-align":"left",align:"left",width:"160",label:"最新修改时间"}}),t("el-table-column",{attrs:{fixed:"right",width:"150",align:"right","header-align":"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.edit(o)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.detail(o)}}},[e._v("详情")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.removeItem(o)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page.page,"page-sizes":[10,20,50,100],"page-size":e.page.pageSize,total:e.page.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1),t("add-code",{attrs:{ctr:e.ctr},on:{refresh:e.search}}),t("el-dialog",{attrs:{title:"批量上传",visible:e.updateDialog},on:{close:function(t){e.updateDialog=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:function(t){e.updateDialog=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("保存")])]},proxy:!0}])},[e.updateDialog?t("target-upload",{ref:"upload",on:{closeBtnLoading:function(t){e.btnLoading=!1},refresh:e.uploadDone}}):e._e()],1),t("el-dialog",{attrs:{title:"详情",visible:e.detailDialog},on:{close:function(t){e.detailDialog=!1}}},[t("div",[e._v("上级码表明细：")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detailContent.parentVOList}},[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"codeTableName","header-align":"left",align:"left",label:"码表名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"codeName","header-align":"left",align:"left",label:"码表编码"}})],1),t("div",[e._v("映射码表明细：")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detailContent.rejectVOList}},[t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"codeTableName","header-align":"left",align:"left",label:"码表名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"codeName","header-align":"left",align:"left",label:"码表编码"}})],1)],1)],1)}),[],!1,null,"a85667e8",null));t.default=g.exports},a531:function(e,t,a){"use strict";a("06b0")},a6e7:function(e,t,a){"use strict";a("e7e0")},a8b8:function(e,t,a){"use strict";a.d(t,"C",(function(){return n})),a.d(t,"D",(function(){return i})),a.d(t,"y",(function(){return l})),a.d(t,"z",(function(){return s})),a.d(t,"w",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"x",(function(){return u})),a.d(t,"v",(function(){return f})),a.d(t,"u",(function(){return p})),a.d(t,"d",(function(){return m})),a.d(t,"e",(function(){return b})),a.d(t,"B",(function(){return g})),a.d(t,"n",(function(){return h})),a.d(t,"f",(function(){return v})),a.d(t,"p",(function(){return y})),a.d(t,"o",(function(){return w})),a.d(t,"m",(function(){return x})),a.d(t,"r",(function(){return L})),a.d(t,"s",(function(){return T})),a.d(t,"b",(function(){return C})),a.d(t,"k",(function(){return $})),a.d(t,"j",(function(){return O})),a.d(t,"l",(function(){return k})),a.d(t,"i",(function(){return _})),a.d(t,"t",(function(){return I})),a.d(t,"q",(function(){return S})),a.d(t,"g",(function(){return V})),a.d(t,"h",(function(){return j})),a.d(t,"A",(function(){return D})),a.d(t,"c",(function(){return N}));var o=a("2b0e"),r=a("fedb"),n=function(){return o.default.http.get(r.a.dataAssetCodeDownload,{responseType:"arraybuffer"})},i=function(e){var t=e.formData;return o.default.http.post(r.a.dataAssetCodeUpload,t,{"Content-Type":"multipart/form-data"})},l=function(){return o.default.http.get(r.a.getCodeTableSearchCreater)},s=function(e){return o.default.http.post(r.a.getCodeTableSearchList,e)},c=function(){return o.default.http.get(r.a.getCodeTableDataTypeList)},d=function(e){return o.default.http.post(r.a.addOrUpdCodeTable,e)},u=function(e){return o.default.http.get(r.a.getCodeTableInformation,{params:{id:e}})},f=function(e){return o.default.http.get(r.a.deleteCodeTableNew,{params:{id:e}})},p=function(e){return o.default.http.get(r.a.deleteCodeTableByIdNew,{params:{id:e}})},m=function(e){return o.default.http.post(r.a.dataCodeTableGetDataSource,e)},b=function(e){return o.default.http.post(r.a.dataCodeTableGetDbBase,e)},g=function(){return o.default.http.get(r.a.getRoleSelectNew)},h=function(){return o.default.http.get(r.a.dataCodeTableQueueCanSelect)},v=function(e){return o.default.http.post(r.a.dataCodeTableGetDbTables,e)},y=function(e){return o.default.http.post(r.a.dataCodeTableReverseConfig,e)},w=function(e){return o.default.http.post(r.a.dataCodeTableRelease,e)},x=function(e){return o.default.http.post(r.a.dataCodeTableOffline,e)},L=function(e){return o.default.http.get(r.a.dataCodeTableTemplate+"?tableId="+e,{responseType:"arraybuffer"})},T=function(e){return o.default.http.post(r.a.dataCodeTableUpload,e,{"Content-Type":"multipart/form-data"})},C=function(e){return o.default.http.get(r.a.dataCodeTableDetailApplyList+"?id=".concat(e.id,"&applyType=").concat(e.applyType,"&version=").concat(e.version))},$=function(e){return o.default.http.post(r.a.dataCodeTableNewVersionSynSearch,e)},O=function(e){return o.default.http.get(r.a.dataCodeTableNewVersionSynRunPer+"?codeTableId=".concat(e))},k=function(e){return o.default.http.get(r.a.dataCodeTableNewVersionSynVersion+"?codeTableId=".concat(e))},_=function(e){return o.default.http.get(r.a.dataCodeTableNewVersionSynRun+"?id=".concat(e))},I=function(e){return o.default.http.get(r.a.dataCodeTableVersionCanSelect+"?codeTableId=".concat(e))},S=function(e){return o.default.http.post(r.a.dataCodeTableReverseHistoryList,e)},V=function(e){return o.default.http.get(r.a.dataCodeTableGetReverseCreatePer,e)},j=function(e){return o.default.http.post(r.a.dataCodeTableGetReverseReverse,e)},D=function(){return o.default.http.post(r.a.getListDbShare,{dateType:1})},N=function(e){return o.default.http.get(r.a.dataCodeTableDetailApplyListVersion+"?id=".concat(e.id,"&applyType=").concat(e.applyType,"&type=").concat(e.type))}},df87:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".primary-color[data-v-20c9ca01]{color:#1740dc}.success-color[data-v-20c9ca01]{color:#52c41a}.warning-color[data-v-20c9ca01]{color:#faad14}.error-color[data-v-20c9ca01]{color:#f5222d}.info-color[data-v-20c9ca01]{color:#909399}.border-color[data-v-20c9ca01]{border:1px solid #e5e6e9}.targetUpload[data-v-20c9ca01]{padding:20px;padding-top:0}.targetUpload .download-btn[data-v-20c9ca01]{height:32px;position:absolute;left:130px}.targetUpload .attention[data-v-20c9ca01]{margin-bottom:20px;margin-top:20px}.targetUpload .attention li[data-v-20c9ca01]{line-height:30px;font-size:12px}.targetUpload .attention li[data-v-20c9ca01]:first-child{color:red}.targetUpload .modal-1[data-v-20c9ca01]{padding-bottom:10px}.targetUpload[data-v-20c9ca01] .red{color:red;font-size:16px}.targetUpload .operator[data-v-20c9ca01]{margin-top:20px;display:-webkit-box;display:-ms-flexbox;display:flex}.targetUpload .operator .upload-1[data-v-20c9ca01]{margin-right:15px}",""])},e53c:function(e,t,a){"use strict";a("0d3a")},e7e0:function(e,t,a){var o=a("5134");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("636c16dd",o,!0,{sourceMap:!1,shadowMode:!1})}}]);